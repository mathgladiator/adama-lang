/*
* Adama Platform and Language
* Copyright (C) 2021 - 2024 by Adama Platform Engineering, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgaWYgKHR5cGVvZihzdCkgIT0gIm9iamVjdCIp");
    sb.append("IHsKICAgICAgcmV0dXJuIHN0OwogICAgfQogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0YSB0");
    sb.append("byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0");
    sb.append("aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXki");
    sb.append("KSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAoKCIj");
    sb.append("IiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYgPSBz");
    sb.append("dFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7IC8v");
    sb.append("IGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFyIG8g");
    sb.append("PSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBjb3B5");
    sb.append("IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwogICAg");
    sb.append("ICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEodmop");
    sb.append("OyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAgIG8u");
    sb.append("cHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsiQG8i");
    sb.append("XSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMgd2Ug");
    sb.append("cmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAgICAg");
    sb.append("ICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAgICAg");
    sb.append("ZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAgIH0g");
    sb.append("ZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0LCBz");
    sb.append("byByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAgICAg");
    sb.append("IHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKyspIHsK");
    sb.append("ICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAgfSBl");
    sb.append("bHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRlbHRh");
    sb.append("W2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtlRGVs");
    sb.append("dGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3QsIHN1");
    sb.append("YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5sZW5n");
    sb.append("dGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0gImZ1");
    sb.append("bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBmdW5j");
    sb.append("dGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGluIHMp");
    sb.append("IHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB2");
    sb.append("YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4g");
    sb.append("c3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIj");
    sb.append("IiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAg");
    sb.append("ICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBrXTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAgfTsK");
    sb.append("CiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVuIHN0");
    sb.append("cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewog");
    sb.append("ICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNrLCBz");
    sb.append("dWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAgdmFy");
    sb.append("IFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAgYWxs");
    sb.append("X3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBpZiAo");
    sb.append("dGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1YiA9");
    sb.append("IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxheS5w");
    sb.append("dXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0cnVl");
    sb.append("OwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAgIHZh");
    sb.append("ciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVlKTsg");
    sb.append("Ly8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8gZmly");
    sb.append("ZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVudHMo");
    sb.append("ZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsKICAg");
    sb.append("ICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5zdWJz");
    sb.append("Y3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9CiAg");
    sb.append("fTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBpZCA9");
    sb.append("IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICBzZWxmLnNlbmQgPSBmdW5jdGlvbihuYW1lLCBj");
    sb.append("aGFubmVsLCBtc2cpIHsKICAgIGNvbnNvbGUubG9nKCJbIiArIG5hbWUgKyAiXSBzZW5kOiAiICsgY2hh");
    sb.append("bm5lbCArICIgIiArIEpTT04uc3RyaW5naWZ5KG1zZykpOwogIH07CgogIC8qKiBIZWxwZXIgfCBjcmVh");
    sb.append("dGUgYSBzaW1wbGUgZWxlbWVudCB3aXRoIHRoZSBnaXZlbiBjb250ZW50IGFzIHRoZSBpbm5lckhUTUwg");
    sb.append("Ki8KICB2YXIgc2ltcGxlID0gZnVuY3Rpb24odGFnLCBjb250ZW50KSB7CiAgICB2YXIgZCA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQodGFnKTsKICAgIGQuaW5uZXJIVE1MID0gY29udGVudDsKICAgIHJldHVy");
    sb.append("biBkOwogIH0KCiAgdmFyIGJ1dHRvblN0eWxlID0gImJhY2tncm91bmQ6IzMzMzsgYm9yZGVyOiAxcHgg");
    sb.append("c29saWQgI2YwMDsgY29sb3I6I2ZmZjsgcGFkZGluZzozcHg7IG1hcmdpbjozcHg7IGJvcmRlci1yYWRp");
    sb.append("dXM6IDNweDsiOwogIHZhciBpbnB1dFN0eWxlID0gImJhY2tncm91bmQ6I2VlZTsgY29sb3I6IzAwMDsi");
    sb.append("OwogIHZhciBwbHVzU1ZHID0gIjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wi");
    sb.append("IGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0");
    sb.append("cm9rZT1cIiM3N2Q2NTZcIiBzdHlsZT1cIndpZHRoOjE4cHg7IGhlaWdodDoxOHB4O1wiPjxwYXRoIHN0");
    sb.append("cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNMTIgOXY2");
    sb.append("bTMtM0g5bTEyIDBhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwogIHZhciBt");
    sb.append("aW51c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwi");
    sb.append("bm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIj");
    sb.append("ZjAwXCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTE1IDEySDltMTIgMGE5IDkg");
    sb.append("MCAxMS0xOCAwIDkgOSAwIDAxMTggMHpcIiAvPjwvc3ZnPiI7CgogIC8vIHdlIGFyZSBnb2luZyB0byBj");
    sb.append("cmVhdGUgYSBkb2N1bWVudAogIHZhciB2aWV3SnNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRp");
    sb.append("diIpOwogIHZhciB2aWV3Q2hhbm5lbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2");
    sb.append("YXIgdmlld0lkZW50aXRpZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCiAgeyAvLyBj");
    sb.append("b25zdHJ1Y3QgdGhlIGlkZW50aXRpZXMKICAgIHZhciBzdGFzaGVkUmF3ID0gd2luZG93LmxvY2FsU3Rv");
    sb.append("cmFnZS5nZXRJdGVtKCJzdGFzaGVkX2lkZW50aXRpZXMiKTsKICAgIHZhciBzdGFzaGVkID0gdHlwZW9m");
    sb.append("KHN0YXNoZWRSYXcpID09ICJzdHJpbmciID8gSlNPTi5wYXJzZShzdGFzaGVkUmF3KSA6IFtdOwogICAg");
    sb.append("aWYgKHN0YXNoZWQubGVuZ3RoID09IDApIHsKICAgICAgdmFyIG5vcGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJkaXYiKTsKICAgICAgbm9wZS5pbm5lckhUTUwgPSAiTm8gaWRlbnRpdGllcyI7CiAgICAg");
    sb.append("IHZpZXdJZGVudGl0aWVzLmFwcGVuZENoaWxkKG5vcGUpOwogICAgfSBlbHNlIHsKICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBzdGFzaGVkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIHJlY2FsbCA9IGRv");
    sb.append("Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICAgIHJlY2FsbC5pbm5lckhUTUwgPSAi");
    sb.append("UmVjYWxsOiIgKyBzdGFzaGVkW2tdLm5hbWU7CiAgICAgICAgcmVjYWxsLm9uY2xpY2sgPSBmdW5jdGlv");
    sb.append("bigpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfZGVmYXVs");
    sb.append("dCIsIHRoaXMuaWRlbnRpdHkpOwogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJs");
    sb.append("YXN0X2lkZW50aXR5X3VzZWQiLCAiMCIpOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgp");
    sb.append("OwogICAgICAgIH0uYmluZChzdGFzaGVkW2tdKTsKICAgICAgICByZWNhbGwuc3R5bGUgPSAicGFkZGlu");
    sb.append("ZzogNHB4OyBib3JkZXI6I2NjYyAxcHggc29saWQ7IG1hcmdpbjo0cHg7IjsKICAgICAgICB2aWV3SWRl");
    sb.append("bnRpdGllcy5hcHBlbmRDaGlsZChyZWNhbGwpOwogICAgICB9CiAgICB9CiAgICB7IC8vIGJyZWFrCiAg");
    sb.append("ICAgIHZpZXdJZGVudGl0aWVzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImhyIikp");
    sb.append("OwogICAgICB2aWV3SWRlbnRpdGllcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgi");
    sb.append("U3Rhc2ggQ3VycmVudCBJZGVudGl0eTsgbmFtZSA9ICIpKTsKICAgICAgdmlld0lkZW50aXRpZXMuYXBw");
    sb.append("ZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKSk7CiAgICAgIHZhciBuYW1lID0gZG9j");
    sb.append("dW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgbmFtZS5zdHlsZSA9ICJjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjojMzMzIjsKICAgICAgdmlld0lkZW50aXRpZXMuYXBwZW5kQ2hpbGQo");
    sb.append("bmFtZSk7CiAgICAgIHZpZXdJZGVudGl0aWVzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoImJyIikpOwogICAgICB2YXIgY29tbWl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9u");
    sb.append("Iik7CiAgICAgIGNvbW1pdC5zdHlsZSA9ICJwYWRkaW5nOiA0cHg7IGJvcmRlcjojY2NjIDFweCBzb2xp");
    sb.append("ZDsgbWFyZ2luOjRweDsiOwogICAgICBjb21taXQuaW5uZXJIVE1MID0gIlN0YXNoIEl0IjsKICAgICAg");
    sb.append("dmlld0lkZW50aXRpZXMuYXBwZW5kQ2hpbGQoY29tbWl0KTsKICAgICAgY29tbWl0Lm9uY2xpY2sgPSBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICB2YXIgbmFtZVRvVXNlID0gbmFtZS52YWx1ZTsKICAgICAgICBpZiAo");
    sb.append("bmFtZVRvVXNlLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHZhciBpZGVudGl0eSA9IHdpbmRvdy5sb2Nh");
    sb.append("bFN0b3JhZ2UuZ2V0SXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIpOwogICAgICAgICAgaWYgKHR5cGVvZihp");
    sb.append("ZGVudGl0eSkgPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgbmFtZS52YWx1ZSA9ICIiOwogICAgICAg");
    sb.append("ICAgICBzdGFzaGVkLnB1c2goe25hbWU6bmFtZVRvVXNlLCBpZGVudGl0eTppZGVudGl0eX0pOwogICAg");
    sb.append("ICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oInN0YXNoZWRfaWRlbnRpdGllcyIsIEpT");
    sb.append("T04uc3RyaW5naWZ5KHN0YXNoZWQpKTsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgp");
    sb.append("OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgdmFyIGJhc2VTdHlsZSA9");
    sb.append("ICJmb250LWZhbWlseTogXCJKZXRCcmFpbnMgTW9ub1wiLCBzb3VyY2UtY29kZS1wcm8sIE1lbmxvLCBN");
    sb.append("b25hY28sIENvbnNvbGFzLCBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMTRweDsgY29sb3I6ICNmZmY7IGJh");
    sb.append("Y2tncm91bmQtY29sb3I6ICMwMDA7IHdpZHRoOjEwMCU7IjsKICB2aWV3SnNvbi5zdHlsZSA9IGJhc2VT");
    sb.append("dHlsZTsKICB2aWV3Q2hhbm5lbHMuc3R5bGUgPSBiYXNlU3R5bGU7CiAgdmlld0lkZW50aXRpZXMuc3R5");
    sb.append("bGUgPSBiYXNlU3R5bGU7CgogIC8qKiBSZWZsZWN0aW9uIHwgZ2l2ZW4gYSByZWZsZWN0ZWQgdHlwZSwg");
    sb.append("ZXh0cmFjdCB0aGUgc3RydWN0dXJlIHR5cGUgKiovCiAgdmFyIGV4dHJhY3RTdHJ1Y3R1cmVUeXBlID0g");
    sb.append("ZnVuY3Rpb24odHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVm");
    sb.append("IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgcmV0dXJuIGV4dHJhY3RTdHJ1");
    sb.append("Y3R1cmVUeXBlKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYgKHR5cGUubmF0dXJl");
    sb.append("ID09ICJyZWFjdGl2ZV9yZWNvcmQiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWVzc2FnZSIpIHsK");
    sb.append("ICAgICAgcmV0dXJuIHR5cGU7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKiBUcmVlVmll");
    sb.append("dyB8IEdpdmVuIGEgdHlwZSAoYW5kIGEgdHlwZSBmb3Jlc3QpIGNyZWF0ZSBhICduYW1lZCcgZG9tIGVs");
    sb.append("ZW1lbnQKICAgKiAgYWxvbmcgd2l0aCBhbiB1cGRhdGUgZGVsdGEuIFRoZSB1cGRhdGUgZGVsdGEgaXMg");
    sb.append("YSBmdW5jdGlvbmFsIChvciBzdHJ1Y3R1cmFsIGZ1bmN0aW9uYWwpCiAgICogIGNsb3N1cmUgdGhhdCB3");
    sb.append("aWxsIHVwZGF0ZSB0aGUgZG9tIGVsZW1lbnQgc3VjaCB0aGF0IGl0IGNhbiBiZSBhdHRhY2hlZCB0byBh");
    sb.append("biBBZGFtYSBUcmVlICovCiAgdmFyIGNvbnZlcnRUeXBlVG9Eb21EZWx0YSA9IGZ1bmN0aW9uKHR5cGUs");
    sb.append("IHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1");
    sb.append("cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAgIC8vIGdvIHRvIHRoZSBmb3Jlc3QgYW5kIHR1cm4gdGhl");
    sb.append("IHJlZiBpbnRvIGEgbWFuaWZlc3RlZCB0eXBlCiAgICAgIHJldHVybiBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEodHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tYXliZSIgfHwgdHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX21heWJlIikgewogICAgICAvLyBh");
    sb.append("IG1heWJlIGlzIGp1c3QgYSB3cmFwcGVyIGFyb3VuZCBhbm90aGVyIHR5cGUgdGhhdCBjYW4gbnVsbCBv");
    sb.append("dXQKICAgICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgdmFy");
    sb.append("IHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YSh0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgcmV0");
    sb.append("dXJuIHsKICAgICAgICBkb206IGRvbSwKICAgICAgICBuYW1lOiAibWF5YmUmbHQ7IiArIHJlc3VsdC5u");
    sb.append("YW1lICsgIiZndDsiLAogICAgICAgIHVwZGF0ZTogW3Jlc3VsdC51cGRhdGUsIGZ1bmN0aW9uKHZhbHVl");
    sb.append("KSB7CiAgICAgICAgICBudWtlKGRvbSk7CiAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAg");
    sb.append("ICAgICAgICBkb20uaW5uZXJIVE1MID0gIjxpPm51bGw8L2k+IjsKICAgICAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgICAgIGRvbS5hcHBlbmQocmVzdWx0LmRvbSk7CiAgICAgICAgICB9CiAgICAgICAgfV0KICAg");
    sb.append("ICAgfTsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2xpc3QiIHx8IHR5cGUubmF0");
    sb.append("dXJlID09ICJuYXRpdmVfYXJyYXkiKSB7CiAgICAgIC8vIHRoaXMgaXMgdGhlIG1vc3QgY29tcGxleCB0");
    sb.append("eXBlIGFzIGl0IHJlcXVpcmVzIGEgZGlmZmVyZW50aWFsIHN0cnVjdHVyZS4KCiAgICAgIC8vIHdlIGNy");
    sb.append("ZWF0ZSBhIGR1bW15IHRvIGdldCB0aGUgbmFtZSBvZiB0aGUgdHlwZQogICAgICB2YXIgZHVtbXkgPSBj");
    sb.append("b252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBlLCB0eXBlcyk7CgogICAgICAvLyBzbywgd2UgaGF2");
    sb.append("ZSB0d28gY29uc2lkZXJhdGlvbnMuIEZpcnN0LCBpcyB0aGlzIGEgbGlzdCBvZiBzdHJ1Y3R1cmVzIE9S");
    sb.append("IGEgbGlzdCBvZiB2YWx1ZXMuCiAgICAgIHZhciByZWNvcmRUeXBlID0gZXh0cmFjdFN0cnVjdHVyZVR5");
    sb.append("cGUodHlwZS50eXBlLCB0eXBlcyk7CiAgICAgIGlmIChyZWNvcmRUeXBlICE9IG51bGwpIHsKICAgICAg");
    sb.append("ICAvLyBpdCBpcyBhIGxpc3Qgb2Ygc3RydWN0dXJlcywgc28gd2Ugd2FudCB0byBjcmVhdGUgYSBuaWNl");
    sb.append("IGxvb2tpbmcgdGFibGUgd2l0aCBwYWdpbmF0aW9uIQogICAgICAgIHZhciB0YWJsZUNvbnRyb2xzID0g");
    sb.append("ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgIHZhciBzaG93aGlkZSA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICAgIHRhYmxlQ29udHJvbHMuYXBwZW5kKHNo");
    sb.append("b3doaWRlKTsKCiAgICAgICAgdmFyIHRhYmxlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgi");
    sb.append("dGFibGUiKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZCh0YWJsZUhvbGRlcik7CiAgICAgICAg");
    sb.append("dmFyIHRhYmxlSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGhlYWQiKTsKICAgICAgICB0");
    sb.append("YWJsZUhvbGRlci5hcHBlbmQodGFibGVIZWFkZXIpOwogICAgICAgIHZhciBoZWFkZXJSb3cgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpOwogICAgICAgIHRhYmxlSG9sZGVyLmFwcGVuZChoZWFkZXJS");
    sb.append("b3cpOwogICAgICAgIHZhciBjb2xvclN0eWxlID0gImJvcmRlcjogMXB4IHNvbGlkICMzYjU0ZGE7IjsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gcmVjb3JkVHlwZS5maWVsZHMpIHsKICAgICAgICAg");
    sb.append("IHZhciBmaWVsZCA9IHJlY29yZFR5cGUuZmllbGRzW2ZpZWxkTmFtZV07CiAgICAgICAgICBpZiAoInBy");
    sb.append("aXZhdGUiID09IGZpZWxkLnByaXZhY3kpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRhKGZpZWxkLnR5cGUsIHR5");
    sb.append("cGVzKTsKICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7CiAgICAg");
    sb.append("ICAgICB0ZC5pbm5lckhUTUwgPSByZXN1bHQubmFtZSArICIgIiArIGZpZWxkTmFtZTsKICAgICAgICAg");
    sb.append("IGhlYWRlclJvdy5hcHBlbmQodGQpOwogICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBh");
    sb.append("ZGRpbmctbGVmdDogMC41ZW07IHBhZGRpbmctcmlnaHQ6IDAuNWVtOyIKICAgICAgICB9CiAgICAgICAg");
    sb.append("dGFibGVIb2xkZXIuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAuNWVtOyBtYXJnaW46MC41");
    sb.append("ZW07IGRpc3BsYXk6bm9uZSIKICAgICAgICBoZWFkZXJSb3cuc3R5bGUgPSBjb2xvclN0eWxlOwogICAg");
    sb.append("ICAgIHZhciB0YWJsZUJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpOwogICAgICAg");
    sb.append("IHRhYmxlSG9sZGVyLmFwcGVuZCh0YWJsZUJvZHkpOwogICAgICAgIHZhciByb3dzQnlLZXkgPSB7fTsK");
    sb.append("ICAgICAgICB2YXIgcGFnaW5nID0gewogICAgICAgICAgc2hvd246ZmFsc2UsCiAgICAgICAgICBvcmRl");
    sb.append("cjpbXSwKICAgICAgICAgIHBhZ2U6IDAsCiAgICAgICAgICBwYWdlX2xpbWl0OiAxMCwKICAgICAgICB9");
    sb.append("OwogICAgICAgIHZhciBjb250cm9sbGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwog");
    sb.append("ICAgICAgIHRhYmxlQ29udHJvbHMuYXBwZW5kKGNvbnRyb2xsZXIpOwogICAgICAgIHBhZ2luZy5yZWZv");
    sb.append("cm0gPWZ1bmN0aW9uKCkgewogICAgICAgICAgbnVrZSh0YWJsZUJvZHkpOwogICAgICAgICAgdmFyIHN0");
    sb.append("YXJ0ID0gTWF0aC5taW4odGhpcy5wYWdlICogdGhpcy5wYWdlX2xpbWl0LCB0aGlzLm9yZGVyLmxlbmd0");
    sb.append("aCAtIHRoaXMucGFnZV9saW1pdCk7CiAgICAgICAgICBmb3IgKHZhciBhdCA9IHN0YXJ0OyBhdCA8IHN0");
    sb.append("YXJ0ICsgcGFnaW5nLnBhZ2VfbGltaXQ7IGF0KyspIHsKICAgICAgICAgICAgdmFyIHJvdyA9IHJvd3NC");
    sb.append("eUtleVtwYWdpbmcub3JkZXJbYXRdXTsKICAgICAgICAgICAgaWYgKHJvdykgewogICAgICAgICAgICAg");
    sb.append("IHRhYmxlQm9keS5hcHBlbmQocm93KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAg");
    sb.append("bnVrZShjb250cm9sbGVyKTsKICAgICAgICAgIGlmICh0aGlzLnNob3duKSB7CiAgICAgICAgICAgIHZh");
    sb.append("ciBwYWdlcyA9IHRoaXMub3JkZXIubGVuZ3RoIC8gdGhpcy5wYWdlX2xpbWl0OwogICAgICAgICAgICBp");
    sb.append("ZiAocGFnZXMgPiAxKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBwYWdlczsgaysr");
    sb.append("KSB7CiAgICAgICAgICAgICAgICB2YXIgZ290b1BhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJi");
    sb.append("dXR0b24iKTsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAg");
    sb.append("ICAgICAgICAgICBnb3RvUGFnZS5pbm5lckhUTUwgPSAiW1BHOiIgKyBrICsgIl0iOwogICAgICAgICAg");
    sb.append("ICAgICAgZ290b1BhZ2Uub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdGhp");
    sb.append("cy5wYWdpbmcucGFnZSA9IHRoaXMucGc7CiAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnJlZm9y");
    sb.append("bSgpOwogICAgICAgICAgICAgICAgfS5iaW5kKHtwYWdpbmc6IHRoaXMsIHBnOiBrfSk7CiAgICAgICAg");
    sb.append("ICAgICAgICBjb250cm9sbGVyLmFwcGVuZChnb3RvUGFnZSk7CiAgICAgICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBzaG93aGlkZS5pbm5lckhUTUwgPSB0aGlzLnNob3du");
    sb.append("ID8gbWludXNTVkcgOiBwbHVzU1ZHOwogICAgICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgICAgICB0aGlzLnNob3duID0gIXRoaXMuc2hvd247CiAgICAgICAgICAgIGlmICh0");
    sb.append("aGlzLnNob3duKSB7CiAgICAgICAgICAgICAgdGFibGVIb2xkZXIuc3R5bGUuZGlzcGxheSA9ICIiOwog");
    sb.append("ICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlLmRpc3BsYXkg");
    sb.append("PSAibm9uZSI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5yZWZvcm0oKTsKICAgICAgICAg");
    sb.append("IH0uYmluZCh0aGlzKTsKICAgICAgICB9LmJpbmQocGFnaW5nKTsKCgogICAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgICBkb206IHRhYmxlQ29udHJvbHMsCiAgICAgICAgICBuYW1lOiAibGlzdCZsdDsiICsgZHVt");
    sb.append("bXkubmFtZSArICImZ3Q7IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0");
    sb.append("aW9uIChrZXkpIHsKICAgICAgICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgi");
    sb.append("dHIiKTsKICAgICAgICAgICAgICByb3dzQnlLZXlba2V5XSA9IHJvdzsKICAgICAgICAgICAgICB2YXIg");
    sb.append("ZGVsdGEgPSB7fTsKICAgICAgICAgICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gcmVjb3JkVHlwZS5m");
    sb.append("aWVsZHMpIHsKICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IHJlY29yZFR5cGUuZmllbGRzW2ZpZWxk");
    sb.append("TmFtZV07CiAgICAgICAgICAgICAgICBpZiAoInByaXZhdGUiID09IGZpZWxkLnByaXZhY3kpIHsKICAg");
    sb.append("ICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2");
    sb.append("YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRhKGZpZWxkLnR5cGUsIHR5cGVzKTsKICAgICAg");
    sb.append("ICAgICAgICAgIHZhciB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7CiAgICAgICAgICAg");
    sb.append("ICAgICB0ZC5zdHlsZSA9IGNvbG9yU3R5bGUgKyAicGFkZGluZzogMC4yNWVtOyB0ZXh0LWFsaWduOnRv");
    sb.append("cCI7CiAgICAgICAgICAgICAgICB0ZC5hcHBlbmQocmVzdWx0LmRvbSk7CiAgICAgICAgICAgICAgICBy");
    sb.append("b3cuYXBwZW5kKHRkKTsKICAgICAgICAgICAgICAgIGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBk");
    sb.append("YXRlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gZGVsdGE7CiAgICAgICAgICAg");
    sb.append("IH0sCiAgICAgICAgICAgICctJzogZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgIHZhciBkb20g");
    sb.append("PSByb3dzQnlLZXlba2V5XTsKICAgICAgICAgICAgICB0YWJsZUJvZHkucmVtb3ZlKGRvbSk7CiAgICAg");
    sb.append("ICAgICAgICAgZGVsZXRlIHJvd3NCeUtleVtrZXldOwogICAgICAgICAgICB9LAogICAgICAgICAgICAn");
    sb.append("fic6IGZ1bmN0aW9uIChvcmRlcikgewogICAgICAgICAgICAgIGlmIChvcmRlciAhPSBudWxsKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICBwYWdpbmcub3JkZXIgPSBvcmRlcjsKICAgICAgICAgICAgICAgIHBhZ2luZy5y");
    sb.append("ZWZvcm0oKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9");
    sb.append("CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbm90IGEgcmVjb3JkLCBzbyB3ZSB1c2UgYSBzaW1wbGUg");
    sb.append("bGlzdAogICAgICAgIHZhciBsaXN0SG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7");
    sb.append("CiAgICAgICAgdmFyIGRvbUJ5S2V5ID0ge307CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRvbTog");
    sb.append("bGlzdEhvbGRlciwKICAgICAgICAgIG5hbWU6ICJsaXN0PCIgKyBkdW1teS5uYW1lICsgIj4iLAogICAg");
    sb.append("ICAgICAgdXBkYXRlOiB7CiAgICAgICAgICAgICcrJzogZnVuY3Rpb24gKGtleSkgewogICAgICAgICAg");
    sb.append("ICAgIHZhciBpdGVtSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAg");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBlLCB0eXBlcyk7");
    sb.append("CiAgICAgICAgICAgICAgaXRlbUhvbGRlci5hcHBlbmQocmVzdWx0LmRvbSk7CiAgICAgICAgICAgICAg");
    sb.append("aXRlbUhvbGRlci5hcHBlbmQoc2ltcGxlKCJzcGFuIiwgIiwgIikpOwogICAgICAgICAgICAgIGRvbUJ5");
    sb.append("S2V5W2tleV0gPSBpdGVtSG9sZGVyOwogICAgICAgICAgICAgIHJldHVybiByZXN1bHQudXBkYXRlOwog");
    sb.append("ICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAg");
    sb.append("ICB2YXIgZG9tID0gZG9tQnlLZXlba2V5XTsKICAgICAgICAgICAgICBsaXN0SG9sZGVyLnJlbW92ZShk");
    sb.append("b20pOwogICAgICAgICAgICAgIGRlbGV0ZSBkb21CeUtleVtrZXldOwogICAgICAgICAgICB9LAogICAg");
    sb.append("ICAgICAgICAnfic6IGZ1bmN0aW9uIChvcmRlcikgewogICAgICAgICAgICB9CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgfTsKICAgICAgfQogICAgfQogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV92YWx1");
    sb.append("ZSIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV92YWx1ZSIpIHsKICAgICAgLy8gaXQncyBqdXN0IGRh");
    sb.append("dGEsIHNvIGNyZWF0ZSBhIHNpbmdsZSBub2RlIHRvIGRyYXcgaXQKICAgICAgdmFyIGl0ZW0gPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICAgIGl0ZW0uaW5uZXJIVE1MID0gIm51bGwiOwog");
    sb.append("ICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjNzdhNWZmOyI7CiAgICAgIHZhciB1cGRhdGUgPSBmdW5j");
    sb.append("dGlvbih2YWx1ZSkgeyBpdGVtLmlubmVySFRNTCA9IHZhbHVlOyB9OwogICAgICBpZiAodHlwZS50eXBl");
    sb.append("ID09ICJzdHJpbmciKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3ZDY1NiI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSAiXCIiICsgdmFsdWUg");
    sb.append("KyAiXCIiOyB9OwogICAgICB9IGVsc2UgaWYgKHR5cGUudHlwZSA9PSAicHJpbmNpcGFsIikgewogICAg");
    sb.append("ICAgIGl0ZW0uc3R5bGUgPSAiY29sb3I6ICNCQTgzRkY7IjsKICAgICAgICB1cGRhdGUgPSBmdW5jdGlv");
    sb.append("bih2YWx1ZSkgeyBpdGVtLmlubmVySFRNTCA9IHZhbHVlICE9IG51bGwgPyAodmFsdWUuYWdlbnQgKyAi");
    sb.append("QCIgKyB2YWx1ZS5hdXRob3JpdHkpIDogIm51bGwiOyB9OwogICAgICB9IGVsc2UgaWYgKHR5cGUudHlw");
    sb.append("ZSA9PSAiYm9vbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjRTgzQjNCOyI7CiAgICAg");
    sb.append("IH0KICAgICAgcmV0dXJuIHsKICAgICAgICBkb206aXRlbSwKICAgICAgICBuYW1lOiB0eXBlLnR5cGUs");
    sb.append("CiAgICAgICAgdXBkYXRlOiB1cGRhdGUKICAgICAgfTsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9");
    sb.append("PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MgYSBzdHJ1Y3R1cmUsIHNvIGxldCdzIGNyZWF0ZSBhIHJlY29yZCB0aGF0IGNhbiBz");
    sb.append("aG93L2hpZGUKICAgICAgdmFyIG9ial9ob2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFu");
    sb.append("Iik7CiAgICAgIHZhciBzaG93aGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwog");
    sb.append("ICAgICBvYmpfaG9sZGVyLmFwcGVuZChzaG93aGlkZSk7CiAgICAgIG9ial9ob2xkZXIuc2hvd0dyb3Vw");
    sb.append("ID0gdHlwZS5uYW1lICE9ICJSb290IjsKCiAgICAgIHZhciBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVs");
    sb.append("ZW1lbnQoImRpdiIpOwogICAgICBvYmpfaG9sZGVyLmFwcGVuZChncm91cCk7CiAgICAgIGdyb3VwLmFw");
    sb.append("cGVuZChzaW1wbGUoImRpdiIsICJ7IikpOwogICAgICB2YXIgY2hpbGRyZW4gPSBkb2N1bWVudC5jcmVh");
    sb.append("dGVFbGVtZW50KCJ1bCIpOwogICAgICBncm91cC5hcHBlbmQoY2hpbGRyZW4pOwogICAgICBncm91cC5h");
    sb.append("cHBlbmQoc2ltcGxlKCJkaXYiLCAifSIpKTsKICAgICAgZ3JvdXAuc3R5bGUgPSAicGFkZGluZy1sZWZ0");
    sb.append("OjEwcHgiOwogICAgICBjaGlsZHJlbi5zdHlsZSA9ICJwYWRkaW5nLWxlZnQ6MTBweDsiOwogICAgICBz");
    sb.append("aG93aGlkZS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgb2JqX2hvbGRlci5zaG93R3JvdXAg");
    sb.append("PSAhIG9ial9ob2xkZXIuc2hvd0dyb3VwOwogICAgICAgIGlmIChvYmpfaG9sZGVyLnNob3dHcm91cCkg");
    sb.append("ewogICAgICAgICAgZ3JvdXAuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gbWludXNTVkc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRp");
    sb.append("c3BsYXkgPSAibm9uZSI7CiAgICAgICAgICBzaG93aGlkZS5pbm5lckhUTUwgPSBwbHVzU1ZHOwogICAg");
    sb.append("ICAgIH0KICAgICAgfTsKICAgICAgc2hvd2hpZGUub25jbGljaygpOwoKICAgICAgdmFyIGRlbHRhID0g");
    sb.append("e307CiAgICAgIGZvciAodmFyIGZpZWxkTmFtZSBpbiB0eXBlLmZpZWxkcykgewogICAgICAgIHZhciBm");
    sb.append("aWVsZCA9IHR5cGUuZmllbGRzW2ZpZWxkTmFtZV07CiAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVs");
    sb.append("ZC5wcml2YWN5KSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgdmFyIHJlc3Vs");
    sb.append("dCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgdmFyIGZp");
    sb.append("ZWxkRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKICAgICAgICBmaWVsZERvbS5hcHBl");
    sb.append("bmQoc2ltcGxlKCJzcGFuIiwgIGZpZWxkLnByaXZhY3kgKyAiICIgKyByZXN1bHQubmFtZSArICIgIiAr");
    sb.append("IGZpZWxkTmFtZSArICIgPSAiKSk7CiAgICAgICAgZmllbGREb20uYXBwZW5kKHJlc3VsdC5kb20pOwog");
    sb.append("ICAgICAgIGNoaWxkcmVuLmFwcGVuZChmaWVsZERvbSk7CiAgICAgICAgZGVsdGFbZmllbGROYW1lXSA9");
    sb.append("IHJlc3VsdC51cGRhdGU7CiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICBkb206IG9ial9ob2xk");
    sb.append("ZXIsCiAgICAgICAgbmFtZTogdHlwZS5uYW1lLAogICAgICAgIHVwZGF0ZTpkZWx0YQogICAgICB9Owog");
    sb.append("ICAgfQogICAgdmFyIHVua25vd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHVu");
    sb.append("a25vd24uaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkodHlwZSk7CiAgICByZXR1cm4ge2RvbTogdW5r");
    sb.append("bm93biwgdXBkYXRlOiBmdW5jdGlvbigpIHt9fTsKICB9OwoKICBzZWxmLmZvcm1JZEdlbiA9IDA7CiAg");
    sb.append("dmFyIG5leHRGb3JtSWQgPSBmdW5jdGlvbigpIHsKICAgIHNlbGYuZm9ybUlkR2VuKys7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5mb3JtSWRHZW47CiAgfTsKICB2YXIgZmlsbE91dEZvcm1Gb3JUeXBlID0gZnVuY3Rpb24o");
    sb.append("ZG9tLCBuYW1lLCB0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVm");
    sb.append("IikgewogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZG9tLCBuYW1lLCB0eXBlc1t0eXBlLnJlZl0sIHR5");
    sb.append("cGVzKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWVz");
    sb.append("c2FnZSIpIHsKICAgICAgZm9yICh2YXIgZmllbGQgaW4gdHlwZS5maWVsZHMpIHsKICAgICAgICB2YXIg");
    sb.append("ZmllbGRUeXBlID0gdHlwZS5maWVsZHNbZmllbGRdLnR5cGU7CiAgICAgICAgdmFyIGZpZWxkSG9sZGVy");
    sb.append("ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgZmlsbE91dEZvcm1Gb3JUeXBl");
    sb.append("KGZpZWxkSG9sZGVyLCBuYW1lID09ICIiID8gZmllbGQgOiAobmFtZSArICIuIiArIGZpZWxkKSwgZmll");
    sb.append("bGRUeXBlLCB0eXBlcyk7CiAgICAgICAgZG9tLmFwcGVuZChmaWVsZEhvbGRlcik7CiAgICAgIH0KICAg");
    sb.append("ICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGUubmF0dXJlID09ICJuYXRpdmVfYXJyYXkiKSB7CiAg");
    sb.append("ICAgIC8vIFRPRE8KICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX21heWJlIikgewog");
    sb.append("ICAgICB2YXIgbWF5YmVIb2xkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAg");
    sb.append("dmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKICAgICAgbGFiZWwuaW5u");
    sb.append("ZXJIVE1MID0gImVuYWJsZSAiICsgbmFtZTsKICAgICAgdmFyIGNoZWNrYm94ID0gZG9jdW1lbnQuY3Jl");
    sb.append("YXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgY2hlY2tib3gudHlwZSA9ICJjaGVja2JveCI7CiAgICAg");
    sb.append("IGNoZWNrYm94LmlkID0gbmV4dEZvcm1JZCgpOwogICAgICBjaGVja2JveC5uYW1lID0gIiI7CiAgICAg");
    sb.append("IGxhYmVsLmh0bWxGb3IgPSBjaGVja2JveC5pZDsKICAgICAgdmFyIG1heWJlVmFsdWVSZWYgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgdmFyIG1heWJlVmFsdWUgPSBkb2N1bWVudC5j");
    sb.append("cmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKG1heWJlVmFsdWUsIG5h");
    sb.append("bWUsIHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBtYXliZUhvbGRlci5hcHBlbmQobGFiZWwpOwogICAg");
    sb.append("ICBtYXliZUhvbGRlci5hcHBlbmQoY2hlY2tib3gpOwogICAgICBtYXliZUhvbGRlci5hcHBlbmQobWF5");
    sb.append("YmVWYWx1ZVJlZik7CiAgICAgIGRvbS5hcHBlbmQobWF5YmVIb2xkZXIpOwogICAgICBjaGVja2JveC5v");
    sb.append("bmNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIG51a2UobWF5YmVWYWx1ZVJlZik7CiAgICAgICAg");
    sb.append("aWYgKGNoZWNrYm94LmNoZWNrZWQpIHsKICAgICAgICAgIG1heWJlVmFsdWVSZWYuYXBwZW5kKG1heWJl");
    sb.append("VmFsdWUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHR5cGUu");
    sb.append("bmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoImxhYmVsIik7CiAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("ImlucHV0Iik7CgogICAgICBpbnB1dC5pZCA9ICJkZWJ1Z2dlcl9mb3JtX2lkXyIgKyBuZXh0Rm9ybUlk");
    sb.append("KCk7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9IG5hbWU7CiAgICAgIGlucHV0Lm5hbWUgPSBuYW1lOwog");
    sb.append("ICAgICBpbnB1dC5zdHlsZSA9IGlucHV0U3R5bGU7CiAgICAgIGlucHV0LnR5cGUgPSAidGV4dCI7CiAg");
    sb.append("ICAgIGxhYmVsLmZvckh0bWwgPSBpbnB1dC5pZDsKICAgICAgZG9tLmFwcGVuZChsYWJlbCk7CiAgICAg");
    sb.append("IGRvbS5hcHBlbmQoaW5wdXQpOwogICAgICByZXR1cm47CiAgICB9CiAgICBkb20uaW5uZXJIVE1MID0g");
    sb.append("bmFtZSArICItLT4iICsgSlNPTi5zdHJpbmdpZnkodHlwZSk7CiAgfTsKCiAgdmFyIG1ha2VDaGFubmVs");
    sb.append("RGVidWdnZXIgPSBmdW5jdGlvbihjaGFubmVscywgdHlwZXMsIGNvbm5lY3Rpb24pIHsKICAgIHZhciBz");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogICAgc2VsZWN0b3Iuc3R5");
    sb.append("bGUgPSAiYmFja2dyb3VuZDogIzMzMzsgY29sb3I6I2ZmZjsiOwogICAgdmlld0NoYW5uZWxzLmFwcGVu");
    sb.append("ZChzZWxlY3Rvcik7CiAgICB2YXIgZm9ybUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRp");
    sb.append("diIpOwogICAgdmlld0NoYW5uZWxzLmFwcGVuZChmb3JtSG9sZGVyKTsKICAgIHZhciBjaG9vc2UgPSBm");
    sb.append("dW5jdGlvbihjaGFubmVsKSB7CiAgICAgIG51a2UoZm9ybUhvbGRlcik7CiAgICAgIHZhciBmb3JtID0g");
    sb.append("ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZm9ybSIpOwogICAgICBmb3JtSG9sZGVyLmFwcGVuZChmb3Jt");
    sb.append("KTsKICAgICAgdmFyIHR5cGUgPSB0eXBlc1tjaGFubmVsc1tjaGFubmVsXV07CiAgICAgIGZpbGxPdXRG");
    sb.append("b3JtRm9yVHlwZShmb3JtLCAiIiwgdHlwZSwgdHlwZXMpOwoKICAgICAgdmFyIGJ1dHRvbiA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICBidXR0b24uc3R5bGUgPSBidXR0b25TdHls");
    sb.append("ZTsKICAgICAgYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgIGV2ZW50LnBy");
    sb.append("ZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSBSeEhUTUwuQnVpbGRGb3JtT2JqZWN0");
    sb.append("KGZvcm0pOwogICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAiU2VuZGluZyI7CiAgICAgICAgY29uc29s");
    sb.append("ZS5sb2coY2hhbm5lbCArICI6IiArIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTsKICAgICAgICBjb25u");
    sb.append("ZWN0aW9uLnNlbmQoY2hhbm5lbCwgbWVzc2FnZSwgewogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24o");
    sb.append("KSB7CiAgICAgICAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAiU3VjY2VzcyEgU2VuZCBBbm90aGVyISI7");
    sb.append("CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAg");
    sb.append("ICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAiW0ZhaWxlZDoiICsgcmVhc29uICsgIl0sIFRyeSBBZ2FpbiI7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICAgIH07CiAgICAgIGJ1dHRvbi5pbm5lckhUTUwgPSAi");
    sb.append("U2VuZCI7CiAgICAgIGZvcm0uYXBwZW5kKGJ1dHRvbik7CiAgICAgIC8vIEJ1aWxkRm9ybU9iamVjdAog");
    sb.append("ICAgfTsKICAgIHZhciBmaXJzdCA9IG51bGw7CiAgICB2YXIgY2hhbm5lbHNTb3J0ZWQgPSBbXTsKICAg");
    sb.append("IGZvciAodmFyIGNoIGluIGNoYW5uZWxzKSB7CiAgICAgIGNoYW5uZWxzU29ydGVkLnB1c2goY2gpOwog");
    sb.append("ICAgfQogICAgY2hhbm5lbHNTb3J0ZWQuc29ydCgpOwogICAgZm9yICh2YXIgayBpbiBjaGFubmVsc1Nv");
    sb.append("cnRlZCkgewogICAgICB2YXIgY2ggPSBjaGFubmVsc1NvcnRlZFtrXTsKICAgICAgaWYgKGZpcnN0ID09");
    sb.append("IG51bGwpIHsKICAgICAgICBmaXJzdCA9IGNoOwogICAgICB9CiAgICAgIHZhciBtc2dUeXBlID0gY2hh");
    sb.append("bm5lbHNbY2hdOwogICAgICB2YXIgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7");
    sb.append("CiAgICAgIG9wdC5pbm5lckhUTUwgPSBjaCArICIgOiAiICsgbXNnVHlwZTsKICAgICAgb3B0LmxhYmVs");
    sb.append("ID0gY2ggKyAiIDogIiArIG1zZ1R5cGU7CiAgICAgIG9wdC52YWx1ZSA9IGNoOwogICAgICBzZWxlY3Rv");
    sb.append("ci5hcHBlbmQob3B0KTsKICAgICAgc2VsZWN0b3Iub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICBjaG9vc2Uoc2VsZWN0b3IudmFsdWUpOwogICAgICB9OwogICAgfQoKICAgIGlmIChmaXJzdCAhPSBu");
    sb.append("dWxsKSB7CiAgICAgIGNob29zZShmaXJzdCk7CiAgICB9CiAgfTsKCiAgdmFyIHJlbmRlciA9IGZ1bmN0");
    sb.append("aW9uKG5hbWUpIHsKICAgIHZhciBjbyA9IGNvbm5lY3Rpb25zW25hbWVdOwogICAgaWYgKGNvLnJlbmRl");
    sb.append("cmVkID09IGNvLmJvdW5kKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvLnJlbmRlcmVkID0gY28u");
    sb.append("Ym91bmQ7CiAgICBjby5kZWJ1Z190cmVlLm51a2UoKTsKICAgIG51a2Uodmlld0pzb24pOwogICAgbnVr");
    sb.append("ZSh2aWV3Q2hhbm5lbHMpOwoKICAgIHZhciBoYW5kbGVyID0gewogICAgICBzdWNjZXNzOiBmdW5jdGlv");
    sb.append("biAocGF5bG9hZCkgewogICAgICAgIC8vIGhhbmRsZSB0aGUgZGF0YSBpbnNwZWN0b3IgdGFiCiAgICAg");
    sb.append("ICAgdmFyIHJlZmxlY3Rpb24gPSBwYXlsb2FkLnJlZmxlY3Rpb247CiAgICAgICAgdmFyIHJlc3VsdCA9");
    sb.append("IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShyZWZsZWN0aW9uLnR5cGVzWyJfX1Jvb3QiXSwgcmVmbGVjdGlv");
    sb.append("bi50eXBlcyk7CiAgICAgICAgdmlld0pzb24uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAgIGNvLmRl");
    sb.append("YnVnX3RyZWUuc3Vic2NyaWJlKHJlc3VsdC51cGRhdGUpOwogICAgICAgIC8vIGhhbmRsZSB0aGUgY2hh");
    sb.append("bm5lbHMgdGFiCiAgICAgICAgbWFrZUNoYW5uZWxEZWJ1Z2dlcihyZWZsZWN0aW9uLmNoYW5uZWxzLCBy");
    sb.append("ZWZsZWN0aW9uLnR5cGVzLCBjby5wdHIpOwogICAgICB9LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbihy");
    sb.append("ZWFzb24pIHsKICAgICAgICB2aWV3SnNvbi5pbm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1B");
    sb.append("OiIgKyByZWFzb24gKyAiXSI7CiAgICAgICAgdmlld0NoYW5uZWxzLmlubmVySFRNTCA9ICJbRkFJTEVE");
    sb.append("IFRPIEdFVCBTQ0hFTUE6IiArIHJlYXNvbiArICJdIjsKICAgICAgfQogICAgfTsKICAgIGlmIChjby52");
    sb.append("aWFfYmlsbGluZykgewogICAgICB2aWV3SnNvbi5pbm5lckhUTUwgPSAiQmlsaWxuZyBkb2N1bWVudCBu");
    sb.append("b3Qgc3VwcG9ydGVkIjsKICAgICAgdmlld0NoYW5uZWxzLmlubmVySFRNTCA9IHZpZXdKc29uLmlubmVy");
    sb.append("SFRNTDsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKGNvLnZpYV9kb21haW4pIHsKICAgICAgY28u");
    sb.append("cmF3LkRvbWFpblJlZmxlY3QoY28uaWRlbnRpdHksIGNvLmRvbWFpbiwgaGFuZGxlcik7CiAgICB9IGVs");
    sb.append("c2UgewogICAgICBjby5yYXcuU3BhY2VSZWZsZWN0KGNvLmlkZW50aXR5LCBjby5zcGFjZSwgY28ua2V5");
    sb.append("LCBoYW5kbGVyKTsKICAgIH0KICB9OwoKICB2YXIgY29ubmVjdGlvblNlbGVjdG9yID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CiAgY29ubmVjdGlvblNlbGVjdG9yLnN0eWxlID0gImJhY2tn");
    sb.append("cm91bmQ6ICMzMzM7IGNvbG9yOiAjZmZmIjsKICB2YXIgc3dpdGNoX3RvX2Nvbm5lY3Rpb24gPSBmdW5j");
    sb.append("dGlvbihuYW1lKSB7CiAgICBjdXJyZW50ID0gbmFtZTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKICAg");
    sb.append("IG51a2Uodmlld0pzb24pOwogICAgY29ubmVjdGlvbnNbbmFtZV0ucmVuZGVyZWQgPSAiIjsKICAgIHJl");
    sb.append("bmRlcihuYW1lKTsKICB9OwogIGNvbm5lY3Rpb25TZWxlY3Rvci5vbmNoYW5nZSA9IGZ1bmN0aW9uKCkg");
    sb.append("ewogICAgc3dpdGNoX3RvX2Nvbm5lY3Rpb24oY29ubmVjdGlvblNlbGVjdG9yLnZhbHVlKTsKICB9Owog");
    sb.append("IHZhciByZWZyZXNoX3NlbGVjdCA9IGZ1bmN0aW9uKCkgewogICAgbnVrZShjb25uZWN0aW9uU2VsZWN0");
    sb.append("b3IpOwogICAgZm9yICh2YXIgbmFtZSBpbiBjb25uZWN0aW9ucykgewogICAgICB2YXIgb3B0ID0gZG9j");
    sb.append("dW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CiAgICAgIG9wdC52YWx1ZSA9IG5hbWU7CiAgICAg");
    sb.append("IG9wdC5pbm5lclRleHQgPSBuYW1lOwogICAgICBjb25uZWN0aW9uU2VsZWN0b3IuYXBwZW5kQ2hpbGQo");
    sb.append("b3B0KTsKICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbCkgewogICAgICAgIHN3aXRjaF90b19jb25uZWN0");
    sb.append("aW9uKG5hbWUpOwogICAgICAgIGNvbm5lY3Rpb25TZWxlY3Rvci52YWx1ZSA9IG5hbWU7CiAgICAgIH0K");
    sb.append("ICAgIH0KICB9OwoKICBzZWxmLnRvZ2dsZSA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHNlbGYuc2hvd24p");
    sb.append("IHsKICAgICAgdHJ5IHsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNlbGYucm9vdCk7");
    sb.append("CiAgICAgIH0gY2F0Y2ggKG5vdHByZXNlbnQpIHsKICAgICAgICBzZWxmLnNob3duID0gIXNlbGYuc2hv");
    sb.append("d247CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc2VsZi5yb290KTsKICAgICAgfQogICAgfQog");
    sb.append("ICAgZWxzZQogICAgewogICAgICBzZWxmLnJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYi");
    sb.append("KTsKICAgICAgZGVidWdnZXJQb3NpdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJBZGFtYURlYnVn");
    sb.append("Z2VyUG9zaXRpb24iKTsKICAgICAgaWYgKCFkZWJ1Z2dlclBvc2l0aW9uIHx8IGRlYnVnZ2VyUG9zaXRp");
    sb.append("b24gPT0gIiIpIHsKICAgICAgICBkZWJ1Z2dlclBvc2l0aW9uID0gInRvcDowcHg7IGxlZnQ6MHB4O3dp");
    sb.append("ZHRoOjgwMHB4O2hlaWdodDo2MDBweCI7CiAgICAgIH0KICAgICAgc2VsZi5yb290LnN0eWxlID0gInBv");
    sb.append("c2l0aW9uOmFic29sdXRlOyIgKyBkZWJ1Z2dlclBvc2l0aW9uICsgIjtiYWNrZ3JvdW5kOiAjMDAwO2Jv");
    sb.append("cmRlcjoxcHggc29saWQgcmVkO3otaW5kZXg6MTAwMDsgb3ZlcmZsb3c6c2Nyb2xsIjsKICAgICAgdmFy");
    sb.append("IHRpdGxlQmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHRpdGxlQmFyLmlu");
    sb.append("bmVySFRNTCA9ICJBZGFtYSBEZWJ1Z2dlciI7CiAgICAgIHRpdGxlQmFyLnN0eWxlID0gImJhY2tncm91");
    sb.append("bmQ6ICMyMjI7IGNvbG9yOiAjMGYwOyBjdXJzb3I6bW92ZTsgd2lkdGg6MTAwJTsgZm9udC12YXJpYW50");
    sb.append("OiBzbWFsbC1jYXBzOyBwYWRkaW5nOjJweDsgdGV4dC1hbGlnbjogY2VudGVyOyI7CiAgICAgIHRpdGxl");
    sb.append("QmFyLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZXYpIHsKICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgp");
    sb.append("OwogICAgICAgIHZhciByZWN0ID0gc2VsZi5yb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAg");
    sb.append("ICAgIHZhciBzdGFydCA9IHt4OiBldi5jbGllbnRYLCB5OiBldi5jbGllbnRZfTsKICAgICAgICB2YXIg");
    sb.append("dXBkYXRlID0gZnVuY3Rpb24obngpIHsKICAgICAgICAgIHNlbGYucm9vdC5zdHlsZS5sZWZ0ID0gKHJl");
    sb.append("Y3QubGVmdCArIG54LmNsaWVudFggLSBzdGFydC54KSArICJweCI7CiAgICAgICAgICBzZWxmLnJvb3Qu");
    sb.append("c3R5bGUudG9wID0gKHJlY3QudG9wICsgbnguY2xpZW50WSAtIHN0YXJ0LnkpICsgInB4IjsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICB1");
    sb.append("cGRhdGUobngpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIkFkYW1hRGVidWdnZXJQb3Np");
    sb.append("dGlvbiIsICJ0b3A6IitzZWxmLnJvb3Quc3R5bGUudG9wKyI7IGxlZnQ6IitzZWxmLnJvb3Quc3R5bGUu");
    sb.append("bGVmdCsiO3dpZHRoOjgwMHB4O2hlaWdodDo2MDBweCIpOwogICAgICAgIH07CiAgICAgICAgd2luZG93");
    sb.append("Lm9ubW91c2V1cCA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICB1cGRhdGUobngpOwogICAgICAgICAg");
    sb.append("bG9jYWxTdG9yYWdlLnNldEl0ZW0oIkFkYW1hRGVidWdnZXJQb3NpdGlvbiIsICJ0b3A6IitzZWxmLnJv");
    sb.append("b3Quc3R5bGUudG9wKyI7IGxlZnQ6IitzZWxmLnJvb3Quc3R5bGUubGVmdCsiO3dpZHRoOjgwMHB4O2hl");
    sb.append("aWdodDo2MDBweCIpOwogICAgICAgICAgd2luZG93Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oKSB7fTsK");
    sb.append("ICAgICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbigpIHt9OwogICAgICAgIH07CiAgICAg");
    sb.append("ICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHNlbGYucm9vdC5hcHBlbmRDaGlsZCh0aXRsZUJh");
    sb.append("cik7CgogICAgICB2YXIgbWFrZUhlYWRlciA9IGZ1bmN0aW9uKG5hbWUsIHRvb2x0aXApIHsKICAgICAg");
    sb.append("ICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgZGl2LnN0eWxl");
    sb.append("ID0gYmFzZVN0eWxlICsgImJhY2tncm91bmQ6I2NjYzsgY29sb3I6IzAwMDsgYm9yZGVyOiAxcHggZ3Jl");
    sb.append("ZW4gZGFzaGVkOyBtYXJnaW4tdG9wOiAxMHB4OyBwYWRkaW5nLXRvcDogMnB4OyBwYWRkaW5nLWJvdHRv");
    sb.append("bS00cG07IHBhZGRpbmctbGVmdDoxMnB4OyBmb250LXNpemU6MThweDsgY3Vyc29yOnBvaW50ZXIiOwog");
    sb.append("ICAgICAgIGRpdi5pbm5lckhUTUwgPSBuYW1lICsgIiAmI3gxRjZDODsiOwogICAgICAgIGRpdi50aXRs");
    sb.append("ZSA9IHRvb2x0aXA7CiAgICAgICAgcmV0dXJuIGRpdjsKICAgICAgfQogICAgICBzZWxmLnJvb3QuYXBw");
    sb.append("ZW5kQ2hpbGQobWFrZUhlYWRlcigiU2VsZWN0IENvbm5lY3Rpb24iLCAiQW4gUnhIVE1MIGFwcGxpY2F0");
    sb.append("aW9uIGNhbiBiaW5kIHRvIG11bHRpcGxlIGFwcGxpY2F0aW9ucy4gVXNlIHRoaXMgdG8gc2VsZWN0IHRo");
    sb.append("ZSBjdXJyZW50IGNvbm5lY3Rpb24gdG8gZGVidWcgYW5kIGludGVyYWN0IHdpdGguIikpOwogICAgICBz");
    sb.append("ZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFw");
    sb.append("cGVuZENoaWxkKG1ha2VIZWFkZXIoIlZpZXcgQ29ubmVjdGlvbiBEYXRhIiwgIlRoaXMgc2hvd3MgdGhl");
    sb.append("IHJvb3QgZG9jdW1lbnQgb2YgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiIpKTsKICAgICAgc2VsZi5yb290");
    sb.append("LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKG1ha2VIZWFk");
    sb.append("ZXIoIlZpZXcgQ29ubmVjdGlvbidzIENoYW5uZWxzIiwgIlRoaXMgcHJvdmlkZXMgYSBzYW5lIHdheSB0");
    sb.append("byBpbnZva2UgYSBjaGFubmVsIHdpdGhvdXQgdGhlIGFzc29jaWF0ZWQgVUkuIikpOwogICAgICBzZWxm");
    sb.append("LnJvb3QuYXBwZW5kQ2hpbGQodmlld0NoYW5uZWxzKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxk");
    sb.append("KG1ha2VIZWFkZXIoIklkZW50aXR5IFN0YXNoIiwgIlNpbmNlIG11bHRpLXBlcnNvbiBleHBlcmllbmNl");
    sb.append("cyBhcmUgYSBjaGFsbGVuZ2UsIHRoaXMgYWxsb3dzIGVhc3kgc3Rhc2hpbmcgYW5kIHJlY292ZXJ5IG9m");
    sb.append("IGlkZW50aXRpZXMiKSk7CiAgICAgIHNlbGYucm9vdC5hcHBlbmRDaGlsZCh2aWV3SWRlbnRpdGllcyk7");
    sb.append("CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYu");
    sb.append("c2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoKICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVj");
    sb.append("dGlvbikgewogICAgY29ubmVjdGlvbnNbY29ubmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBj");
    sb.append("b25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVn");
    sb.append("Z2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2VsZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9h");
    sb.append("ZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5ib3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBj");
    sb.append("dXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkgewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUp");
    sb.append("OwogICAgICB9CiAgICAgIGlmICgiZGF0YSIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5l");
    sb.append("Y3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAv");
    sb.append("KgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5v");
    sb.append("bmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdz");
    sb.append("dGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewovLyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShw");
    sb.append("YXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAgICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2Fk");
    sb.append("LmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdvdG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQog");
    sb.append("ICAgICAqLwogICAgfQogIH07CiAgcmV0dXJuIHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKICBzZWxmLl9pbmZsaWdodCA9IDA7CgogIHZhciBkZWZh");
    sb.append("dWx0RW5kcG9pbnQgPSAvKkVORFBPSU5UPVsqL0FkYW1hLlByb2R1Y3Rpb24vKl0qLzsKCiAgLy8gb3Zl");
    sb.append("cnJpZGUgZW5kcG9pbnQgYmFzZWQgb24gdGhlIHByZXNlbmNlIG9mIF9fbWRfZW5kcG9pbnQKICB2YXIg");
    sb.append("bWRPdmVycmlkZUVuZHBvaW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm1kZWMiKTsgLy8gbXVsdGkg");
    sb.append("ZG9tYWluIGVuZHBvaW50IGNob2ljZQogIGlmIChtZE92ZXJyaWRlRW5kcG9pbnQgIT0gbnVsbCAmJiAi");
    sb.append("YmV0YSIgPT0gbWRPdmVycmlkZUVuZHBvaW50KSB7CiAgICBkZWZhdWx0RW5kcG9pbnQgPSBBZGFtYS5C");
    sb.append("ZXRhOwogIH0KCiAgLy8gVGhpcyBzdHJhbmdlIGVzY2FwaW5nIGlzIGZvciBkZXZlbG9wZXIgbW9kZSB0");
    sb.append("byBwcm94eSB0byBsb2NhbGhvc3QuCiAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgQWRhbWEuQ29ubmVjdGlv");
    sb.append("bihkZWZhdWx0RW5kcG9pbnQpOwogIHZhciBjb25uZWN0aW9ucyA9IHt9OwogIHNlbGYuY29ubmVjdGlv");
    sb.append("biA9IGNvbm5lY3Rpb247CiAgc2VsZi5idW1wID0gZnVuY3Rpb24obSkgewogICAgY29ubmVjdGlvbi5i");
    sb.append("dW1wKG0pOwogIH07CgogIHZhciBjb25uZWN0aW9uTW9uaXRvckRvbSA9IGRvY3VtZW50LmNyZWF0ZUVs");
    sb.append("ZW1lbnQoImRpdiIpOwogIGNvbm5lY3Rpb24ub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVz");
    sb.append("KSB7CiAgICB2YXIgaWNvbiA9IGZ1bmN0aW9uIChjb2xvcikgeyByZXR1cm4gIjxzdmcgeG1sbnM9XCJo");
    sb.append("dHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAy");
    sb.append("NFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cIiIgKyBjb2xvciArICJcIiBzdHlsZT1cIndp");
    sb.append("ZHRoOjE2cHg7IGhlaWdodDoxNnB4XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9r");
    sb.append("ZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk04LjI4OCAxNS4wMzhhNS4yNSA1LjI1IDAgMDE3LjQyNCAw");
    sb.append("TTUuMTA2IDExLjg1NmMzLjgwNy0zLjgwOCA5Ljk4LTMuODA4IDEzLjc4OCAwTTEuOTI0IDguNjc0YzUu");
    sb.append("NTY1LTUuNTY1IDE0LjU4Ny01LjU2NSAyMC4xNTIgME0xMi41MyAxOC4yMmwtLjUzLjUzLS41My0uNTNh");
    sb.append("Ljc1Ljc1IDAgMDExLjA2IDB6XCIgLz48L3N2Zz5cbiI7IH07CiAgICBpZiAoIXN0YXR1cykgewogICAg");
    sb.append("ICBjb25uZWN0aW9uTW9uaXRvckRvbS50aXRsZSA9ICJkaXNjb25uZWN0ZWQiOwogICAgICBjb25uZWN0");
    sb.append("aW9uTW9uaXRvckRvbS5pbm5lckhUTUwgPSBpY29uKCJyZWQiKTsKICAgICAgY29ubmVjdGlvbi5vbnBp");
    sb.append("bmcgPSBmdW5jdGlvbiAoXzEsIF8yKSB7IH07CiAgICB9IGVsc2UgewogICAgICBjb25uZWN0aW9uLm9u");
    sb.append("cGluZyA9IGZ1bmN0aW9uIChfLCBsYXRlbmN5KSB7CiAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20u");
    sb.append("dGl0bGUgPSAiY29ubmVjdGVkOyBsYXRlbmN5PSIgKyBsYXRlbmN5ICsgIm1zIjsKICAgICAgICBpZiAo");
    sb.append("bGF0ZW5jeSA+PSAxMDApIHsKICAgICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmlubmVySFRNTCA9");
    sb.append("IGljb24oIm9yYW5nZSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25uZWN0aW9uTW9uaXRv");
    sb.append("ckRvbS5pbm5lckhUTUwgPSBpY29uKCJncmVlbiIpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9");
    sb.append("OwogIGNvbm5lY3Rpb25Nb25pdG9yRG9tLnN0eWxlID0gInBvc2l0aW9uOmZpeGVkOyBib3R0b206MHB4");
    sb.append("OyByaWdodDowcHgiOwogIGNvbm5lY3Rpb25Nb25pdG9yRG9tLmNsYXNzTmFtZSA9ICJhZGFtYS1kZWJ1");
    sb.append("Z2dlciIKICBpZiAoQWRhbWEuRGVidWdnZXIpIHsKICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLm9uY2xp");
    sb.append("Y2sgPSBBZGFtYS5EZWJ1Z2dlci50b2dnbGU7CiAgfQogIGNvbm5lY3Rpb24uc3RhcnQoKTsKICBjb25u");
    sb.append("ZWN0aW9uLmtlZXBhbGl2ZSgpOwoKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5j");
    sb.append("dGlvbihldmVudCkgewogICAgdmFyIHBheWxvYWQgPSB7fTsKICAgIHBheWxvYWQubWVzc2FnZSA9IGV2");
    sb.append("ZW50Lm1lc3NhZ2U7CiAgICBwYXlsb2FkLmZpbGVuYW1lID0gZXZlbnQuZmlsZW5hbWU7CiAgICBwYXls");
    sb.append("b2FkLmxpbmVubyA9IGV2ZW50LmxpbmVubzsKICAgIHBheWxvYWQuY29sbm8gPSBldmVudC5jb2xubzsK");
    sb.append("ICAgIHBheWxvYWQuZmlsZW5hbWUgPSBldmVudC5maWxlbmFtZTsKICAgIGNvbm5lY3Rpb24ubG9nKCJ3");
    sb.append("aW5kb3cuZXJyb3IiLCBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7CiAgICBjb25zb2xlLmVycm9yKCJb");
    sb.append("ZXJyb3JdIiArIGV2ZW50Lm1lc3NhZ2UpOwogIH0pOwoKICBjb25uZWN0aW9uLmJ1bXAoInJ4aHRtbCIp");
    sb.append("OwoKICB2YXIgcm9vdFJlcGxhY2UgPSAiLyI7CiAgdmFyIGZpeFBhdGggPSBmdW5jdGlvbiAocGF0aCkg");
    sb.append("ewogICAgcmV0dXJuIHBhdGg7CiAgfTsKICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNX");
    sb.append("aXRoKCIuYWRhbWEtcGxhdGZvcm0uY29tIikgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5lbmRz");
    sb.append("V2l0aCgiaWRlLmFkYW1hLXBsYXRmb3JtLmNvbSIpKSB7CiAgICAvLyB0aGlzIGV4aXN0cyBpZiBzb21l");
    sb.append("b25lIGlzIHRyeWluZyB0byB1c2UgdGhlIGdsb2JhbCBkb21haW4gZm9yIHRoZWlyIHNpdGUKICAgIHZh");
    sb.append("ciBwYXJ0cyA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgiLyIpOwogICAgcm9vdFJlcGxh");
    sb.append("Y2UgPSBbcGFydHNbMF0sIHBhcnRzWzFdLCBwYXJ0c1syXSwgIiJdLmpvaW4oIi8iKTsKICAgIHZhciBv");
    sb.append("ZmZzZXQgPSBwYXJ0c1swXS5sZW5ndGggKyBwYXJ0c1sxXS5sZW5ndGggKyBwYXJ0c1syXS5sZW5ndGgg");
    sb.append("KyAyOwogICAgZml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgIHJldHVybiBwYXRoLnN1YnN0");
    sb.append("cmluZyhvZmZzZXQpOwogICAgfTsKICB9CgogIHZhciBmaXhIcmVmID0gZnVuY3Rpb24gKGhyZWYpIHsK");
    sb.append("ICAgIGlmICghaHJlZikgewogICAgICByZXR1cm4gIiMiOwogICAgfQogICAgaWYgKGhyZWYuc3RhcnRz");
    sb.append("V2l0aCgiLyIpKSB7CiAgICAgIHJldHVybiByb290UmVwbGFjZSArIGhyZWYuc3Vic3RyaW5nKDEpOwog");
    sb.append("ICAgfQogICAgcmV0dXJuIGhyZWY7CiAgfTsKCiAgdmFyIGdldF9jb25uZWN0aW9uX29iaiA9IGZ1bmN0");
    sb.append("aW9uIChuYW1lKSB7CiAgICBpZiAobmFtZSBpbiBjb25uZWN0aW9ucykgewogICAgICByZXR1cm4gY29u");
    sb.append("bmVjdGlvbnNbbmFtZV07CiAgICB9IGVsc2UgewogICAgICB2YXIgb2JqID0gewogICAgICAgIG5hbWU6");
    sb.append("IG5hbWUsCiAgICAgICAgcHRyOiBudWxsLAogICAgICAgIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwKICAg");
    sb.append("ICAgICBvdXRzdGFuZGluZzoge30sCiAgICAgICAgZGVjaXNpb25zOiB7fSwKICAgICAgICBjaG9pY2Vf");
    sb.append("c3Viczoge30sCiAgICAgICAgcmVzZXRzOiB7fSwKICAgICAgICBjb25uZWN0aW9uX2V2ZW50czoge30s");
    sb.append("CiAgICAgICAgc3luY19ldmVudHM6IHt9LAogICAgICAgIGlkOiAwLAogICAgICAgIGNvbm5lY3Rpb25f");
    sb.append("c3RhdGU6IGZhbHNlLAogICAgICAgIGNob2ljZXM6IHt9LAogICAgICAgIGJvdW5kOiAiIiwKICAgICAg");
    sb.append("ICB2aWV3c3RhdGVfc2VudDogdHJ1ZSwKICAgICAgICB2aWV3c3RhdGVfY2xvbmU6ICIiLAogICAgICAg");
    sb.append("IGhhc19maWx0ZXI6IGZhbHNlLAogICAgICAgIHN5bmNlZDogZmFsc2UsCiAgICAgICAgZmlsdGVyOiB7");
    sb.append("fSwKICAgICAgICB2c3NlcTogMCwKICAgICAgICBkZWJ1Z2dlcjogZnVuY3Rpb24gKGRlbHRhKSB7IH0s");
    sb.append("CiAgICAgICAgcmF3OiBjb25uZWN0aW9uCiAgICAgIH07CiAgICAgIG9iai5udWtlID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgIHRoaXMuY29ubmVjdGlvbl9ldmVudHMgPSB7fTsKICAgICAgICB0aGlzLnN5bmNf");
    sb.append("ZXZlbnRzID0ge307CiAgICAgICAgdGhpcy5jaG9pY2Vfc3VicyA9IHt9OwogICAgICB9LmJpbmQob2Jq");
    sb.append("KTsKICAgICAgaWYgKEFkYW1hLkRlYnVnZ2VyKSB7CiAgICAgICAgb2JqLmRlYnVnZ2VyID0gQWRhbWEu");
    sb.append("RGVidWdnZXIucmVnaXN0ZXIob2JqKTsKICAgICAgfQogICAgICBvYmouc3luYyA9IGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICB2YXIgc3luY2VkID0gdGhpcy5jb25uZWN0aW9uX3N0YXRlICYmIHRoaXMudmlld3N0");
    sb.append("YXRlX3NlbnQ7CiAgICAgICAgaWYgKHRoaXMuc3luY2VkID09IHN5bmNlZCkgewogICAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmNlZCA9IHN5bmNlZDsKICAgICAgICB2YXIgYXhl");
    sb.append("ID0gW107CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5zeW5jX2V2ZW50cykgewogICAgICAgICAg");
    sb.append("aWYgKCEob2JqLnN5bmNfZXZlbnRzW3N1Yl0oc3luY2VkKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2go");
    sb.append("c3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUu");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouc3luY19ldmVudHNbYXhlW2tdXTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3N5bmMgPSBmdW5jdGlv");
    sb.append("biAoY2FsbGJhY2spIHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhp");
    sb.append("cy5zeW5jX2V2ZW50c1tzXSA9IGNhbGxiYWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuc3luY2VkKTsK");
    sb.append("ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuc3luY19ldmVu");
    sb.append("dHNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9OwogICAgICBvYmouc2V0X2Nvbm5lY3Rl");
    sb.append("ZCA9IGZ1bmN0aW9uIChjcykgewogICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPT0gY3Mp");
    sb.append("IHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX3N0YXRl");
    sb.append("ID0gY3M7CiAgICAgICAgdmFyIGF4ZSA9IFtdOwogICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouY29u");
    sb.append("bmVjdGlvbl9ldmVudHMpIHsKICAgICAgICAgIGlmICghKG9iai5jb25uZWN0aW9uX2V2ZW50c1tzdWJd");
    sb.append("KGNzKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0");
    sb.append("ZSBvYmouY29ubmVjdGlvbl9ldmVudHNbYXhlW2tdXTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zeW5j");
    sb.append("KCk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBvYmouY29ubmVjdGVkID0gZnVuY3Rpb24gKGNhbGxi");
    sb.append("YWNrKSB7CiAgICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY29ubmVj");
    sb.append("dGlvbl9ldmVudHNbc10gPSBjYWxsYmFjazsKICAgICAgICBjYWxsYmFjayh0aGlzLmNvbm5lY3Rpb25f");
    sb.append("c3RhdGUpOwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5j");
    sb.append("b25uZWN0aW9uX2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmop");
    sb.append("OwogICAgICBvYmouc3Vic2NyaWJlX2FueSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZh");
    sb.append("ciBzID0gIi18IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNr");
    sb.append("OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lv");
    sb.append("bnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1");
    sb.append("YnNjcmliZSA9IGZ1bmN0aW9uIChjaGFubmVsLCBjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gY2hh");
    sb.append("bm5lbCArICJ8IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNr");
    sb.append("OwogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lv");
    sb.append("bnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1");
    sb.append("YnNjcmliZV9yZXNldCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBkciA9ICJyZXNl");
    sb.append("dHwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMucmVzZXRzW2RyXSA9IGNhbGxiYWNrOwogICAgICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5yZXNldHNbZHJdOwogICAg");
    sb.append("ICAgIH0uYmluZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfY2hv");
    sb.append("aWNlID0gZnVuY3Rpb24gKGNoYW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVs");
    sb.append("ICsgInwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY2hvaWNlX3N1YnNbc10gPSBjYWxsYmFjazsK");
    sb.append("ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuY2hvaWNlX3N1");
    sb.append("YnNbc107CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLm9u");
    sb.append("Y2hvaWNlcyA9IGZ1bmN0aW9uIChjaGFubmVsLCBjaG9pY2UpIHsKICAgICAgICB2YXIgYXhlID0gW107");
    sb.append("CiAgICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5jaG9pY2Vfc3VicykgewogICAgICAgICAgaWYgKHN1");
    sb.append("Yi5zdGFydHNXaXRoKGNoYW5uZWwgKyAifCIpKSB7CiAgICAgICAgICAgIGlmICghb2JqLmNob2ljZV9z");
    sb.append("dWJzW3N1Yl0oY2hvaWNlKSkgewogICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVu");
    sb.append("Z3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouY2hvaWNlX3N1YnNbYXhlW2tdXTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH07CiAgICAgIG9iai5vbmRlY2lkZSA9IGZ1bmN0aW9uIChvdXRzdGFuZGluZykgewog");
    sb.append("ICAgICAgIHZhciBheGVSZXNldCA9IFtdOwogICAgICAgIGZvciAodmFyIGRyIGluIG9iai5yZXNldHMp");
    sb.append("IHsKICAgICAgICAgIHZhciByID0gb2JqLnJlc2V0c1tkcl07CiAgICAgICAgICBpZiAoIShyKCkpKSB7");
    sb.append("CiAgICAgICAgICAgIGF4ZVJlc2V0LnB1c2goZHIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IGF4ZVJlc2V0Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBkZWxl");
    sb.append("dGUgb2JqLnJlc2V0c1theGVSZXNldFtrXV07CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGNoIGlu");
    sb.append("IG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgb2JqLm91dHN0YW5kaW5nW2NoXSA9IHsgb3B0aW9u");
    sb.append("czogW10gfTsKICAgICAgICB9CiAgICAgICAgdmFyIG4gPSBvdXRzdGFuZGluZy5sZW5ndGg7CiAgICAg");
    sb.append("ICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciBvID0gb3V0c3RhbmRp");
    sb.append("bmdba107CiAgICAgICAgICBvYmoub3V0c3RhbmRpbmdbby5jaGFubmVsXSA9IG87CiAgICAgICAgfQog");
    sb.append("ICAgICAgIGZvciAodmFyIGNoIGluIG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgdmFyIG91dCA9");
    sb.append("IG9iai5vdXRzdGFuZGluZ1tjaF07CiAgICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAgICBmb3Ig");
    sb.append("KHZhciBzdWIgaW4gb2JqLmRlY2lzaW9ucykgewogICAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgo");
    sb.append("Y2ggKyAifCIpIHx8IHN1Yi5zdGFydHNXaXRoKCItfCIpKSB7CiAgICAgICAgICAgICAgaWYgKCFvYmou");
    sb.append("ZGVjaXNpb25zW3N1Yl0ob3V0LCBjaCkpIHsKICAgICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBr");
    sb.append("ID0gMDsgayA8IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgICBkZWxldGUgb2JqLmRlY2lzaW9u");
    sb.append("c1theGVba11dOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbnNb");
    sb.append("bmFtZV0gPSBvYmo7CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfTsKICBzZWxmLmdldENvbm5lY3Rp");
    sb.append("b25CeU5hbWUgPSBnZXRfY29ubmVjdGlvbl9vYmo7CgogIHNlbGYubWFrZSA9IGZ1bmN0aW9uICgpIHsK");
    sb.append("ICAgIHJldHVybiBuZXcgQWRhbWFUcmVlKCk7CiAgfTsKCiAgLy8gSEVMUEVSIHwgc3Vic2NyaWJlIHRo");
    sb.append("ZSBnaXZlbiAnc3ViJyB0byBjaGFuZ2VzIHdpdGhpbiBzdGF0ZSBmb3IgdGhlIGdpdmVuIGZpZWxkIG5h");
    sb.append("bWVkIG5hbWUKICB2YXIgc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCBzdWIpIHsKICAg");
    sb.append("IHZhciBzcyA9IHNlbGYucEkoc3RhdGUsIG5hbWUpOwogICAgdmFyIHMgPSBzc1tzcy5jdXJyZW50XTsK");
    sb.append("ICAgIGlmIChzID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihzcy5jdXJyZW50ICsgIiBpcyBu");
    sb.append("b3QgYXZhaWxhYmxlOyB1bmFibGUgdG8gc3Vic2NyaWJlLiIpOwogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBpZiAoIkBlIiBpbiBzLmRlbHRhKSB7CiAgICAgIHMuZGVsdGFbIkBlIl0ucHVzaChzdWIpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgcy5kZWx0YVsiQGUiXSA9IFtzdWJdOwogICAgfQogIH07CiAgc2VsZi5zdWJz");
    sb.append("Y3JpYmUgPSBzdWJzY3JpYmU7CgogIC8vIEhFTFBFUiB8IGNyZWF0ZSBmcmVzaCBzdGF0ZQogIHZhciBm");
    sb.append("cmVzaCA9IGZ1bmN0aW9uICh3aGVyZSkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZTogbmV3IEFkYW1h");
    sb.append("VHJlZSgpLAogICAgICBkZWx0YToge30sCiAgICAgIHBhcmVudDogbnVsbCwKICAgICAgcGF0aDogbnVs");
    sb.append("bCwKICAgICAgd2hlcmU6IHdoZXJlCiAgICB9OwogIH07CiAgc2VsZi5mcmVzaCA9IGZyZXNoOwoKICAv");
    sb.append("LyBIRUxQRVI6IHJlbW92ZSBwb3RlbnRpYWxseSBzZW5zaXRpdmUgaW5mb3JtYXRpb24gZnJvbSBhbiBv");
    sb.append("YmplY3QKICB2YXIgc2FmZV9maWx0ZXIgPSBmdW5jdGlvbihvKSB7CiAgICBpZiAoJ3Bhc3N3b3JkJyBp");
    sb.append("biBvKSB7CiAgICAgIGRlbGV0ZSBvWydwYXNzd29yZCddOwogICAgfQogICAgaWYgKCdvbmVfdGltZV9w");
    sb.append("YXNzd29yZCcgaW4gbykgewogICAgICBkZWxldGUgb1snb25lX3RpbWVfcGFzc3dvcmQnXTsKICAgIH0K");
    sb.append("ICAgIHJldHVybiBvOwogIH0KCiAgLy8gSEVMUEVSIHwgY3JlYXRlIGEgbmV3IGRlbHRhIGNvcHkgZnJv");
    sb.append("bSB0aGUgZ2l2ZW4gc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIGRhdGEgb3IgdmlldykKICB2YXIg");
    sb.append("bmV3X2RlbHRhX2NvcHkgPSBmdW5jdGlvbiAoc3MpIHsKICAgIGlmIChzcyA9PSBudWxsKSB7CiAgICAg");
    sb.append("IHJldHVybiBudWxsOwogICAgfQogICAgdmFyIHBhcmVudCA9IG51bGw7CiAgICBpZiAoc3MucGFyZW50");
    sb.append("ICE9IG51bGwpIHsKICAgICAgcGFyZW50ID0gbmV3X2RlbHRhX2NvcHkoc3MucGFyZW50KTsKICAgIH0K");
    sb.append("ICAgIHZhciBuZXdfZGVsdGEgPSB7fTsKICAgIGlmIChwYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJl");
    sb.append("bnQuZGVsdGFbc3MucGF0aF0gPSBuZXdfZGVsdGE7CiAgICB9CiAgICB2YXIgcmVzdWx0ID0geyB0cmVl");
    sb.append("OiBzcy50cmVlLCBwYXJlbnQ6IHBhcmVudCwgZGVsdGE6IG5ld19kZWx0YSwgcGF0aDogc3MucGF0aCB9");
    sb.append("OwogICAgaWYgKCdjb25uZWN0aW9uJyBpbiBzcykgewogICAgICByZXN1bHQuY29ubmVjdGlvbiA9IHNz");
    sb.append("LmNvbm5lY3Rpb247CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgc2VsZi5tYWtlRGVsdGFD");
    sb.append("b3B5ID0gbmV3X2RlbHRhX2NvcHk7CgogIC8vIEhFTFBFUiB8IGNvbnN0cnVjdCBhIHBhdGggdG8KICB2");
    sb.append("YXIgcGF0aF90byA9IGZ1bmN0aW9uIChzcywgb2JqKSB7CiAgICBpZiAoc3MucGFyZW50ICE9IG51bGwp");
    sb.append("IHsKICAgICAgdmFyIHBlZWwgPSB7fTsKICAgICAgcGVlbFtzcy5wYXRoXSA9IG9iajsKICAgICAgcmV0");
    sb.append("dXJuIHBhdGhfdG8oc3MucGFyZW50LCBwZWVsKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBvYmo7");
    sb.append("CiAgICB9CiAgfTsKICBzZWxmLnBhdGhUbyA9IHBhdGhfdG87CgogIC8vIEhFTFBFUiB8IGdldCB0aGUg");
    sb.append("cm9vdCBvZiB0aGUgc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIHRoZSBkYXRhJ3Mgcm9vdCBvciB0");
    sb.append("aGUgdmlldydzIHJvb3QpCiAgdmFyIHJvb3Rfb2YgPSBmdW5jdGlvbiAoc3MpIHsKICAgIHZhciB4ID0g");
    sb.append("c3M7CiAgICB3aGlsZSAoeC5wYXJlbnQgIT0gbnVsbCkgewogICAgICB4ID0geC5wYXJlbnQ7CiAgICB9");
    sb.append("CiAgICByZXR1cm4geDsKICB9OwogIHNlbGYucm9vdE9mID0gcm9vdF9vZjsKCiAgLy8gSEVMUEVSIHwg");
    sb.append("cmVtb3ZlIGFsbCB0aGUgY2hpbGRyZW4gZnJvbSB0aGUgZ2l2ZW4gRE9NIG5vZGUKICB2YXIgbnVrZSA9");
    sb.append("IGZ1bmN0aW9uIChwYXJlbnQpIHsKICAgIHZhciBsYXN0ID0gcGFyZW50Lmxhc3RDaGlsZDsKICAgIHdo");
    sb.append("aWxlIChsYXN0KSB7CiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChsYXN0KTsKICAgICAgbGFzdCA9IHBh");
    sb.append("cmVudC5sYXN0Q2hpbGQ7CiAgICB9CiAgfTsKICBzZWxmLm51a2UgPSBudWtlOwoKICAvLyBIRUxQRVI6");
    sb.append("IGRlYm91bmNlIHRoZSBnaXZlbiBmdW5jdGlvbmFsIHdoZW4gcmFwaWQgZnVuY3Rpb24gc3ByZWFkIGlz");
    sb.append("IGV4cGVjdGVkCiAgdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gKG1zLCBmb28pIHsKICAgIHZhciBzdGF0");
    sb.append("dXMgPSB7IGluZmxpZ2h0OiBmYWxzZSwgdGltZW91dDogbnVsbCB9OwogICAgc3RhdHVzLmluZmxpZ2h0");
    sb.append("ID0gZmFsc2U7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXN0YXR1cy5pbmZsaWdo");
    sb.append("dCkgewogICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IHRydWU7CiAgICAgICAgc3RhdHVzLnRpbWVvdXQg");
    sb.append("PSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzdGF0dXMuaW5mbGlnaHQg");
    sb.append("PSBmYWxzZTsKICAgICAgICAgIHN0YXR1cy50aW1lb3V0ID0gbnVsbDsKICAgICAgICAgIGZvbygpOwog");
    sb.append("ICAgICAgIH0sIG1zIC8qIG1zICovKTsgLy8gZGVib3VuY2UgdGhlIHBhcmFtZXRlcnMKICAgICAgfQog");
    sb.append("ICAgfTsKICB9OwogIHNlbGYuZGVib3VuY2UgPSBkZWJvdW5jZTsKCiAgdmFyIGRlbGF5ID0gZnVuY3Rp");
    sb.append("b24obXMsIGZvbykgewogICAgdmFyIHN0YXR1cyA9IHsgYXZhaWw6IHRydWUsIGFnYWluOmZhbHNlLCB0");
    sb.append("aW1lb3V0OiBudWxsIH07CiAgICBzdGF0dXMuZ28gPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKHN0YXR1");
    sb.append("cy5hdmFpbCkgewogICAgICAgIHN0YXR1cy5hdmFpbCA9IGZhbHNlOwogICAgICAgIHN0YXR1cy50aW1l");
    sb.append("b3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBzdGF0dXMuYXZhaWwg");
    sb.append("PSB0cnVlOwogICAgICAgICAgaWYgKHN0YXR1cy5hZ2FpbikgewogICAgICAgICAgICBzdGF0dXMuYWdh");
    sb.append("aW4gPSBmYWxzZTsKICAgICAgICAgICAgc3RhdHVzLmdvKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwg");
    sb.append("bXMpOwogICAgICAgIGZvbygpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXR1cy5hZ2FpbiA9IHRy");
    sb.append("dWU7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gc3RhdHVzLmdvOwogIH07CiAgc2VsZi5kZWxheSA9");
    sb.append("IGRlbGF5OwoKICAvLyBIRUxQRVIgfCBwcmVwYXJlIGEgZnJlZSB1bnN1YnNjcmliZSBvYmplY3QKICB2");
    sb.append("YXIgbWFrZV91bnN1YiA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIF9fZGF0YTogZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICB9LCBfX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICB9");
    sb.append("OwoKICAvLyBIRUxQRVIgfCBhdWdtZW50IGFuIGV4aXN0aW5nIG9iamVjdCB3aXRoIHVuc3Vic2NyaWJl");
    sb.append("IGRhdGEKICB2YXIgYWRkX3Vuc3ViID0gZnVuY3Rpb24gKG9iaikgewogICAgb2JqLl9fZGF0YSA9IGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgIH07CiAgICBvYmouX192aWV3ID0gZnVuY3Rpb24gKCkgewogICAgfTsKICB9");
    sb.append("OwoKICAvLyBIRUxQRVIgfCBmaXJlIHRoZSB1bnN1YnNjcmliZSBjYWxscyB3aXRoaW4gYW4gb2JqZWN0");
    sb.append("CiAgdmFyIGZpcmVfdW5zdWIgPSBmdW5jdGlvbiAodW5zdWIpIHsKICAgIHVuc3ViLl9fZGF0YSgpOwog");
    sb.append("ICAgdW5zdWIuX192aWV3KCk7CiAgfTsKCiAgdmFyIGlzRW1wdHlEZWx0YSA9IGZ1bmN0aW9uKGRlbHRh");
    sb.append("KSB7CiAgICBpZiAodHlwZW9mKGRlbHRhKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiBmYWxz");
    sb.append("ZTsKICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZWx0YSkpIHsKICAgICAgZm9yICh2YXIgaiA9");
    sb.append("IDA7IGogPCBkZWx0YS5sZW5ndGg7IGorKykgewogICAgICAgIGlmICghaXNFbXB0eURlbHRhKGRlbHRh");
    sb.append("W2pdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNl");
    sb.append("IGlmICh0eXBlb2YoZGVsdGEpID09ICJvYmplY3QiKSB7CiAgICAgIGZvciAodmFyIGsgaW4gZGVsdGEp");
    sb.append("IHsKICAgICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YVtrXSkpIHsKICAgICAgICAgIHJldHVybiBm");
    sb.append("YWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gSEVM");
    sb.append("UEVSIHwgc3Vic2NyaWJlIHRvIHN0YXRlIGFuZCBwb3B1bGF0ZSB1bnN1YnNjcmliZSBvYmplY3QKICB2");
    sb.append("YXIgc3Vic2NyaWJlX3N0YXRlID0gZnVuY3Rpb24gKHN0YXRlLCB1bnN1YikgewogICAgLy8gICYmICFp");
    sb.append("c0VtcHR5RGVsdGEoc3RhdGUuZGF0YSkKICAgIHVuc3ViLl9fZGF0YSA9IGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("IH07CiAgICB1bnN1Yi5fX3ZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwoKICAgIGlmIChzdGF0ZS5k");
    sb.append("YXRhICE9IG51bGwpIHsKICAgICAgdmFyIGRlbHRhID0gcm9vdF9vZihzdGF0ZS5kYXRhKS5kZWx0YTsK");
    sb.append("ICAgICAgaWYgKCFpc0VtcHR5RGVsdGEoZGVsdGEpKSB7CiAgICAgICAgdW5zdWIuX19kYXRhID0gc3Rh");
    sb.append("dGUuZGF0YS50cmVlLnN1YnNjcmliZShkZWx0YSk7CiAgICAgIH0KICAgIH0KICAgIC8vICAmJiAhaXNF");
    sb.append("bXB0eURlbHRhKHN0YXRlLnZpZXcpCiAgICBpZiAoc3RhdGUudmlldyAhPSBudWxsKSB7CiAgICAgIHZh");
    sb.append("ciBkZWx0YSA9IHJvb3Rfb2Yoc3RhdGUudmlldykuZGVsdGE7CiAgICAgIGlmICghaXNFbXB0eURlbHRh");
    sb.append("KGRlbHRhKSkgewogICAgICAgIHVuc3ViLl9fdmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUo");
    sb.append("ZGVsdGEpOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUgdmll");
    sb.append("dyBvYmplY3QKICBzZWxmLnBWID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4geyBzZXJ2aWNl");
    sb.append("OiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50");
    sb.append("OiAidmlldyIgfTsKICB9OwogIHNlbGYubmV3U3RhdGVWaWV3T2YgPSBzZWxmLnBWOwoKICAvLyBSVU5U");
    sb.append("SU1FIHwgU3dpdGNoIHRvIHRoZSBkYXRhIG9iamVjdAogIHNlbGYucEQgPSBmdW5jdGlvbiAoc3RhdGUp");
    sb.append("IHsKICAgIHJldHVybiB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZp");
    sb.append("ZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6ICJkYXRhIiB9OwogIH07CiAgc2VsZi5uZXdTdGF0ZURhdGFP");
    sb.append("ZiA9IHNlbGYucEQ7CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIHJvb3Qgb2JqZWN0IC8gKFJv");
    sb.append("b3QpCiAgc2VsZi5wUiA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6");
    sb.append("IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6");
    sb.append("IHN0YXRlLmN1cnJlbnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICB3");
    sb.append("aGlsZSAocHJpb3IgIT0gbnVsbCkgewogICAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0gcHJpb3I7CiAg");
    sb.append("ICAgIHByaW9yID0gcHJpb3IucGFyZW50OwogICAgfQogICAgcmV0dXJuIG5leHQ7CiAgfTsKICBzZWxm");
    sb.append("Lm5ld1N0YXRlUm9vdE9mID0gc2VsZi5wUjsKCiAgLy8gUlVOVElNRSB8IC4uLyAoVXApCiAgc2VsZi5w");
    sb.append("VSA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZp");
    sb.append("Y2UsIGRhdGE6IHN0YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJl");
    sb.append("bnQgfTsKICAgIHZhciBwcmlvciA9IG5leHRbc3RhdGUuY3VycmVudF07CiAgICBpZiAocHJpb3IucGFy");
    sb.append("ZW50ICE9IG51bGwpIHsKICAgICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9IHByaW9yLnBhcmVudDsKICAg");
    sb.append("IH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZVBhcmVudE9mID0gc2VsZi5wVTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IGRpdmUgb25lIGxldmVsIEludG8gcGF0aDEvcGF0aDIvLi4uLi9wYXRoTgog");
    sb.append("IHNlbGYucEkgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUpIHsKICAgIHZhciBwcmlvciA9IHN0YXRlW3N0");
    sb.append("YXRlLmN1cnJlbnRdOwogICAgaWYgKHByaW9yID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihz");
    sb.append("dGF0ZS5jdXJyZW50ICsgIiBpcyBub3QgcHJlc2VudCIpOwogICAgICByZXR1cm4gc3RhdGU7CiAgICB9");
    sb.append("CiAgICBpZiAoIShuYW1lIGluIHByaW9yLmRlbHRhKSkgewogICAgICBwcmlvci5kZWx0YVtuYW1lXSA9");
    sb.append("IHt9OwogICAgfQogICAgdmFyIG5leHQgPSB7IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsIGRhdGE6IHN0");
    sb.append("YXRlLmRhdGEsIHZpZXc6IHN0YXRlLnZpZXcsIGN1cnJlbnQ6IHN0YXRlLmN1cnJlbnQgfTsKICAgIG5l");
    sb.append("eHRbc3RhdGUuY3VycmVudF0gPSB7CiAgICAgIHRyZWU6IHByaW9yLnRyZWUsCiAgICAgIGRlbHRhOiBw");
    sb.append("cmlvci5kZWx0YVtuYW1lXSwKICAgICAgcGFyZW50OiBwcmlvciwKICAgICAgcGF0aDogbmFtZQogICAg");
    sb.append("fTsKICAgIGlmIChuZXh0LmN1cnJlbnQgPT0gImRhdGEiKSB7CiAgICAgIG5leHQuZGF0YS5jb25uZWN0");
    sb.append("aW9uID0gcHJpb3IuY29ubmVjdGlvbjsKICAgIH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5u");
    sb.append("ZXdTdGF0ZURpdmVJbnRvID0gc2VsZi5wSTsKCiAgLy8gUlVOVElNRSB8IGV4dGVuZCB0aGUgZ2l2ZW4g");
    sb.append("c3RhdGUgd2l0aCB0aGUgdmlldyBoYXZpbmcgYSBzZXBhcmF0ZSBjaGlsZAogIHNlbGYucEVWID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXRlLCBuYW1lKSB7CiAgICBpZiAoIShuYW1lIGluIHN0YXRlLnZpZXcuZGVsdGEpKSB7");
    sb.append("CiAgICAgIHN0YXRlLnZpZXcuZGVsdGFbbmFtZV0gPSB7fTsKICAgIH0KICAgIHJldHVybiB7CiAgICAg");
    sb.append("IHNlcnZpY2U6IHN0YXRlLnNlcnZpY2UsCiAgICAgIGRhdGE6IHN0YXRlLmRhdGEsCiAgICAgIHZpZXc6");
    sb.append("IHsKICAgICAgICB0cmVlOiBzdGF0ZS52aWV3LnRyZWUsCiAgICAgICAgZGVsdGE6IHN0YXRlLnZpZXcu");
    sb.append("ZGVsdGFbbmFtZV0sCiAgICAgICAgcGFyZW50OiBzdGF0ZS52aWV3LAogICAgICAgIHBhdGg6IG5hbWUK");
    sb.append("ICAgICAgfSwKICAgICAgY3VycmVudDogc3RhdGUuY3VycmVudAogICAgfTsKICB9OwogIHNlbGYubmV3");
    sb.append("U3RhdGVDcmVhdGVWaWV3Q2hpbGQgPSBzZWxmLnBFVjsKCiAgc2VsZi5wSUUgPSBmdW5jdGlvbiAoc3Rh");
    sb.append("dGUsIG5hbWUsIGV4cGFuZFZpZXcpIHsKICAgIHZhciBuZXh0ID0gc2VsZi5wSShzdGF0ZSwgbmFtZSk7");
    sb.append("CiAgICBpZiAoZXhwYW5kVmlldykgewogICAgICByZXR1cm4gc2VsZi5wRVYobmV4dCwgbmFtZSk7CiAg");
    sb.append("ICB9IGVsc2UgewogICAgICByZXR1cm4gbmV4dDsKICAgIH0KICB9OwoKICB2YXIgZm9yayA9IGZ1bmN0");
    sb.append("aW9uIChwcmlvclN0YXRlKSB7CiAgICB2YXIgc3RhdGUgPSB7CiAgICAgIHNlcnZpY2U6IHByaW9yU3Rh");
    sb.append("dGUuc2VydmljZSwKICAgICAgZGF0YTogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS5kYXRhKSwKICAg");
    sb.append("ICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgY3VycmVudDogcHJp");
    sb.append("b3JTdGF0ZS5jdXJyZW50CiAgICB9OwogICAgaWYgKHN0YXRlLmRhdGEgIT0gbnVsbCkgewogICAgICBz");
    sb.append("dGF0ZS5kYXRhLmNvbm5lY3Rpb24gPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbjsKICAgIH0KICAg");
    sb.append("IHJldHVybiBzdGF0ZTsKICB9OwoKICAvLyBSVU5USU1FIHwgc3Vic2NyaWJlIGJldHdlZW4gdGhlIHN0");
    sb.append("YXRlIGFuZCB0aGUgb2JqZWN0LgogIC8vIFdoZW4gdGhlIG1lbWJlciBmaWVsZCB3aXRoaW4gc3RhdGUg");
    sb.append("b2YgbmFtZSBjaGFuZ2VzLCBjb3B5IHRoYXQgdmFsdWUgaW50byB0aGUgb2JqIGFuZCBydW4gcmVjb21w");
    sb.append("dXRlKCkKICBzZWxmLlkgPSBmdW5jdGlvbiAoc3RhdGUsIG9iaiwgbmFtZSwgcmVjb21wdXRlKSB7CiAg");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAg");
    sb.append("ICByZWNvbXB1dGUoKTsKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsK");
    sb.append("CiAgc2VsZi5ZMiA9IGZ1bmN0aW9uIChzdGF0ZSwgciwga2V5LCBuYW1lLCByZWNvbXB1dGUpIHsKICAg");
    sb.append("IHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG9iaiA9IHIuX1trZXldOwogICAg");
    sb.append("ICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmVjb21wdXRlKG9iaik7CiAgICAgIHJldHVybiB0cnVl");
    sb.append("OwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1F");
    sb.append("OiBidWlsZCBhbiByeG9iagogIHNlbGYuUlggPSBmdW5jdGlvbiAodmFycykgewogICAgdmFyIG8gPSB7");
    sb.append("fTsKICAgIG8uXyA9IHt9OwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB2YXJzLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgIG8uX1t2YXJzW2tdXSA9IHt9OwogICAgfQogICAgby5fXyA9IGZ1bmN0aW9uKCkge307CiAg");
    sb.append("ICByZXR1cm4gbzsKICB9OwoKICAvLyBSVU5USU1FIHwgSnVzdCBzdWJzY3JpYmVlIHZhbHVlIHRvIHRo");
    sb.append("ZSBvYmplY3QgZmllbGQgb2YgbmFtZSAobm8tcmVjb21wdXRlKQogIHNlbGYuWVMgPSBmdW5jdGlvbiAo");
    sb.append("c3RhdGUsIG9iaiwgbmFtZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBv");
    sb.append("YmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogICAgc3Vic2NyaWJlKHN0");
    sb.append("YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJVTlRJTUUgfCAiVGV4dCIKICBzZWxmLlQgPSBmdW5j");
    sb.append("dGlvbiAodHgpIHsKICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0eCk7CiAgfTsKCiAg");
    sb.append("Ly8gY29udmVydCBhIHZhbHVlIGludG8gYSBib29sZWFuCiAgc2VsZi5CID0gZnVuY3Rpb24odmFsKSB7");
    sb.append("CiAgICBpZiAodmFsID09PSB0cnVlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJu");
    sb.append("IHZhbCA9PSAidHJ1ZSI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx2aWV3LXdyaXRlIG5hbWU9IiIgdmFs");
    sb.append("dWU9IiI+CiAgc2VsZi5WVyA9IGZ1bmN0aW9uKHN0YXRlLCBuYW1lLCByeE9iaikgewogICAgcnhPYmou");
    sb.append("X18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgdmFy");
    sb.append("IHZhbHVlID0gcnhPYmoudmFsdWU7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24i");
    sb.append("KSB7CiAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvYmpb");
    sb.append("bmFtZV0gPSB2YWx1ZTsKICAgICAgfQogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcs");
    sb.append("IG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRSB8IDxsb29rdXAgcGF0aD0uLi4+CiAgc2VsZi5MID0gZnVuY3Rpb24gKHN0YXRlLCBu");
    sb.append("YW1lKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAgdmFyIHN1");
    sb.append("YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBkb20ubm9kZVZhbHVlID0gdmFsdWU7CiAgICB9Owog");
    sb.append("ICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0dXJuIGRvbTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FIHwgPGxvb2t1cCBwYXRoPS4uLiB0cmFuc2Zvcm09IiR0cmFuc2Zvcm0iIC8+CiAgc2VsZi5M");
    sb.append("VCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSwgdHJhbnNmb3JtKSB7CiAgICB2YXIgZG9tID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAg");
    sb.append("ICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIGRvbS5ub2RlVmFsdWUgPSB0cmFuc2Zvcm0odmFs");
    sb.append("dWUpOwogICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogICAgcmV0");
    sb.append("dXJuIGRvbTsKICB9OwoKICBzZWxmLkxoID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lKSB7CiAgICB2YXIg");
    sb.append("ZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIGRvbS5pbm5lckhUTUwg");
    sb.append("PSB2YWx1ZTsKICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAg");
    sb.append("IHJldHVybiBkb207CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb29rdXAgcGF0aD0uLi4gdHJhbnNmb3Jt");
    sb.append("PSIkdHJhbnNmb3JtIiAvPgogIHNlbGYuTFRkVCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSwgdHJhbnNm");
    sb.append("b3JtLCBmcmVxKSB7CiAgICB2YXIgZG9tID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAg");
    sb.append("Ly8gY3JlYXRlIHRoZSBuZXh1cyBvYmplY3QKICAgIHZhciBvYmogPSB7fTsKICAgIG9iai5mcmVxID0g");
    sb.append("ZnJlcTsKICAgIG9iai52YWx1ZSA9ICIiOwoKICAgIC8vIHVwZGF0ZSB3aWxsIGV4ZWN1dGUgdGhlIHRy");
    sb.append("YW5zZm9ybSBvbiB0aGUgdmFsdWUKICAgIG9iai51cGRhdGUgPSBmdW5jdGlvbigpIHsKICAgICAgZG9t");
    sb.append("Lm5vZGVWYWx1ZSA9IHRyYW5zZm9ybSh0aGlzLnZhbHVlKTsKICAgIH0uYmluZChvYmopOwoKICAgIC8v");
    sb.append("IHN1YnNjcmlwdGlvbiB3aWxsIHN5bmMgdGhlIHZhbHVlCiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZh");
    sb.append("bHVlKSB7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVl");
    sb.append("OwogICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgIH0KICAgIH0uYmluZChvYmopOwoKICAgIC8vIHJl");
    sb.append("ZnJlc2ggd2lsbCByZS1leGVjdXRlIHRoZSB1cGRhdGUgKGFuZCB0aHVzIHRoZSB0cmFuc2Zvcm0pCiAg");
    sb.append("ICBvYmoucmVmcmVzaCA9IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICBpZiAo");
    sb.append("ZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7IC8vIHdpbGwgcnVuIHNvIGxvbmcgYXMgdGhlIERP");
    sb.append("TSBjb250YWlucyB0aGUgbm9kZSB3ZSBtYW5pcHVsYXRlZAogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0");
    sb.append("KHRoaXMucmVmcmVzaCwgdGhpcy5mcmVxKTsKICAgICAgfQogICAgfS5iaW5kKG9iaik7CiAgICAvLyBr");
    sb.append("aWNrIG9mZiB0aGUgYXV0byB0cmFuc2Zvcm0KICAgIHdpbmRvdy5zZXRUaW1lb3V0KG9iai5yZWZyZXNo");
    sb.append("LCBmcmVxKTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAg");
    sb.append("fTsKCiAgLy8gUlVOVElNRSB8IDx0YWc+CiAgc2VsZi5FID0gZnVuY3Rpb24gKHRhZywgbnMpIHsKICAg");
    sb.append("IGlmIChucyA9PSB1bmRlZmluZWQgfHwgbnMgPT0gbnVsbCkgewogICAgICB2YXIgZG9tID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCh0YWcpOwogICAgICBpZiAodGFnID09ICJzZWxlY3QiKSB7CiAgICAgICAg");
    sb.append("ZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgeyBkb20ucnh2YWx1ZSA9IGRv");
    sb.append("bS52YWx1ZTsgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRvbTsKICAgIH0gZWxzZSB7CiAgICAgIHZh");
    sb.append("ciByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsIHRhZyk7CiAgICAgIHJlc3VsdC5z");
    sb.append("ZXRBdHRyaWJ1dGUoInhtbG5zIiwgbnMpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH07Cgog");
    sb.append("IHNlbGYuQ1N0ID0gZnVuY3Rpb24gKHBhcmVudCwgc3RhdGUsIGNoaWxkTWFrZXJDb25uZWN0ZWQsIGNo");
    sb.append("aWxkTWFrZXJEaXNjb25uZWN0ZWQpIHsKICAgIHZhciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIGlm");
    sb.append("ICghc3RhdGUuZGF0YS5jb25uZWN0aW9uKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHN0YXRlLmRh");
    sb.append("dGEuY29ubmVjdGlvbi5jb25uZWN0ZWQoZnVuY3Rpb24oY3MpIHsKICAgICAgaWYgKHRoaXMucHJpb3Ig");
    sb.append("PT0gY3MpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbnVrZShwYXJlbnQpOwogICAgICBm");
    sb.append("aXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgdGhpcy5wcmlvciA9IGNzOwogICAgICB2YXIgbmV3U3RhdGUg");
    sb.append("PSBmb3JrKHN0YXRlKTsKICAgICAgaWYgKGNzKSB7CiAgICAgICAgY2hpbGRNYWtlckNvbm5lY3RlZChw");
    sb.append("YXJlbnQsIG5ld1N0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlsZE1ha2VyRGlzY29ubmVj");
    sb.append("dGVkKHBhcmVudCwgbmV3U3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShuZXdTdGF0");
    sb.append("ZSwgdW5zdWIpOwogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jb250YWlucyhwYXJlbnQpOwogICAg");
    sb.append("fS5iaW5kKHtwcmlvcjpudWxsfSkpOwogIH07CgogIC8vIFJVTlRJTUUgfCA8bG9jYWwtc3RvcmFnZS1w");
    sb.append("b2xsIGtleT0ka2V5IFttcz0kbXNdPgogIHNlbGYuTG9TdFBvID0gZnVuY3Rpb24ocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZvdW5kLCBjaGlsZE1ha2VyTm90Rm91bmQpIHsKICAgIHZh");
    sb.append("ciB1bnN1YiA9IG1ha2VfdW5zdWIoKTsKICAgIHZhciBzbSA9IHt9OwogICAgc20ua2V5ID0gbnVsbDsK");
    sb.append("ICAgIHNtLm1zID0gNTAwMDsKICAgIHNtLmxhc3QgPSAiISI7CiAgICBzbS5wID0gZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgIGlmICh0aGlzLmtleSA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IHZhciB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTsKICAgICAgaWYgKHZhbHVl");
    sb.append("ID09IHRoaXMubGFzdCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxhc3QgPSB2");
    sb.append("YWx1ZTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFy");
    sb.append("IHRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgIHZhciBzdGF0ZSA9IHsKICAgICAgICBzZXJ2aWNl");
    sb.append("OiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRl");
    sb.append("LmNvbm5lY3Rpb24sIHRyZWU6IHRyZWUsIGRlbHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxs");
    sb.append("IH0sCiAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICBj");
    sb.append("dXJyZW50OiAiZGF0YSIKICAgICAgfTsKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICBj");
    sb.append("aGlsZE1ha2VyTm90Rm91bmQocGFyZW50LCBzdGF0ZSk7CiAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0");
    sb.append("YXRlLCB1bnN1Yik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGRNYWtlckZvdW5kKHBhcmVudCwg");
    sb.append("c3RhdGUpOwogICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgIHRyZWUu");
    sb.append("dXBkYXRlKHRyZWUuTWFrZURlbHRhKEpTT04ucGFyc2UodmFsdWUpKSk7CiAgICAgIH0KCiAgICB9LmJp");
    sb.append("bmQoc20pOwogICAgcnhPYmouX18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24gKCkgewogICAgICBpZiAo");
    sb.append("J2tleScgaW4gcnhPYmopIHsKICAgICAgICB0aGlzLmtleSA9IHJ4T2JqLmtleTsKICAgICAgfQogICAg");
    sb.append("ICBpZiAoJ21zJyBpbiByeE9iaikgewogICAgICAgIHRoaXMubXMgPSBwYXJzZUludChyeE9iai5tcyk7");
    sb.append("CiAgICAgICAgaWYgKGlzTmFOKHRoaXMubXMpKSB7CiAgICAgICAgICB0aGlzLm1zID0gNTAwMDsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5wKCk7CiAgICB9LmJpbmQoc20pKTsKCiAgICBzbS50aW1l");
    sb.append("b3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHBhcmVudCkp");
    sb.append("IHsKICAgICAgICB0aGlzLnAoKTsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnRpbWVvdXQs");
    sb.append("IHRoaXMubXMpOwogICAgICB9CiAgICB9LmJpbmQoc20pOwogICAgd2luZG93LnNldFRpbWVvdXQoc20u");
    sb.append("dGltZW91dCwgNTApOwogIH07CgogIC8vIFJVTlRJTUUgfCA8ZG9jdW1lbnQtZ2V0IHNwYWNlPSIkc3Bh");
    sb.append("Y2UiIGtleT0iJGtleSIgdXJsPSIkcGF0aCIgc2VhcmNoOng9Ii4uLiIgLi4uPgogIHNlbGYuRGNHID0g");
    sb.append("ZnVuY3Rpb24ocGFyZW50LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckZldGNoZWQsIGNoaWxk");
    sb.append("TWFrZXJGYWlsZWQpIHsKICAgIC8vIFRPRE8KICB9OwoKICAvLyBSVU5USU1FIHwgPGRvbWFpbi1nZXQg");
    sb.append("dXJsPSJwYXRoIiBzZWFyY2g6eD0iLi4uIiAuLi4+CiAgc2VsZi5ERyA9IGZ1bmN0aW9uKHBhcmVudCwg");
    sb.append("cHJpb3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJGZXRjaGVkLCBjaGlsZE1ha2VyRmFpbGVkLCBkZWxh");
    sb.append("eUxpbWl0KSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICB2YXIgZGVsYXlUb1VzZSA9");
    sb.append("IHR5cGVvZihkZWxheUxpbWl0KSA9PSAibnVtYmVyIiA/IGRlbGF5TGltaXQgOiAyNTA7CiAgICB2YXIg");
    sb.append("c2VsZlBhcmVudCA9IHNlbGY7CiAgICByeE9iai5fXyA9IGRlYm91bmNlKDUwLCBkZWxheShkZWxheVRv");
    sb.append("VXNlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCd1cmwnIGluIHJ4T2JqKSkgewogICAgICAgIHJl");
    sb.append("dHVybjsKICAgICAgfQogICAgICB2YXIgYXJncyA9IFtdOwogICAgICB2YXIgaWRlbnRpdHkgPSBudWxs");
    sb.append("OwogICAgICBmb3IgKHZhciBhcmcgaW4gcnhPYmopIHsKICAgICAgICB2YXIgdmFsID0gcnhPYmpbYXJn");
    sb.append("XTsKICAgICAgICBzd2l0Y2ggKGFyZykgewogICAgICAgICAgY2FzZSAiX18iOgogICAgICAgICAgY2Fz");
    sb.append("ZSAiXyI6CiAgICAgICAgICBjYXNlICJ1cmwiOgogICAgICAgICAgY2FzZSAicmVkaXJlY3QiOgogICAg");
    sb.append("ICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImlkZW50aXR5IjoKICAgICAgICAgICAgaWYgKHR5");
    sb.append("cGVvZih2YWwpID09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgdmFyIGlkTG9va3VwID0gc2VsZlBh");
    sb.append("cmVudC5JRChyeE9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IHJ4T2JqLnJlZGlyZWN0OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmIChpZExvb2t1");
    sb.append("cC5hYm9ydCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("ICAgICBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("IGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiAr");
    sb.append("IGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHVybCA9");
    sb.append("IHJ4T2JqLnVybCArIChhcmdzLmxlbmd0aCA+IDAgPyAiPyIgKyBhcmdzLmpvaW4oIiYiKSA6ICIiKTsK");
    sb.append("ICAgICAgdGhpcy5nZW4gKys7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICBpZiAodGhpcy54aHR0cC5yZWFkeVN0YXRlID09IDQgJiYgdGhpcy5nZW4g");
    sb.append("PT0gc2VsZi5nZW4pIHsKICAgICAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICAgICAgbnVrZShw");
    sb.append("YXJlbnQpOwogICAgICAgICAgdmFyIHRyZWUgPSBuZXcgQWRhbWFUcmVlKCk7CiAgICAgICAgICB2YXIg");
    sb.append("c3RhdGUgPSB7CiAgICAgICAgICAgIHNlcnZpY2U6IHByaW9yU3RhdGUuc2VydmljZSwKICAgICAgICAg");
    sb.append("ICAgZGF0YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6IHRyZWUsIGRl");
    sb.append("bHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAgICAgIHZpZXc6IG5ld19k");
    sb.append("ZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgICAgICAgIGN1cnJlbnQ6ICJkYXRhIgogICAg");
    sb.append("ICAgICAgfTsKCiAgICAgICAgICBpZiAodGhpcy54aHR0cC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciB0eXBlID0gdGhpcy54aHR0cC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7");
    sb.append("CiAgICAgICAgICAgIGlmICh0eXBlID09ICJhcHBsaWNhdGlvbi9qc29uIikgewogICAgICAgICAgICAg");
    sb.append("IHZhciB0b1B1c2ggPSB0cmVlLk1ha2VEZWx0YShKU09OLnBhcnNlKHRoaXMueGh0dHAucmVzcG9uc2VU");
    sb.append("ZXh0KSk7CiAgICAgICAgICAgICAgY2hpbGRNYWtlckZldGNoZWQocGFyZW50LCBzdGF0ZSk7CiAgICAg");
    sb.append("ICAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgICAgICAgICAgdHJlZS51");
    sb.append("cGRhdGUodG9QdXNoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjaGlsZE1ha2Vy");
    sb.append("RmFpbGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwg");
    sb.append("dW5zdWIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGlsZE1h");
    sb.append("a2VyRmFpbGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUs");
    sb.append("IHVuc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0uYmluZCh7Z2VuOnNlbGYuZ2VuLCB4");
    sb.append("aHR0cDp4aHR0cH0pOwogICAgICB4aHR0cC5vcGVuKCJHRVQiLCAgc2VsZi5iYXNlICsgIi9+ZCIgKyB1");
    sb.append("cmwsIHRydWUpOwogICAgICBpZiAoaWRlbnRpdHkgIT0gbnVsbCkgewogICAgICAgIHhodHRwLnNldFJl");
    sb.append("cXVlc3RIZWFkZXIoIkF1dGhvcml6YXRpb24iLCAiQmVhcmVyICIgKyBpZGVudGl0eSk7CiAgICAgIH0K");
    sb.append("ICAgICAgeGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgeGh0dHAuc2VuZCgpOwogICAg");
    sb.append("fS5iaW5kKHt1cmw6IiIsIGdlbjowLCBiYXNlOnNlbGYucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0");
    sb.append("fSkpKTsKICAgIHJ4T2JqLl9fKCk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxwaWNrIG5hbWU9Li4uPgog");
    sb.append("IHNlbGYuUCA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1ha2VyQ29u");
    sb.append("bmVjdGVkLCBjaGlsZE1ha2VyRGlzY29ubmVjdGVkLCBrZWVwT3BlbikgewogICAgdmFyIHVuc3ViID0g");
    sb.append("bWFrZV91bnN1YigpOwogICAgcnhPYmouX18gPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1l");
    sb.append("JyBpbiByeE9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmFtZSA9");
    sb.append("PSByeE9iai5uYW1lKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9IGdldF9j");
    sb.append("b25uZWN0aW9uX29iaihyeE9iai5uYW1lKTsKICAgICAgdGhpcy5uYW1lID0gcnhPYmoubmFtZTsKICAg");
    sb.append("ICAgY28uY29ubmVjdGVkKGZ1bmN0aW9uIChjcykgewogICAgICAgIGlmICh0aGlzLnJlbmRlcmVkICYm");
    sb.append("IGtlZXBPcGVuKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIG51a2UocGFyZW50");
    sb.append("KTsKICAgICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgICB2YXIgc3RhdGUgPSB7CiAgICAgICAg");
    sb.append("ICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgICBkYXRhOiB7IGNvbm5lY3Rpb246");
    sb.append("IGNvLCB0cmVlOiBjby50cmVlLCBkZWx0YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAog");
    sb.append("ICAgICAgICAgdmlldzogbmV3X2RlbHRhX2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICAgIGN1");
    sb.append("cnJlbnQ6ICJkYXRhIgogICAgICAgIH07CiAgICAgICAgaWYgKGNzKSB7CiAgICAgICAgICB0aGlzLnJl");
    sb.append("bmRlcmVkID0gdHJ1ZTsKICAgICAgICAgIGNoaWxkTWFrZXJDb25uZWN0ZWQocGFyZW50LCBzdGF0ZSk7");
    sb.append("CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoaWxkTWFrZXJEaXNjb25uZWN0ZWQocGFyZW50LCBz");
    sb.append("dGF0ZSk7CiAgICAgICAgfQogICAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAg");
    sb.append("ICAgIC8vIFRPRE86IHJldHVybiBmYWxzZSB0byB1bnN1YgogICAgICAgIHJldHVybiB0cnVlOwogICAg");
    sb.append("ICB9LmJpbmQodGhpcykpOwogICAgfS5iaW5kKHsgbmFtZTogIiIsIHJlbmRlcmVkOmZhbHNlIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUUgfCA8dGVtcGxhdGUgbmFtZT0iLi4uIj4KICBzZWxmLlRQID0gZnVuY3Rp");
    sb.append("b24gKG5hbWUsIGZvbykgewogICAgdGVtcGxhdGVzW25hbWVdID0gZm9vOwogIH07CgogIC8vIGNvbmZp");
    sb.append("ZzppZj0ia2V5PXZhbHVlIgogIHNlbGYuQ0ZHdCA9IGZ1bmN0aW9uIChjb25maWcsIGtleSwgdmFsdWUp");
    sb.append("IHsKICAgIGlmIChrZXkgaW4gY29uZmlnKSB7CiAgICAgIHJldHVybiBjb25maWdba2V5XSA9PSB2YWx1");
    sb.append("ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwogIC8vIGNvbmZpZzppZj0ia2V5IgogIHNlbGYu");
    sb.append("Q0ZHYiA9IGZ1bmN0aW9uIChjb25maWcsIGtleSkgewogICAgY29uc29sZS5sb2coY29uZmlnKTsKICAg");
    sb.append("IGlmIChrZXkgaW4gY29uZmlnKSB7CiAgICAgIHJldHVybiBjb25maWdba2V5XSA9PT0gdHJ1ZTsKICAg");
    sb.append("IH0KICAgIHJldHVybiBmYWxzZTsKICB9OwoKICAvLyBSVU5USU1FIHwgPHRhZyByeDp0ZW1wbGF0ZT0k");
    sb.append("bmFtZT4KICBzZWxmLlVUID0gZnVuY3Rpb24gKHBhcmVudCwgc3RhdGUsIG5hbWUsIGNoaWxkX21ha2Vy");
    sb.append("LCBjZmcpIHsKICAgIHZhciBmb28gPSB0ZW1wbGF0ZXNbbmFtZV07CiAgICBpZiAodHlwZW9mKGZvbykg");
    sb.append("PT0gImZ1bmN0aW9uIikgewogICAgICBmb28ocGFyZW50LCBzdGF0ZSwgY2hpbGRfbWFrZXIsIGNmZyk7");
    sb.append("CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gZmluZCB0ZW1wbGF0ZTog");
    sb.append("IiArIG5hbWUpOwogICAgfQogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4OnN3aXRjaD1wYXRoIC4u");
    sb.append("PgogIHNlbGYuU1cgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBuYW1lLCBjaGlsZHJlbk1h");
    sb.append("a2VyKSB7CiAgICB2YXIgc3dzdCA9IHsgcHJpb3I6IG51bGwgfTsKICAgIGFkZF91bnN1Yihzd3N0KTsK");
    sb.append("ICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09IHRoaXMucHJp");
    sb.append("b3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5wcmlvciA9IHZhbHVlOwogICAg");
    sb.append("ICBmaXJlX3Vuc3ViKHRoaXMpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZv");
    sb.append("cmsocHJpb3JTdGF0ZSk7CiAgICAgIGNoaWxkcmVuTWFrZXIocGFyZW50LCBzZWxmLnBEKHN0YXRlKSwg");
    sb.append("IiIgKyB2YWx1ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdGhpcyk7CiAgICB9LmJpbmQo");
    sb.append("c3dzdCk7CiAgICBzdWJzY3JpYmUocHJpb3JTdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5U");
    sb.append("SU1FIHwgPHRhZyByeDppdGVyYXRlPXBhdGggLi4uPgogIHNlbGYuSVQgPSBmdW5jdGlvbiAocGFyZW50");
    sb.append("RG9tLCBzdGF0ZSwgbmFtZSwgZXhwYW5kVmlldywgbWFrZXIsIGhpZGVPblplcm8pIHsKICAgIHZhciBp");
    sb.append("dF9zdGF0ZSA9IHNlbGYucElFKHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3KTsKICAgIHZhciBkb21CeUtl");
    sb.append("eSA9IHt9OwogICAgdmFyIHZpZXdVblN1YkJ5S2V5ID0ge307CiAgICB2YXIga2lsbCA9IGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgZm9yICh2YXIga2V5IGluIHZpZXdVblN1YkJ5S2V5KSB7CiAgICAgICAgZmlyZV91");
    sb.append("bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5");
    sb.append("XTsKICAgICAgfQogICAgICBmb3IgKHZhciBrZXkgaW4gZG9tQnlLZXkpIHsKICAgICAgICBkZWxldGUg");
    sb.append("ZG9tQnlLZXlba2V5XTsKICAgICAgfQogICAgfTsKICAgIGlmIChoaWRlT25aZXJvKSB7CiAgICAgIHBh");
    sb.append("cmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgfQoKICAgIHZhciBzaWduYWxzID0ge2lz");
    sb.append("TmV3OmZhbHNlfTsKCiAgICB2YXIgc3ViID0gewogICAgICAiKyI6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxmLnBJRShpdF9zdGF0ZSwga2V5LCBleHBhbmRWaWV3");
    sb.append("KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgICAgIHZhciBkb20gPSBtYWtl");
    sb.append("cihuZXdfc3RhdGUpOwogICAgICAgIHNpZ25hbHMuaXNOZXcgPSB0cnVlOwogICAgICAgIGRvbUJ5S2V5");
    sb.append("W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlba2V5XSA9IHVuc3ViOwogICAgICAgIHBh");
    sb.append("cmVudERvbS5hcHBlbmQoZG9tKTsKICAgICAgICB2YXIgaXRlbV9kZWx0YSA9IG5ld19zdGF0ZS5kYXRh");
    sb.append("LmRlbHRhOwogICAgICAgIG5ld19zdGF0ZS5kYXRhLmRlbHRhID0ge307CiAgICAgICAgaWYgKG5ld19z");
    sb.append("dGF0ZS5kYXRhLnBhcmVudCAmJiBuZXdfc3RhdGUuZGF0YS5wYXRoICYmIG5ld19zdGF0ZS5kYXRhLnBh");
    sb.append("cmVudC5kZWx0YSkgewogICAgICAgICAgbmV3X3N0YXRlLmRhdGEucGFyZW50LmRlbHRhW25ld19zdGF0");
    sb.append("ZS5kYXRhLnBhdGhdID0gbmV3X3N0YXRlLmRhdGEuZGVsdGE7CiAgICAgICAgfQogICAgICAgIHN1YnNj");
    sb.append("cmliZV9zdGF0ZShuZXdfc3RhdGUsIHVuc3ViKTsKICAgICAgICBpZiAoZXhwYW5kVmlldykgewogICAg");
    sb.append("ICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXRoX3RvKG5ld19zdGF0ZS52aWV3LCB7IiRrZXki");
    sb.append("OiBrZXl9KSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaXRlbV9kZWx0YTsKICAgICAgfSwKICAg");
    sb.append("ICAgIi0iOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKGtleSBpbiBkb21CeUtleSkgewogICAg");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICAgICAgcGFyZW50RG9tLnJlbW92ZUNoaWxkKGRvbUJ5S2V5W2tleV0p");
    sb.append("OwogICAgICAgICAgfSBjYXRjaCAoZXgpIHt9CiAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICB9CiAgICAgICAgaWYgKGtleSBpbiB2aWV3VW5TdWJCeUtleSkgewogICAgICAgICAgZmly");
    sb.append("ZV91bnN1Yih2aWV3VW5TdWJCeUtleVtrZXldKTsKICAgICAgICAgIGRlbGV0ZSB2aWV3VW5TdWJCeUtl");
    sb.append("eVtrZXldOwogICAgICAgIH0KICAgICAgfSwKICAgICAgIn4iOiBmdW5jdGlvbiAob3JkKSB7CiAgICAg");
    sb.append("ICAgaWYgKGhpZGVPblplcm8pIHsKICAgICAgICAgIGlmIChvcmQubGVuZ3RoID09IDApIHsKICAgICAg");
    sb.append("ICAgICAgcGFyZW50RG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgICBwYXJlbnREb20uc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICBudWtlKHBhcmVudERvbSk7CiAgICAgICAgaWYgKG9yZCA9PSBudWxsKSB7CiAgICAg");
    sb.append("ICAgICBraWxsKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgb3JkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBwYXJlbnREb20uYXBwZW5kKGRvbUJ5");
    sb.append("S2V5W29yZFtrXV0pOwogICAgICAgIH0KICAgICAgICBpZiAoJ3J4dmFsdWUnIGluIHBhcmVudERvbSkg");
    sb.append("ewogICAgICAgICAgcGFyZW50RG9tLnZhbHVlID0gcGFyZW50RG9tLnJ4dmFsdWU7CiAgICAgICAgfQog");
    sb.append("ICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgib3JkZXJlZCIpKTsKICAgICAg");
    sb.append("ICBpZiAoc2lnbmFscy5pc05ldykgewogICAgICAgICAgcGFyZW50RG9tLmRpc3BhdGNoRXZlbnQobmV3");
    sb.append("IEV2ZW50KCJuZXciKSk7CiAgICAgICAgICBzaWduYWxzLmlzTmV3ID0gZmFsc2U7CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICB9OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIC8vIFJV");
    sb.append("TlRJTUUgfCA8aW5saW5lLWl0ZXJhdGUgcGF0aD0iLi4uIj4uLi48L2lubGluZS10ZW1wbGF0ZT4KICAv");
    sb.append("LyBSVU5USU1FIHwgPHRhZyByeDpyZXBsaWNhdGU9Ii4uLiIgLi4uPi4uLjwvdGFnPgogIHNlbGYuSUlU");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc2libGluZ0RvbSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcs");
    sb.append("IG1ha2VyKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJRShzdGF0ZSwgbmFtZSwgZXhwYW5kVmll");
    sb.append("dyk7CiAgICB2YXIgZG9tQnlLZXkgPSB7fTsKICAgIHZhciB2aWV3VW5TdWJCeUtleSA9IHt9OwogICAg");
    sb.append("dmFyIGtpbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiB2aWV3VW5TdWJCeUtl");
    sb.append("eSkgewogICAgICAgIGZpcmVfdW5zdWIodmlld1VuU3ViQnlLZXlba2V5XSk7CiAgICAgICAgZGVsZXRl");
    sb.append("IHZpZXdVblN1YkJ5S2V5W2tleV07CiAgICAgIH0KICAgICAgZm9yICh2YXIga2V5IGluIGRvbUJ5S2V5");
    sb.append("KSB7CiAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgIH0KICAgIH07CiAgICB2YXIgc2ln");
    sb.append("bmFscyA9IHtpc05ldzpmYWxzZX07CiAgICB2YXIgc3ViID0gewogICAgICAiKyI6IGZ1bmN0aW9uIChr");
    sb.append("ZXkpIHsKICAgICAgICB2YXIgbmV3X3N0YXRlID0gZm9yayhzZWxmLnBJRShpdF9zdGF0ZSwga2V5LCBl");
    sb.append("eHBhbmRWaWV3KSk7CiAgICAgICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgICAgIHZhciBk");
    sb.append("b20gPSBtYWtlcihuZXdfc3RhdGUpOwogICAgICAgIHNpZ25hbHMuaXNOZXcgPSB0cnVlOwogICAgICAg");
    sb.append("IGRvbUJ5S2V5W2tleV0gPSBkb207CiAgICAgICAgdmlld1VuU3ViQnlLZXlba2V5XSA9IHVuc3ViOwog");
    sb.append("ICAgICAgIHZhciBiZWZvcmUgPSBzaWJsaW5nRG9tID09IG51bGwgPyBwYXJlbnREb20uZmlyc3RDaGls");
    sb.append("ZCA6IHNpYmxpbmdEb20ubmV4dFNpYmxpbmc7CiAgICAgICAgcGFyZW50RG9tLmluc2VydEJlZm9yZShk");
    sb.append("b20sIGJlZm9yZSk7CiAgICAgICAgdmFyIGl0ZW1fZGVsdGEgPSBuZXdfc3RhdGUuZGF0YS5kZWx0YTsK");
    sb.append("ICAgICAgICBuZXdfc3RhdGUuZGF0YS5kZWx0YSA9IHt9OwogICAgICAgIGlmIChuZXdfc3RhdGUuZGF0");
    sb.append("YS5wYXJlbnQgJiYgbmV3X3N0YXRlLmRhdGEucGF0aCAmJiBuZXdfc3RhdGUuZGF0YS5wYXJlbnQuZGVs");
    sb.append("dGEpIHsKICAgICAgICAgIG5ld19zdGF0ZS5kYXRhLnBhcmVudC5kZWx0YVtuZXdfc3RhdGUuZGF0YS5w");
    sb.append("YXRoXSA9IG5ld19zdGF0ZS5kYXRhLmRlbHRhOwogICAgICAgIH0KICAgICAgICBzdWJzY3JpYmVfc3Rh");
    sb.append("dGUobmV3X3N0YXRlLCB1bnN1Yik7CiAgICAgICAgaWYgKGV4cGFuZFZpZXcpIHsKICAgICAgICAgIHN0");
    sb.append("YXRlLnZpZXcudHJlZS51cGRhdGUocGF0aF90byhuZXdfc3RhdGUudmlldywgeyIka2V5Ijoga2V5fSkp");
    sb.append("OwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIGl0ZW1fZGVsdGE7CiAgICAgIH0sCiAgICAgICItIjog");
    sb.append("ZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChrZXkgaW4gZG9tQnlLZXkpIHsKICAgICAgICAgIHRy");
    sb.append("eSB7CiAgICAgICAgICAgIHBhcmVudERvbS5yZW1vdmVDaGlsZChkb21CeUtleVtrZXldKTsKICAgICAg");
    sb.append("ICAgIH0gY2F0Y2ggKGV4KSB7fQogICAgICAgICAgZGVsZXRlIGRvbUJ5S2V5W2tleV07CiAgICAgICAg");
    sb.append("fQogICAgICAgIGlmIChrZXkgaW4gdmlld1VuU3ViQnlLZXkpIHsKICAgICAgICAgIGZpcmVfdW5zdWIo");
    sb.append("dmlld1VuU3ViQnlLZXlba2V5XSk7CiAgICAgICAgICBkZWxldGUgdmlld1VuU3ViQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0sCiAgICAgICJ+IjogZnVuY3Rpb24gKG9yZCkgewogICAgICAgIGlmIChv");
    sb.append("cmQgPT0gbnVsbCkgewogICAgICAgICAga2lsbCgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gb3JkLmxlbmd0aCAtIDE7IGsgPj0gMDsgay0tKSB7CiAgICAgICAg");
    sb.append("ICB2YXIgYmVmb3JlID0gc2libGluZ0RvbSA9PSBudWxsID8gcGFyZW50RG9tLmZpcnN0Q2hpbGQgOiBz");
    sb.append("aWJsaW5nRG9tLm5leHRTaWJsaW5nOwogICAgICAgICAgcGFyZW50RG9tLmluc2VydEJlZm9yZShkb21C");
    sb.append("eUtleVtvcmRba11dLCBiZWZvcmUpOwogICAgICAgIH0KICAgICAgICBwYXJlbnREb20uZGlzcGF0Y2hF");
    sb.append("dmVudChuZXcgRXZlbnQoIm9yZGVyZWQiKSk7CiAgICAgICAgaWYgKHNpZ25hbHMuaXNOZXcpIHsKICAg");
    sb.append("ICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgibmV3IikpOwogICAgICAgICAg");
    sb.append("c2lnbmFscy5pc05ldyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIHN1YnNjcmli");
    sb.append("ZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICBzZWxmLmZpZGJhc2lzID0gMDsKICBzZWxmLkZBID0g");
    sb.append("ZnVuY3Rpb24gKGRvbSwgc3RhdGUsIHJ4b2JqLCB1c2VEb21haW4sIG1ha2VyKSB7CgogICAgdmFyIGlk");
    sb.append("ID0gIl9hdXRvX2ZpZF8iICsgc2VsZi5maWRiYXNpczsKICAgIHNlbGYuZmlkYmFzaXMrKzsKCiAgICB2");
    sb.append("YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgaW5wdXQuaWQgPSBp");
    sb.append("ZDsKICAgIGlucHV0LnR5cGUgPSAiZmlsZSI7CiAgICBpbnB1dC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUi");
    sb.append("OwogICAgaW5wdXQuaWdub3JlX2J1aWxkX29iamVjdCA9IHRydWU7CiAgICBkb20uYXBwZW5kQ2hpbGQo");
    sb.append("aW5wdXQpOwogICAgdmFyIHZhbHVlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAg");
    sb.append("ZG9tLmFwcGVuZENoaWxkKHZhbHVlcyk7CgogICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgibGFiZWwiKTsKICAgIGxhYmVsLmh0bWxGb3IgPSBpZDsKICAgIG1ha2VyKHN0YXRlLCBsYWJl");
    sb.append("bCk7CiAgICBkb20uYXBwZW5kQ2hpbGQobGFiZWwpOwoKICAgIC8vIFRPRE86IGluZGV4IGxhYmVsIGNo");
    sb.append("aWxkcmVuCgogICAgdmFyIGhhbmRsZV9maW5kaW5nX2ZpbGUgPSBmdW5jdGlvbigpIHsKICAgICAgY29u");
    sb.append("c29sZS5sb2coInBpY2tpbmcgYSBmaWxlIik7CiAgICB9OwogICAgdmFyIGhhbmRsZV9zdGFydGVkID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWQgc3RhcnRlZCIpOwogICAgfTsKICAg");
    sb.append("IHZhciBoYW5kbGVfZmFpbHVyZSA9IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICBjb25zb2xlLmxvZygi");
    sb.append("ZmFpbGVkOiIgKyByZWFzb24pOwogICAgfTsKICAgIHZhciBoYW5kbGVfc3RhdHVzID0gZnVuY3Rpb24o");
    sb.append("YXQsIG14KSB7CiAgICAgIGNvbnNvbGUubG9nKCJ1cGxvYWQgc3RhdHVzOiIgKyBhdCArICIvIiArIG14");
    sb.append("KTsKICAgIH07CiAgICB2YXIgaGFuZGxlX3N1Y2Nlc3MgPSBmdW5jdGlvbihpZCkgewogICAgICB2YXIg");
    sb.append("aWRBc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICBpZEFzRWxl");
    sb.append("bWVudC50eXBlID0gImhpZGRlbiI7CiAgICAgIGlkQXNFbGVtZW50Lm5hbWUgPSByeG9iai5uYW1lOwog");
    sb.append("ICAgICBpZEFzRWxlbWVudC52YWx1ZSA9IGlkOwogICAgICBpZiAoIWlkQXNFbGVtZW50Lm5hbWUuZW5k");
    sb.append("c1dpdGgoIisiKSkgewogICAgICAgIG51a2UodmFsdWVzKTsKICAgICAgfQogICAgICB2YWx1ZXMuYXBw");
    sb.append("ZW5kQ2hpbGQoaWRBc0VsZW1lbnQpOwogICAgICAvLyBUT0RPOiBhZGQgYSBwcmV2aWV3IHRoaW5neQog");
    sb.append("ICAgfTsKICAgIGxhYmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlX2ZpbmRpbmdfZmls");
    sb.append("ZSk7CiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKAogICAgICAnY2hhbmdlJywKICAgICAgZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICAgIGhhbmRsZV9zdGFydGVkKCk7CiAgICAgICAgdmFyIGZpbGVzID0gaW5wdXQu");
    sb.append("ZmlsZXM7CiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCAhPSAxKSB7CiAgICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgICAgfQogICAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07CiAgICAgICAgLy8gcmVzb2x2ZSBpZGVu");
    sb.append("dGl0eQogICAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9u");
    sb.append("ICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAgICBpZiAoaWRMb29rdXAuYWJvcnQp");
    sb.append("IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJhYm9ydCIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAg");
    sb.append("IH0KCiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9u");
    sb.append("bG9hZCA9IChldnQpID0+IHsKICAgICAgICAgIHZhciB1OCA9IG5ldyBVaW50OEFycmF5KCBldnQudGFy");
    sb.append("Z2V0LnJlc3VsdCApOwogICAgICAgICAgdmFyIHByb2dyZXNzID0gewogICAgICAgICAgICBwdHI6IG51");
    sb.append("bGwsCiAgICAgICAgICAgIGF0OiAwLAogICAgICAgICAgICBuZXh0OiBmdW5jdGlvbihjaHVua1JlcXVl");
    sb.append("c3QpIHsKICAgICAgICAgICAgICB2YXIgc3ogPSBjaHVua1JlcXVlc3QuY2h1bmtfcmVxdWVzdF9zaXpl");
    sb.append("OwogICAgICAgICAgICAgIHZhciBhdCA9IHByb2dyZXNzLmF0OwogICAgICAgICAgICAgIHZhciBteCA9");
    sb.append("IE1hdGgubWluKGF0ICsgc3osIHU4Lmxlbmd0aCk7CiAgICAgICAgICAgICAgaWYgKGF0ID09IG14KSB7");
    sb.append("CiAgICAgICAgICAgICAgICBwcm9ncmVzcy5wdHIuZmluaXNoKHsKICAgICAgICAgICAgICAgICAgc3Vj");
    sb.append("Y2VzczogZnVuY3Rpb24gKGhhcHB5KSB7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlX3N1Y2Nlc3Mo");
    sb.append("aGFwcHkuYXNzZXRJZCk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGZhaWx1");
    sb.append("cmUgOiBoYW5kbGVfZmFpbHVyZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNl");
    sb.append("IHsKICAgICAgICAgICAgICAgIHZhciBzbGljZWQgPSB1OC5zbGljZShhdCwgbXgpOwogICAgICAgICAg");
    sb.append("ICAgICAgYXQgPSBteDsKICAgICAgICAgICAgICAgIHByb2dyZXNzLmF0ID0gYXQ7CiAgICAgICAgICAg");
    sb.append("ICAgICB2YXIgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnNsaWNlZCkpOwogICAgICAg");
    sb.append("ICAgICAgICAgcHJvZ3Jlc3MucHRyLmFwcGVuZCgibi9hIiwgYjY0LCB7CiAgICAgICAgICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uIChzZXEpIHsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVfc3RhdHVz");
    sb.append("KGF0LCBteCkKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZmFpbHVyZSA6IGhh");
    sb.append("bmRsZV9mYWlsdXJlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("IH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGhhbmRsZV9mYWlsdXJlLAogICAgICAgICAgICBjb21wbGV0");
    sb.append("ZTogZnVuY3Rpb24oKSB7fQogICAgICAgICAgfTsKICAgICAgICAgIGlmICh1c2VEb21haW4pIHsKICAg");
    sb.append("ICAgICAgICAgcHJvZ3Jlc3MucHRyID0gc3RhdGUuc2VydmljZS5BdHRhY2htZW50U3RhcnRCeURvbWFp");
    sb.append("bihpZExvb2t1cC5pZGVudGl0eSwgc2VsZi5kb21haW4sIGZpbGUubmFtZSwgZmlsZS50eXBlLCBwcm9n");
    sb.append("cmVzcyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9ncmVzcy5wdHIgPSBzdGF0ZS5z");
    sb.append("ZXJ2aWNlLkF0dGFjaG1lbnRTdGFydChpZExvb2t1cC5pZGVudGl0eSwgcnhvYmouc3BhY2UsIHJ4b2Jq");
    sb.append("LmtleSwgZmlsZS5uYW1lLCBmaWxlLnR5cGUsIHByb2dyZXNzKTsKICAgICAgICAgIH0KICAgICAgICB9");
    sb.append("OwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgICAgfSk7CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRTogPHRhZyAuLi4gcng6bW9uaXRvcj0ic3RhdGUtcGF0aCIgcng6cmlzZT0iY29tbWFu");
    sb.append("ZHMuLi4iIHJ4OmZhbGw9ImNvbW1hbmRzLi4uIgogIHNlbGYuTU4gPSBmdW5jdGlvbiAoZG9tLCBzdGF0");
    sb.append("ZSwgbmFtZSwgc2tpcEZpcnN0LCBkZWxheSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkg");
    sb.append("ewogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbiA9IDA7CiAg");
    sb.append("ICAgICAgdHJ5IHsKICAgICAgICAgIG4gPSB0eXBlb2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVl");
    sb.append("IDogcGFyc2VJbnQodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGZhaWxlZFBhcnNpbmdOKSB7CiAgICAg");
    sb.append("ICAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT0gInRydWUiKSB7CiAgICAgICAgICAgIG4g");
    sb.append("PSAxOwogICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT0gImZhbHNl");
    sb.append("IikgewogICAgICAgICAgICBuID0gMDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRo");
    sb.append("aXMuZmlyc3QpIHsKICAgICAgICAgIHRoaXMuYXQgPSBuOwogICAgICAgICAgdGhpcy5maXJzdCA9IGZh");
    sb.append("bHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5hdCA8IG4pIHsK");
    sb.append("ICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KCJyaXNlIik7CiAgICAgICAgICBkb20uZGlzcGF0Y2hF");
    sb.append("dmVudChlKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXQgPiBuKSB7CiAgICAgICAgICB2YXIgZSA9");
    sb.append("IG5ldyBFdmVudCgiZmFsbCIpOwogICAgICAgICAgZG9tLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHRoaXMuYXQgPSBuOwogICAgICB9LmJpbmQodGhpcyksIHRoaXMuZGVsYXkpOwogICAg");
    sb.append("fS5iaW5kKHthdDotMSwgZmlyc3Q6c2tpcEZpcnN0LCBkZWxheTpkZWxheSA/IGRlbGF5IDogMTB9KTsK");
    sb.append("ICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4u");
    sb.append("LiByeDpyZXBlYXQ9JD4KICBzZWxmLlJQID0gZnVuY3Rpb24gKHBhcmVudERvbSwgc3RhdGUsIG5hbWUs");
    sb.append("IGV4cGFuZFZpZXcsIG1ha2VyLCBoaWRlT25aZXJvKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxmLnBJ");
    sb.append("RShzdGF0ZSwgIiQiICsgbmFtZSwgZXhwYW5kVmlldyk7CiAgICBpZiAoaGlkZU9uWmVybykgewogICAg");
    sb.append("ICBwYXJlbnREb20uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0KICAgIHZhciBzdWIgPSBmdW5j");
    sb.append("dGlvbiAodmFsdWUpIHsKICAgICAgdmFyIG4gPSAwOwogICAgICB0cnkgewogICAgICAgIG4gPSB0eXBl");
    sb.append("b2YgKHZhbHVlKSA9PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUpOwogICAgICB9IGNh");
    sb.append("dGNoIChmYWlsZWRQYXJzaW5nTikgewogICAgICB9CiAgICAgIGlmIChoaWRlT25aZXJvKSB7CiAgICAg");
    sb.append("ICAgaWYgKG4gPD0gMCkgewogICAgICAgICAgcGFyZW50RG9tLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7");
    sb.append("CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhcmVudERvbS5zdHlsZS5kaXNwbGF5ID0gIiI7CiAg");
    sb.append("ICAgICAgfQogICAgICB9CiAgICAgIHZhciBpc05ldyA9IGZhbHNlOwogICAgICB3aGlsZSAodGhpcy5h");
    sb.append("dCA8IG4gLSAxKSB7CiAgICAgICAgdGhpcy5hdCArKzsKICAgICAgICB0aGlzLnRyYWNrICsrOwogICAg");
    sb.append("ICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCB0aGlzLnRyYWNrICsgIiIs");
    sb.append("IGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAgICAgdmFy");
    sb.append("IGRvbSA9IG1ha2VyKHNlbGYucEQobmV3X3N0YXRlKSk7CiAgICAgICAgdGhpcy5pdGVtc1t0aGlzLmF0");
    sb.append("XSA9IHt1bnN1Yjp1bnN1YiwgZG9tOmRvbX07CiAgICAgICAgcGFyZW50RG9tLmFwcGVuZChkb20pOwog");
    sb.append("ICAgICAgIGlmIChleHBhbmRWaWV3KSB7CiAgICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBh");
    sb.append("dGhfdG8obmV3X3N0YXRlLnZpZXcsIHsiJGluZGV4IjogdGhpcy50cmFja30pKTsKICAgICAgICB9CiAg");
    sb.append("ICAgICAgc3Vic2NyaWJlX3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICAgIGlzTmV3ID0gdHJ1");
    sb.append("ZTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy5hdCA+PSBuICYmIHRoaXMuYXQgPj0gMCkgewogICAg");
    sb.append("ICAgIGZpcmVfdW5zdWIodGhpcy5pdGVtc1t0aGlzLmF0XS51bnN1Yik7CiAgICAgICAgcGFyZW50RG9t");
    sb.append("LnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbdGhpcy5hdF0uZG9tKTsKICAgICAgICB0aGlzLml0ZW1zW3Ro");
    sb.append("aXMuYXRdID0gbnVsbDsKICAgICAgICBkZWxldGUgdGhpcy5pdGVtc1t0aGlzLmF0XTsKICAgICAgICB0");
    sb.append("aGlzLmF0LS07CiAgICAgIH0KICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgcGFyZW50RG9tLmRpc3Bh");
    sb.append("dGNoRXZlbnQobmV3IEV2ZW50KCJuZXciKSk7CiAgICAgIH0KICAgIH0uYmluZCh7aXRlbXM6W10sIGF0");
    sb.append("Oi0xLCB0cmFjazowfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfQogIHZhciBm");
    sb.append("aW5kID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsLCBrZXksIHZhbHVlKSB7CiAgICBpZiAoY2hhbm5l");
    sb.append("bCBpbiBzdGF0ZVsiZGF0YSJdLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmcpIHsKICAgICAgdmFyIGFyciA9");
    sb.append("IHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXS5vcHRpb25zOwogICAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IGFyci5sZW5ndGg7IGsrKykgewogICAgICAgIHZhciBzID0gYXJy");
    sb.append("W2tdOwogICAgICAgIGlmIChrZXkgaW4gcyAmJiBzW2tleV0gPT0gdmFsdWUpIHsKICAgICAgICAgIHJl");
    sb.append("dHVybiBzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgIHJldHVybiBudWxsOwogICAgfQogIH07CgogIHZhciBjdXN0b21zID0ge307CgogIHNlbGYuUFJD");
    sb.append("VUFDID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgY3VzdG9tc1tuYW1lXSA9IGZvbzsKICB9OwoK");
    sb.append("ICBzZWxmLmV4Q0MgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgY3VzdG9tQ29tbWFuZE5hbWUp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChj");
    sb.append("dXN0b21Db21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21tYW5k");
    sb.append("TmFtZV0oc3RhdGUsIGRvbSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIGN1c3RvbSBldmVudCBv");
    sb.append("biBmb3Jtczsgcng6c3VjY2Vzcz0iLi4uIgogIHZhciBmaXJlX3N1Y2Nlc3MgPSBmdW5jdGlvbiAoZm9y");
    sb.append("bSkgewogICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VjY2VzcyIpKTsKICAgIGZvcm0u");
    sb.append("ZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoInN1Ym1pdHRlZCIpKTsKICB9OwogIHNlbGYuZmlyZV9zdWNj");
    sb.append("ZXNzID0gZmlyZV9zdWNjZXNzOwoKICAvLyBjdXN0b20gZXZlbnQgb24gZm9ybXM7IHJ4OmZhaWxlZD0i");
    sb.append("Li4uIgogIHZhciBmaXJlX2ZhaWx1cmUgPSBmdW5jdGlvbiAoZG9tLCBtc2cpIHsKICAgIHZhciBlID0g");
    sb.append("bmV3IEV2ZW50KCJmYWlsdXJlIik7CiAgICBlLm1lc3NhZ2UgPSBtc2c7CiAgICBjb25zb2xlLmVycm9y");
    sb.append("KG1zZyk7CiAgICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICB9OwogIHNlbGYuZmlyZV9mYWlsdXJlID0g");
    sb.append("ZmlyZV9mYWlsdXJlOwoKICBzZWxmLmFDQyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgY3VzdG9tQ29t");
    sb.append("bWFuZE5hbWUpIHsKICAgIHZhciBzaWduYWwgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlmIChzaWdu");
    sb.append("YWwgPT0gbnVsbCkgewogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgfSBlbHNlIHsKICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgbXNnKTsKICAgICAgfQogICAgfTsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBpZiAoY3VzdG9tQ29tbWFu");
    sb.append("ZE5hbWUgaW4gY3VzdG9tcykgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZh");
    sb.append("ciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgICAgY3VzdG9tc1tjdXN0b21Db21tYW5kTmFt");
    sb.append("ZV0ob2JqLCBzdGF0ZSwgc2lnbmFsLCBzZWxmKTsKICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gZmluZCAnIiAr");
    sb.append("IGN1c3RvbUNvbW1hbmROYW1lICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgdmFy");
    sb.append("IG1ha2VfY2hvaWNlX2FycmF5ID0gZnVuY3Rpb24gKHN0YXRlLCBjaGFubmVsKSB7CiAgICB2YXIgY2hv");
    sb.append("aWNlcyA9IHN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgaWYgKCEoY2hhbm5lbCBpbiBj");
    sb.append("aG9pY2VzKSkgewogICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICB9CiAgICB2YXIgY2hvaWNl");
    sb.append("ID0gY2hvaWNlc1tjaGFubmVsXTsKICAgIHZhciBhcnIgPSBbXTsKICAgIGZvciAodmFyIGlkIGluIGNo");
    sb.append("b2ljZSkgewogICAgICBhcnIucHVzaChjaG9pY2VbaWRdKTsKICAgIH0KICAgIHJldHVybiBhcnI7CiAg");
    sb.append("fQoKICBzZWxmLmV4RklOID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIGNoYW5uZWwpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcnIgPSBt");
    sb.append("YWtlX2Nob2ljZV9hcnJheShzdGF0ZSwgY2hhbm5lbCk7CiAgICAgIHZhciBjbGVhciA9IGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgICBkZWxldGUgc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2ljZXNbY2hhbm5lbF07");
    sb.append("CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hvaWNlcyhjaGFubmVsLCB7fSk7CiAgICAg");
    sb.append("IH07CiAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2VuZChjaGFubmVsLCBhcnIsIHsKICAg");
    sb.append("ICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjbGVhcigpOwogICAgICAg");
    sb.append("ICAgY29uc29sZS5sb2coImZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICB9LAogICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBjbGVhcigpOwogICAgICAgICAgY29uc29s");
    sb.append("ZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7");
    sb.append("CiAgfTsKCiAgc2VsZi5GSU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBjaGFubmVsLCBz");
    sb.append("aG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7CiAgICB2YXIgZmluYWxpemUg");
    sb.append("PSB7CiAgICAgIG93bmVyOiBwYXJlbnQsCiAgICAgIHNob3duOiBmYWxzZQogICAgfTsKICAgIGFkZF91");
    sb.append("bnN1YihmaW5hbGl6ZSk7CgogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAgIGZp");
    sb.append("cmVfdW5zdWIoZmluYWxpemUpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBzdGF0ZSA9IGZv");
    sb.append("cmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkgewogICAgICAgIG1ha2Vy");
    sb.append("VHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYWtlckZhbHNlKHBhcmVu");
    sb.append("dCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgZmluYWxpemUpOwog");
    sb.append("ICAgfTsKCiAgICBmaW5hbGl6ZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQgPSBw");
    sb.append("cmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYgKCEo");
    sb.append("b3V0KSkgcmV0dXJuOwogICAgICB2YXIgYXJyID0gbWFrZV9jaG9pY2VfYXJyYXkocHJpb3JTdGF0ZSwg");
    sb.append("Y2hhbm5lbCk7CiAgICAgIHZhciByZXN1bHQgPSAoJ21pbicgaW4gb3V0ICYmICdtYXgnIGluIG91dCkg");
    sb.append("PyAob3V0Lm1pbiA8PSBhcnIubGVuZ3RoICYmIGFyci5sZW5ndGggPD0gb3V0Lm1heCkgOiB0cnVlOwog");
    sb.append("ICAgICBpZiAoZmluYWxpemUuZXZhbCAhPSByZXN1bHQpIHsKICAgICAgICBmaW5hbGl6ZS5ldmFsID0g");
    sb.append("cmVzdWx0OwogICAgICAgIGNoYW5nZShmaW5hbGl6ZS5ldmFsKTsKICAgICAgfQogICAgfTsKCiAgICBw");
    sb.append("cmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfY2hvaWNlKGNoYW5uZWwsIGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgZmluYWxpemUudXBkYXRlKCk7CiAgICAgIC8vIFRPRE86IHJldHVybiB3aGV0aGVy");
    sb.append("IG9yIG5vdCB0aGlzIG5lZWRzIHRvIGJlIGF4ZWQKICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9");
    sb.append("OwoKICB2YXIgZm9ybV9vZiA9IGZ1bmN0aW9uKGRvbSkgewogICAgdmFyIG5leHQgPSBkb207CiAgICB3");
    sb.append("aGlsZSAobmV4dCAhPSBudWxsKSB7CiAgICAgIGlmIChuZXh0LnRhZ05hbWUudG9VcHBlckNhc2UoKSA9");
    sb.append("PSAiRk9STSIpIHsKICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgfQogICAgICBuZXh0ID0gbmV4dC5w");
    sb.append("YXJlbnRFbGVtZW50OwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgcmVnX2V2ZW50ID0g");
    sb.append("ZnVuY3Rpb24gKHN0YXRlLCBkb20sIHR5cGUsIHJ1bm5hYmxlKSB7CiAgICAvLyBUT0RPOiBjb25uZWN0");
    sb.append("ZWQvZGlzY29ubmVjdGVkIGFzIHNwZWNpYWwgZXZlbnRzIHRvIGNvbnNpZGVyCiAgICBpZiAodHlwZSA9");
    sb.append("PSAiY2hlY2siIHx8IHR5cGUgPT0gInVuY2hlY2siKSB7CiAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVy");
    sb.append("KCJjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAodGhpcy50eXBlID09ICJjaGVjayIgJiYg");
    sb.append("ZG9tLmNoZWNrZWQpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlz");
    sb.append("LnR5cGUgPT0gInVuY2hlY2siICYmICFkb20uY2hlY2tlZCkgewogICAgICAgICAgcnVubmFibGUoKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0uYmluZCh7dHlwZTp0eXBlfSkpOwogICAgfSBlbHNlIGlmICh0eXBlID09");
    sb.append("ICJsb2FkIikgewogICAgICB3aW5kb3cuc2V0VGltZW91dChydW5uYWJsZSwgMSk7CiAgICB9IGVsc2Ug");
    sb.append("aWYgKHR5cGU9PSJzdWJtaXQiIHx8IHR5cGU9PSJzdWJtaXR0ZWQiKSB7CiAgICAgIHdpbmRvdy5zZXRU");
    sb.append("aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmb3JtID0gZm9ybV9vZihkb20pOwogICAgICAg");
    sb.append("IGlmIChmb3JtKSB7CiAgICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAg");
    sb.append("ICAgICAgcnVubmFibGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAg");
    sb.append("ICB9LCAxKTsKICAgIH0gZWxzZSBpZiAodHlwZS5zdGFydHNXaXRoKCJkZWxheToiKSkgewogICAgICAv");
    sb.append("LyBkZWxheSB3aWxsIHJ1biBhZnRlciAkZGVsYXlUaW1lTVMgSUYgdGhlIGRvbSBlbGVtZW50IGlzIHN0");
    sb.append("aWxsIHZpc2libGUgdG8gdGhlIGRvY3VtZW50CiAgICAgIHZhciBkZWxheVRpbWVNUyA9IHBhcnNlSW50");
    sb.append("KHR5cGUuc3Vic3RyaW5nKDYpKTsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICAgIHJ1bm5hYmxl");
    sb.append("KCk7CiAgICAgICAgfQogICAgICB9LCBkZWxheVRpbWVNUyk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0g");
    sb.append("InNldHRsZSIpIHsKICAgICAgc3RhdGUuZGF0YS50cmVlLmFkZF9vbl9zZXR0bGUoZnVuY3Rpb24oKSB7");
    sb.append("CiAgICAgICAgLy8gaWYgdGhlIERPTSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgYm9keSwgdGhlbiBydW4g");
    sb.append("dGhlIGNvZGUKICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAg");
    sb.append("ICBydW5uYWJsZSgpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVy");
    sb.append("biBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInNldHRsZS1vbmNlIikgewog");
    sb.append("ICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29uX3NldHRsZShmdW5jdGlvbigpIHsKICAgICAgICAvLyBp");
    sb.append("ZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LCB0aGVuIHJ1biB0aGUgY29kZQogICAg");
    sb.append("ICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAgICAgICAgIHJ1bm5hYmxlKCk7");
    sb.append("CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAg");
    sb.append("ICBpZiAodHlwZSA9PSAiY2xpY2siKSB7CiAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwg");
    sb.append("ZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHZhciBmaXJlID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7");
    sb.append("CiAgICAgICAgICAgIHZhciBlbCA9IGV2ZW50LnRhcmdldDsKICAgICAgICAgICAgd2hpbGUgKGVsICYm");
    sb.append("IGZpcmUpIHsKICAgICAgICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdwcmV2ZW50OmNsaWNrJykp");
    sb.append("IHsKICAgICAgICAgICAgICAgIGZpcmUgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChl");
    sb.append("eCkgewogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpcmUpIHsKICAgICAgICAgICAgcnVubmFibGUo");
    sb.append("KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb20uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcih0eXBlLCBydW5uYWJsZSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIFJVTlRJTUU6");
    sb.append("IDx0YWcgLi4uIHJ4OmV2ZW50PSJzaWduLW91dCIgLi4uPgogIHNlbGYuYlNPID0gZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBzZWxmLlNJR05PVVQo");
    sb.append("KTsKICAgICAgfSwKICAgICAgbWVyZ2UgOiBmdW5jdGlvbigpIHsgcmV0dXJuIHt9OyB9CiAgICB9Owog");
    sb.append("IH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6bmFtZT12YWx1ZSAuLi4i");
    sb.append("PgogIHNlbGYuYlMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKICAgIGlmICh0");
    sb.append("eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuOiBm");
    sb.append("dW5jdGlvbigpIHt9LCAvLyBkbyBub3RoaW5nLCB0aGlzIGlzIGEgc2ltcGxlIG1lcmdlCiAgICAgICAg");
    sb.append("bWVyZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgb2JqW25h");
    sb.append("bWVdID0gdmFsdWUoKTsKICAgICAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2Jq");
    sb.append("KTsKICAgICAgICAgIHJldHVybiBkZWx0YTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBkZWx0YSA9");
    sb.append("IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBydW46IGZ1bmN0");
    sb.append("aW9uKCkge30sIC8vIGRvIG5vdGhpbmcsIHRoaXMgaXMgYSBzaW1wbGUgbWVyZ2UKICAgICAgICBtZXJn");
    sb.append("ZTogZnVuY3Rpb24oKSB7IHJldHVybiBkZWx0YTsgfQogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIG1l");
    sb.append("cmdlX2RlbHRhID0gZnVuY3Rpb24oYSwgYikgewogICAgaWYgKHR5cGVvZihhKSA9PSAib2JqZWN0IiAm");
    sb.append("JiB0eXBlb2YoYikgPT0gIm9iamVjdCIpIHsKICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICBmb3Ig");
    sb.append("KHZhciBrIGluIGEpIHsKICAgICAgICBpZiAoayBpbiBiKSB7CiAgICAgICAgICByZXN1bHRba10gPSBt");
    sb.append("ZXJnZV9kZWx0YShhW2tdLCBiW2tdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0W2td");
    sb.append("ID0gYVtrXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yKHZhciBrIGluIGIpIHsKICAgICAgICBp");
    sb.append("ZiAoIShrIGluIGEpKSB7CiAgICAgICAgICByZXN1bHRba10gPSBiW2tdOwogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIGE7CiAgfTsKICBzZWxmLk1EID0g");
    sb.append("bWVyZ2VfZGVsdGE7CgogIHNlbGYub25CID0gZnVuY3Rpb24oZG9tLCB0eXBlLCBzdGF0ZSwgYXJyKSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzdW0g");
    sb.append("PSB7fTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhcnIubGVuZ3RoOyBrKyspIHsKICAgICAgICB2");
    sb.append("YXIgY21kID0gYXJyW2tdOwogICAgICAgIGNtZC5ydW4oKTsKICAgICAgICB2YXIgdG9NZXJnZSA9IGNt");
    sb.append("ZC5tZXJnZSgpCiAgICAgICAgc3VtID0gbWVyZ2VfZGVsdGEoc3VtLCB0b01lcmdlKTsKICAgICAgfQog");
    sb.append("ICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHN1bSk7CiAgICB9KTsKICB9OwoKICAvLyBjaG9vc2UK");
    sb.append("ICBzZWxmLmV4Q0ggPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgY2hhbm5lbCwga2V5");
    sb.append("KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBk");
    sb.append("b20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9IGZpbmQoc3RhdGUsIGNoYW5u");
    sb.append("ZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7CiAgICAgICAg");
    sb.append("dmFyIGNob2ljZXMgPSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNlczsKICAgICAgICBpZiAoIShj");
    sb.append("aGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgICBjaG9pY2VzW2NoYW5uZWxdID0ge307CiAgICAg");
    sb.append("ICAgfQogICAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICAgIHZhciB2YWxL");
    sb.append("ZXkgPSByZXN1bHRba2V5XTsKICAgICAgICBpZiAodmFsS2V5IGluIGNob2ljZSkgewogICAgICAgICAg");
    sb.append("ZGVsZXRlIGNob2ljZVt2YWxLZXldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaG9pY2VbdmFs");
    sb.append("S2V5XSA9IHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLm9uY2hv");
    sb.append("aWNlcyhjaGFubmVsLCBjaG9pY2UpOwogICAgICB9CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwg");
    sb.append("bmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgfSk7");
    sb.append("CiAgfTsKCiAgLy8gZGVjaWRlCiAgc2VsZi5leEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwg");
    sb.append("bmFtZSwgY2hhbm5lbCwga2V5KSB7CiAgICB2YXIgZGVjaWRlID0geyB2YWx1ZTogbnVsbCB9OwogICAg");
    sb.append("cmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHJlc3VsdCA9");
    sb.append("IGZpbmQoc3RhdGUsIGNoYW5uZWwsIGtleSwgZGVjaWRlLnZhbHVlKTsKICAgICAgaWYgKHJlc3VsdCAh");
    sb.append("PSBudWxsKSB7CiAgICAgICAgbGV0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgc3Rh");
    sb.append("dGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIHJlc3VsdCwgewogICAgICAgICAgZmFp");
    sb.append("bHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIH0sCiAgICAgICAgICBzdWNjZXNzOiBm");
    sb.append("dW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiU3VjY2Vzc3wiICsgcGF5");
    sb.append("bG9hZC5zZXEgKyAiO2xhdGVuY3k9IiArIChwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0KSk7CiAgICAg");
    sb.append("ICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1l");
    sb.append("LCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgZGVjaWRlLnZhbHVlID0gdmFsdWU7CiAgICB9KTsKICB9");
    sb.append("OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gZmlyZTpjaGFubmVsIC4uLiIgLi4u");
    sb.append("PgogIHNlbGYub25GUiA9IGZ1bmN0aW9uIChzdGF0ZSwgZG9tLCB0eXBlLCBjaGFubmVsKSB7CiAgICBy");
    sb.append("ZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAgICBzdGF0ZS5kYXRhLmNv");
    sb.append("bm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbCwge30sIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU0VOVCAnIiArIGNoYW5uZWwgKyAiJyIpOwogICAgICAg");
    sb.append("IH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5s");
    sb.append("b2coIkZBSUxFRCBUTyBGSVJFICciICsgY2hhbm5lbCArICInIERVRToiICsgcmVhc29uKTsgJycKICAg");
    sb.append("ICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50");
    sb.append("PSIuLi4gZm9yY2UtYXV0aD1uYW1lLHRva2VuIC4uLiI+CiAgc2VsZi5vbkZPUkNFX0FVVEggPSBmdW5j");
    sb.append("dGlvbiAoZG9tLCB0eXBlLCBpZGVudGl0eU5hbWUsIGlkZW50aXR5KSB7CiAgICByZWdfZXZlbnQobnVs");
    sb.append("bCwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzCiAgICAg");
    sb.append("IGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IGlkZW50aXR5OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0");
    sb.append("SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgaWRlbnRpdHkpOwogICAgfSk7CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHRlOm5hbWUgLi4uIj4KICBzZWxmLm9uVE0g");
    sb.append("PSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgb3gsIG95KSB7CiAgICByZWdfZXZlbnQo");
    sb.append("c3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAg");
    sb.append("ICAgb2JqW25hbWVdID0gewogICAgICAgIHg6ZXZlbnQuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYICsg");
    sb.append("b3gsCiAgICAgICAgeTpldmVudC5jbGllbnRZICsgd2luZG93LnNjcm9sbFkgKyBveQogICAgICB9Owog");
    sb.append("ICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRl");
    sb.append("LmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0");
    sb.append("YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1lIC4uLiI+CiAgc2VsZi5vblRFID0gZnVuY3Rpb24gKGRv");
    sb.append("bSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5j");
    sb.append("dGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBldmVudC5t");
    sb.append("ZXNzYWdlOwogICAgICBpZiAoZXZlbnQubWVzc2FnZSkgewogICAgICAgIHZhciBkZWx0YSA9IHBhdGhf");
    sb.append("dG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgICBzdGF0ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0");
    sb.append("ZShkZWx0YSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZl");
    sb.append("bnQ9Ii4uLiByZXNldCAuLi4iPgogIHNlbGYub1JTVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRl");
    sb.append("KSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAg");
    sb.append("IHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAgZi5yZXNl");
    sb.append("dCgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIu");
    sb.append("Li4gcmVzZXQgLi4uIj4KICBzZWxmLm9STEQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSkgewog");
    sb.append("ICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBsb2Nh");
    sb.append("dGlvbi5yZWxvYWQoKTsKICAgIH0pOwogIH07CgogIHNlbGYuYlNCID0gZnVuY3Rpb24oZG9tKSB7CiAg");
    sb.append("ICByZXR1cm4gewogICAgICBydW46IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmID0gZm9ybV9vZihk");
    sb.append("b20pOwogICAgICAgIGlmIChmICE9IG51bGwpIHsKICAgICAgICAgIHZhciBlID0gbmV3IFN1Ym1pdEV2");
    sb.append("ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAgICdidWJibGVzJyAgICA6IHRydWUsCiAgICAgICAgICAg");
    sb.append("ICdjYW5jZWxhYmxlJyA6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgZi5kaXNwYXRjaEV2ZW50");
    sb.append("KGUpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkgeyByZXR1cm4ge307");
    sb.append("IH0KICAgIH07CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIHN1Ym1pdCAu");
    sb.append("Li4iPgogIC8vIFRPRE86IERFUFJFQ0FURQogIHNlbGYub1NCTVQgPSBmdW5jdGlvbiAoZG9tLCB0eXBl");
    sb.append("LCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkg");
    sb.append("ewogICAgICB2YXIgZiA9IGZvcm1fb2YoZG9tKTsKICAgICAgaWYgKGYgIT0gbnVsbCkgewogICAgICAg");
    sb.append("IHZhciBlID0gbmV3IFN1Ym1pdEV2ZW50KCdzdWJtaXQnLCB7CiAgICAgICAgICAnYnViYmxlcycgICAg");
    sb.append("OiB0cnVlLAogICAgICAgICAgJ2NhbmNlbGFibGUnIDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGYu");
    sb.append("ZGlzcGF0Y2hFdmVudChlKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAu");
    sb.append("LiByeDpldmVudD0iLi4uIHN1Ym1pdDokaWQgLi4uIj4KICBzZWxmLm9TRkkgPSBmdW5jdGlvbiAoZG9t");
    sb.append("LCB0eXBlLCBzdGF0ZSwgaWQpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlv");
    sb.append("biAoZXZlbnQpIHsKICAgICAgdmFyIGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICAg");
    sb.append("IGlmIChmICE9IG51bGwpIHsKICAgICAgICB2YXIgZSA9IG5ldyBTdWJtaXRFdmVudCgnc3VibWl0Jywg");
    sb.append("ewogICAgICAgICAgJ2J1YmJsZXMnICAgIDogdHJ1ZSwKICAgICAgICAgICdjYW5jZWxhYmxlJyA6IHRy");
    sb.append("dWUKICAgICAgICB9KTsKICAgICAgICBmLmRpc3BhdGNoRXZlbnQoZSk7CiAgICAgIH0KICAgIH0pOwog");
    sb.append("IH07CgogIHNlbGYuYk5LID0gZnVuY3Rpb24gKGRvbSkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBm");
    sb.append("dW5jdGlvbigpIHsKICAgICAgICB2YXIgY3VyID0gZG9tOwogICAgICAgIHdoaWxlIChjdXIudGFnTmFt");
    sb.append("ZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewogICAgICAgICAgY3VyID0gY3VyLnBhcmVudEVs");
    sb.append("ZW1lbnQ7CiAgICAgICAgfQogICAgICAgIGlmIChjdXIgIT0gbnVsbCkgewogICAgICAgICAgbnVrZShj");
    sb.append("dXIpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWVyZ2U6IGZ1bmN0aW9uKCkge30KICAgIH07CiAg");
    sb.append("fQoKICBzZWxmLm9OSyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQo");
    sb.append("c3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBjdXIgPSBkb207CiAg");
    sb.append("ICAgIHdoaWxlIChjdXIudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewogICAgICAg");
    sb.append("IGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICAgIGlmIChjdXIgIT0gbnVsbCkgewog");
    sb.append("ICAgICAgIG51a2UoY3VyKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgc2VsZi5wVXMgPSBmdW5jdGlv");
    sb.append("bihkb20sIG1zRGVsYXkpIHsKICAgIGRvbS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlv");
    sb.append("bihldikgewogICAgICBpZiAoZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAgLy8gVE9ETzogaWYgZWxU");
    sb.append("b1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5kIGlzIG1heCBhbmQgdGhlIHNjcm9sbCBpcyB0aGVyZSwg");
    sb.append("dGhlbiBsb3dlciBpc1Byb3RlY3RlZAogICAgICB9CiAgICAgIGlmIChkb20uaWdub3JlRXZlbnQgfHwg");
    sb.append("ZG9tLmlzUHJvdGVjdGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGRvbS5pc1Byb3Rl");
    sb.append("Y3RlZCA9IHRydWU7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGRv");
    sb.append("bS5pc1Byb3RlY3RlZCA9IGZhbHNlOwogICAgICB9LCBtc0RlbGF5KTsKICAgIH0pOwogIH07CgogIHNl");
    sb.append("bGYub1NDUiA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBvcmlnaW5hbENvbW1hbmQpIHsKICAg");
    sb.append("IHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIGVs");
    sb.append("VG9TY3JvbGwgPSBkb207CiAgICAgIHZhciBjb21tYW5kID0gb3JpZ2luYWxDb21tYW5kOwogICAgICB3");
    sb.append("aGlsZSAoY29tbWFuZC5zdGFydHNXaXRoKCdwYXJlbnQtJykpIHsKICAgICAgICBpZiAoZWxUb1Njcm9s");
    sb.append("bC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgICBlbFRvU2Nyb2xsID0gZWxUb1Njcm9sbC5wYXJlbnRF");
    sb.append("bGVtZW50OwogICAgICAgIH0KICAgICAgICBjb21tYW5kID0gY29tbWFuZC5zdWJzdHJpbmcoNyk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKGVsVG9TY3JvbGwuaXNQcm90ZWN0ZWQpIHsKICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgIH0KICAgICAgZWxUb1Njcm9sbC5pZ25vcmVFdmVudCA9IHRydWU7CiAgICAgIHdpbmRvdy5zZXRU");
    sb.append("aW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGVsVG9TY3JvbGwuaWdub3JlRXZlbnQgPSBmYWxzZTsK");
    sb.append("ICAgICAgfSwgMTAwKTsKICAgICAgc3dpdGNoIChjb21tYW5kKSB7CiAgICAgICAgY2FzZSAnbWluJzog");
    sb.append("ewogICAgICAgICAgZWxUb1Njcm9sbC5sYXN0X3Njcm9sbF9jb21tYW5kID0gJ21pbic7CiAgICAgICAg");
    sb.append("ICBlbFRvU2Nyb2xsLnNjcm9sbFRvKDAsIDApOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAg");
    sb.append("ICAgICBjYXNlICdtYXgnOiB7CiAgICAgICAgICBlbFRvU2Nyb2xsLmxhc3Rfc2Nyb2xsX2NvbW1hbmQg");
    sb.append("PSAnbWF4JzsKICAgICAgICAgIGVsVG9TY3JvbGwuc2Nyb2xsVG8oMCwgZWxUb1Njcm9sbC5zY3JvbGxI");
    sb.append("ZWlnaHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfTsKCiAg");
    sb.append("c2VsZi5vVUNLID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUpIHsKICAgIHJlZ19ldmVudChzdGF0");
    sb.append("ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgZG9tLmNoZWNrZWQgPSBmYWxzZTsK");
    sb.append("ICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBnb3RvOnVyaSAu");
    sb.append("Li4iPgogIHNlbGYub25HTyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCB2YWx1ZSkgewogICAg");
    sb.append("cmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9ICh0");
    sb.append("eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSA/IHZhbHVlKCkgOiB2YWx1ZTsKICAgICAgc2VsZi5n");
    sb.append("b3RvKHVyaSwgZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVu");
    sb.append("dD0iLi4uIHRvZ2dsZTpuYW1lIC4uLiI+CiAgc2VsZi5vblQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBz");
    sb.append("dGF0ZSwgbmFtZSkgewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogZmFsc2UgfTsKICAgIHJlZ19l");
    sb.append("dmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAg");
    sb.append("ICAgb2JqW25hbWVdID0gIWNhcHR1cmVkLnZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0");
    sb.append("YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7");
    sb.append("CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBjYXB0dXJl");
    sb.append("ZC52YWx1ZSA9IHZhbHVlID09IHRydWU7CiAgICB9KTsKICB9OwoKICB2YXIgb3JkZXJfdG9nZ2xlID0g");
    sb.append("ZnVuY3Rpb24ocHJpb3IsIHZhbCkgewogICAgdmFyIHBhcnRzID0gcHJpb3Iuc3BsaXQoIiwiKTsKICAg");
    sb.append("IHZhciBwcmVmaXggPSAnJzsKICAgIHZhciBuZXh0ID0gWyIiXTsKICAgIGZvciAodmFyIGsgPSAwOyBr");
    sb.append("IDwgcGFydHMubGVuZ3RoOyBrKyspIHsKICAgICAgaWYgKHBhcnRzW2tdID09ICIiKSB7CiAgICAgICAg");
    sb.append("Y29udGludWU7CiAgICAgIH0gZWxzZSBpZiAodmFsID09IHBhcnRzW2tdKSB7CiAgICAgICAgcHJlZml4");
    sb.append("ID0gJy0nOwogICAgICB9IGVsc2UgaWYgKCItIiArIHZhbCA9PXBhcnRzW2tdKSB7CiAgICAgICAgcHJl");
    sb.append("Zml4ID0gJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dC5wdXNoKHBhcnRzW2tdKTsKICAgICAg");
    sb.append("fQogICAgfQogICAgbmV4dFswXSA9IHByZWZpeCArIHZhbDsKICAgIHJldHVybiBuZXh0LmpvaW4oIiwi");
    sb.append("KTsKICB9CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBvcmRlci10b2dnbGU6bmFt");
    sb.append("ZT12YWwgLi4uIj4KICBzZWxmLm9uT1QgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwg");
    sb.append("dmFsKSB7CiAgICB2YXIgY2FwdHVyZWQgPSB7IHZhbHVlOiAiIiB9OwogICAgcmVnX2V2ZW50KHN0YXRl");
    sb.append("LCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFt");
    sb.append("ZV0gPSBvcmRlcl90b2dnbGUoY2FwdHVyZWQudmFsdWUsIHZhbCk7CiAgICAgIHZhciBkZWx0YSA9IHBh");
    sb.append("dGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRh");
    sb.append("dGUoZGVsdGEpOwogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1");
    sb.append("ZSkgewogICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RTogPHRhZyAuLiByeDpldmVudD0iLi4uIGRlbHRhOm5hbWU9ZGlmZiIgLi4uIj4KICBzZWxmLm9uRCA9");
    sb.append("IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lLCBkaWZmKSB7CiAgICB2YXIgY2FwdHVyZWQg");
    sb.append("PSB7IHZhbHVlOiAwIH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IGNhcHR1cmVkLnZhbHVlICsgZGlm");
    sb.append("ZjsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZVtz");
    sb.append("dGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0");
    sb.append("ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAibnVt");
    sb.append("YmVyIikgewogICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQodmFsdWUpOwogICAgICAgIGlmICghaXNOYU4odmFsKSkgewog");
    sb.append("ICAgICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9");
    sb.append("OwogIHNlbGYuQ1NFTiA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIGV2YWxTdGF0ZSwgY2hh");
    sb.append("bm5lbCwga2V5LCBuYW1lLCBzaG91bGRCZSwgX2V4cGFuZCwgbWFrZXJUcnVlLCBtYWtlckZhbHNlKSB7");
    sb.append("CiAgICB2YXIgY2hvc2VuID0gewogICAgICB2YWx1ZTogIiIsCiAgICAgIG93bmVyOiBwYXJlbnQsCiAg");
    sb.append("ICAgIHNob3duOiBmYWxzZSwKICAgICAgZXZhbDogbnVsbAogICAgfTsKICAgIGFkZF91bnN1YihjaG9z");
    sb.append("ZW4pOwogICAgdmFyIGNoYW5nZSA9IGZ1bmN0aW9uIChzaG93KSB7CiAgICAgIGZpcmVfdW5zdWIoY2hv");
    sb.append("c2VuKTsKICAgICAgbnVrZShwYXJlbnQpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUp");
    sb.append("OwogICAgICBpZiAoc2hvdyA9PT0gc2hvdWxkQmUpIHsKICAgICAgICBtYWtlclRydWUocGFyZW50LCBz");
    sb.append("dGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWFrZXJGYWxzZShwYXJlbnQsIHN0YXRlKTsKICAg");
    sb.append("ICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIGNob3Nlbik7CiAgICB9OwoKICAgIGNob3Nl");
    sb.append("bi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvdXQgPSBwcmlvclN0YXRlLmRhdGEuY29u");
    sb.append("bmVjdGlvbi5vdXRzdGFuZGluZ1tjaGFubmVsXTsKICAgICAgaWYgKCEob3V0KSkgcmV0dXJuOwoKICAg");
    sb.append("ICAgdmFyIGNob2ljZXMgPSBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5jaG9pY2VzOwogICAgICBp");
    sb.append("ZiAoIShjaGFubmVsIGluIGNob2ljZXMpKSB7CiAgICAgICAgY2hvaWNlc1tjaGFubmVsXSA9IHt9Owog");
    sb.append("ICAgICB9CiAgICAgIHZhciBjaG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgICB2YXIgcmVzdWx0");
    sb.append("ID0gY2hvc2VuLnZhbHVlIGluIGNob2ljZTsKICAgICAgaWYgKGNob3Nlbi5ldmFsICE9IHJlc3VsdCkg");
    sb.append("ewogICAgICAgIGNob3Nlbi5ldmFsID0gcmVzdWx0OwogICAgICAgIGNoYW5nZShjaG9zZW4uZXZhbCk7");
    sb.append("CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24uc3Vic2NyaWJlX2No");
    sb.append("b2ljZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsKICAgICAgcmV0");
    sb.append("dXJuIHRydWU7CiAgICB9KTsKCiAgICBzdWJzY3JpYmUoZXZhbFN0YXRlLCBuYW1lLCBmdW5jdGlvbiAo");
    sb.append("dmFsdWUpIHsKICAgICAgY2hvc2VuLnZhbHVlID0gdmFsdWU7CiAgICAgIGNob3Nlbi51cGRhdGUoKTsK");
    sb.append("ICAgIH0pOwogIH07CgogIHNlbGYuREUgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCBldmFs");
    sb.append("U3RhdGUsIGNoYW5uZWwsIGtleSwgbmFtZSwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2VyVHJ1ZSwgbWFr");
    sb.append("ZXJGYWxzZSkgewogICAgdmFyIGRlY2lkZSA9IHsKICAgICAgdmFsdWU6ICIiLAogICAgICBvd25lcjog");
    sb.append("cGFyZW50LAogICAgICBzaG93bjogZmFsc2UsCiAgICAgIGV2YWw6IG51bGwKICAgIH07CiAgICBhZGRf");
    sb.append("dW5zdWIoZGVjaWRlKTsKICAgIHZhciBjaGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewogICAgICBmaXJl");
    sb.append("X3Vuc3ViKGRlY2lkZSk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRlID0gZm9yayhw");
    sb.append("cmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAgbWFrZXJUcnVl");
    sb.append("KHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2UocGFyZW50LCBz");
    sb.append("dGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBkZWNpZGUpOwogICAgfTsK");
    sb.append("CiAgICBkZWNpZGUudXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVzdWx0ID0gZmluZChw");
    sb.append("cmlvclN0YXRlLCBjaGFubmVsLCBrZXksIGRlY2lkZS52YWx1ZSkgIT0gbnVsbDsKICAgICAgaWYgKGRl");
    sb.append("Y2lkZS5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGRlY2lkZS5ldmFsID0gcmVzdWx0OwogICAgICAg");
    sb.append("IGNoYW5nZShkZWNpZGUuZXZhbCk7CiAgICAgIH0KICAgIH07CgogICAgcHJpb3JTdGF0ZS5kYXRhLmNv");
    sb.append("bm5lY3Rpb24uc3Vic2NyaWJlKGNoYW5uZWwsIGZ1bmN0aW9uICgpIHsKICAgICAgZGVjaWRlLnVwZGF0");
    sb.append("ZSgpOwogICAgICAvLyBUT0RPOiByZXR1cm4gd2hldGhlciBvciBub3QgdGhpcyBuZWVkcyB0byBiZSBh");
    sb.append("eGVkCiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0ZSwgbmFt");
    sb.append("ZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgICBkZWNp");
    sb.append("ZGUudXBkYXRlKCk7CiAgICB9KTsKICB9OwoKICB2YXIgY29tbW9uSWYgPSBmdW5jdGlvbihwYXJlbnQs");
    sb.append("IG9yaWdpbmFsU3RhdGUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2Us");
    sb.append("IGZvcmNlSGlkaW5nKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAoZm9yY2VI");
    sb.append("aWRpbmcpIHsKICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9CiAgICByZXR1");
    sb.append("cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBzaG93ID0gKHZhbHVlID8gdHJ1ZSA6IGZhbHNl");
    sb.append("KSA9PT0gc2hvdWxkQmU7CiAgICAgIGlmICh0aGlzLnNob3duID09IHNob3cpIHsKICAgICAgICByZXR1");
    sb.append("cm47CiAgICAgIH0KICAgICAgdGhpcy5zaG93biA9IHNob3c7CiAgICAgIG51a2UocGFyZW50KTsKICAg");
    sb.append("ICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgIHZhciBuZXh0ID0gc2VsZi5wRChmb3JrKG9yaWdpbmFs");
    sb.append("U3RhdGUpKTsKICAgICAgaWYgKHNob3cpIHsKICAgICAgICBpZiAoZm9yY2VIaWRpbmcpIHsKICAgICAg");
    sb.append("ICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIiI7CiAgICAgICAgfQogICAgICAgIG1ha2VyVHJ1ZShw");
    sb.append("YXJlbnQsIG5leHQpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChmb3JjZUhpZGluZykgewogICAg");
    sb.append("ICAgICAgcGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAg");
    sb.append("ICAgIG1ha2VyRmFsc2UocGFyZW50LCBuZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc3Vic2Ny");
    sb.append("aWJlX3N0YXRlKG5leHQsIHVuc3ViKTsKICAgIH0uYmluZCh7IHNob3duOiAnbm8nIH0pOwogIH0KCiAg");
    sb.append("Ly8gUlVOVElNRSB8IHJ4OmlmIC8gcng6aWZub3QgPSAicGF0aDE9cGF0aDIiCiAgc2VsZi5JRmVxID0g");
    sb.append("ZnVuY3Rpb24gKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgcXVlcnlTdGF0ZUxlZnQsIG5hbWVMZWZ0LCBx");
    sb.append("dWVyeVN0YXRlUmlnaHQsIG5hbWVSaWdodCwgc2hvdWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwg");
    sb.append("bWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpIHsKICAgIHZhciBjb21tb24gPSB7bGVmdDpmYWxzZSwgcmln");
    sb.append("aHQ6dHJ1ZX07CiAgICBjb21tb24ucyA9IGNvbW1vbklmKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hv");
    sb.append("dWxkQmUsIGV4cGFuZFZpZXcsIG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpOwogICAg");
    sb.append("Y29tbW9uLmsgPSBkZWJvdW5jZSg1LCBmdW5jdGlvbigpIHsKICAgICAgdGhpcy5zKHRoaXMubGVmdCA9");
    sb.append("PSB0aGlzLnJpZ2h0KTsKICAgIH0uYmluZChjb21tb24pKTsKICAgIHN1YnNjcmliZShxdWVyeVN0YXRl");
    sb.append("TGVmdCwgbmFtZUxlZnQsIGZ1bmN0aW9uIChsZWZ0KSB7CiAgICAgIHRoaXMubGVmdCA9IGxlZnQ7CiAg");
    sb.append("ICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNvbW1vbikpCiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZVJp");
    sb.append("Z2h0LCBuYW1lUmlnaHQsIGZ1bmN0aW9uIChyaWdodCkgewogICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7");
    sb.append("CiAgICAgIHRoaXMuaygpOwogICAgfS5iaW5kKGNvbW1vbikpOwogIH07CgogIC8qKiB0aGUgYWJvdmUg");
    sb.append("c3BlYWtzIHRvIGEgZGVlcCBwYXR0ZXJuLiBXZSBjb3VsZCB0YWtlIGFueSBleHByZXNzaW9uIGFuZCB0");
    sb.append("aGVuIGxpbmVhcml6ZSBpdCBpbnRvIHJlYWN0aXZlIHBhcnRzLCBhbmQgdGhlbiBhc3NlbWJsZSBhIHN0");
    sb.append("YXRlbWVudCBzdGF0ZW1lbnQgb24gdGhlIGZseS4gV2Ugc2hvdWxkIGxvb2sgaW50byB1c2luZyB0aGUg");
    sb.append("Y29uZGl0aW9uIGxhbmd1YWdlIGZvciB0aGlzICovCgogIC8vIFJVTlRJTUUgfCByeDppZiAvIHJ4Omlm");
    sb.append("bm90ID0gInBhdGgiCiAgc2VsZi5JRiA9IGZ1bmN0aW9uIChwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHF1");
    sb.append("ZXJ5U3RhdGUsIG5hbWUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2Us");
    sb.append("IGZvcmNlSGlkaW5nKSB7CiAgICBzdWJzY3JpYmUocXVlcnlTdGF0ZSwgbmFtZSwgY29tbW9uSWYocGFy");
    sb.append("ZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFrZXJUcnVlLCBtYWtlckZh");
    sb.append("bHNlLCBmb3JjZUhpZGluZykpOwogIH07CgogIC8vLyBSVU5USU1FIHwgcng6YWN0aW9uPWNvcHk6cGF0");
    sb.append("aAogIHNlbGYuYUNQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBuYW1lKSB7CiAgICBmb3JtLmFkZEV2");
    sb.append("ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZh");
    sb.append("dWx0KCk7CiAgICAgIHZhciBvYmogPSBnZXRfZm9ybShmb3JtLCB7fSk7CiAgICAgIGlmIChuYW1lICE9");
    sb.append("ICIuIiAmJiBuYW1lICE9ICIiKSB7CiAgICAgICAgdmFyIG5vID0ge307CiAgICAgICAgbm9bbmFtZV0g");
    sb.append("PSBvYmo7CiAgICAgICAgb2JqID0gbm87CiAgICAgIH0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhz");
    sb.append("dGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgICAg");
    sb.append("ZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgc2VsZi5WU1AgPSBmdW5jdGlv");
    sb.append("bihkb20sIHN0YXRlLCB2YXJzKSB7CiAgICB2YXIgc20gPSB7fTsKICAgIHNtLnZhcnMgPSB2YXJzOwog");
    sb.append("ICAgc20ubGFzdCA9IHt9OwogICAgc20ucGFyYW1zID0gIiI7CiAgICBzbS5tb2RlID0gInJlcGxhY2Ui");
    sb.append("OwogICAgc20ucGluZyA9IGRlYm91bmNlKDUwMCwgZnVuY3Rpb24oKSB7CiAgICAgIGlmICghZG9jdW1l");
    sb.append("bnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBh");
    sb.append("cmdzID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy52YXJzLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgdmFyIGFyZyA9IHRoaXMudmFyc1trXTsKICAgICAgICBpZiAoYXJnIGluIHRoaXMubGFz");
    sb.append("dCkgewogICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiArIHRoaXMubGFzdFthcmddKTsKICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgICAgdmFyIHJlc3VsdCA9ICI/IiArYXJncy5qb2luKCImIik7CiAgICAgIGlm");
    sb.append("IChyZXN1bHQgIT0gIj8iICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09IHJlc3VsdCkgewogICAg");
    sb.append("ICAgIHZhciBvYmogPSB7fTsKICAgICAgICBvYmoudmlld2VyX3NlYXJjaF9xdWVyeSA9IHJlc3VsdDsK");
    sb.append("ICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAgc3RhdGUu");
    sb.append("dmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHdpbmRvdy5oaXN0");
    sb.append("b3J5LnJlcGxhY2VTdGF0ZSh7fSwgIiIsIGZpeEhyZWYod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsg");
    sb.append("cmVzdWx0KSk7CiAgICAgICAgfSBjYXRjaChmYWlsZWRUb1JlcGxhY2VTdGF0ZSkgewoKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH0uYmluZChzbSkpOwogICAgc3RhdGUudmlldy50cmVlLnN1YnNjcmliZShmdW5j");
    sb.append("dGlvbihzKSB7CiAgICAgIHRoaXMubGFzdCA9IHM7CiAgICAgIHRoaXMucGluZygpOwogICAgfS5iaW5k");
    sb.append("KHNtKSk7CiAgfTsKCiAgc2VsZi5GID0gZnVuY3Rpb24obyxrKSB7CiAgICBpZiAoayBpbiBvKSB7CiAg");
    sb.append("ICAgIHJldHVybiBvW2tdOwogICAgfQogICAgcmV0dXJuICIiOwogIH07CgogIC8vIFJVTlRJTUUgfCA8");
    sb.append("aW5wdXQgLi4uIHJ4OnN5bmM9cGF0aCAuLi4+CiAgc2VsZi5TWSA9IGZ1bmN0aW9uIChlbCwgc3RhdGUs");
    sb.append("IG5hbWUsIG1zKSB7CiAgICB2YXIgdHlwZSA9ICgidHlwZSIgaW4gZWwpID8gZWwudHlwZS50b1VwcGVy");
    sb.append("Q2FzZSgpIDogInRleHQiOwogICAgdmFyIHNpZ25hbCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2");
    sb.append("YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRo");
    sb.append("X3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoZGVsdGEpOwog");
    sb.append("ICAgICBpZiAodGhpcy5kZWR1cGUgIT0gdmFsdWUpIHsKICAgICAgICB0aGlzLmRlZHVwZSA9IHZhbHVl");
    sb.append("OwogICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJhZnRlcnN5bmMiKSk7CiAgICAgIH0K");
    sb.append("ICAgIH0uYmluZCh7ZGVkdXBlOiIifSk7CiAgICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAg");
    sb.append("IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGRlYm91bmNlKG1zLCBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgc2lnbmFsKGVsLmNoZWNrZWQgPyB0cnVlIDogZmFsc2UpOwogICAgICB9KSk7CiAgICAgIHdp");
    sb.append("bmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwuY2hlY2tlZCA/IHRy");
    sb.append("dWUgOiBmYWxzZSk7CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsK");
    sb.append("ICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZGVib3VuY2UobXMsIGZ1bmN0aW9uICgp");
    sb.append("IHsKICAgICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgc2lnbmFsKGVsLnZhbHVlKTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0pKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBmID0gZGVib3VuY2UobXMsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAgICB9KTsKICAgICAgZWwuYWRk");
    sb.append("RXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZik7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVw");
    sb.append("JywgZikKICAgICAgZWwub25rZXl1cCA9IGVsLm9uY2hhbmdlOwogICAgICB3aW5kb3cuc2V0VGltZW91");
    sb.append("dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2lnbmFsKGVsLnZhbHVlKTsKICAgICAgfSwgNSk7CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIGZpcnN0T2NjdXIgPSBmdW5jdGlvbihhLCBiKSB7CiAgICBpZiAoYSA+IDAgJiYg");
    sb.append("YiA+IDApIHsKICAgICAgcmV0dXJuIE1hdGgubWluKGEsIGIpOwogICAgfQogICAgaWYgKGEgPiAwKSB7");
    sb.append("CiAgICAgIHJldHVybiBhOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGI7CiAgICB9CiAgfTsKICAv");
    sb.append("LyBIRUxQRVIgfCBleHRyYWN0IGFsbCB0aGUgaW5wdXRzIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQgYW5k");
    sb.append("IGJ1aWxkIGFuIG9iamVjdAogIHZhciBidWlsZF9vYmogPSBmdW5jdGlvbiAoZWwsIG9ialRvSW5zZXJ0");
    sb.append("SW50bywgcGFzc3dvcmRzLCBpc1Jvb3QpIHsKICAgIGlmIChlbC50YWdOYW1lLnRvVXBwZXJDYXNlKCkg");
    sb.append("PT0gIkZPUk0iICYmICFpc1Jvb3QpIHsKICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCBuZXN0ZWQgZm9y");
    sb.append("bXMKICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIHVwcGVyVGFnID0gZWwudGFnTmFtZS50b1VwcGVy");
    sb.append("Q2FzZSgpOwogICAgdmFyIGp1c3RTZXQgPSB1cHBlclRhZyA9PSAiVEVYVEFSRUEiIHx8IHVwcGVyVGFn");
    sb.append("ID09ICJTRUxFQ1QiOwogICAgdmFyIGlzSW5wdXRCb3ggPSB1cHBlclRhZyA9PSAiSU5QVVQiOwogICAg");
    sb.append("dmFyIGlzRmllbGRTZXQgPSB1cHBlclRhZyA9PSAiRklFTERTRVQiOwogICAgdmFyIGlzUHVsbCA9IHVw");
    sb.append("cGVyVGFnID09ICJQVUxMVkFMVUUiOwogICAgdmFyIGhhc05hbWUgPSAibmFtZSIgaW4gZWw7CiAgICB2");
    sb.append("YXIgaW5zZXJ0QXQgPSBvYmpUb0luc2VydEludG87CiAgICAvLyB0aGUgYXBwbHkgZnVuY3Rpb24gaXMg");
    sb.append("aG93IHdlIGluamVjdCB0aGUgdmFsdWUgaW50byB0aGUgb2JqZWN0CiAgICB2YXIgYXBwbHkgPSBmdW5j");
    sb.append("dGlvbiAodmFsKSB7IH07CgogICAgdmFyIG5hbWUgPSAiIjsKICAgIGlmIChoYXNOYW1lKSB7CiAgICAg");
    sb.append("IG5hbWUgPSBlbC5uYW1lOwogICAgICBpZihuYW1lID09ICIiIHx8IHR5cGVvZihuYW1lKSAhPSAic3Ry");
    sb.append("aW5nIikgewogICAgICAgIGhhc05hbWUgPSBmYWxzZTsKICAgICAgfQogICAgfQogICAgaWYgKGhhc05h");
    sb.append("bWUgJiYgKGp1c3RTZXQgfHwgaXNJbnB1dEJveCB8fCBpc0ZpZWxkU2V0IHx8IGlzUHVsbCkpIHsKICAg");
    sb.append("ICAgdmFyIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRl");
    sb.append("eE9mKCcvJykpOwogICAgICB3aGlsZSAoa0RvdE9yU2xhc2ggPiAwKSB7CiAgICAgICAgdmFyIHBhciA9");
    sb.append("IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBpZiAoIShwYXIgaW4gaW5zZXJ0");
    sb.append("QXQpKSB7CiAgICAgICAgICBpbnNlcnRBdFtwYXJdID0ge307CiAgICAgICAgfQogICAgICAgIGluc2Vy");
    sb.append("dEF0ID0gaW5zZXJ0QXRbcGFyXTsKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoa0RvdE9yU2xh");
    sb.append("c2ggKyAxKTsKICAgICAgICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyks");
    sb.append("IG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoIisiKSkg");
    sb.append("ewogICAgICAgIC8vIGhlcmUsIHdlIHB1c2ggdGhlIHZhbHVlIGludG8gdGhlIGFycmF5CiAgICAgICAg");
    sb.append("bmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoIC0gMSk7CiAgICAgICAgYXBwbHkgPSBm");
    sb.append("dW5jdGlvbiAodikgewogICAgICAgICAgaWYgKCEobmFtZSBpbiBpbnNlcnRBdCkpIHsKICAgICAgICAg");
    sb.append("ICAgaW5zZXJ0QXRbbmFtZV0gPSBbdl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbnNl");
    sb.append("cnRBdFtuYW1lXS5wdXNoKHYpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgLy8gaGVyZSB3ZSBzZXQgdGhlIG9iamVjdAogICAgICAgIGFwcGx5ID0gZnVuY3Rpb24gKHYp");
    sb.append("IHsKICAgICAgICAgIGluc2VydEF0W25hbWVdID0gdjsKICAgICAgICB9OwogICAgICB9CiAgICB9Cgog");
    sb.append("ICAgaWYgKGlzUHVsbCkgewogICAgICBhcHBseShlbC5wdWxsKCkpOwogICAgICByZXR1cm47CiAgICB9");
    sb.append("CgogICAgaWYgKGp1c3RTZXQpIHsKICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgfSBlbHNlIGlmIChp");
    sb.append("c0ZpZWxkU2V0ICYmIGhhc05hbWUpIHsKICAgICAgdmFyIG5leHRPYmplY3QgPSB7fTsKICAgICAgaWYg");
    sb.append("KCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgICAg");
    sb.append("dmFyIG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAg");
    sb.append("ICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAgICAgIGJ1aWxkX29iaihjaCwgbmV4");
    sb.append("dE9iamVjdCwgcGFzc3dvcmRzLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGFwcGx5KG5l");
    sb.append("eHRPYmplY3QpOwogICAgfSBlbHNlIGlmIChpc0lucHV0Qm94KSB7CiAgICAgIHZhciB0eXBlID0gKCJ0");
    sb.append("eXBlIiBpbiBlbCkgPyBlbC50eXBlLnRvVXBwZXJDYXNlKCkgOiAiVEVYVCI7CiAgICAgIGlmICh0eXBl");
    sb.append("ID09ICJTVUJNSVQiIHx8IHR5cGUgPT0gIlJFU0VUIikgcmV0dXJuOwogICAgICBpZiAoKHR5cGUgPT0g");
    sb.append("IlBBU1NXT1JEIiB8fCBuYW1lID09ICJwYXNzd29yZCIgfHwgbmFtZSA9PSAiY29uZmlybS1wYXNzd29y");
    sb.append("ZCIgfHwgbmFtZSA9PSAibmV3X3Bhc3N3b3JkIiB8fCBuYW1lID09ICJjb25maXJtLW5ld19wYXNzd29y");
    sb.append("ZCIpKSB7CiAgICAgICAgcGFzc3dvcmRzW25hbWVdID0gZWwudmFsdWU7CiAgICAgICAgcmV0dXJuOwog");
    sb.append("ICAgICB9CiAgICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAgICAgICBhcHBseShlbC5jaGVj");
    sb.append("a2VkID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsKICAg");
    sb.append("ICAgICBpZiAoZWwuY2hlY2tlZCkgewogICAgICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgICAgIH0K");
    sb.append("ICAgICAgfSBlbHNlIHsKICAgICAgICBhcHBseShlbC52YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIGlmICgiY2hpbGRyZW4iIGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVu");
    sb.append("OwogICAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47");
    sb.append("IGsrKykgewogICAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgICBidWlsZF9v");
    sb.append("YmooY2gsIG9ialRvSW5zZXJ0SW50bywgcGFzc3dvcmRzLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9");
    sb.append("CiAgICB9CiAgfTsKCiAgc2VsZi5CdWlsZEZvcm1PYmplY3QgPSBmdW5jdGlvbihmb3JtKSB7CiAgICB2");
    sb.append("YXIgb2JqID0ge307CiAgICBidWlsZF9vYmooZm9ybSwgb2JqLCBmYWxzZSwgdHJ1ZSk7CiAgICByZXR1");
    sb.append("cm4gb2JqOwogIH07CgogIC8vIEhFTFBFUiB8IHJldHVybiBhbiBvYmplY3Qgb2YgYWxsIHRoZSBpbnB1");
    sb.append("dHMgb2YgdGhlIGdpdmVuIGZvcm0gZWxlbWVudAogIHZhciBnZXRfZm9ybSA9IGZ1bmN0aW9uIChmb3Jt");
    sb.append("LCBwYXNzd29yZHMpIHsKICAgIHZhciBvYmogPSB7fTsKICAgIGJ1aWxkX29iaihmb3JtLCBvYmosIHBh");
    sb.append("c3N3b3JkcywgdHJ1ZSk7CiAgICByZXR1cm4gb2JqOwogIH07CgogIC8vIDwuLi4gcng6d3JhcD1jb25z");
    sb.append("dCA+CiAgdmFyIGN1c3RvbXNfY29tcG9uZW50cyA9IHt9OwogIHNlbGYucHJvdmlkZUN1c3RvbUNvbXBv");
    sb.append("bmVudCA9IGZ1bmN0aW9uKG5hbWUsIGZvbykgewogICAgY3VzdG9tc19jb21wb25lbnRzW25hbWVdID0g");
    sb.append("Zm9vOwogIH07CgogIC8vIFJVTlRJTUUgfCA8dGFnIC4uLiByeDpjdXN0b209Ij8iIHBvcnQ6JG5hbWU9");
    sb.append("JG91dHB1dCAuLi4gPi4uLjwvdGFnPiB8IGFzc2VtYmxlIGEgd3JpdGVyIG9iamVjdAogIHNlbGYuV1gg");
    sb.append("PSBmdW5jdGlvbihpbnN0cnVjdGlvbnMpIHsKICAgIHZhciB3cml0ZXIgPSB7fTsKICAgIGZvciAodmFy");
    sb.append("IGsgPSAwOyBrICsgMiA8IGluc3RydWN0aW9ucy5sZW5ndGg7IGsrKykgewogICAgICB2YXIgb2JqID0g");
    sb.append("e307CiAgICAgIHdyaXRlcltpbnN0cnVjdGlvbnNba11dID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAg");
    sb.append("ICB2YXIgcyA9IHRoaXM7CiAgICAgICAgcy53W3Mua10gPSB2YWx1ZTsKICAgICAgICBzLnQudXBkYXRl");
    sb.append("KHMuZCk7CiAgICAgIH0uYmluZCh7CiAgICAgICAgZDpwYXRoX3RvKGluc3RydWN0aW9uc1sxXS52aWV3");
    sb.append("LCBvYmopLAogICAgICAgIHc6IG9iaiwKICAgICAgICBrOiBpbnN0cnVjdGlvbnNbMl0sCiAgICAgICAg");
    sb.append("dDogaW5zdHJ1Y3Rpb25zWzFdLnZpZXcudHJlZQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiB3cml0");
    sb.append("ZXI7CiAgfTsKICBzZWxmLkMgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwgbmFtZSwgcnhvYmosIHdyaXRl");
    sb.append("ciwgY2hpbGRNYWtlcldpdGhDYXNlLCBjb25maWcpIHsKICAgIHZhciBvYmogPSB7CiAgICAgIGRvbTog");
    sb.append("ZG9tLAogICAgICBzdGF0ZTogc3RhdGUsCiAgICAgIGlucHV0czogcnhvYmosCiAgICAgIG91dHB1dHM6");
    sb.append("IHdyaXRlciwKICAgICAgbWFrZXI6IGNoaWxkTWFrZXJXaXRoQ2FzZSwKICAgICAgY29uZmlnOiBjb25m");
    sb.append("aWcsCiAgICAgIGZyYW1ld29yazogc2VsZgogICAgfTsKICAgIGlmIChuYW1lIGluIGN1c3RvbXNfY29t");
    sb.append("cG9uZW50cykgewogICAgICBjdXN0b21zX2NvbXBvbmVudHNbbmFtZV0ob2JqKTsKICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byBmaW5kIGN1c3RvbSBjb21wb25lbnQ6ICciICsg");
    sb.append("bmFtZSArICInIik7CiAgICB9CiAgfTsKCiAgdmFyIHdyYXBwZXJzID0ge307CiAgdmFyIHdyYXBwZXJz");
    sb.append("X29ubG9hZCA9IHt9OyAvLyBUT0RPOiBzdHVkeSBpZiB0aGlzIGNhbiBiZSByZW1vdmVkCiAgc2VsZi5Q");
    sb.append("UldQID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewogICAgd3JhcHBlcnNbbmFtZV0gPSBmb287CiAgICBp");
    sb.append("ZiAobmFtZSBpbiB3cmFwcGVyc19vbmxvYWQpIHsKICAgICAgdmFyIHRvbG9hZCA9IHdyYXBwZXJzX29u");
    sb.append("bG9hZFtuYW1lXTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0b2xvYWQubGVuZ3RoOyBrKyspIHsK");
    sb.append("ICAgICAgICB0b2xvYWRba10oKTsKICAgICAgfQogICAgfQogIH07CgogIC8vIDwuLi4gcng6d3JhcD1j");
    sb.append("b25zdCA+CiAgc2VsZi5XUCA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBuYW1lLCByeG9iaiwgY2hpbGRN");
    sb.append("YWtlcldpdGhDYXNlKSB7CiAgICBpZiAobmFtZSBpbiB3cmFwcGVycykgewogICAgICB3cmFwcGVyc1tu");
    sb.append("YW1lXShkb20sIHN0YXRlLCByeG9iaiwgY2hpbGRNYWtlcldpdGhDYXNlLCBzZWxmKTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBsb2FkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd3JhcHBlcnNbbmFtZV0o");
    sb.append("ZG9tLCBzdGF0ZSwgcnhvYmosIGNoaWxkTWFrZXJXaXRoQ2FzZSwgc2VsZik7CiAgICAgIH07CiAgICAg");
    sb.append("IGlmIChuYW1lIGluIHdyYXBwZXJzX29ubG9hZCkgewogICAgICAgIHdyYXBwZXJzX29ubG9hZFtuYW1l");
    sb.append("XS5wdXNoKGxvYWRlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd3JhcHBlcnNfb25sb2FkW25hbWVd");
    sb.append("ID0gW2xvYWRlcl07CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgYmVoYXZpb3JzID0ge307CiAgc2Vs");
    sb.append("Zi5kZWZpbmVCZWhhdmlvciA9IGZ1bmN0aW9uKG5hbWUsIGJlaGF2aW9yKSB7CiAgICBpZiAodHlwZW9m");
    sb.append("KGJlaGF2aW9yKSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgIGJlaGF2aW9yc1tuYW1lXSA9IGJlaGF2aW9y");
    sb.append("OwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJkZWZpbmluZyBiZWhhdmlvciAnIiAr");
    sb.append("IG5hbWUgKyAiJyBmYWlsZWQgZHVlIHRvIG5vdCBhIGZ1bmN0aW9uIikKICAgIH0KICB9OwoKICAvLyBS");
    sb.append("VU5USU1FIHwgcng6YmVoYXZpb3I9JG5hbWUKICBzZWxmLkJIViA9IGZ1bmN0aW9uKGRvbSwgc3RhdGUs");
    sb.append("IG5hbWUsIGNvbmZpZykgewogICAgaWYgKG5hbWUgaW4gYmVoYXZpb3JzKSB7CiAgICAgIHZhciBjb25u");
    sb.append("ID0gbnVsbDsKICAgICAgdHJ5IHsKICAgICAgICBjb25uID0gc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0");
    sb.append("cjsKICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgYmVoYXZpb3JzW25hbWVdKGRvbSwgY29ubiwgY29u");
    sb.append("ZmlnLCBzZWxmKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJjb3VsZG4ndCBmaW5kIGJl");
    sb.append("aGF2aW9yOiIgKyBuYW1lKTsKICAgIH0KICB9OwoKICAvLyBSVU5USU1FIHwgcmVnaXN0ZXIgdGhlIHBh");
    sb.append("Z2UgZm9yIHRoZSB1cmkgdG8gdGhlIGdpdmVuIGZvbygpLgogIHNlbGYuUEcgPSBmdW5jdGlvbiAodXJp");
    sb.append("LCBmb28pIHsKICAgIHZhciBoZWFkID0gcm91dGVyOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCB1cmku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgdmFyIHBhcnQgPSB1cmlba107CiAgICAgIGlmICghKHBhcnQgaW4g");
    sb.append("aGVhZCkpIHsKICAgICAgICBoZWFkW3BhcnRdID0ge307CiAgICAgIH0KICAgICAgaGVhZCA9IGhlYWRb");
    sb.append("cGFydF07CiAgICB9CiAgICBoZWFkWyJAIl0gPSBmb287CiAgfTsKCiAgdmFyIHJvdXRlID0gZnVuY3Rp");
    sb.append("b24gKHBhcnRzLCBhdCwgaGVhZCwgdmlldykgewogICAgaWYgKGF0IDwgcGFydHMubGVuZ3RoKSB7CiAg");
    sb.append("ICAgIGlmICgibnVtYmVyIiBpbiBoZWFkKSB7CiAgICAgICAgdmFyIG5lY2sgPSBoZWFkWyJudW1iZXIi");
    sb.append("XTsKICAgICAgICB2YXIgdmFsID0gcGFyc2VGbG9hdChwYXJ0c1thdF0pOwogICAgICAgIGlmICghaXNO");
    sb.append("YU4odmFsKSkgewogICAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2spIHsKICAgICAgICAgICAg");
    sb.append("dmlld1ticmFuY2hdID0gdmFsOwogICAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMs");
    sb.append("IGF0ICsgMSwgbmVja1ticmFuY2hdLCB2aWV3KTsKICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgICAgZGVsZXRlIHZpZXdbYnJhbmNoXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAg");
    sb.append("ICAgaWYgKCJ0ZXh0IiBpbiBoZWFkKSB7CiAgICAgICAgdmFyIG5lY2sgPSBoZWFkWyJ0ZXh0Il07CiAg");
    sb.append("ICAgICAgdmFyIHZhbCA9IHBhcnRzW2F0XTsKICAgICAgICBmb3IgKHZhciBicmFuY2ggaW4gbmVjaykg");
    sb.append("ewogICAgICAgICAgdmlld1ticmFuY2hdID0gdmFsOwogICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJv");
    sb.append("dXRlKHBhcnRzLCBhdCArIDEsIG5lY2tbYnJhbmNoXSwgdmlldyk7CiAgICAgICAgICBpZiAoY2FuZGlk");
    sb.append("YXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICBkZWxldGUgdmlld1ticmFuY2hdOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoImZp");
    sb.append("eGVkIiBpbiBoZWFkKSB7CiAgICAgICAgdmFyIG5lY2sgPSBoZWFkWyJmaXhlZCJdOwogICAgICAgIGZv");
    sb.append("ciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICBpZiAoYnJhbmNoID09IHBhcnRzW2F0XSkg");
    sb.append("ewogICAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gcm91dGUocGFydHMsIGF0ICsgMSwgbmVja1ticmFu");
    sb.append("Y2hdLCB2aWV3KTsKICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAg");
    sb.append("ICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCJzdWZmaXgiIGluIGhlYWQpIHsKICAgICAgICB2YXIgbmVjayA9IGhlYWRb");
    sb.append("InN1ZmZpeCJdOwogICAgICAgIHZhciB2YWwgPSBwYXJ0c1thdF07CiAgICAgICAgZm9yICh2YXIgYWYg");
    sb.append("PSAxOyBhZiArIGF0IDwgcGFydHMubGVuZ3RoOyBhZisrKSB7CiAgICAgICAgICB2YWwgKz0gIi8iICsg");
    sb.append("cGFydHNbYXQgKyBhZl07CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7");
    sb.append("CiAgICAgICAgICB2aWV3W2JyYW5jaF0gPSB2YWw7CiAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gcm91");
    sb.append("dGUocGFydHMsIHBhcnRzLmxlbmd0aCwgbmVja1ticmFuY2hdLCB2aWV3KTsKICAgICAgICAgIGlmIChj");
    sb.append("YW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZTsKICAgICAgICAg");
    sb.append("IH0KICAgICAgICAgIGRlbGV0ZSB2aWV3W2JyYW5jaF07CiAgICAgICAgfQogICAgICB9CiAgICB9IGVs");
    sb.append("c2UgewogICAgICBpZiAoIkAiIGluIGhlYWQpIHsKICAgICAgICByZXR1cm4gaGVhZFsiQCJdOwogICAg");
    sb.append("ICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9OwoKCiAgc2VsZi5yZXN1bWVfdXJpID0gIi8iOwog");
    sb.append("IHNlbGYuZ2F0ZXMgPSBbXTsKICAvKiogUlVOVElNRSB8IDxnYXRlLWV4aXQgZ3VhcmQ9InJlYWQiIHNl");
    sb.append("dD0iIj4gKi8KICBzZWxmLklHID0gZnVuY3Rpb24oc3RhdGVSZWFkLCByZWFkLCBzdGF0ZVdyaXRlLCB3");
    sb.append("cml0ZSkgewogICAgdmFyIHNtID0gewogICAgICB2YWx1ZTogZmFsc2UsCiAgICAgIHJ1bjogZnVuY3Rp");
    sb.append("b24oKSB7CiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICAgIHZhciBvYmogPSB7fTsKICAg");
    sb.append("ICAgICAgIG9ialt3cml0ZV0gPSB0cnVlOwogICAgICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0");
    sb.append("ZVdyaXRlLnZpZXcsIG9iaik7CiAgICAgICAgICBzdGF0ZVdyaXRlLnZpZXcudHJlZS51cGRhdGUoZGVs");
    sb.append("dGEpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsK");
    sb.append("ICAgICAgfSwKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGVSZWFkLCByZWFkLCBmdW5jdGlvbih2YWx1");
    sb.append("ZSkgewogICAgICBzbS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgICBzZWxmLmdhdGVzLnB1c2goc20p");
    sb.append("OwogIH07CiAgc2VsZi5nb3RvID0gZnVuY3Rpb24gKHVyaSwgbm93KSB7CiAgICBzZWxmLnJlc3VtZV91");
    sb.append("cmkgPSB1cmk7CiAgICB2YXIgYmxvY2tlZCA9IGZhbHNlOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBz");
    sb.append("ZWxmLmdhdGVzLmxlbmd0aDsgaysrKSB7CiAgICAgIGlmIChzZWxmLmdhdGVzW2tdLnJ1bigpKSB7CiAg");
    sb.append("ICAgICAgYmxvY2tlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIGlmIChibG9ja2VkKSB7CiAgICAg");
    sb.append("IHJldHVybjsKICAgIH0KICAgIGlmIChub3cpIHsKICAgICAgc2VsZi5nb3RvX25vdyh1cmkpOwogICAg");
    sb.append("fSBlbHNlIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("Z290b19ub3codXJpKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfTsKICAvLyBSVU5USU1FOiA8dGFnIC4u");
    sb.append("LiByeDpldmVudD0iLi4uIHJlc3VtZSAuLi4iPi4uCiAgc2VsZi5iUiA9IGZ1bmN0aW9uKCkgewogICAg");
    sb.append("cmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBzZWxmLmdhdGVzID0gW107CiAg");
    sb.append("ICAgICAgc2VsZi5nb3RvKHNlbGYucmVzdW1lX3VyaSwgZmFsc2UpOwogICAgICB9LAogICAgICBtZXJn");
    sb.append("ZTogZnVuY3Rpb24oKSB7fQogICAgfTsKICB9OwogIHNlbGYuZ290b19ub3cgPSBmdW5jdGlvbih1cmkp");
    sb.append("IHsKICAgIGlmICh1cmkuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgIHNlbGYucnVuKGRvY3VtZW50LmJv");
    sb.append("ZHksIHVyaSwgdHJ1ZSk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGZp");
    sb.append("eEhyZWYodXJpKTsKICAgIH0KICB9OwoKICB2YXIgdXJsQmFzZTY0VG9VaW50OEFycmF5ID0gZnVuY3Rp");
    sb.append("b24oYmFzZTY0KSB7CiAgICB2YXIgcmF3RGF0YSA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7CiAgICB2YXIg");
    sb.append("b3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7CiAgICBmb3IgKHZhciBp");
    sb.append("ID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHsKICAgICAgb3V0cHV0QXJyYXlbaV0gPSByYXdE");
    sb.append("YXRhLmNoYXJDb2RlQXQoaSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0QXJyYXk7CiAgfQoKICBzZWxm");
    sb.append("LmN1cnJlbnRQdXNoRXZlbnQgPSBmdW5jdGlvbigpIHt9OwoKICB2YXIgZ2V0V2ViUHVzaFN0YXR1cyA9");
    sb.append("IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ3ZWJwdXNo");
    sb.append("X3N0YXR1cyIpOwogICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YocmVzdWx0KSA9PSAic3RyaW5nIikgewog");
    sb.append("ICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuICJ1bmtub3duIjsKICB9CgogIHZhciBz");
    sb.append("ZXRQdXNoU3RhdHVzID0gZnVuY3Rpb24oc3RhdHVzKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgi");
    sb.append("d2VicHVzaF9zdGF0dXMiLCBzdGF0dXMpOwogICAgc2VsZi5jdXJyZW50UHVzaEV2ZW50KCk7CiAgfTsK");
    sb.append("ICBzZWxmLnNldFB1c2hTdGF0dXMgPSBzZXRQdXNoU3RhdHVzOwoKICB2YXIgc2V0UHVzaEV2ZW50ID0g");
    sb.append("ZnVuY3Rpb24oZm9vKSB7CiAgICBzZWxmLmN1cnJlbnRQdXNoRXZlbnQgPSBmb287CiAgfTsKCiAgdmFy");
    sb.append("IHNldHVwU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbiwgdmFwaWRQdWJsaWNLZXks");
    sb.append("IGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIGNvbm5lY3Rpb24uYnVtcCgid3Bz");
    sb.append("Iik7CiAgICB2YXIgcHVzaEtleUxvY2FsID0gInB1c2hfZW5kcG9pbnRfIiArIGlkZW50aXR5TmFtZTsK");
    sb.append("ICAgIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlcgogICAgLmdldFN1YnNjcmlwdGlvbigpLnRoZW4oYXN5");
    sb.append("bmMgZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgewogICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHsKICAg");
    sb.append("ICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgICAgICAgfQogICAgICAgIGNvbnN0IGNvbnZlcnRl");
    sb.append("ZFZhcGlkS2V5ID0gdXJsQmFzZTY0VG9VaW50OEFycmF5KHZhcGlkUHVibGljS2V5KTsKICAgICAgICBy");
    sb.append("ZXR1cm4gcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7CiAgICAgICAgICB1c2VyVmlz");
    sb.append("aWJsZU9ubHk6IHRydWUsCiAgICAgICAgICBhcHBsaWNhdGlvblNlcnZlcktleTogY29udmVydGVkVmFw");
    sb.append("aWRLZXkKICAgICAgICB9KTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgewogICAg");
    sb.append("ICAvLyBtYWtlIHN1cmUgd2UgaGF2ZSBhbiBlbmRwb2ludCBzYXZlZCByZWxhdGVkIHRvIHRoZSByaWdo");
    sb.append("dCB2ZXJzaW9uCiAgICAgIGNvbm5lY3Rpb24uSWRlbnRpdHlIYXNoKGlkZW50aXR5LCB7CiAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0");
    sb.append("ZW0oInB1c2hfd29ya2VyX3ZlcnNpb24iKSAhPSB2ZXJzaW9uIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVt");
    sb.append("KCJsYXN0X2lkZW50aXR5X3VzZWQiKSAhPSByZXN1bHQuaWRlbnRpdHlIYXNoKSB7CiAgICAgICAgICAg");
    sb.append("IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAgICAgICAgIGxvY2FsU3Rv");
    sb.append("cmFnZS5zZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9uIiwgdmVyc2lvbik7CiAgICAgICAgICAgIGxv");
    sb.append("Y2FsU3RvcmFnZS5zZXRJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiLCByZXN1bHQuaWRlbnRpdHlIYXNo");
    sb.append("KTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBzdWIgPSBzdWJzY3JpcHRpb24udG9KU09OKCk7CiAg");
    sb.append("ICAgICAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocHVzaEtleUxvY2FsKTsKICAgICAg");
    sb.append("ICAgIGlmICh2YWwgJiYgdmFsID09IHN1Yi5lbmRwb2ludCkgewogICAgICAgICAgICBjb25uZWN0aW9u");
    sb.append("LmJ1bXAoIndwYSIpOwogICAgICAgICAgICBzZXRQdXNoU3RhdHVzKCJzdWNjZXNzIik7CiAgICAgICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHN1YlsnQG1ldGhvZCddID0gJ3dlYnB1c2gn");
    sb.append("OwogICAgICAgICAgc3ViWydAdGltZSddID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICB2");
    sb.append("YXIgZGV2aWNlID0ge307CiAgICAgICAgICBkZXZpY2UubW9kZSA9ICd3ZWInCiAgICAgICAgICBpZiAo");
    sb.append("d2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpIHsK");
    sb.append("ICAgICAgICAgICAgZGV2aWNlLnVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICBjb25uZWN0aW9uLlB1c2hSZWdpc3RlcihpZGVudGl0eSwgc2VsZi5kb21haW4s");
    sb.append("IHN1YiwgZGV2aWNlLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAg");
    sb.append("ICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHB1c2hLZXlMb2NhbCwgc3ViLmVuZHBvaW50KTsKICAgICAg");
    sb.append("ICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid2VicHVzaF9zdGF0dXMiLCAic3VjY2VzcyIpOwog");
    sb.append("ICAgICAgICAgICAgIHNldFB1c2hTdGF0dXMoInN1Y2Nlc3MiKTsKICAgICAgICAgICAgfSwKICAgICAg");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgY29ubmVjdGlvbi5idW1wKCJ3");
    sb.append("cGYiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJl");
    sb.append("OiBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BmIik7CiAgICAgICAgfQog");
    sb.append("ICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICBzZXRQdXNoU3RhdHVzKCJmYWlsZWQi");
    sb.append("KTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHVzaEtleUxvY2FsKTsKICAgICAgbG9jYWxT");
    sb.append("dG9yYWdlLnJlbW92ZUl0ZW0oImxhc3RfaWRlbnRpdHlfdXNlZCIpOwogICAgICBsb2NhbFN0b3JhZ2Uu");
    sb.append("cmVtb3ZlSXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIpOwogICAgICBjb25uZWN0aW9uLmJ1bXAoIndw");
    sb.append("ZCIpOwogICAgICBjb25uZWN0aW9uLmxvZygicHVzaHNldHVwIiwgIiIgKyBlcnIpOwogICAgfSk7CiAg");
    sb.append("fQoKICB2YXIgc2V0dXBQdXNoID0gZnVuY3Rpb24ocGF0aCwgdmFwaWRQdWJsaWNLZXksIGlkZW50aXR5");
    sb.append("LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIGlmIChuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikg");
    sb.append("ewogICAgICB0cnkgewogICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlv");
    sb.append("bnMoKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb25zKSB7CiAgICAgICAgICB2YXIgZm91bmQgPSBm");
    sb.append("YWxzZTsKICAgICAgICAgIGZvciAobGV0IHJlZ2lzdHJhdGlvbiBvZiByZWdpc3RyYXRpb25zKSB7CiAg");
    sb.append("ICAgICAgICAgIGlmIChyZWdpc3RyYXRpb24uYWN0aXZlKSB7CiAgICAgICAgICAgICAgaWYgKCFyZWdp");
    sb.append("c3RyYXRpb24uYWN0aXZlLnNjcmlwdFVSTC5lbmRzV2l0aChwYXRoKSkgewogICAgICAgICAgICAgICAg");
    sb.append("cmVnaXN0cmF0aW9uLnVucmVnaXN0ZXIoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg");
    sb.append("ICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0dXBTdWJzY3JpcHRpb24ocmVnaXN0");
    sb.append("cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIWZvdW5k");
    sb.append("KSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKHBhdGgpOwogICAg");
    sb.append("ICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKGZ1bmN0aW9uIChyZWdpc3Ry");
    sb.append("YXRpb24pIHsKICAgICAgICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbihyZWdpc3RyYXRpb24sIHZhcGlk");
    sb.append("UHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKTsKICAgICAgICAgICAgfSk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24oZXgpIHsKICAgICAgICAgIGNvbm5lY3Rpb24u");
    sb.append("YnVtcCgid3BpMyIpOwogICAgICAgICAgY29ubmVjdGlvbi5sb2coIndvcmtlci1maW5kIiwgIiIgKyBl");
    sb.append("eCk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi");
    sb.append("ZmFpbGVkIHRvIHJlZ2lzdGVyIHNlcnZpY2Ugd29ya2VyIiwgZXgpOwogICAgICAgIHNldFB1c2hTdGF0");
    sb.append("dXMoImltcG9zc2libGUiKTsKICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndwaTIiKTsKICAgICAgICBj");
    sb.append("b25uZWN0aW9uLmxvZygid29ya2VyLWluc3RhbGwiLCAiIiArIGV4KTsKICAgICAgfQogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgY29uc29sZS5sb2coIm5vIHNlcnZpY2Ugd29ya2VyIGF2YWlsYWJsZSIpOwogICAgICBz");
    sb.append("ZXRQdXNoU3RhdHVzKCJpbXBvc3NpYmxlIik7CiAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3BpMSIpOwog");
    sb.append("ICAgfQogIH0KCiAgc2VsZi53b3JrZXIgPSBmdW5jdGlvbihpZGVudGl0eU5hbWUsIHBhdGgsIHZlcnNp");
    sb.append("b24pIHsKICAgIHRyeSB7CiAgICAgIGFmdGVySGF2ZUlkZW50aXR5KGlkZW50aXR5TmFtZSwgZnVuY3Rp");
    sb.append("b24oaWRlbnRpdHkpIHsKICAgICAgICBjb25uZWN0aW9uLkRvbWFpbkdldFZhcGlkUHVibGljS2V5KGlk");
    sb.append("ZW50aXR5LCBzZWxmLmRvbWFpbiwgewogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2Up");
    sb.append("IHsKICAgICAgICAgICAgc2V0dXBQdXNoKHBhdGgsIHJlc3BvbnNlLnB1YmxpY0tleSwgaWRlbnRpdHks");
    sb.append("IGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbHVyZTogZnVu");
    sb.append("Y3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gZ2V0IHB1");
    sb.append("YmxpYy1rZXk6IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gaW5pdGlhbGl6ZSB3b3Jr");
    sb.append("ZXIiLCBleCk7CiAgICB9CiAgfTsKCiAgc2VsZi5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgc2VsZi5y");
    sb.append("dW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cu");
    sb.append("bG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2gpLCBmYWxzZSk7CiAgICB3aW5kb3cu");
    sb.append("b25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7CiAgICAgIHNlbGYucnVuKGRvY3VtZW50LmJvZHksIGZp");
    sb.append("eFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaCArIHdp");
    sb.append("bmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgfTsKICB9OwoKICB2YXIgY3VycmVudE1lc3Nh");
    sb.append("Z2VIYW5kbGVycyA9IHt9OwogIHZhciByZW1vdmVBbGxNZXNzYWdlSGFuZGxlcnMgPSBmdW5jdGlvbigp");
    sb.append("IHsKICAgIGZvciAodmFyIGsgaW4gY3VycmVudE1lc3NhZ2VIYW5kbGVycykgewogICAgICBkZWxldGUg");
    sb.append("Y3VycmVudE1lc3NhZ2VIYW5kbGVyc1trXTsKICAgIH0KICB9OwoKICBzZWxmLnJlZ2lzdGVyTWVzc2Fn");
    sb.append("ZUhhbmRsZXIgPSBmdW5jdGlvbihjaGFubmVsLCBoYW5kbGVyKSB7CiAgICBpZiAoY2hhbm5lbCBpbiBj");
    sb.append("dXJyZW50TWVzc2FnZUhhbmRsZXJzKSB7CiAgICAgIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnNbY2hhbm5l");
    sb.append("bF0ucHVzaChoYW5kbGVyKTsKICAgIH0gZWxzZSB7CiAgICAgIGN1cnJlbnRNZXNzYWdlSGFuZGxlcnNb");
    sb.append("Y2hhbm5lbF0gPSBbaGFuZGxlcl07CiAgICB9CiAgfTsKCiAgdmFyIHJvdXRlTWVzc2FnZSA9IGZ1bmN0");
    sb.append("aW9uKGV2ZW50KSB7CiAgICB0cnkgewogICAgICBpZiAoISgnZGF0YScgaW4gZXZlbnQpKSB7CiAgICAg");
    sb.append("ICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgKGV2ZW50LmRhdGEpICE9ICdvYmplY3Qn");
    sb.append("KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghKCdjaGFubmVsJyBpbiBldmVudC5k");
    sb.append("YXRhKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY2hhbm5lbCA9IGV2ZW50LmRh");
    sb.append("dGEuY2hhbm5lbDsKICAgICAgdmFyIGxpc3QgPSBjdXJyZW50TWVzc2FnZUhhbmRsZXJzW2NoYW5uZWxd");
    sb.append("OwogICAgICBpZiAobGlzdCAhPT0gbnVsbCkgewogICAgICAgIHZhciBuID0gbGlzdC5sZW5ndGg7CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIGxpc3Rba10oZXZlbnQu");
    sb.append("ZGF0YSwgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAod2VsbE1heWJlVGhlRXJy");
    sb.append("b3JEb2VzbnRCZWxvbmdUb01lKSB7CiAgICAgIC8vIDpzaHJ1ZzoKICAgIH0KICB9OwoKICBpZiAod2lu");
    sb.append("ZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdl");
    sb.append("Iiwgcm91dGVNZXNzYWdlLCBmYWxzZSk7CiAgfSBlbHNlIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIHsK");
    sb.append("ICAgIHdpbmRvdy5hdHRhY2hFdmVudCgib25tZXNzYWdlIiwgcm91dGVNZXNzYWdlLCBmYWxzZSk7CiAg");
    sb.append("fQoKICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCA9IDA7CiAgLy8gQVBJIHwgUnVuIHRoZSBwYWdlIGluIHRo");
    sb.append("ZSBnaXZlbiBwbGFjZQogIHNlbGYucnVuID0gZnVuY3Rpb24gKHdoZXJlLCByYXdQYXRoLCBwdXNoKSB7");
    sb.append("CiAgICByZW1vdmVBbGxNZXNzYWdlSGFuZGxlcnMoKTsKICAgIHZhciBwYXRoID0gcmF3UGF0aDsKICAg");
    sb.append("IHdoaWxlIChwYXRoLmVuZHNXaXRoKCIvIikgJiYgcGF0aCAhPSAiLyIpIHsKICAgICAgcGF0aCA9IHBh");
    sb.append("dGguc3Vic3RyaW5nKDAsIHBhdGgubGVuZ3RoIC0gMSk7CiAgICB9CiAgICBmb3IgKGNvbktleSBpbiBj");
    sb.append("b25uZWN0aW9ucykgewogICAgICBjb25uZWN0aW9uc1tjb25LZXldLnRyZWUubnVrZSgpOwogICAgICBj");
    sb.append("b25uZWN0aW9uc1tjb25LZXldLm51a2UoKTsKICAgIH0KICAgIHZhciBzZWFyY2ggPSAiIjsKICAgIHZh");
    sb.append("ciBrUXVlc3Rpb24gPSBwYXRoLmluZGV4T2YoJz8nKTsKICAgIGlmIChrUXVlc3Rpb24gPiAwKSB7CiAg");
    sb.append("ICAgIHNlYXJjaCA9IHBhdGguc3Vic3RyaW5nKGtRdWVzdGlvbik7CiAgICAgIHBhdGggPSBwYXRoLnN1");
    sb.append("YnN0cmluZygwLCBrUXVlc3Rpb24pOwogICAgfQogICAgdmFyIHBhcnRzID0gKHBhdGguc3RhcnRzV2l0");
    sb.append("aCgiLyIpID8gcGF0aC5zdWJzdHJpbmcoMSkgOiBwYXRoKS5zcGxpdCgiLyIpOwogICAgdmFyIGluaXQg");
    sb.append("PSB7fTsKICAgIHNlbGYuY3VycmVudFZpZXdlcklkKys7CiAgICBpbml0LnZpZXdlcl9jdXJyZW50X3Bh");
    sb.append("Z2VfaWQgPSBzZWxmLmN1cnJlbnRWaWV3ZXJJZDsKICAgIGluaXQudmlld2VyX2RvbWFpbiA9IHNlbGYu");
    sb.append("ZG9tYWluOwogICAgaW5pdC52aWV3ZXJfdXJsX3ByZWZpeCA9IHNlbGYudXJsX3ByZWZpeDsKICAgIHRy");
    sb.append("eSB7CiAgICAgIGluaXQudmlld2VyX3RpbWV6b25lID0gSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29s");
    sb.append("dmVkT3B0aW9ucygpLnRpbWVab25lOwogICAgICBpbml0LnZpZXdlcl9sYW5ndWFnZSA9IG5hdmlnYXRv");
    sb.append("ci5sYW5ndWFnZTsKICAgIH0gY2F0Y2ggKGJyb3dzZXJCYWQpIHsKICAgICAgLy8gd2UganVzdCBkb24n");
    sb.append("dCBzZWUgdGhlIHZpZXdzdGF0ZSBpZiB3ZSBkb24ndCBoYXZlIHRoZXNlIGF2YWlsYWJsZQogICAgfQog");
    sb.append("ICAgaW5pdC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gIiI7CiAgICBpbml0LnZpZXdlcl93ZWJfcHVzaF9z");
    sb.append("dGF0dXMgPSBnZXRXZWJQdXNoU3RhdHVzKCk7CiAgICBpZiAoc2VhcmNoICE9ICI/IikgewogICAgICBp");
    sb.append("bml0LnZpZXdlcl9zZWFyY2hfcXVlcnkgPSBzZWFyY2g7CiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBV");
    sb.append("UkxTZWFyY2hQYXJhbXMoc2VhcmNoLnN1YnN0cmluZygxKSk7CiAgICAgIHZhciBrSXQgPSBwYXJhbXMu");
    sb.append("a2V5cygpOwogICAgICB2YXIgcCA9IGtJdC5uZXh0KCk7CiAgICAgIHdoaWxlICghcC5kb25lKSB7CiAg");
    sb.append("ICAgICAgaW5pdFtwLnZhbHVlXSA9IHBhcmFtcy5nZXQocC52YWx1ZSk7CiAgICAgICAgcCA9IGtJdC5u");
    sb.append("ZXh0KCk7CiAgICAgIH0KICAgIH0KICAgIHZhciBmb28gPSByb3V0ZShwYXJ0cywgMCwgcm91dGVyLCBp");
    sb.append("bml0KTsKICAgIG51a2Uod2hlcmUpOwogICAgaWYgKGZvbyAhPSBudWxsKSB7CiAgICAgIHdpbmRvdy5z");
    sb.append("Y3JvbGxUbygwLCAwKTsKICAgICAgdmFyIHN0YXRlID0geyBzZXJ2aWNlOiBjb25uZWN0aW9uLCBkYXRh");
    sb.append("OiBudWxsLCB2aWV3OiBmcmVzaCh3aGVyZSksIGN1cnJlbnQ6ICJ2aWV3IiB9OwogICAgICBzZWxmLl9f");
    sb.append("Y3VycmVudCA9IHN0YXRlOwoKICAgICAgY29uc3Qgdmlld3N0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0");
    sb.append("ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgIGlmIChudWxsICE9PSB2aWV3c3RhdGUpIHsKICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncnh2aWV3c3RhdGUnKTsKICAgICAgICBpbml0ID0gT2JqZWN0");
    sb.append("LmFzc2lnbih7fSwgaW5pdCwgSlNPTi5wYXJzZSh2aWV3c3RhdGUpKTsKICAgICAgfQoKICAgICAgc3Rh");
    sb.append("dGUudmlldy5pbml0ID0gaW5pdDsKICAgICAgc2VsZi5nYXRlcyA9IFtdOwogICAgICBzZWxmLnJlc3Vt");
    sb.append("ZV91cmkgPSBwYXRoOwogICAgICBzZWxmLl9pbmZsaWdodCArKzsKICAgICAgZm9vKHdoZXJlLCBzdGF0");
    sb.append("ZSk7CiAgICAgIHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoc3RhdGUudmlldy5kZWx0YSk7CiAgICAg");
    sb.append("IHN0YXRlLnZpZXcudHJlZS51cGRhdGUoaW5pdCk7CiAgICAgIHNlbGYuX2luZmxpZ2h0IC0tOwogICAg");
    sb.append("ICBpZiAocHVzaCkgewogICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7bWVyZ2U6ZmFsc2V9");
    sb.append("LCAiIiwgZml4SHJlZihwYXRoKSArIHNlYXJjaCk7CiAgICAgIH0KICAgICAgc2V0UHVzaEV2ZW50KGZ1");
    sb.append("bmN0aW9uKCkgewogICAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoeyB2aWV3ZXJfd2ViX3B1c2hf");
    sb.append("c3RhdHVzOiBnZXRXZWJQdXNoU3RhdHVzKCl9KTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBp");
    sb.append("ZiAocGF0aCAhPSAiLzQwNCIpIHsKICAgICAgICBzZWxmLnJ1bih3aGVyZSwgIi80MDQiKTsKICAgICAg");
    sb.append("fSBlbHNlIHsKICAgICAgICAvLyBkZWZhdWx0IDQwNAogICAgICB9CiAgICB9CiAgICB3aGVyZS5hcHBl");
    sb.append("bmRDaGlsZChjb25uZWN0aW9uTW9uaXRvckRvbSk7CiAgfTsKCiAgdmFyIGlkZW50aXRpZXMgPSB7fTsK");
    sb.append("CiAgdmFyIHN0YXNoX2lkZW50aXR5ID0gZnVuY3Rpb24obmFtZSwgaWRlbnRpdHksIGNvbm5lY3Rpb24p");
    sb.append("IHsKICAgIC8vIFRPRE86IGJsb3cgYXdheSBjb25uZWN0aW9ucyAoT0ssIHdoYXQgZG9lcyB0aGlzIG1l");
    sb.append("YW4pCiAgICBpZGVudGl0aWVzW25hbWVdID0gaWRlbnRpdHk7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bSgiaWRlbnRpdHlfIiArIG5hbWUsIGlkZW50aXR5KTsKICAgIHZhciByZXEgPSB7fTsKICAgIHJlcVsn");
    sb.append("bmFtZSddID0gbmFtZTsKICAgIHJlcVsnaWRlbnRpdHknXSA9IGlkZW50aXR5OwogICAgcmVxWydtYXgt");
    sb.append("YWdlJ10gPSA1NTI5NjAwOwoKICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAg");
    sb.append("eGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5yZWFk");
    sb.append("eVN0YXRlID09IDQpIHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgibGFzdF9zdGFzaGVkX2lkZW50aXR5XyIgKyBuYW1lLCAiIiArIERh");
    sb.append("dGUubm93KCkpCiAgICAgICAgICBpZiAoY29ubmVjdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgIGNv");
    sb.append("bm5lY3Rpb24uSWRlbnRpdHlTdGFzaChpZGVudGl0eSwgbmFtZSwgewogICAgICAgICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIFRISVMgSEFTIERSQUdPTlMgVU5USUwg");
    sb.append("QSBGVUxMIFBST0RVQ1RJT04gREVQTE9ZTUVOVAogICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdl");
    sb.append("LnNldEl0ZW0oImlkZW50aXR5XyIgKyBuYW1lLCAiY29va2llOiIgKyBuYW1lKTsKICAgICAgICAgICAg");
    sb.append("ICB9LAogICAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uICh4eXopIHsKCiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB4");
    sb.append("aHR0cC5vcGVuKCJQVVQiLCBzZWxmLnByb3RvY29sICsgIi8vIiArIHNlbGYuaG9zdCArICIvfnN0YXNo");
    sb.append("LyIgKyBEYXRlLm5vdygpLCB0cnVlKTsKICAgIHhodHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAg");
    sb.append("ICB4aHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KHJlcSkpOwogIH07CgogIHZhciBzaG91bGRfc3Rhc2hf");
    sb.append("aWRlbnRpdHkgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgc3Rhc2hfa2V5ID0gImxhc3Rfc3Rhc2hl");
    sb.append("ZF9pZGVudGl0eV8iICsgbmFtZTsKICAgIHZhciBsYXN0U3Rhc2ggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRl");
    sb.append("bShzdGFzaF9rZXkpOwogICAgdHJ5IHsKICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlRmxvYXQobGFzdFN0");
    sb.append("YXNoKTsKICAgICAgaWYgKGlzTmFOKHBhcnNlZCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg");
    sb.append("fQogICAgICB2YXIgYWdlID0gRGF0ZS5ub3coKSAtIG5ldyBEYXRlKHBhcnNlZCkuZ2V0VGltZSgpOwog");
    sb.append("ICAgICByZXR1cm4gYWdlID49IDEuNDRlKzc7CiAgICB9IGNhdGNoIChleCkgewogICAgICByZXR1cm4g");
    sb.append("dHJ1ZTsKICAgIH0KICB9OwoKICBzZWxmLlNJR05PVVQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZGVudGl0");
    sb.append("aWVzID0ge307CiAgICBmb3IgKHZhciBpZGVudGl0eU5hbWUgaW4gaWRlbnRpdGllcykgewogICAgICBs");
    sb.append("b2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7CiAgICB9CiAg");
    sb.append("ICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIpOwogICAgdmFyIGF4ZSA9");
    sb.append("IFtdOwogICAgZm9yICh2YXIgY2lkIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHZhciBjbyA9IGNvbm5l");
    sb.append("Y3Rpb25zW2NpZF07CiAgICAgIGlmIChjby5wdHIgIT0gbnVsbCkgewogICAgICAgIGNvLnB0ci5lbmQo");
    sb.append("eyBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHsgfSB9KTsKICAg");
    sb.append("ICAgfQogICAgICBheGUucHVzaChjaWQpOwogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUu");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgZGVsZXRlIGNvbm5lY3Rpb25zW2F4ZVtrXV07CiAgICB9CiAgfTsK");
    sb.append("CiAgc2VsZi5HT09HTEVfU0lHTl9PTiA9IGZ1bmN0aW9uIChhY2Nlc3NUb2tlbikgewogICAgY29ubmVj");
    sb.append("dGlvbi5Jbml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHsKICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24gKHBheWxvYWQpIHsKICAgICAgICBzdGFzaF9pZGVudGl0eSgiZGVmYXVsdCIsIHBheWxvYWQu");
    sb.append("aWRlbnRpdHksIGNvbm5lY3Rpb24pOwogICAgICAgIHNlbGYuZ290bygiLyIsIGZhbHNlKTsKICAgICAg");
    sb.append("fSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbnNvbGUubG9nKCJH");
    sb.append("b29nbGUgZmFpbHVyZTogIiArIHJlYXNvbik7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8qKiBSVU5U");
    sb.append("SU1FIHwgcmVkaXJlY3QgdG8gYSBwYWdlIHdpdGggc3RhdGUgKi8KICBzZWxmLmFSRHAgPSBmdW5jdGlv");
    sb.append("biAoc3RhdGUsIHB1bGxlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHVyaSA9");
    sb.append("IHB1bGxlcihzdGF0ZS52aWV3LmluaXQpOwogICAgICByZXR1cm4gdXJpOwogICAgfTsKICB9OwoKICAv");
    sb.append("KiogUlVOVElNRSB8IHJlZGlyZWN0IHRvIGEgc3RhdGljIHBhZ2UgKi8KICBzZWxmLmFSRHogPSBmdW5j");
    sb.append("dGlvbiAocmF3KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcmF3OwogICAg");
    sb.append("fQogIH07CgogIHZhciBpZGVudGl0eUV2ZW50cyA9IHt9OwogIHZhciBhZnRlckhhdmVJZGVudGl0eSA9");
    sb.append("IGZ1bmN0aW9uKGlkZW50aXR5TmFtZSwgY2FsbGJhY2spIHsKICAgIGlkZW50aXR5RXZlbnRzW2lkZW50");
    sb.append("aXR5TmFtZV0gPSBjYWxsYmFjazsKICB9OwogIHNlbGYuYWZ0ZXJIYXZlSWRlbnRpdHkgPSBhZnRlckhh");
    sb.append("dmVJZGVudGl0eTsKCiAgLyoqIGZvciBjdXN0b20gZWxlbWVudHMgdG8gbGVhcm4gb2YgdGhlIGlkZW50");
    sb.append("aXR5ICovCiAgc2VsZi5JRCA9IGZ1bmN0aW9uIChpZGVudGl0eU5hbWUsIHJlZGlyZWN0VG9GdW5jKSB7");
    sb.append("CiAgICBpZiAoaWRlbnRpdHlOYW1lID09PSB0cnVlKSB7CiAgICAgIGlkZW50aXR5TmFtZSA9ICJkZWZh");
    sb.append("dWx0IjsKICAgIH0KICAgIC8vIElGIGlkZW50aXR5IGNvbnRhaW5zIGRvdHMKICAgIHZhciBpZGVudGl0");
    sb.append("eSA9IG51bGw7CiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uICgpIHsKICAgIH07CgogICAgdmFyIHZh");
    sb.append("bCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lKTsKICAgIGlm");
    sb.append("ICh2YWwpIHsKICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gdmFsOwogICAgICBpZiAoc2hv");
    sb.append("dWxkX3N0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSkpIHsKICAgICAgICBzdGFzaF9pZGVudGl0eShp");
    sb.append("ZGVudGl0eU5hbWUsIHZhbCwgbnVsbCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaWRlbnRpdHlOYW1l");
    sb.append("LnN0YXJ0c1dpdGgoImRpcmVjdDoiKSkgewogICAgICAvLyBVc2UsIGFzIGlzCiAgICAgIGlkZW50aXR5");
    sb.append("ID0gaWRlbnRpdHlOYW1lLnN1YnN0cmluZyg3KTsKICAgIH0gZWxzZSBpZiAoaWRlbnRpdHlOYW1lIGlu");
    sb.append("IGlkZW50aXRpZXMpIHsKICAgICAgaWRlbnRpdHkgPSBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV07CiAg");
    sb.append("ICAgIGNsZWFudXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVsZXRlIGlkZW50aXRpZXNbaWRlbnRp");
    sb.append("dHlOYW1lXTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfIiArIGlkZW50");
    sb.append("aXR5TmFtZSk7CiAgICAgICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9GdW5jKCksIGZhbHNlKTsKICAgICAg");
    sb.append("fTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHdoYXRldmVyIHBhZ2Ugd2UgYXJlLCBuZWVkcyB0byBkaWUg");
    sb.append("d2hpY2ggbWVhbnMgd2UgbmVlZCB0byBudWtlIGV2ZXJ5dGhpbmchCiAgICAgIHdpbmRvdy5zZXRUaW1l");
    sb.append("b3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmdvdG8ocmVkaXJlY3RUb0Z1bmMoKSwgZmFsc2Up");
    sb.append("OwogICAgICB9LCAxMCk7CiAgICAgIHJldHVybiB7IGFib3J0OiB0cnVlIH07CiAgICB9CiAgICBpZiAo");
    sb.append("aWRlbnRpdHlOYW1lIGluIGlkZW50aXR5RXZlbnRzKSB7CiAgICAgIGlkZW50aXR5RXZlbnRzW2lkZW50");
    sb.append("aXR5TmFtZV0oaWRlbnRpdHkpOwogICAgICBkZWxldGUgaWRlbnRpdHlFdmVudHNbaWRlbnRpdHlOYW1l");
    sb.append("XTsKICAgIH0KICAgIHJldHVybiB7IGFib3J0OiBmYWxzZSwgY2xlYW51cDogY2xlYW51cCwgaWRlbnRp");
    sb.append("dHk6IGlkZW50aXR5IH07CiAgfTsKCiAgLyogRm9yIGN1c3RvbSBjYWxsYmFja3MgdG8gcmVkaXJlY3Qg");
    sb.append("YW5kIGludmFsaWRhdGUgSUQgZmFpbHVyZXMgKi8KICBzZWxmLkZJRENMID0gZnVuY3Rpb24gKGNhbGxi");
    sb.append("YWNrLCBsb29rdXApIHsKICAgIHJldHVybiB7CiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQp");
    sb.append("IHsKICAgICAgICBjYWxsYmFjay5zdWNjZXNzKHJlc3VsdCk7CiAgICAgIH0sCiAgICAgIG5leHQ6IGZ1");
    sb.append("bmN0aW9uIChpdGVtKSB7CiAgICAgICAgY2FsbGJhY2submV4dChpdGVtKTsKICAgICAgfSwKICAgICAg");
    sb.append("Y29tcGxldGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICBjYWxsYmFjay5jb21wbGV0ZSgpOwogICAgICB9");
    sb.append("LAogICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY2FsbGJhY2suZmFpbHVy");
    sb.append("ZShyZWFzb24pOwogICAgICAgIGlmIChyZWFzb24gPT0gNDAzNDAzIHx8IHJlYXNvbiA9PSA0MDM1MDAg");
    sb.append("fHwgcmVhc29uID09IDE4NDMzMyB8fCByZWFzb24gPT0gOTgyMjUzKSB7CiAgICAgICAgICBsb29rdXAu");
    sb.append("Y2xlYW51cCgpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9OwoKICB2YXIgY3VzdG9tRGF0YVNv");
    sb.append("dXJjZXMgPSB7fTsKCiAgLyoqIHByb3ZpZGUgY3VzdG9tIGRhdGEgKi8KICBzZWxmLlBSQ1VEQSA9IGZ1");
    sb.append("bmN0aW9uIChuYW1lLCBmb28pIHsKICAgIGN1c3RvbURhdGFTb3VyY2VzW25hbWVdID0gZm9vOwogIH07");
    sb.append("CgogIC8vIDxjdXN0b21kYXRhIHNyYz1zcmMgKHBhcmFtZXRlcjp4PXkpKiA+CiAgc2VsZi5DVURBID0g");
    sb.append("ZnVuY3Rpb24gKHBhcmVudCwgcHJpb3JTdGF0ZSwgc3JjLCByeG9iaiwgcmVkaXJlY3RUbywgY2hpbGRN");
    sb.append("YWtlcikgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgcnhvYmouX18gPSBkZWJvdW5j");
    sb.append("ZSgxMCwgZnVuY3Rpb24gKCkgewogICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgbnVrZShwYXJl");
    sb.append("bnQpOwogICAgICB2YXIgY3VzdG9tVHJlZSA9IGZhbHNlOwogICAgICBpZiAoc3JjIGluIGN1c3RvbURh");
    sb.append("dGFTb3VyY2VzKSB7CiAgICAgICAgdmFyIGNvbnMgPSBjdXN0b21EYXRhU291cmNlc1tzcmNdOwogICAg");
    sb.append("ICAgIGlmICh0eXBlb2YgKGNvbnMpID09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIGN1c3RvbVRyZWUg");
    sb.append("PSBjb25zKHJ4b2JqLCBwcmlvclN0YXRlLCByZWRpcmVjdFRvLCBzZWxmKTsKICAgICAgICB9CiAgICAg");
    sb.append("IH0KICAgICAgaWYgKCFjdXN0b21UcmVlKSB7CiAgICAgICAgY3VzdG9tVHJlZSA9IG5ldyBBZGFtYVRy");
    sb.append("ZWUoKTsKICAgICAgfQogICAgICB2YXIgc3RhdGUgPSB7CiAgICAgICAgc2VydmljZTogcHJpb3JTdGF0");
    sb.append("ZS5zZXJ2aWNlLAogICAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogcHJpb3JTdGF0ZS5jb25uZWN0aW9u");
    sb.append("LCB0cmVlOiBjdXN0b21UcmVlLCBkZWx0YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAog");
    sb.append("ICAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgICAgY3VycmVu");
    sb.append("dDogImRhdGEiCiAgICAgIH07CiAgICAgIGNoaWxkTWFrZXIoc3RhdGUpOwogICAgICBzdWJzY3JpYmVf");
    sb.append("c3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgIH0pOwogIH07CgogIC8vIDx0aXRsZSB2YWx1ZT0iLi4uIiAv");
    sb.append("PgogIHNlbGYuU1QgPSBmdW5jdGlvbiAocnhvYmopIHsKICAgIGlmIChyeG9iai52YWx1ZSkgewogICAg");
    sb.append("ICBkb2N1bWVudC50aXRsZSA9IHJ4b2JqLnZhbHVlOwogICAgfQogICAgcnhvYmouX18gPSBkZWJvdW5j");
    sb.append("ZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChyeG9iai52YWx1ZSkgewogICAgICAgIGRvY3VtZW50");
    sb.append("LnRpdGxlID0gcnhvYmoudmFsdWU7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIDx2aWV3c3luYz4K");
    sb.append("ICBzZWxmLlZTeSA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIGF2YWlsLCBub3RhdmFpbCkg");
    sb.append("ewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1YigpOwogICAgcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rp");
    sb.append("b24uc3Vic2NyaWJlX3N5bmMoZnVuY3Rpb24gKHN5bmNlZCkgewogICAgICBudWtlKHBhcmVudCk7CiAg");
    sb.append("ICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICB2YXIgc3RhdGUgPSBmb3JrKHByaW9yU3RhdGUpOwog");
    sb.append("ICAgICBpZiAoc3luY2VkKSB7CiAgICAgICAgYXZhaWwocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgbm90YXZhaWwocGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJl");
    sb.append("X3N0YXRlKHN0YXRlLCB1bnN1Yik7CiAgICAgIC8vIFRPRE86IHJldHVybiBmYWxzZSB0byB1bnN1Ygog");
    sb.append("ICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogIH07CgogIHZhciBiaW5kX3Jlc3BvbmRlciA9IGZ1bmN0");
    sb.append("aW9uIChjbywgY2xlYW51cCwgcmV0cnlfc20pIHsKICAgIHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3Jz");
    sb.append("ID0gMDsKICAgIHJldHJ5X3NtLmJhY2tvZmYgPSAxOwogICAgcmV0dXJuIHsKICAgICAgbmV4dDogZnVu");
    sb.append("Y3Rpb24gKHBheWxvYWQpIHsKICAgICAgICBjby5kZWJ1Z2dlcihwYXlsb2FkKTsKICAgICAgICBjby5z");
    sb.append("ZXRfY29ubmVjdGVkKHRydWUpOwogICAgICAgIHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3JzID0gMDsK");
    sb.append("ICAgICAgICByZXRyeV9zbS5iYWNrb2ZmID0gMTsKICAgICAgICBpZiAoImRhdGEiIGluIHBheWxvYWQu");
    sb.append("ZGVsdGEpIHsKICAgICAgICAgIGNvLnRyZWUudXBkYXRlKHBheWxvYWQuZGVsdGEuZGF0YSk7CiAgICAg");
    sb.append("ICAgfQogICAgICAgIGlmICgib3V0c3RhbmRpbmciIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAg");
    sb.append("IGNvLm9uZGVjaWRlKHBheWxvYWQuZGVsdGEub3V0c3RhbmRpbmcpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28udmlld3N0YXRldHJl");
    sb.append("ZS51cGRhdGUocGF5bG9hZC5kZWx0YS52aWV3c3RhdGUpOwogICAgICAgIH0KICAgICAgICBpZiAoJ2xv");
    sb.append("ZycgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZC5kZWx0YS5s");
    sb.append("b2cpOwogICAgICAgIH0KICAgICAgICBpZiAoJ3JlbG9hZCcgaW4gcGF5bG9hZC5kZWx0YSkgewogICAg");
    sb.append("ICAgICAgaWYgKHBheWxvYWQuZGVsdGEucmVsb2FkWydwcmVzZXJ2ZS12aWV3J10pIHsKICAgICAgICAg");
    sb.append("ICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3J4dmlld3N0YXRlJywgSlNPTi5zdHJpbmdpZnkoY28udmll");
    sb.append("d3N0YXRldHJlZS5yYXcoKSkpOwogICAgICAgICAgfQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJl");
    sb.append("bG9hZCgpOwogICAgICAgIH0KICAgICAgICBpZiAoJ3ZpZXdwb3J0JyBpbiBwYXlsb2FkLmRlbHRhICYm");
    sb.append("ICdtZXNzYWdlJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICB2YXIgdmlld3BvcnQgPSBwYXls");
    sb.append("b2FkLmRlbHRhLnZpZXdwb3J0OwogICAgICAgICAgaWYgKHZpZXdwb3J0IGluIGNvLmhhbmRsZXJzKSB7");
    sb.append("CiAgICAgICAgICAgIGNvLmhhbmRsZXJzW3ZpZXdwb3J0XShwYXlsb2FkLmRlbHRhLm1lc3NhZ2UsIGNv");
    sb.append("KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCd2aWV3LXN0YXRlLWZpbHRlcicgaW4g");
    sb.append("cGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgdmFyIGZpbHRlciA9IHt9OwogICAgICAgICAgdmFyIGtl");
    sb.append("eXMgPSBwYXlsb2FkLmRlbHRhWyd2aWV3LXN0YXRlLWZpbHRlciddOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("ayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgIGZpbHRlcltrZXlzW2tdXSA9");
    sb.append("IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBjby5maWx0ZXIgPSBmaWx0ZXI7CiAgICAgICAgICBj");
    sb.append("by5oYXNfZmlsdGVyID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2Fk");
    sb.append("LmRlbHRhKSB7CiAgICAgICAgICBzZWxmLmdvdG8ocGF5bG9hZC5kZWx0YS5nb3RvLCBmYWxzZSk7CiAg");
    sb.append("ICAgICAgfQogICAgICB9LAogICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgewogICAgICAgIC8vIHNo");
    sb.append("b3VsZG4ndCByZWFsaXN0aWNhbGx5IGhhcHBlbiBUT0RPOiB2YWxpZGF0ZSA8LSB0cnV0aAogICAgICAg");
    sb.append("IGNvLnNldF9jb25uZWN0ZWQoZmFsc2UpOwogICAgICAgIGNvLnB0ciA9IG51bGw7CiAgICAgIH0sCiAg");
    sb.append("ICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAvLyByZWdpc3RlciB0aGUgZmFp");
    sb.append("bHVyZQogICAgICAgIGNvLnNldF9jb25uZWN0ZWQoZmFsc2UpOwogICAgICAgIGNvLnB0ciA9IG51bGw7");
    sb.append("CiAgICAgICAgaWYgKHJlYXNvbiA9PSA0MDM0MDMgfHwgcmVhc29uID09IDQwMzUwMCB8fCByZWFzb24g");
    sb.append("PT0gMTg0MzMzIHx8IHJlYXNvbiA9PSA5ODIyNTMpIHsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gaXMgaXQgYW4gZXhwZWN0ZWQgZXJyb3IgdGhh");
    sb.append("dCB3aWxsIGhhcHBlbiBhIGJ1bmNoPwogICAgICAgIHZhciBleHBlY3RlZF9lcnJvciA9IHJlYXNvbiA9");
    sb.append("PSA5OTk7CiAgICAgICAgLy8gZG8gd2Ugbm90IGtub3cgYWJvdXQgYW4gZXJyb3IgdGhhdCBoYXBwZW5z");
    sb.append("IGEgYnVuY2g/IGlmIHNvLCB0aGVuIGxldCdzIGF0IGxlYXN0IHRyeSBhZ2FpbiBhIG51bWJlciBvZiBm");
    sb.append("aW5pdGUgdGltZXMuCiAgICAgICAgdmFyIGJsaW5kX3JldHJ5ID0gcmV0cnlfc20udW5leHBlY3RlZF9l");
    sb.append("cnJvcnMgPCAxNjsKICAgICAgICBpZiAoYmxpbmRfcmV0cnkpIHsKICAgICAgICAgIHJldHJ5X3NtLnVu");
    sb.append("ZXhwZWN0ZWRfZXJyb3JzKys7CiAgICAgICAgfQogICAgICAgIC8vIHJldHJ5IG9uIGVpdGhlciBjYXNl");
    sb.append("CiAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yIHx8IGJsaW5kX3JldHJ5KSB7CiAgICAgICAgICByZXRy");
    sb.append("eV9zbS5iYWNrb2ZmID0gTWF0aC5jZWlsKE1hdGgubWluKHJldHJ5X3NtLmJhY2tvZmYgKyBNYXRoLnJh");
    sb.append("bmRvbSgpICogcmV0cnlfc20uYmFja29mZiArIChibGluZF9yZXRyeSA/IDEyNSA6IDEpLCAyNTAwKSk7");
    sb.append("CiAgICAgICAgICBpZiAoZXhwZWN0ZWRfZXJyb3IpIHsKICAgICAgICAgICAgLy8gdGhlIGV4cGVjdGVk");
    sb.append("IGVycm9yIGlzIGEgY29ubmVjdGlvbiBldmVudCwgc28gd2UgcHJvdGVjdCB0aGUgc2VydmljZSBhbmQg");
    sb.append("anVtcCBiYWNrLW9mZiByaWdodCB0byBuZWFyIG1heCBvdmVyIGEgbmljZSBzcHJlYWQKICAgICAgICAg");
    sb.append("ICAgcmV0cnlfc20uYmFja29mZiA9IE1hdGgubWluKDEyNTAsIHJldHJ5X3NtLmJhY2tvZmYpICsgTWF0");
    sb.append("aC5yYW5kb20oKSAqIDEyNTA7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXhwZWN0ZWRfZXJyb3Ip");
    sb.append("IHsKICAgICAgICAgICAgY29uc29sZS5sb2coImNvbm5lY3QtbG9zc3xyZXRyeWluZy4uLiAoIiArIHJl");
    sb.append("dHJ5X3NtLmJhY2tvZmYgKyAiKTsgcmVhc29uPSIgKyByZWFzb24gKyAoYmxpbmRfcmV0cnkgPyAiIFti");
    sb.append("bGluZF0iIDogIiIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJj");
    sb.append("b25uZWN0LWZhaWx1cmV8cmV0cnlpbmcuLi4gKCIgKyByZXRyeV9zbS5iYWNrb2ZmICsgIik7IHJlYXNv");
    sb.append("bj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5ID8gIiBbYmxpbmRdIiA6ICIiKSk7CiAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICAvLyBUT0RPOiBuZWVkIGEgZGlmZmVyZW50IGZlZWRiYWNrIG1lY2hhbmlzbSAobWF5");
    sb.append("YmUgYSBudW1iZXIgdW5kZXIgdGhlIHdpZmkgaWNvbj8pCiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91");
    sb.append("dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0cnlfc20uZ28oKTsKICAgICAgICAgIH0sIHJldHJ5");
    sb.append("X3NtLmJhY2tvZmYpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZ2F2ZSB1");
    sb.append("cCBjb25uZWN0aW9uOyIgKyBjby5sYWJlbCArICI7IHJlYXNvbj0iICsgcmVhc29uKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgc2V0dXBfY28gPSBmdW5jdGlvbihkZXNpcmVkLCB1bnN1");
    sb.append("YiwgY28sIHN0YXRlKSB7CiAgICBjby52aWV3c3RhdGV0cmVlID0gc3RhdGUudmlldy50cmVlOwogICAg");
    sb.append("dmFyIHN5bmNfdHJlZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gbGV0J3MgY29weSBvdXQgdGhlIHRy");
    sb.append("ZWUgZnJvbSB0aGUgdmlld3N0YXRlCiAgICAgIHZhciBuZXdfdHJlZSA9IHNhZmVfZmlsdGVyKHN0YXRl");
    sb.append("LnZpZXcudHJlZS5jb3B5KCkpOwoKICAgICAgLy8gaWYgd2UgaGF2ZSBnb3QgYSBmaWx0ZXIgZnJvbSB0");
    sb.append("aGUgc2VydmVyLCB0aGVuIGxldCdzIGZpbHRlcgogICAgICBpZiAoY28uaGFzX2ZpbHRlcikgewogICAg");
    sb.append("ICAgIC8vIHJlY29uc3RydWN0IHRoZSBuZXcgdmlldyBiYXNlZCBvbiB0aGUgaW50ZXJzZWN0aW9uIG9m");
    sb.append("IHRoZSBmaWx0ZXIgYW5kIHRoZSBuZXcgc3RhdGUKICAgICAgICB2YXIgZmlsdGVyZWQgPSB7fTsKICAg");
    sb.append("ICAgICBmb3IgKHZhciBrIGluIG5ld190cmVlKSB7CiAgICAgICAgICBpZiAoY28uZmlsdGVyW2tdKSB7");
    sb.append("CiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gbmV3X3RyZWVba107CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("fQogICAgICAgIC8vIGFzc3VtZSB0aGUgbmV3IHRyZWUKICAgICAgICBuZXdfdHJlZSA9IGZpbHRlcmVk");
    sb.append("OwogICAgICB9CiAgICAgIC8vIGlmIHRoZSBjbG9uZSAoaS5lLiBzdHJpbmdpZmllZCB2ZXJzaW9uKSBp");
    sb.append("cyB0aGUgc2FtZSBhcyB3aGF0IHdlIGxhc3Qgc2VudCwgdGhlbiBkb24ndCBzZW5kIGFueXRoaW5nCiAg");
    sb.append("ICAgIHZhciBwcmlvcl9jbG9uZSA9IEpTT04uc3RyaW5naWZ5KG5ld190cmVlKTsKICAgICAgaWYgKHBy");
    sb.append("aW9yX2Nsb25lID09IGNvLnZpZXdzdGF0ZV9jbG9uZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQog");
    sb.append("ICAgICBjby52aWV3c3RhdGVfc2VudCA9IGZhbHNlOwogICAgICBjby52c3NlcSsrOwogICAgICBjby5z");
    sb.append("eW5jKCk7CiAgICAgIHZhciBzeW5jZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGNvLnZzc2Vx");
    sb.append("ID09IHRoaXMuYm91bmQpIHsKICAgICAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAg");
    sb.append("ICAgIGNvLnN5bmMoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7IGJvdW5kOiBjby52c3NlcSB9KTsK");
    sb.append("ICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gSlNPTi5zdHJpbmdpZnkobmV3X3RyZWUpOwogICAgICBj");
    sb.append("by5wdHIudXBkYXRlKG5ld190cmVlLCB7IHN1Y2Nlc3M6IHN5bmNlZCwgZmFpbHVyZTogc3luY2VkIH0p");
    sb.append("OwogICAgfTsKICAgIHZhciBiaW5kID0gZnVuY3Rpb24gKHNlbmROb3cpIHsKICAgICAgdW5zdWIudmll");
    sb.append("dyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChjby5w");
    sb.append("dHIgPT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBzeW5jX3RyZWUo");
    sb.append("KTsKICAgICAgfSk7CiAgICAgIGlmIChzZW5kTm93KSB7CiAgICAgICAgc3luY190cmVlKCk7CiAgICAg");
    sb.append("IH0KICAgIH07CiAgICBpZiAoY28ucHRyICE9IG51bGwgJiYgY28uYm91bmQgPT0gZGVzaXJlZCkgewog");
    sb.append("ICAgICBiaW5kKHRydWUpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoY28ucHRyICE9");
    sb.append("IG51bGwpIHsKICAgICAgY28ucHRyLmVuZCh7IHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHsgfSwgZmFpbHVy");
    sb.append("ZTogZnVuY3Rpb24gKCkgeyB9IH0pOwogICAgICBjby5wdHIgPSBudWxsOwogICAgfQogICAgcmV0dXJu");
    sb.append("IGJpbmQ7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gYmlsbGluZyAuLi4+CiAgc2VsZi5CQ09OTkVDVCA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9IHsKICAgICAgdmlldzogZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBkZWJvdW5jZSg1LCBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgIGlmICghKCduYW1lJyBpbiByeG9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAg");
    sb.append("IH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVudGl0eSwgZnVuY3Rpb24gKCkg");
    sb.append("eyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICBpZiAoaWRMb29rdXAuYWJvcnQpIHsKICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2JqKHJ4b2Jq");
    sb.append("Lm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9ICI6YmlsbGluZzoiICsgaWRMb29rdXAuaWRlbnRpdHk7");
    sb.append("CiAgICAgIHZhciBiaW5kID0gc2V0dXBfY28oZGVzaXJlZCwgdW5zdWIsIGNvLCBzdGF0ZSk7CiAgICAg");
    sb.append("IGlmIChiaW5kID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjby5ib3Vu");
    sb.append("ZCA9IGRlc2lyZWQ7CiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2");
    sb.append("YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3ViLnZpZXcoKTsKICAgICAgY28u");
    sb.append("aWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMgPSB7fTsKICAgICAgY28udmlld3N0");
    sb.append("YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9ICJCaWxsaW5nIFsgIiArIHJ4b2JqLm5hbWUg");
    sb.append("KyAiXSI7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gdHJ1ZTsKICAgICAgY28udmlhX2RvbWFpbiA9IGZh");
    sb.append("bHNlOwogICAgICB2YXIgcmV0cnlfc20gPSB7fTsKICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmlu");
    sb.append("ZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJldHJ5X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5j");
    sb.append("dGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRvIG5vdGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRl");
    sb.append("X2Nsb25lID0gInt9IjsKICAgICAgICBjby5wdHIgPSBjb25uZWN0aW9uLkJpbGxpbmdDb25uZWN0aW9u");
    sb.append("Q3JlYXRlKGlkZW50aXR5LCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9z");
    sb.append("bS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7");
    sb.append("CiAgfTsKCiAgLy8gQ0hFQ0sgRk9SIE9WRVJSSURFIFNJR05BTCBIRVJFCiAgc2VsZi5kb21haW4gPSBs");
    sb.append("b2NhdGlvbi5ob3N0bmFtZTsKICBzZWxmLmhvc3QgPSBsb2NhdGlvbi5ob3N0OwogIHNlbGYucHJvdG9j");
    sb.append("b2wgPSBsb2NhdGlvbi5wcm90b2NvbDsKICBzZWxmLmlzX21vYmlsZSA9IGZhbHNlOwoKICB2YXIgaG9z");
    sb.append("dE92ZXJyaWRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm1kb19ob3N0Iik7IC8vIG11bHRpIGRvbWFp");
    sb.append("biBlbmRwb2ludCBjaG9pY2UKICBpZiAoaG9zdE92ZXJyaWRlICE9IG51bGwpIHsKICAgIHNlbGYuaG9z");
    sb.append("dCA9IGhvc3RPdmVycmlkZTsKICAgIHNlbGYuZG9tYWluID0gaG9zdE92ZXJyaWRlLnNwbGl0KCI6Iilb");
    sb.append("MF07CiAgfQoKICBzZWxmLnVybF9wcmVmaXggPSBzZWxmLnByb3RvY29sICsgIi8vIiArIHNlbGYuaG9z");
    sb.append("dDsKCgogIHNlbGYubW9iaWxlSW5pdCA9IGZ1bmN0aW9uKGRlZmF1bHRPdmVycmlkZURvbWFpbikgewog");
    sb.append("ICAgc2VsZi5kb21haW4gPSBkZWZhdWx0T3ZlcnJpZGVEb21haW47CiAgICBzZWxmLmhvc3QgPSBkZWZh");
    sb.append("dWx0T3ZlcnJpZGVEb21haW47CiAgICBzZWxmLnByb3RvY29sID0gImh0dHBzOiI7CiAgICBjb25uZWN0");
    sb.append("aW9uLnByb3RvY29sID0gImh0dHBzOiI7CiAgICBzZWxmLmlzX21vYmlsZSA9IHRydWU7CiAgfTsKICBz");
    sb.append("ZWxmLm1vYmlsZUluaXRNdWx0aURvbWFpbiA9IGZ1bmN0aW9uKHN0YXJ0LCBiZXRhUHJlZml4LCBwcm9k");
    sb.append("UHJlZml4KSB7CiAgICBzZWxmLm1kX2JldGFQcmVmaXggPSBiZXRhUHJlZml4OwogICAgc2VsZi5tZF9w");
    sb.append("cm9kUHJlZml4ID0gcHJvZFByZWZpeDsKICAgIHNlbGYucHJvdG9jb2wgPSAiaHR0cHM6IjsKICAgIGNv");
    sb.append("bm5lY3Rpb24ucHJvdG9jb2wgPSAiaHR0cHM6IjsKICAgIHNlbGYuaXNfbW9iaWxlID0gdHJ1ZTsKICAg");
    sb.append("IHZhciBpbml0aWFsX3BhdGggPSBzdGFydDsKICAgIGlmICgicmVhZHkiID09IGxvY2FsU3RvcmFnZS5n");
    sb.append("ZXRJdGVtKCJtZGwiKSkgewogICAgICBpbml0aWFsX3BhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5h");
    sb.append("bWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2g7CiAgICB9CiAg");
    sb.append("ICBzZWxmLnJ1bihkb2N1bWVudC5ib2R5LCBmaXhQYXRoKGluaXRpYWxfcGF0aCksIGZhbHNlKTsKICAg");
    sb.append("IHdpbmRvdy5vbnBvcHN0YXRlID0gZnVuY3Rpb24gKHApIHsKICAgICAgc2VsZi5ydW4oZG9jdW1lbnQu");
    sb.append("Ym9keSwgZml4UGF0aChpbml0aWFsX3BhdGgpLCBmYWxzZSk7CiAgICB9OwogIH07CiAgdmFyIGdldE9y");
    sb.append("Q3JlYXRlTWFuaWZlc3RzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZGIgPSBsb2NhbFN0b3JhZ2UuZ2V0");
    sb.append("SXRlbSgiX19kb21haW5fbWFuaWZlc3RzIik7CiAgICBpZiAoZGIgPT0gbnVsbCkgewogICAgICBkYiA9");
    sb.append("IHtzZXE6MCwgbWFuaWZlc3RzOltdfTsKICAgIH0gZWxzZSB7CiAgICAgIGRiID0gSlNPTi5wYXJzZShk");
    sb.append("Yik7CiAgICB9CiAgICByZXR1cm4gZGI7CiAgfTsKICB2YXIgc2F2ZU1hbmlmZXN0cyA9IGZ1bmN0aW9u");
    sb.append("KGRiKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiX19kb21haW5fbWFuaWZlc3RzIiwgSlNPTi5z");
    sb.append("dHJpbmdpZnkoZGIpKTsKICB9OwogIHNlbGYucmVnaXN0ZXJNYW5pZmVzdCA9IGZ1bmN0aW9uKHVybCwg");
    sb.append("dXNlID0gZmFsc2UpIHsKICAgIHZhciBkYiA9IGdldE9yQ3JlYXRlTWFuaWZlc3RzKCk7CiAgICB2YXIg");
    sb.append("YWRkID0gZnVuY3Rpb24obWFuaWZlc3QpIHsKICAgICAgbWFuaWZlc3Quc291cmNlID0gdXJsOwogICAg");
    sb.append("ICBtYW5pZmVzdC5pZCA9IGRiLnNlcTsKICAgICAgZGIuc2VxKys7CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgZGIubWFuaWZlc3RzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgaWYgKGRiLm1hbmlmZXN0c1tr");
    sb.append("XS5zb3VyY2UgPT0gdXJsKSB7CiAgICAgICAgICBkYi5tYW5pZmVzdHNba10gPSBtYW5pZmVzdDsKICAg");
    sb.append("ICAgICAgIHNhdmVNYW5pZmVzdHMoZGIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAg");
    sb.append("fQogICAgICBkYi5tYW5pZmVzdHMucHVzaChtYW5pZmVzdCk7CiAgICAgIHNhdmVNYW5pZmVzdHMoZGIp");
    sb.append("OwogICAgfTsKICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeGh0dHAub25y");
    sb.append("ZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09");
    sb.append("IDQpIHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBhZGQoSlNPTi5w");
    sb.append("YXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpOwoKICAgICAgICAgIGlmKHVzZSkgewogICAgICAgICAgICBp");
    sb.append("ZiAoZGIubWFuaWZlc3RzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgaWYgKGRiLm1hbmlm");
    sb.append("ZXN0c1trXS5zb3VyY2UgPT0gdXJsKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYudXNlTWFuaWZlc3Qo");
    sb.append("ZGIubWFuaWZlc3RzW2tdLmlkKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAg");
    sb.append("ICAgfQogICAgfTsKICAgIHhodHRwLm9wZW4oIkdFVCIsIHVybCwgdHJ1ZSk7CiAgICB4aHR0cC5zZW5k");
    sb.append("KCk7CiAgfTsKICAvLyBSVU5USU1FKG1vYmlsZSkgfCByeDphY3Rpb249Im1hbmlmZXN0LWFkZDoiCiAg");
    sb.append("c2VsZi5NRF9hID0gZnVuY3Rpb24oZG9tLCB0eXBlLCB2YWx1ZSkgewogICAgcmVnX2V2ZW50KG51bGws");
    sb.append("IGRvbSwgdHlwZSwgZnVuY3Rpb24oKSB7CiAgICAgIHNlbGYucmVnaXN0ZXJNYW5pZmVzdCh0eXBlb2Yo");
    sb.append("dmFsdWUpID09ICdmdW5jdGlvbicgPyB2YWx1ZSgpIDogdmFsdWUpOwogICAgfSk7CiAgfTsKCiAgc2Vs");
    sb.append("Zi51c2VNYW5pZmVzdCA9IGZ1bmN0aW9uKGlkKSB7CiAgICAgIHZhciBkYiA9IGdldE9yQ3JlYXRlTWFu");
    sb.append("aWZlc3RzKCk7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZGIubWFuaWZlc3RzLmxlbmd0aDsgaysr");
    sb.append("KSB7CiAgICAgICAgdmFyIG1hbmlmZXN0ID0gZGIubWFuaWZlc3RzW2tdOwogICAgICAgIGlmIChtYW5p");
    sb.append("ZmVzdC5pZCA9PSBpZCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm1kb19ob3N0Iiwg");
    sb.append("bmV3IFVSTChkYi5tYW5pZmVzdHNba10uc291cmNlKS5ob3N0KTsKICAgICAgICAgIGlmIChtYW5pZmVz");
    sb.append("dC5iZXRhKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtZGVjIiwgImJldGEiKTsK");
    sb.append("ICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtZGVjIiwg");
    sb.append("InByb2QiKTsKICAgICAgICAgIH0KICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJtZGwiLCAi");
    sb.append("cmVhZHkiKTsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi8iOwogICAgICAgIH0KICAg");
    sb.append("ICAgfQogICAgfQogIC8vIFJVTlRJTUUobW9iaWxlKSB8IHJ4OmFjdGlvbj0ibWFuaWZlc3QtdXNlOiIK");
    sb.append("ICBzZWxmLk1EX3UgPSBmdW5jdGlvbihkb20sIHR5cGUsIHZhbHVlKSB7CiAgICByZWdfZXZlbnQobnVs");
    sb.append("bCwgZG9tLCB0eXBlLCBmdW5jdGlvbigpIHsKICAgICAgc2VsZi51c2VNYW5pZmVzdCh0eXBlb2YodmFs");
    sb.append("dWUpID09ICdmdW5jdGlvbicgPyB2YWx1ZSgpIDogdmFsdWUpOwogICAgfSk7CiAgfTsKICBzZWxmLm1v");
    sb.append("YmlsZUxvYWQgPSBmdW5jdGlvbih1cmwpIHsKICAgIHZhciBwYXJzZWQgPSBuZXcgVVJMKHVybCk7CiAg");
    sb.append("ICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgibWRvX2hvc3QiLCBwYXJzZWQuaG9zdCk7CiAgICBpZiAocGFy");
    sb.append("c2VkLmhvc3QuZW5kc1dpdGgoc2VsZi5tZF9iZXRhUHJlZml4KSkgewogICAgICBsb2NhbFN0b3JhZ2Uu");
    sb.append("c2V0SXRlbSgibWRlYyIsICJiZXRhIik7CiAgICB9IGVsc2UgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0");
    sb.append("SXRlbSgibWRlYyIsICJwcm9kIik7CiAgICB9CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHBhcnNl");
    sb.append("ZC5wYXRoOwogIH07CiAgLy8gUlVOVElNRShtb2JpbGUpIHwgcng6YWN0aW9uPSJtYW5pZmVzdC1kZWw6");
    sb.append("IgogIHNlbGYuTURfZCA9IGZ1bmN0aW9uKGRvbSwgdHlwZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChu");
    sb.append("dWxsLCBkb20sIHR5cGUsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgaWQgPSBwYXJzZUludCh0eXBlb2Yo");
    sb.append("dmFsdWUpID09ICdmdW5jdGlvbicgPyB2YWx1ZSgpIDogdmFsdWUpOwogICAgICB2YXIgZGIgPSBnZXRP");
    sb.append("ckNyZWF0ZU1hbmlmZXN0cygpOwogICAgICB2YXIgbmV3X21hbmlmZXN0cyA9IFtdOwogICAgICBmb3Ig");
    sb.append("KHZhciBrID0gMDsgayA8IGRiLm1hbmlmZXN0cy5sZW5ndGg7IGsrKykgewogICAgICAgIGlmIChkYi5t");
    sb.append("YW5pZmVzdHNba10uaWQgIT0gaWQpIHsKICAgICAgICAgIG5ld19tYW5pZmVzdHMucHVzaChkYi5tYW5p");
    sb.append("ZmVzdHNba10pOwogICAgICAgIH0KICAgICAgfQogICAgICBkYi5tYW5pZmVzdHMgPSBuZXdfbWFuaWZl");
    sb.append("c3RzOwogICAgICBzYXZlTWFuaWZlc3RzKGRiKTsKICAgIH0pOwogIH07CgogIC8vIDxjb25uZWN0aW9u");
    sb.append("IHVzZS1kb21haW4gLi4uPgogIHNlbGYuRENPTk5FQ1QgPSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7");
    sb.append("CiAgICB2YXIgdW5zdWIgPSB7CiAgICAgIHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsK");
    sb.append("ICAgIHJ4b2JqLl9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgnbmFtZScg");
    sb.append("aW4gcnhvYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNl");
    sb.append("bGYuSUQocnhvYmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9");
    sb.append("KTsKICAgICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAg");
    sb.append("IHZhciBjbyA9IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRvbWFpbiA9");
    sb.append("IHNlbGYuZG9tYWluOwogICAgICB2YXIgZGVzaXJlZCA9IGRvbWFpbiArIGlkTG9va3VwLmlkZW50aXR5");
    sb.append("OwogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAg");
    sb.append("ICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91");
    sb.append("bmQgPSBkZXNpcmVkOwoKICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAg");
    sb.append("IHZhciBjbGVhbnVwID0gaWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5zdWIudmlldygpOwogICAgICBj");
    sb.append("by5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3");
    sb.append("c3RhdGVfc2VudCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gIkRvbWFpbjoiICsgZG9tYWluICsgIiBb");
    sb.append("ICIgKyByeG9iai5uYW1lICsgIl0iOwogICAgICBjby52aWFfZG9tYWluID0gdHJ1ZTsKICAgICAgY28u");
    sb.append("dmlhX2JpbGxpbmcgPSBmYWxzZTsKICAgICAgY28uZG9tYWluID0gZG9tYWluOwogICAgICB2YXIgcmV0");
    sb.append("cnlfc20gPSB7fTsKICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNs");
    sb.append("ZWFudXAsIHJldHJ5X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAv");
    sb.append("LyBiaWFzIHRvIG5vdGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAg");
    sb.append("ICAgICBjby5wdHIgPSBjb25uZWN0aW9uLkNvbm5lY3Rpb25DcmVhdGVWaWFEb21haW4oaWRlbnRpdHks");
    sb.append("IGRvbWFpbiwgc2FmZV9maWx0ZXIoc3RhdGUudmlldy50cmVlLmNvcHkoKSksIHJldHJ5X3NtLnJlc3Bv");
    sb.append("bmRlcik7CiAgICAgIH07CiAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgIGNvLnRyZWUudXBkYXRlKHt9");
    sb.append("KTsKICAgICAgYmluZChmYWxzZSk7CiAgICB9KTsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiAuLi4+CiAg");
    sb.append("c2VsZi5DT05ORUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewog");
    sb.append("ICAgICB2aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91");
    sb.append("bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHZhbGlkID0gJ2tleScgaW4gcnhvYmogJiYgJ3Nw");
    sb.append("YWNlJyBpbiByeG9iaiAmJiAnbmFtZScgaW4gcnhvYmo7CiAgICAgIGlmICghdmFsaWQpIHsKICAgICAg");
    sb.append("ICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVudGl0");
    sb.append("eSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICBpZiAoaWRMb29r");
    sb.append("dXAuYWJvcnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5l");
    sb.append("Y3Rpb25fb2JqKHJ4b2JqLm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9IHJ4b2JqLnNwYWNlICsgIi8i");
    sb.append("ICsgcnhvYmoua2V5ICsgIi8iICsgaWRMb29rdXAuaWRlbnRpdHk7IC8vIFRPRE86IG5lZWQgc29tZSBr");
    sb.append("aW5kIG9mIGhhc2hpbmcgZnVuY3Rpb24gaGVyZQogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2ly");
    sb.append("ZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAgICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICBy");
    sb.append("ZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91bmQgPSBkZXNpcmVkOwoKICAgICAgdmFyIGlkZW50aXR5");
    sb.append("ID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIHZhciBjbGVhbnVwID0gaWRMb29rdXAuY2xlYW51cDsK");
    sb.append("ICAgICAgdW5zdWIudmlldygpOwogICAgICBjby5zcGFjZSA9IHJ4b2JqLnNwYWNlOwogICAgICBjby5r");
    sb.append("ZXkgPSByeG9iai5rZXk7CiAgICAgIGNvLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRs");
    sb.append("ZXJzID0ge307CiAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSBj");
    sb.append("by5zcGFjZSArICIvIiArIGNvLmtleSArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28u");
    sb.append("dmlhX2RvbWFpbiA9IGZhbHNlOwogICAgICBjby52aWFfYmlsbGluZyA9IGZhbHNlOwogICAgICB2YXIg");
    sb.append("cmV0cnlfc20gPSB7fTsKICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28s");
    sb.append("IGNsZWFudXAsIHJldHJ5X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAg");
    sb.append("ICAvLyBiaWFzIHRvIG5vdGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsK");
    sb.append("ICAgICAgICBjby5wdHIgPSBjb25uZWN0aW9uLkNvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHJ4b2Jq");
    sb.append("LnNwYWNlLCByeG9iai5rZXksIHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpLCByZXRy");
    sb.append("eV9zbS5yZXNwb25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVl");
    sb.append("LnVwZGF0ZSh7fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5JTlRFUk5B");
    sb.append("TCA9IGZ1bmN0aW9uIChwcmlvclN0YXRlKSB7CiAgICByZXR1cm4gewogICAgICBzZXJ2aWNlOiBwcmlv");
    sb.append("clN0YXRlLnNlcnZpY2UsCiAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogbnVsbCwgdHJlZTogbmV3IEFk");
    sb.append("YW1hVHJlZSgpLCBkZWx0YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAogICAgICB2aWV3");
    sb.append("OiBuZXdfZGVsdGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICBjdXJyZW50OiAiZGF0YSIKICAg");
    sb.append("IH07CiAgfTsKCiAgdmFyIHJlY2FsbF9lbWFpbCA9IGZ1bmN0aW9uIChlbCkgewogICAgaWYgKGVsLnRh");
    sb.append("Z05hbWUudG9VcHBlckNhc2UoKSA9PSAiSU5QVVQiKSB7CiAgICAgIGlmICgiZW1haWwiID09IGVsLnR5");
    sb.append("cGUgJiYgImVtYWlsIiA9PSBlbC5uYW1lKSB7CiAgICAgICAgZWwudmFsdWUgPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiZW1haWxfcmVtZW1iZXIiKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJj");
    sb.append("aGlsZHJlbiIgaW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgICAgdmFy");
    sb.append("IG4gPSBhcnIubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAg");
    sb.append("ICAgICByZWNhbGxfZW1haWwoZWwuY2hpbGRyZW5ba10pOwogICAgICAgIH0KICAgICAgfQogICAgfQog");
    sb.append("IH07CgogIHNlbGYuYVVQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2Jq");
    sb.append("KSB7CiAgICB2YXIgaWRMb29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyBy");
    sb.append("ZXR1cm4gcnhvYmoucnhfZm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExv");
    sb.append("b2t1cC5hYm9ydCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9ICJodHRwczov");
    sb.append("LyIgKyBBZGFtYS5Qcm9kdWN0aW9uICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3Qi");
    sb.append("OwogICAgZm9ybS5lbmN0eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgdmFyIGlkZW50aXR5");
    sb.append("SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgaWRlbnRpdHlJbnB1dC50");
    sb.append("eXBlID0gImhpZGRlbiI7CiAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHkiOwogICAgaWRl");
    sb.append("bnRpdHlJbnB1dC52YWx1ZSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgZm9ybS5hcHBlbmRDaGlsZChp");
    sb.append("ZGVudGl0eUlucHV0KTsKICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJpZnJhbWUiKTsKICAgIGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20o");
    sb.append("KTsKICAgIGlmcmFtZVRhcmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAi");
    sb.append("MSI7CgogICAgZm9ybS5hcHBlbmRDaGlsZChpZnJhbWVUYXJnZXQpOwogICAgZm9ybS50YXJnZXQgPSBp");
    sb.append("ZnJhbWVUYXJnZXQubmFtZTsKICB9OwoKICBzZWxmLmFEVVAgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUs");
    sb.append("IGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQoaWRlbnRpdHlO");
    sb.append("YW1lLCBmdW5jdGlvbiAoKSB7IHJldHVybiByeG9iai5yeF9mb3J3YXJkOyB9KTsgLy8gVE9ETzogbWFr");
    sb.append("ZSByeHZhcgogICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZv");
    sb.append("cm0uYWN0aW9uID0gc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL351cGxvYWQiOwog");
    sb.append("ICAgZm9ybS5tZXRob2QgPSAicG9zdCI7CiAgICBmb3JtLmVuY3R5cGUgPSAibXVsdGlwYXJ0L2Zvcm0t");
    sb.append("ZGF0YSI7CiAgICB7CiAgICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgiaW5wdXQiKTsKICAgICAgaWRlbnRpdHlJbnB1dC50eXBlID0gImhpZGRlbiI7CiAgICAgIGlkZW50");
    sb.append("aXR5SW5wdXQubmFtZSA9ICJpZGVudGl0eSI7CiAgICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExv");
    sb.append("b2t1cC5pZGVudGl0eTsKICAgICAgZm9ybS5hcHBlbmRDaGlsZChpZGVudGl0eUlucHV0KTsKICAgIH0K");
    sb.append("ICAgIHsKICAgICAgdmFyIGRvbWFpbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQi");
    sb.append("KTsKICAgICAgZG9tYWluSW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBkb21haW5JbnB1dC5uYW1l");
    sb.append("ID0gImRvbWFpbiI7CiAgICAgIGRvbWFpbklucHV0LnZhbHVlID0gc2VsZi5kb21haW47CiAgICAgIGZv");
    sb.append("cm0uYXBwZW5kQ2hpbGQoZG9tYWluSW5wdXQpOwogICAgfQogICAgdmFyIGlmcmFtZVRhcmdldCA9IGRv");
    sb.append("Y3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgaWZyYW1lVGFyZ2V0Lm5hbWUgPSAiVVBM");
    sb.append("T0FEXyIgKyBNYXRoLnJhbmRvbSgpOwogICAgaWZyYW1lVGFyZ2V0LndpZHRoID0gIjEiOwogICAgaWZy");
    sb.append("YW1lVGFyZ2V0LmhlaWdodCA9ICIxIjsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lVGFyZ2V0KTsK");
    sb.append("ICAgIGZvcm0udGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCgoKICB2YXIgZ2V0X2Zvcm1f");
    sb.append("YW5kX3B3ID0gZnVuY3Rpb24oZm9ybSkgewogICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgdmFyIHJl");
    sb.append("cSA9IGdldF9mb3JtKGZvcm0sIHBhc3N3b3Jkcyk7CiAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29y");
    sb.append("ZHMpIHsKICAgICAgcmVxWydwYXNzd29yZCddID0gcGFzc3dvcmRzWydwYXNzd29yZCddOwogICAgfQog");
    sb.append("ICAgaWYgKCduZXdfcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICByZXFbJ25ld19wYXNzd29y");
    sb.append("ZCddID0gcGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXTsKICAgIH0KICAgIHJldHVybiByZXE7CiAgfQoK");
    sb.append("ICB2YXIgY29tbW9uQXV0aG9yaXplID0gZnVuY3Rpb24oZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwg");
    sb.append("cnhvYmosIG5leHRTdGVwKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0u");
    sb.append("YWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVu");
    sb.append("dERlZmF1bHQoKTsKICAgICAgdmFyIHNlbmRSZXEgPSBmdW5jdGlvbihyZXEpIHsKICAgICAgICB2YXIg");
    sb.append("c20gPSB7YXR0ZW1wdHM6MH07CiAgICAgICAgc20ucmVzcG9uZGVyID0gewogICAgICAgICAgc3VjY2Vz");
    sb.append("czogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlO");
    sb.append("YW1lLCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgICAgc2VsZi5nb3RvKHJ4");
    sb.append("b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAg");
    sb.append("ICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAg");
    sb.append("ZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgc2lnbmluZyBpbnRvIGRvY3VtZW50OiIgKyByZWFzb24p");
    sb.append("OwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgbmV4dFN0ZXAocmVxLCBzbS5yZXNwb25kZXIp");
    sb.append("OwogICAgICB9CiAgICAgIHZhciBwYXNzd29yZHMgPSB7fTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3Jt");
    sb.append("KGZvcm0sIHBhc3N3b3Jkcyk7CiAgICAgIGlmICgncGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAg");
    sb.append("ICAgIHJlcVsncGFzc3dvcmQnXSA9IHBhc3N3b3Jkc1sncGFzc3dvcmQnXTsKICAgICAgfQogICAgICBp");
    sb.append("ZiAoJ25ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAgY29ubmVjdGlvbi5Eb2N1bWVu");
    sb.append("dHNIYXNoUGFzc3dvcmQocGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXSwgewogICAgICAgICAgc3VjY2Vz");
    sb.append("czogZnVuY3Rpb24gKGhhc2hlZF9wdykgewogICAgICAgICAgICByZXFbJ25ld19wYXNzd29yZCddID0g");
    sb.append("aGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgc2VuZFJlcShyZXEpOwogICAgICAgICAg");
    sb.append("fSwKICAgICAgICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUo");
    sb.append("Zm9ybSwgIkZhaWxlZCB0byBoYXNoIHBhc3N3b3JkIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgc2VuZFJlcShyZXEpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9");
    sb.append("CgogIC8vIHJ4OmFjdGlvbj1kb2N1bWVudDphdXRob3JpemUKICBzZWxmLmFET0MgPSBmdW5jdGlvbiAo");
    sb.append("Zm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIGNvbW1vbkF1dGhvcml6ZShmb3Jt");
    sb.append("LCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgZnVuY3Rpb24ocmVxLCByZXNwb25kZXIpIHsKICAg");
    sb.append("ICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6YXRpb24ocmVxLnNwYWNlLCByZXEua2V5LCByZXEs");
    sb.append("IHJlc3BvbmRlcik7CiAgICB9KTsKICB9OwoKICAvLyByeDphY3Rpb249ZG9tYWluOmF1dGhvcml6ZQog");
    sb.append("IHNlbGYuYURPTSA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewog");
    sb.append("ICAgY29tbW9uQXV0aG9yaXplKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlv");
    sb.append("bihyZXEsIHJlc3BvbmRlcikgewogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXphdGlvbkRv");
    sb.append("bWFpbihzZWxmLmRvbWFpbiwgcmVxLCByZXNwb25kZXIpOwogICAgfSk7CiAgfTsKCiAgLy8gcng6ZXZl");
    sb.append("bnQ9dG9nZ2xlLXBhc3N3b3JkCiAgc2VsZi5vblBXVCA9IGZ1bmN0aW9uKGRvbSwgc3RhdGUsIHR5cGUp");
    sb.append("IHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAg");
    sb.append("dmFyIGN1ciA9IGRvbTsKICAgICAgd2hpbGUgKGN1ci50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT0gIlBB");
    sb.append("U1NXT1JELUhPTERFUiIpIHsKICAgICAgICBjdXIgPSBjdXIucGFyZW50RWxlbWVudDsKICAgICAgfQog");
    sb.append("ICAgICB2YXIgaHVudCA9IGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICBpZiAobm9kZS50YWdOYW1lLnRv");
    sb.append("VXBwZXJDYXNlKCkgPT0gIklOUFVUIiAmJiAobm9kZS5uYW1lID09ICJwYXNzd29yZCIgfHwgbm9kZS5u");
    sb.append("YW1lID09ICJjb25maXJtLXBhc3N3b3JkIiB8fCBuYW1lID09ICJuZXdfcGFzc3dvcmQiIHx8IG5hbWUg");
    sb.append("PT0gImNvbmZpcm0tbmV3X3Bhc3N3b3JkIikpIHsKICAgICAgICAgIGlmIChub2RlLnR5cGUgPT0gInBh");
    sb.append("c3N3b3JkIikgewogICAgICAgICAgICBub2RlLnR5cGUgPSAidGV4dCIKICAgICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICAgIG5vZGUudHlwZSA9ICJwYXNzd29yZCIKICAgICAgICAgIH0KICAgICAgICB9CiAg");
    sb.append("ICAgICAgaWYgKCdjaGlsZHJlbicgaW4gbm9kZSkgewogICAgICAgICAgdmFyIGNoID0gbm9kZS5jaGls");
    sb.append("ZHJlbjsKICAgICAgICAgIHZhciBuID0gY2gubGVuZ3RoOwogICAgICAgICAgZm9yICh2YXIgayA9IDA7");
    sb.append("IGsgPCBuOyBrKyspIHsKICAgICAgICAgICAgaHVudChjaFtrXSk7CiAgICAgICAgICB9CiAgICAgICAg");
    sb.append("fQogICAgICB9OwogICAgICBpZiAoY3VyICE9IG51bGwpIHsKICAgICAgICBodW50KGN1cik7CiAgICAg");
    sb.append("IH0KICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnNpZ24taW4gKHRv");
    sb.append("IGRlcHJlY2F0ZSkKICBzZWxmLmFkRFNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5h");
    sb.append("bWUsIHJ4b2JqKSB7CiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1");
    sb.append("bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgdmFyIHNtID0g");
    sb.append("e2F0dGVtcHRzOjB9OwogICAgICBzbS5yZXNwb25kZXIgPSB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rp");
    sb.append("b24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9h");
    sb.append("ZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVj");
    sb.append("dGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAg");
    sb.append("ICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAo");
    sb.append("cmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8g");
    sb.append("ZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uLkRv");
    sb.append("Y3VtZW50QXV0aG9yaXplRG9tYWluKHNlbGYuZG9tYWluLCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29y");
    sb.append("ZCwgc20ucmVzcG9uZGVyKTsKICAgIH0sIHRydWUpOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlv");
    sb.append("bj1kb2N1bWVudDpzaWduLWluICh0byBkZXByZWNhdGUpCiAgc2VsZi5hRFNPID0gZnVuY3Rpb24gKGZv");
    sb.append("cm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7IC8vIERFUFJFQ0FURUQKICAgIHJ4b2JqLl9f");
    sb.append("ID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5j");
    sb.append("dGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0");
    sb.append("X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXplKHJlcS5z");
    sb.append("cGFjZSwgcmVxLmtleSwgcmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHsKICAgICAgICBzdWNjZXNz");
    sb.append("OiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1l");
    sb.append("LCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgIC8vIFRPRE86IGJsb3cgYXdh");
    sb.append("eSBjb25uZWN0aW9ucwogICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsK");
    sb.append("ICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1");
    sb.append("bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNpZ25p");
    sb.append("bmcgaW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1");
    sb.append("ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb21haW46c2lnbi1pbi1yZXNldCAodG8g");
    sb.append("ZGVwcmVjYXRlKQogIHNlbGYuYWREU09yID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5h");
    sb.append("bWUsIHJ4b2JqKSB7IC8vIERFUFJFQ0FURUQKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9Owog");
    sb.append("ICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2");
    sb.append("dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwog");
    sb.append("ICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXplRG9tYWluV2l0aFJlc2V0KHNlbGYuZG9tYWlu");
    sb.append("LCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3Vj");
    sb.append("Y2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5");
    sb.append("TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93");
    sb.append("IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxz");
    sb.append("ZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJl");
    sb.append("OiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBz");
    sb.append("aWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0s");
    sb.append("IHRydWUpOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb2N1bWVudDpzaWduLWluLXJlc2V0");
    sb.append("ICh0byBkZXByZWNhdGUpCiAgc2VsZi5hRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRp");
    sb.append("dHlOYW1lLCByeG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsg");
    sb.append("fTsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAg");
    sb.append("ICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3Jt");
    sb.append("KTsKICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZVdpdGhSZXNldChyZXEuc3BhY2UsIHJl");
    sb.append("cS5rZXksIHJlcS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCByZXEubmV3X3Bhc3N3b3JkLHsKICAgICAg");
    sb.append("ICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRl");
    sb.append("bnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgIC8vIFRPRE86");
    sb.append("IGJsb3cgYXdheSBjb25uZWN0aW9ucwogICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQs");
    sb.append("IGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZh");
    sb.append("aWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFp");
    sb.append("bGVkIHNpZ25pbmcgaW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0sIHRy");
    sb.append("dWUpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5hdXRvZ2VuaWQgPSAxOwogIHNlbGYuWCA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgc2VsZi5hdXRvZ2VuaWQrKzsKICAgIHJldHVybiAneCcgKyBzZWxmLmF1dG9nZW5pZDsK");
    sb.append("ICB9OwoKICB2YXIgdHJhbnNmb3JtcyA9IHt9OwogIHRyYW5zZm9ybXNbJ3ByaW5jaXBhbC5hZ2VudCdd");
    sb.append("ID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geC5hZ2VudDsgfTsKICB0cmFuc2Zvcm1zWydwcmluY2lwYWwu");
    sb.append("YXV0aG9yaXR5J10gPSBmdW5jdGlvbih4KSB7IHJldHVybiB4LmF1dGhvcml0eTsgfTsKICB0cmFuc2Zv");
    sb.append("cm1zWyd0cmltJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50cmltKCk7IH07CiAgdHJh");
    sb.append("bnNmb3Jtc1sndXBwZXInXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuICgnJyArIHgpLnRvVXBwZXJDYXNl");
    sb.append("KCk7IH07CiAgdHJhbnNmb3Jtc1snbG93ZXInXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuICgnJyArIHgp");
    sb.append("LnRvTG93ZXJDYXNlKCk7IH07CiAgdHJhbnNmb3Jtc1snaXNfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4");
    sb.append("KSB7IHJldHVybiB4ID09ICIiOyB9OwogIHRyYW5zZm9ybXNbJ2lzX25vdF9lbXB0eV9zdHInXSA9IGZ1");
    sb.append("bmN0aW9uKHgpIHsgcmV0dXJuIHggIT0gIiI7IH07CiAgdHJhbnNmb3Jtc1snanNvbmlmeSddID0gZnVu");
    sb.append("Y3Rpb24oeCkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeCk7IH07CiAgdHJhbnNmb3Jtc1sndGltZV9u");
    sb.append("b3cnXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIERhdGUubm93KCkgKyAiIjsgfTsKICB0cmFuc2Zvcm1z");
    sb.append("WydzaXplX2J5dGVzJ10gPSBmdW5jdGlvbih4cmF3KSB7CiAgICB2YXIgeCA9IDAuMDsKICAgIGlmICh0");
    sb.append("eXBlb2YoeHJhdykgPT0gJ251bWJlcicpIHsKICAgICAgeCA9IHhyYXc7CiAgICB9IGVsc2UgewogICAg");
    sb.append("ICB0cnkgewogICAgICAgIHggPSBwYXJzZUZsb2F0KHhyYXcpOwogICAgICB9IGNhdGNoIChleCkgewoK");
    sb.append("ICAgICAgfQogICAgfQogICAgdmFyIGl2YWwgPSBNYXRoLmZsb29yKHgpOwogICAgaWYgKGl2YWwgPCAx");
    sb.append("MDI0KSB7CiAgICAgIHJldHVybiBpdmFsICsgIiBCIjsKICAgIH0KICAgIGl2YWwgLz0gMTAyNDsKICAg");
    sb.append("IGlmIChpdmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFsICogMTApIC8gMTAu");
    sb.append("MCArICIgS0IiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7CiAg");
    sb.append("ICAgIHJldHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsgIiBNQiI7CiAgICB9CiAgICBp");
    sb.append("dmFsIC89IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQo");
    sb.append("aXZhbCAqIDEwKSAvIDEwLjAgKyAiIEdCIjsKICAgIH0KICB9CiAgdHJhbnNmb3Jtc1snb3JkaW5hbGl6");
    sb.append("ZSddID0gZnVuY3Rpb24obikgewogICAgY29uc3QgbnVtID0gcGFyc2VJbnQobik7CiAgICBpZiAoIWlz");
    sb.append("TmFOKG51bSkpIHsKICAgICAgbGV0IG9yZCA9ICd0aCc7CiAgICAgIGlmIChuICUgMTAgPT0gMSAmJiBu");
    sb.append("ICUgMTAwICE9IDExKSB7CiAgICAgICAgb3JkID0gJ3N0JzsKICAgICAgfQogICAgICBlbHNlIGlmIChu");
    sb.append("ICUgMTAgPT0gMiAmJiBuICUgMTAwICE9IDEyKSB7CiAgICAgICAgb3JkID0gJ25kJzsKICAgICAgfQog");
    sb.append("ICAgICBlbHNlIGlmIChuICUgMTAgPT0gMyAmJiBuICUgMTAwICE9IDEzKSB7CiAgICAgICAgb3JkID0g");
    sb.append("J3JkJzsKICAgICAgfQogICAgICByZXR1cm4gbiArIG9yZDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVy");
    sb.append("biBuOwogICAgfQogIH0KICB0cmFuc2Zvcm1zWyd2dWxnYXJfZnJhY3Rpb24nXSA9IGZ1bmN0aW9uKHhy");
    sb.append("YXcpIHsKICAgIHZhciB4ID0gMC4wOwogICAgaWYgKHR5cGVvZih4cmF3KSA9PSAnbnVtYmVyJykgewog");
    sb.append("ICAgICB4ID0geHJhdzsKICAgIH0gZWxzZSB7CiAgICAgIHRyeSB7CiAgICAgICAgeCA9IHBhcnNlRmxv");
    sb.append("YXQoeHJhdyk7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CgogICAgICB9CiAgICB9CiAgICB2YXIgaXZhbCA9");
    sb.append("IE1hdGguZmxvb3IoeCk7CiAgICB2YXIgY2hhbmdlID0geCAtIGl2YWw7CiAgICB2YXIgc3VmZml4ID0g");
    sb.append("IiI7CiAgICBpZiAoY2hhbmdlIDw9IDAuMDYyNSkgewogICAgICAvLyAwCiAgICB9IGVsc2UgaWYgKGNo");
    sb.append("YW5nZSA8PSAwLjE4NzUpIHsKICAgICAgc3VmZml4ID0gIuKFmyI7CiAgICB9IGVsc2UgaWYgKGNoYW5n");
    sb.append("ZSA8PSAwLjMxMjUpIHsKICAgICAgc3VmZml4ID0gIsK8IjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9");
    sb.append("IDAuNDM3NSkgewogICAgICBzdWZmaXggPSAi4oWcIjsKICAgIH0gZWxzZSBpZiAoY2hhbmdlIDw9IDAu");
    sb.append("NTYyNSkgewogICAgICBzdWZmaXggPSAiwr0iOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC42ODc1");
    sb.append("KSB7CiAgICAgIHN1ZmZpeCA9ICLihZ0iOwogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC44MTI1KSB7");
    sb.append("CiAgICAgIHN1ZmZpeCA9ICLCviI7IC8vIDMvNAogICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC45Mzc1");
    sb.append("KSB7CiAgICAgIHN1ZmZpeCA9ICLihZ4iOwogICAgfSAvLyBlbHNlIDEKICAgIHJldHVybiBpdmFsICsg");
    sb.append("c3VmZml4OwogIH0KICB0cmFuc2Zvcm1zWyd0aW1lX2FnbyddID0gZnVuY3Rpb24oZHQsIGZvcm1hdCkg");
    sb.append("ewogICAgLy8gb25seSB0cmFuc2Zvcm0gc3RyaW5ncwogICAgaWYgKHR5cGVvZiAoZHQpID09ICJzdHJp");
    sb.append("bmciKSB7CiAgICAgIC8vIGxldCdzIHN0cmlwIG91dCBldmVyeXRoaW5nIGFmdGVyIHRoZSBicmFja2V0");
    sb.append("cwogICAgICB2YXIgcyA9IGR0OwogICAgICB2YXIgayA9IHMuaW5kZXhPZignWycpOwogICAgICBpZiAo");
    sb.append("ayA+PSAwKSB7CiAgICAgICAgcyA9IHMuc3Vic3RyaW5nKDAsIGspOwogICAgICB9CiAgICAgIHZhciBk");
    sb.append("ID0gRGF0ZS5wYXJzZShzKTsKICAgICAgaWYgKE51bWJlci5pc05hTihkKSkgewogICAgICAgIC8vIGl0");
    sb.append("IGlzbid0IGEgbnVtYmVyLCBzbyB3ZSBkaWRuJ3QgZ2V0IGEgZGF0ZSBzdGFtcDsgZGVmYXVsdCB0byB0");
    sb.append("aGUgaW5wdXQKICAgICAgICByZXR1cm4gZHQ7CiAgICAgIH0KICAgICAgLy8gd2UgYXJlIGludGVyZXN0");
    sb.append("ZWQgaW4gcHJvZHVjaW5nIGEgc3RyaW5nIGxpa2UgIlggbWludXRlcyBhZ28iLCBzbyBzdGFydCB3aXRo");
    sb.append("IHNlY29uZHMKICAgICAgdmFyIGRlbHRhID0gKERhdGUubm93KCkgLSBkKS8xMDAwOyAvLyBzZWNvbmRz");
    sb.append("OwogICAgICBpZiAoZGVsdGEgPCA2MCkgewogICAgICAgIHJldHVybiAiTGVzcyB0aGFuIGEgbWludXRl");
    sb.append("IGFnbyI7CiAgICAgIH0KICAgICAgLy8gaXQgd2Fzbid0IDkwIHNlY29uZHMgYWdvIG9yIGxlc3MsIHNv");
    sb.append("IGxldCdzIHJlZmluZSB0b3dhcmRzIG1pbnV0ZXMKICAgICAgZGVsdGEgLz0gNjA7IC8vIG5vdyBpdCBp");
    sb.append("cyBtaW51dGVzCiAgICAgIGlmIChkZWx0YSA8IDYwKSB7CiAgICAgICAgY29uc3QgZGVsdGFJbnQgPSBN");
    sb.append("YXRoLmZsb29yKGRlbHRhKTsKICAgICAgICByZXR1cm4gYCR7ZGVsdGFJbnR9IG1pbnV0ZSR7ZGVsdGFJ");
    sb.append("bnQgPiAxID8gJ3MnOiAnJ30gYWdvYDsKICAgICAgfQogICAgICBpZiAoZGVsdGEgPiAyLjYyOGUrNykg");
    sb.append("ewogICAgICAgIHJldHVybiAiTmV2ZXIiOwogICAgICB9CiAgICAgIC8vIGl0IHdhc24ndCA5MCBtaW51");
    sb.append("dGVzIGFnbywgc28gbGV0J3MganVzdCBwdXQgdGhlIHRpbWUgc3RhbXAgdXAKICAgICAgdmFyIGR0aGVu");
    sb.append("ID0gbmV3IERhdGUoZCk7CiAgICAgIHZhciBkbm93ID0gbmV3IERhdGUoKTsKICAgICAgdmFyIG9wdHMg");
    sb.append("PSB7fTsKICAgICAgaWYgKGZvcm1hdCl7CiAgICAgICAgZm9ybWF0LnRyaW0oKS5zcGxpdCgiIikuZm9y");
    sb.append("RWFjaChjaGFyID0+IHsKICAgICAgICAgIGNvbnN0IGtleXMgPSB7ImgiOiAiaG91ciIsICJtIjogIm1p");
    sb.append("bnV0ZSIsICJzIjogInNlY29uZCJ9CiAgICAgICAgICBpZiAoY2hhciBpbiBrZXlzKXsKICAgICAgICAg");
    sb.append("ICAgb3B0c1trZXlzW2NoYXJdXSA9ICJudW1lcmljIjsKICAgICAgICAgIH0KICAgICAgICB9KQogICAg");
    sb.append("ICB9CiAgICAgIGlmIChkdGhlbi50b0xvY2FsZURhdGVTdHJpbmcoKSAhPSBkbm93LnRvTG9jYWxlRGF0");
    sb.append("ZVN0cmluZygpKSB7CiAgICAgICAgcmV0dXJuIGR0aGVuLnRvTG9jYWxlRGF0ZVN0cmluZygpICsgIiAi");
    sb.append("ICsgZHRoZW4udG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCBvcHRzKTsKICAgICAgfQogICAgICByZXR1cm4g");
    sb.append("ZHRoZW4udG9Mb2NhbGVUaW1lU3RyaW5nKFtdLCBvcHRzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGRv");
    sb.append("IG5vdGhpbmcKICAgICAgcmV0dXJuIGR0OwogICAgfQogIH07CgogIHRyYW5zZm9ybXNbJ3RpbWUnXSA9");
    sb.append("IGZ1bmN0aW9uKGR0KSB7CiAgICAgICAgLy8gb25seSB0cmFuc2Zvcm0gc3RyaW5ncwogICAgaWYgKHR5");
    sb.append("cGVvZiAoZHQpID09ICJzdHJpbmciKSB7CiAgICAgIC8vIGxldCdzIHN0cmlwIG91dCBldmVyeXRoaW5n");
    sb.append("IGFmdGVyIHRoZSBicmFja2V0cwogICAgICB2YXIgcyA9IGR0OwogICAgICB2YXIgayA9IHMuaW5kZXhP");
    sb.append("ZignWycpOwogICAgICBpZiAoayA+PSAwKSB7CiAgICAgICAgcyA9IHMuc3Vic3RyaW5nKDAsIGspOwog");
    sb.append("ICAgICB9CgogICAgICAvLyBDb252ZXJ0IHN0cmluZyB0byB0aW1lIGZvcm1hdAogICAgICB2YXIgdCA9");
    sb.append("IGR0LmluZGV4T2YoIjoiKTsKICAgICAgaWYgKHQgPCAwKSB7CiAgICAgICAgcmV0dXJuIGR0OwogICAg");
    sb.append("ICB9CiAgICAgIHZhciBoID0gZHQuc3BsaXQoIjoiKVswXTsKICAgICAgdmFyIGhvdXJzID0gaDsKICAg");
    sb.append("ICAgaWYgKGgubGVuZ3RoID4gMikgewogICAgICAgIGhvdXJzID0gaC5zdWJzdHJpbmcoaC5sZW5ndGgg");
    sb.append("LSAyLCBoLmxlbmd0aCk7IC8vIHRyaW0gbGVmdCBpbiBjYXNlIG9mIGRhdGV0aW1lCiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIEFtT3JQbSA9IGhvdXJzID49IDEyID8gJ3BtJyA6ICdhbSc7CiAgICAgIGhvdXJzID0gKGhv");
    sb.append("dXJzICUgMTIpIHx8IDEyOwogICAgICB2YXIgbSA9IGR0LnNwbGl0KCI6IilbMV0KICAgICAgdmFyIG1p");
    sb.append("bnV0ZXMgPSBtOwogICAgICBpZiAobS5sZW5ndGggPiAyKSB7CiAgICAgICAgbWludXRlcyA9IG0uc3Vi");
    sb.append("c3RyaW5nKDAsMik7IC8vIHRyaW0gcmlnaHQgaW4gY2FzZSBvZiBkYXRldGltZQogICAgICB9CgogICAg");
    sb.append("ICByZXR1cm4gaG91cnMgKyAiOiIgKyBtaW51dGVzICsgIiAiICsgQW1PclBtOyAKICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgcmV0dXJuIGR0OwogICAgfQogIH07CgogIHRyYW5zZm9y");
    sb.append("bXNbJ2RhdGUtZm9ybWF0J10gPSBmdW5jdGlvbihkdCwgZm9ybWF0KSB7CiAgICBpZiAodHlwZW9mIChk");
    sb.append("dCkgPT0gInN0cmluZyIpIHsKICAgICAgLy8gaWYgZGF0ZSBpcyBub3Qgc2V0LCByZXR1cm4gZW1wdHkg");
    sb.append("c3RyaW5nCiAgICAgIGlmIChkdCA9PSAiMS0wMS0wMSIpIHJldHVybiAiIjsKCiAgICAgIC8vIGxldCdz");
    sb.append("IHN0cmlwIG91dCBldmVyeXRoaW5nIGFmdGVyIHRoZSBicmFja2V0cwogICAgICB2YXIgcyA9IGR0Owog");
    sb.append("ICAgICB2YXIgayA9IHMuaW5kZXhPZignWycpOwogICAgICBpZiAoayA+PSAwKSB7CiAgICAgICAgcyA9");
    sb.append("IHMuc3Vic3RyaW5nKDAsIGspOwogICAgICB9CiAgICAgIGNvbnN0IHAgPSBmb3JtYXQudG9Mb3dlckNh");
    sb.append("c2UoKS5zcGxpdCgiLyIpOwogICAgICBjb25zdCBvcHRzID0ge307CiAgICAgIHAuZm9yRWFjaChmID0+");
    sb.append("IHsKICAgICAgICBjb25zdCB2YWwgPSBmLmxlbmd0aCA+IDIgPyAibnVtZXJpYyIgOiAiMi1kaWdpdCI7");
    sb.append("CiAgICAgICAgY29uc3Qga2V5cyA9IHsieSI6ICJ5ZWFyIiwgIm0iOiAibW9udGgiLCAiZCI6ICJkYXki");
    sb.append("fQogICAgICAgIG9wdHNba2V5c1tmLmNoYXJBdCgwKV1dID0gdmFsOwogICAgICB9KQoKICAgICAgLy8g");
    sb.append("aWYgbm90IGRhdGV0aW1lLCBjb252ZXJ0aW5nIHRvIG9uZSBoZXJlIHRvIHByZXZlbnQgdGltZXpvbmUg");
    sb.append("aXNzdWVzCiAgICAgIGNvbnN0IGRhdGV0aW1lID0gcy5pbmNsdWRlcygiVCIpID8gcyA6IHMgKyAiVDAw");
    sb.append("OjAwOjAwIjsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lKS50b0xvY2FsZURhdGVTdHJpbmco");
    sb.append("J2VuLVVTJywgb3B0cyk7CiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVy");
    sb.append("biBkdDsKICAgIH0KICB9CgogIHRyYW5zZm9ybXNbJ2N1cnJlbmN5J10gPSBmdW5jdGlvbih4LCBmbXQp");
    sb.append("IHsKICAgIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQoeCk7CiAgICBpZiAoaXNOYU4obnVtKSkgcmV0dXJu");
    sb.append("IHg7CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KFtdLCB7CiAgICAg");
    sb.append("ICAgc3R5bGU6ICdjdXJyZW5jeScsCiAgICAgICAgY3VycmVuY3k6IGZtdCwKICAgICAgICB1c2VHcm91");
    sb.append("cGluZzogdHJ1ZSwKICAgICAgfSkuZm9ybWF0KG51bSkKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAg");
    sb.append("IGNvbnNvbGUuZXJyb3IoIidjdXJyZW5jeScgdHJhbnNmb3JtIGVycm9yOiAiLCBlcnJvcik7CiAgICAg");
    sb.append("IHJldHVybiB4OwogICAgfQogICAgCiAgfQogIAoKICBzZWxmLlJUUiA9IGZ1bmN0aW9uKG5hbWUsIHRy");
    sb.append("YW5zZm9ybSkgewogICAgdHJhbnNmb3Jtc1tuYW1lXSA9IHRyYW5zZm9ybTsKICB9OwogIHNlbGYucmVn");
    sb.append("aXN0ZXJUcmFuc2Zvcm0gPSBzZWxmLlJUUjsKCiAgLy8ge2JsYWh8bmFtZX0KICBzZWxmLlRSID0gZnVu");
    sb.append("Y3Rpb24obmFtZSkgewogICAgaWYgKG5hbWUgaW4gdHJhbnNmb3JtcykgewogICAgICByZXR1cm4gdHJh");
    sb.append("bnNmb3Jtc1tuYW1lXTsKICAgIH0gCiAgICAvLyBleDogZGF0ZS1mb3JtYXQ6bW0vZGQveXkKICAgIGlm");
    sb.append("IChuYW1lLmluY2x1ZGVzKCI6IikpewogICAgICBjb25zdCBba2V5LCBmb3JtYXRdICA9IG5hbWUuc3Bs");
    sb.append("aXQoIjoiKTsKICAgICAgaWYgKGtleSBpbiB0cmFuc2Zvcm1zKSB7CiAgICAgICAgcmV0dXJuIHggPT4g");
    sb.append("dHJhbnNmb3Jtc1trZXldKHgsIGZvcm1hdCk7CiAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIGZ1");
    sb.append("bmN0aW9uKHgpIHsgcmV0dXJuIHg7IH07CiAgfTsKCiAgLy8gVE9ETwogIHZhciB2YWxpZGF0b3JzID0g");
    sb.append("e307CiAgc2VsZi5SViA9IGZ1bmN0aW9uKG5hbWUsIHZhbGlkYXRvcikgewogICAgdmFsaWRhdG9yc1tu");
    sb.append("YW1lXSA9IHZhbGlkYXRvcjsKICB9OwogIHNlbGYucmVnaXN0ZXJWYWxpZGF0b3IgPSBzZWxmLlJWOwoK");
    sb.append("ICB2YXIgY29tbW9uUHV0ID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2Jq");
    sb.append("LCB1cmxmYWN0b3J5KSB7CiAgICAvLyBXSVAKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9Owog");
    sb.append("ICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2");
    sb.append("dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcGFzc3dvcmRzID0ge307CiAgICAgIHZhciByZXEg");
    sb.append("PSBnZXRfZm9ybShmb3JtLCBwYXNzd29yZHMpOwoKICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgICAgdmFyIHVybCA9IHVybGZhY3RvcnkocnhvYmopOwogICAgICAgIHZhciB4aHR0cCA9IG5l");
    sb.append("dyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0");
    sb.append("aW9uICgpIHsKICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCkgewogICAgICAgICAgICBp");
    sb.append("ZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLmdldFJl");
    sb.append("c3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKTsKICAgICAgICAgICAgICBpZiAodHlwZSA9PSAidGV4");
    sb.append("dC9lcnJvciIpIHsKICAgICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCB0aGlzLnJlc3BvbnNl");
    sb.append("VGV4dCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("ID09ICJhcHBsaWNhdGlvbi9qc29uIikgewogICAgICAgICAgICAgICAgdmFyIHBheWxvYWQgPSBKU09O");
    sb.append("LnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIGlmICgnaWRlbnRpdHknIGlu");
    sb.append("IHBheWxvYWQpIHsKICAgICAgICAgICAgICAgICAgc3Rhc2hfaWRlbnRpdHkoaWRlbnRpdHlOYW1lLCBw");
    sb.append("YXlsb2FkLmlkZW50aXR5LCBudWxsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgICAg");
    sb.append("ICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICAgICAgZm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBF");
    sb.append("dmVudCgic3VibWl0dGVkIikpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZpcmVf");
    sb.append("ZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGNvbW11bmljYXRlIHRvIHNlcnZlciIpOwogICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB4aHR0cC5vcGVuKCJQVVQiLCB1cmwsIHRy");
    sb.append("dWUpOwogICAgICAgIHhodHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICAgICAgeGh0dHAuc2Vu");
    sb.append("ZChKU09OLnN0cmluZ2lmeShyZXEpKTsKICAgICAgfTsKCiAgICAgIGlmICgncGFzc3dvcmQnIGluIHBh");
    sb.append("c3N3b3JkcykgewogICAgICAgIGlmICghKCdjb25maXJtLXBhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHx8");
    sb.append("IHBhc3N3b3Jkc1sncGFzc3dvcmQnXSA9PSBwYXNzd29yZHNbJ2NvbmZpcm0tcGFzc3dvcmQnXSkgewog");
    sb.append("ICAgICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmRzWydwYXNzd29y");
    sb.append("ZCddLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcpIHsKICAgICAgICAg");
    sb.append("ICAgICByZXFbJ3Bhc3N3b3JkJ10gPSBoYXNoZWRfcHcucGFzc3dvcmRIYXNoOwogICAgICAgICAgICAg");
    sb.append("IG5leHQoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIpOwog");
    sb.append("ICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlyZV9m");
    sb.append("YWlsdXJlKGZvcm0sICJQYXNzd29yZHMgZG9uJ3QgbWF0Y2giKTsKICAgICAgICB9CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9CgogIC8vIFJVTlRJTUUg");
    sb.append("fCByeDphY3Rpb249ZG9tYWluOnB1dAogIHNlbGYuYWREUFVUID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRl");
    sb.append("LCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICBjb21tb25QdXQoZm9ybSwgc3RhdGUsIGlkZW50aXR5");
    sb.append("TmFtZSwgcnhvYmosIGZ1bmN0aW9uIChyeG9iaikgeyByZXR1cm4gc2VsZi5wcm90b2NvbCArICIvLyIg");
    sb.append("KyBzZWxmLmhvc3QgKyAiLyIgKyByeG9iai5wYXRoOyB9KQogIH07CgogIC8vIFJVTlRJTUUgfCByeDph");
    sb.append("Y3Rpb249ZG9jdW1lbnQ6cHV0CiAgc2VsZi5hRFBVVCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRl");
    sb.append("bnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUs");
    sb.append("IHJ4b2JqLCBmdW5jdGlvbiAocnhvYmopIHsgcmV0dXJuIHNlbGYucHJvdG9jb2wgKyAiLy8iICsgY29u");
    sb.append("bmVjdGlvbi5ob3N0ICsgIi8iICsgcnhvYmouc3BhY2UgKyAiLyIgKyByeG9iai5rZXkgKyAiLyIgKyBy");
    sb.append("eG9iai5wYXRoOyB9KQogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249YWRhbWE6c2lnbi1pbgog");
    sb.append("IHNlbGYuYVNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAg");
    sb.append("ICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9u");
    sb.append("ICgpIHsKICAgICAgcmVjYWxsX2VtYWlsKGZvcm0pOwogICAgfSwgMSk7CiAgICAvLyBUT0RPOiBwdWxs");
    sb.append("IGVtYWlsIG91dCBvZiB0aGluIGFpcgogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBm");
    sb.append("dW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0g");
    sb.append("Z2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICBpZiAocmVxLnJlbWVtYmVyKSB7CiAgICAgICAgbG9j");
    sb.append("YWxTdG9yYWdlLnNldEl0ZW0oImVtYWlsX3JlbWVtYmVyIiwgcmVxLmVtYWlsKTsKICAgICAgfSBlbHNl");
    sb.append("IHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZW1haWxfcmVtZW1iZXIiLCAiIik7CiAgICAg");
    sb.append("IH0KICAgICAgY29ubmVjdGlvbi5BY2NvdW50TG9naW4ocmVxLmVtYWlsLCByZXEucGFzc3dvcmQsIHsK");
    sb.append("ICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgc3Rhc2hfaWRlbnRp");
    sb.append("dHkoaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgIHNl");
    sb.append("bGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9y");
    sb.append("bSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAg");
    sb.append("ICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkFjY291bnRMb2dpbiBGYWlsZWQ6IiArIHJlYXNvbik7CiAgICAg");
    sb.append("ICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgogIC8vIFJVTlRJTUUgfCByeDphY3Rpb249");
    sb.append("YWRhbWE6c2lnbi11cAogIHNlbGYuYVNVID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBmb3J3YXJkVG8p");
    sb.append("IHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAg");
    sb.append("ICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtKGZvcm0sIHt9KTsK");
    sb.append("ICAgICAgY29ubmVjdGlvbi5Jbml0U2V0dXBBY2NvdW50KHJlcS5lbWFpbCwgewogICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uICgvKiBwYXlsb2FkICovKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bSgiZW1haWwiLCByZXEuZW1haWwpOwogICAgICAgICAgc2VsZi5nb3RvKGZvcndhcmRUbywgZmFsc2Up");
    sb.append("OwogICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTog");
    sb.append("ZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJJbml0U2V0dXBB");
    sb.append("Y2NvdW50IEZhaWxlZDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7");
    sb.append("CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFtYTpzZXQtcGFzc3dvcmQKICBzZWxmLmFT");
    sb.append("UCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgZm9yd2FyZFRvKSB7CiAgICBmb3JtLmFkZEV2ZW50TGlz");
    sb.append("dGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7");
    sb.append("CiAgICAgIHZhciByZXEgPSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGlmICghKCJlbWFpbCIg");
    sb.append("aW4gcmVxKSkgewogICAgICAgIHJlcS5lbWFpbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJlbWFpbCIp");
    sb.append("OwogICAgICB9CiAgICAgIGNvbm5lY3Rpb24uSW5pdENvbXBsZXRlQWNjb3VudChyZXEuZW1haWwsIGZh");
    sb.append("bHNlLCByZXEuY29kZSwgewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChpbml0KSB7CiAgICAgICAg");
    sb.append("ICB2YXIgaWRlbnRpdHkgPSBpbml0LmlkZW50aXR5OwogICAgICAgICAgY29ubmVjdGlvbi5BY2NvdW50");
    sb.append("U2V0UGFzc3dvcmQoaW5pdC5pZGVudGl0eSwgcmVxLnBhc3N3b3JkLCB7CiAgICAgICAgICAgIHN1Y2Nl");
    sb.append("c3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBzdGFzaF9pZGVudGl0eSgiZGVmYXVsdCIsIGlk");
    sb.append("ZW50aXR5LCBjb25uZWN0aW9uKTsKICAgICAgICAgICAgICBzZWxmLmdvdG8oZm9yd2FyZFRvLCBmYWxz");
    sb.append("ZSk7CiAgICAgICAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgICAgICB9LAogICAgICAg");
    sb.append("ICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgZmlyZV9mYWlsdXJl");
    sb.append("KGZvcm0sICJGYWlsZWQgQWNjb3VudFNldFBhc3N3b3JkOiIgKyByZWFzb24pOwogICAgICAgICAgICB9");
    sb.append("CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24p");
    sb.append("IHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIEluaXRDb21wbGV0ZUFjY291bnQ6");
    sb.append("IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwogIH07CgoKICB2YXIg");
    sb.append("aHlkcmF0ZV9mb3JtID0gZnVuY3Rpb24oZWwsIGlucHV0KSB7CiAgICB2YXIgdGFnID0gZWwudGFnTmFt");
    sb.append("ZS50b1VwcGVyQ2FzZSgpOwogICAgdmFyIGlzU2V0dGFibGUgPSB0YWcgPT0gIlNFTEVDVCIgfHwgdGFn");
    sb.append("ID09ICJJTlBVVCIgfHwgdGFnID09ICJISURERU4iOwogICAgaWYgKCduYW1lJyBpbiBlbCAmJiBpc1Nl");
    sb.append("dHRhYmxlKSB7CiAgICAgIHZhciBuYW1lID0gZWwubmFtZTsKICAgICAgdmFyIHBheWxvYWQgPSBpbnB1");
    sb.append("dDsKICAgICAgdmFyIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFt");
    sb.append("ZS5pbmRleE9mKCcvJykpOwogICAgICB3aGlsZSAoa0RvdE9yU2xhc2ggPiAwKSB7CiAgICAgICAgdmFy");
    sb.append("IGl0ZW0gPSBuYW1lLnN1YnN0cmluZygwLCBrRG90T3JTbGFzaCk7CiAgICAgICAgbmFtZSA9IG5hbWUu");
    sb.append("c3Vic3RyaW5nKGtEb3RPclNsYXNoICsgMSk7CiAgICAgICAgaWYgKGl0ZW0gaW4gcGF5bG9hZCkgewog");
    sb.append("ICAgICAgICAgcGF5bG9hZCA9IHBheWxvYWRbaXRlbV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgICB9CiAgICAgICAga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5k");
    sb.append("ZXhPZignLicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIH0KICAgICAgaWYgKG5hbWUgaW4gcGF5");
    sb.append("bG9hZCkgewogICAgICAgIHZhciB0eXBlID0gZWwudHlwZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlm");
    sb.append("ICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAgICAgICAgIGVsLmNoZWNrZWQgPSBwYXlsb2FkW25hbWVd");
    sb.append("ID09ICJ0cnVlIiB8fCBwYXlsb2FkW25hbWVdID09PSB0cnVlID8gdHJ1ZSA6IGZhbHNlOwogICAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZSA9PSAiUkFESU8iKSB7CiAgICAgICAgICBpZiAocGF5bG9hZFtuYW1lXSA9");
    sb.append("PSBlbC52YWx1ZSkgewogICAgICAgICAgICBlbC5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgICAgZWwudmFsdWUgPSBwYXlsb2FkW25hbWVdOwogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfQogICAgaWYgKCJjaGlsZHJlbiIgaW4gZWwpIHsKICAgICAgdmFyIGFyciA9IGVs");
    sb.append("LmNoaWxkcmVuOwogICAgICB2YXIgbiA9IGFyci5sZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBr");
    sb.append("IDwgbjsgaysrKSB7CiAgICAgICAgdmFyIGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgaHlkcmF0");
    sb.append("ZV9mb3JtKGNoLCBpbnB1dCk7CiAgICAgIH0KICAgIH0KICB9CgoKICAvLyBSVU5USU1FIHwgcng6YWN0");
    sb.append("aW9uOmNvcHktZm9ybTokdGFyZ2V0LWlkCiAgc2VsZi5hQ0YgPSBmdW5jdGlvbihmb3JtLCB0YXJnZXRG");
    sb.append("b3JtSWQpIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZXZ0KSB7");
    sb.append("CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgaW5wdXQgPSBnZXRfZm9ybShmb3Jt");
    sb.append("LCB7fSk7CiAgICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRGb3Jt");
    sb.append("SWQpOwogICAgICBpZiAodGFyZ2V0KSB7CiAgICAgICAgaHlkcmF0ZV9mb3JtKHRhcmdldCwgaW5wdXQp");
    sb.append("OwogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKQogICAgICB9IGVsc2UgewogICAgICAgIGZpcmVfZmFp");
    sb.append("bHVyZShmb3JtLCAiZmFpbGVkIHRvIGZpbmQgZm9ybSBieSBpZCAnIiArIHRhcmdldEZvcm1JZCArICIn");
    sb.append("Iik7CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH07CgogIHNlbGYuYVNEMSA9IGZ1bmN0aW9uKGZvcm0s");
    sb.append("IHN0YXRlLCBjaGFubmVsKSB7CiAgICBzZWxmLmFTRGMoZm9ybSwgc3RhdGUsIGNoYW5uZWwsIDAsIHRy");
    sb.append("dWUpOwogIH07CgogIHNlbGYuYVNEID0gZnVuY3Rpb24oZm9ybSwgc3RhdGUsIGNoYW5uZWwsIG1zVG9E");
    sb.append("ZWJvdW5jZSkgewogICAgc2VsZi5hU0RjKGZvcm0sIHN0YXRlLCBjaGFubmVsLCBtc1RvRGVib3VuY2Us");
    sb.append("IGZhbHNlKTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPXNlbmQ6JGNoYW5uZWwKICBzZWxm");
    sb.append("LmFTRGMgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5uZWwsIG1zVG9EZWJvdW5jZSwgb25jZSkg");
    sb.append("ewogICAgZm9ybS5sYXN0RmlyZWQgPSAwOwogICAgZm9ybS5maXJlZEF0QWxsID0gZmFsc2U7CiAgICBm");
    sb.append("b3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnBy");
    sb.append("ZXZlbnREZWZhdWx0KCk7CiAgICAgIC8vIG9ubHkgZXhlY3V0ZSB0aGUgc2VuZCBvbiB0aGUgZm9ybSBi");
    sb.append("ZWluZyBjbGlja2VkIHdpdGhpbiAocGFyZW50KQogICAgICBpZiAoZXZ0LnRhcmdldCAhPSBmb3JtKSB7");
    sb.append("CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIGRlYm91bmNlIHRoZSBzZW5kIHNvIGl0J3Mg");
    sb.append("bm90IHRvbyBmYXN0CiAgICAgIHZhciBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIGZvcm0ubGFzdEZpcmVk");
    sb.append("OwogICAgICBpZiAoZWxhcHNlZCA8IG1zVG9EZWJvdW5jZSkgewogICAgICAgIGZpcmVfZmFpbHVyZShm");
    sb.append("b3JtLCAiU2VuZCBmYWlsZWQgZHVlIHRvIHRvbyBtYW55IGNsaWNrcyB0b28gcXVpY2tseSIpOwogICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAob25jZSkgewogICAgICAgIGlmIChmb3JtLmZpcmVk");
    sb.append("QXRBbGwpIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiU2VuZCBmYWlsZWQgZHVlIHRvIGR1");
    sb.append("cGxpY2F0ZSIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBmb3JtLmZp");
    sb.append("cmVkQXRBbGwgPSB0cnVlOwogICAgICB9CiAgICAgIGZvcm0ubGFzdEZpcmVkID0gRGF0ZS5ub3coKTsK");
    sb.append("ICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2YXIgbXNnID0gZ2V0X2Zvcm0oZm9ybSwgcGFz");
    sb.append("c3dvcmRzKTsKCiAgICAgIGlmIChldnQuc3VibWl0dGVyKSB7CiAgICAgICAgdmFyIHMgPSBldnQuc3Vi");
    sb.append("bWl0dGVyOwogICAgICAgIGlmIChzLm5hbWUgJiYgcy52YWx1ZSkgewogICAgICAgICAgaWYgKHMudmFs");
    sb.append("dWUgPT0gInRydWUiKSB7IHMudmFsdWUgPSB0cnVlOyB9CiAgICAgICAgICBlbHNlIGlmIChzLnZhbHVl");
    sb.append("ID09ICJmYWxzZSIpIHsgcy52YWx1ZSA9IGZhbHNlOyB9CiAgICAgICAgICBtc2dbcy5uYW1lXSA9IHMu");
    sb.append("dmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgYWZ0ZXIgPSBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgICB2YXIgY2hhbm5lbFRvVXNlID0gY2hhbm5lbDsKICAgICAgICBpZiAoY2hhbm5lbCA9PSAiX19k");
    sb.append("cyIpIHsKICAgICAgICAgIGNoYW5uZWxUb1VzZSA9IG1zZ1snX19jaGFubmVsJ107CiAgICAgICAgICBk");
    sb.append("ZWxldGUgbXNnWydfX2NoYW5uZWwnXTsKICAgICAgICB9CiAgICAgICAgaWYgKEFkYW1hLkRlYnVnZ2Vy");
    sb.append("KSB7CiAgICAgICAgICBBZGFtYS5EZWJ1Z2dlci5zZW5kKHN0YXRlLmRhdGEuY29ubmVjdGlvbi5uYW1l");
    sb.append("LCBjaGFubmVsVG9Vc2UsIG1zZyk7CiAgICAgICAgfQogICAgICAgIGlmIChvbmNlKSB7CiAgICAgICAg");
    sb.append("ICBjb25uZWN0aW9uLkRvY3VtZW50c0NyZWF0ZURlZHVwZSh7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1");
    sb.append("bmN0aW9uKGRlZHVwZSkgewogICAgICAgICAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5wdHIuc2Vu");
    sb.append("ZE9uY2UoY2hhbm5lbFRvVXNlLCBkZWR1cGUuZGVkdXBlLCBtc2csIHsKICAgICAgICAgICAgICAgIHN1");
    sb.append("Y2Nlc3M6IGZ1bmN0aW9uICgvKiBwYXlsb2FkICovKSB7CiAgICAgICAgICAgICAgICAgIGZpcmVfc3Vj");
    sb.append("Y2Vzcyhmb3JtKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmYWlsdXJlOiBmdW5j");
    sb.append("dGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiU2VuZCBm");
    sb.append("YWlsZWQ6IiArIHJlYXNvbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAg");
    sb.append("ICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlNlbmQgZmFpbGVkIHRvIGdldCBkZWR1cGUgdG9rZW46IiAr");
    sb.append("IHJlYXNvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ucHRyLnNlbmQoY2hhbm5lbFRvVXNlLCBtc2csIHsKICAg");
    sb.append("ICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKC8qIHBheWxvYWQgKi8pIHsKICAgICAgICAgICAgICBm");
    sb.append("aXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0");
    sb.append("aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIlNlbmQgZmFpbGVk");
    sb.append("OiIgKyByZWFzb24pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07");
    sb.append("CgogICAgICB2YXIgcG9zdFBhc3N3b3JkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCduZXdfcGFz");
    sb.append("c3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAgICAgaWYgKCEoJ2NvbmZpcm0tbmV3X3Bhc3N3b3Jk");
    sb.append("JyBpbiBwYXNzd29yZHMpIHx8IHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRzWydj");
    sb.append("b25maXJtLW5ld19wYXNzd29yZCddKSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFz");
    sb.append("aFBhc3N3b3JkKHBhc3N3b3Jkc1snbmV3X3Bhc3N3b3JkJ10sIHsKICAgICAgICAgICAgICBzdWNjZXNz");
    sb.append("OiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgICBtc2dbJ25ld19wYXNzd29yZCdd");
    sb.append("ID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsKICAgICAgICAgICAgICAgIGFmdGVyKCk7CiAgICAgICAg");
    sb.append("ICAgICAgfSwKICAgICAgICAgICAgICBmYWlsZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dvcmQiKTsKICAgICAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpcmVfZmFp");
    sb.append("bHVyZShmb3JtLCAiUGFzc3dvcmRzIG1pc21hdGNoIGZvciBuZXcgcGFzc3dvcmQuIik7CiAgICAgICAg");
    sb.append("ICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFmdGVyKCk7CiAgICAgICAgfQogICAgICB9Cgog");
    sb.append("ICAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAoISgnY29uZmlybS1w");
    sb.append("YXNzd29yZCcgaW4gcGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRz");
    sb.append("Wydjb25maXJtLXBhc3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBh");
    sb.append("c3N3b3JkKHBhc3N3b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlv");
    sb.append("biAoaGFzaGVkX3B3KSB7CiAgICAgICAgICAgICAgbXNnWydwYXNzd29yZCddID0gaGFzaGVkX3B3LnBh");
    sb.append("c3N3b3JkSGFzaDsKICAgICAgICAgICAgICBwb3N0UGFzc3dvcmQoKTsKICAgICAgICAgICAgfSwKICAg");
    sb.append("ICAgICAgICAgZmFpbGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZv");
    sb.append("cm0sICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsK");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJQYXNzd29yZHMgbWlz");
    sb.append("bWF0Y2giKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcG9zdFBhc3N3b3JkKCk7CiAg");
    sb.append("ICAgIH0KICAgIH0sIHRydWUpOwogIH07CiAgLy8gPHRvZG90YXNrPmRlc2NyaXB0aW9uPC90b2RvdGFz");
    sb.append("az4KICBzZWxmLlRBU0sgPSBmdW5jdGlvbihwZG9tLCBpZCwgc2VjdGlvbiwgZGVzY3JpcHRpb24pIHsK");
    sb.append("ICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBlbGVtZW50");
    sb.append("LmlubmVySFRNTCA9ICImIzk3NDQ7ICIgKyBkZXNjcmlwdGlvbiArICIgKCAiICsgc2VjdGlvbiArICIp");
    sb.append("IDxiciAvPiI7CiAgICBwZG9tLmFwcGVuZENoaWxkKGVsZW1lbnQpOwogIH07CiAgLy8gUlVOVElNRTog");
    sb.append("cHJlLWNvbXByZXNzaW9uIGZvciBzZXR0aW5nIGFuIGF0dHJpYnV0ZQogIC8vICJkLnNldEF0dHJpYnV0");
    sb.append("ZShhLHYpOyIgLS0+CiAgLy8gJC5TQShkLGEsdik7IgogIHNlbGYuU0EgPSBmdW5jdGlvbihkb20sIGF0");
    sb.append("dHIsIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlKTsKICB9OwogIHNlbGYu");
    sb.append("U0lIID0gZnVuY3Rpb24oZG9tLCBodG1sKSB7CiAgICBkb20uaW5uZXJIVE1MID0gaHRtbDsKICB9Owog");
    sb.append("IC8vIFJVTlRJTUU6IHNldCB0aGUgbGFiZWwgb2YgYW4gb3B0aW9uCiAgc2VsZi5TTCA9IGZ1bmN0aW9u");
    sb.append("KGRvbSwgdmFsdWUpIHsKICAgIGRvbS5sYWJlbCA9IHZhbHVlOwogICAgZG9tLmlubmVyVGV4dCA9IHZh");
    sb.append("bHVlOwogIH07CgogIC8vIGZvciBzZWxlY3RzCiAgLy8gZC52YWx1ZT0kdmFsdWU7CiAgLy8gJC5TVihk");
    sb.append("LCR2YWx1ZSk7CiAgc2VsZi5TViA9IGZ1bmN0aW9uKGRvbSwgdmFsdWUpIHsKICAgIHZhciBwcmlvciA9");
    sb.append("IGRvbS52YWx1ZTsKICAgIGRvbS52YWx1ZSA9IHZhbHVlOwogICAgZG9tLnJ4dmFsdWUgPSB2YWx1ZTsK");
    sb.append("ICAgIGlmIChwcmlvciAhPSB2YWx1ZSkgewogICAgICBkb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQo");
    sb.append("ImZvcmNlZCIpKTsKICAgIH0KICB9OwogIHNlbGYuRlYgPSBmdW5jdGlvbihkb20sIGZpZWxkLCB2YWx1");
    sb.append("ZSkgewogICAgdmFyIHByaW9yID0gZG9tW2ZpZWxkXTsKICAgIGRvbVtmaWVsZF0gPSB2YWx1ZTsKICAg");
    sb.append("IGlmIChwcmlvciAhPSB2YWx1ZSkgewogICAgICBkb20uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoImZv");
    sb.append("cmNlZCIpKTsKICAgIH0KICB9OwogIHNlbGYubWVyZ2VHb3RvID0gZnVuY3Rpb24oaHJlZiwgc3RhdGUp");
    sb.append("IHsKICAgIHZhciBwYXJ0cyA9IChocmVmLnN0YXJ0c1dpdGgoIi8iKSA/IGhyZWYuc3Vic3RyaW5nKDEp");
    sb.append("IDogaHJlZikuc3BsaXQoIi8iKTsKICAgIHZhciBtZXJnZUluaXQgPSB7fTsKICAgIGlmIChyb3V0ZShw");
    sb.append("YXJ0cywgMCwgcm91dGVyLCBtZXJnZUluaXQpKSB7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUo");
    sb.append("bWVyZ2VJbml0KTsKICAgIH0KICB9OwogIC8vIFJVTlRJTUUgfCA8Li4uIGhyZWY9IiIgLi4uPgogIHNl");
    sb.append("bGYuSFJFRiA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBocmVmLCBtZXJnZSkgewogICAgZG9tLnNldEF0");
    sb.append("dHJpYnV0ZSgiaHJlZiIsIGZpeEhyZWYoaHJlZikpOwogICAgZG9tLm9uY2xpY2sgPSBmdW5jdGlvbiAo");
    sb.append("ZXZ0KSB7CiAgICAgIGlmIChldnQuY3RybEtleSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9");
    sb.append("CiAgICAgIHZhciB0cmltSHJlZiA9IGhyZWY7CiAgICAgIGlmICh0cmltSHJlZi5zdGFydHNXaXRoKCIv");
    sb.append("IikpIHsKICAgICAgICB0cmltSHJlZiA9IHRyaW1IcmVmLnN1YnN0cmluZygxKTsKICAgICAgfQogICAg");
    sb.append("ICB2YXIga1EgPSB0cmltSHJlZi5pbmRleE9mKCc/Jyk7CiAgICAgIGlmIChrUSA+IDApIHsKICAgICAg");
    sb.append("ICB0cmltSHJlZiA9IHRyaW1IcmVmLnN1YnN0cmluZygwLCBrUSk7CiAgICAgIH0KICAgICAgdmFyIHBh");
    sb.append("cnRzID0gdHJpbUhyZWYuc3BsaXQoIi8iKTsKICAgICAgdmFyIG1lcmdlSW5pdCA9IHt9OwogICAgICBp");
    sb.append("ZiAocm91dGUocGFydHMsIDAsIHJvdXRlciwgbWVyZ2VJbml0KSkgewogICAgICAgIGV2dC5wcmV2ZW50");
    sb.append("RGVmYXVsdCgpOwogICAgICAgIGlmIChtZXJnZSkgewogICAgICAgICAgc3RhdGUudmlldy50cmVlLnVw");
    sb.append("ZGF0ZShtZXJnZUluaXQpOwogICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHttZXJnZTp0");
    sb.append("cnVlfSwgIiIsIGZpeEhyZWYoaHJlZikpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmdv");
    sb.append("dG8oaHJlZiwgdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAg");
    sb.append("ICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgfTsKICAvLyBSVU5USU1FIHwgPC4uLiBjbGFzcz0iIiAuLi4+");
    sb.append("CiAgc2VsZi5BQyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7CiAgICBkb20uc2V0QXR0cmlidXRlKCJj");
    sb.append("bGFzcyIsIHZhbHVlKTsKICB9OwogIHNlbGYuQUNMQVNTID0gZnVuY3Rpb24gKGRvbSwgdmFsdWUpIHsg");
    sb.append("Ly8gdG8gZGVwcmVjYXRlIGluIHRoZSBmdXR1cmUKICAgIGRvbS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwg");
    sb.append("dmFsdWUpOwogIH07CiAgLy8gUlVOVElNRSB8IDwuLi4gc3JjPSIiIC4uLj4KICBzZWxmLkFTID0gZnVu");
    sb.append("Y3Rpb24gKGRvbSwgdmFsdWUpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoInNyYyIsIHZhbHVlKTsKICB9");
    sb.append("OwogIHNlbGYuQVNSQyA9IGZ1bmN0aW9uIChkb20sIHZhbHVlKSB7IC8vIHRvIGRlcHJlY2F0ZSBpbiB0");
    sb.append("aGUgZnV0dXJlCiAgICBkb20uc2V0QXR0cmlidXRlKCJzcmMiLCB2YWx1ZSk7CiAgfTsKCiAgc2VsZi5m");
    sb.append("aW5kRWxlbWVudEJ5SWRJblVuYm91bmREb20gPSBmdW5jdGlvbihkb20sIGlkKSB7CiAgICB2YXIgZmVi");
    sb.append("aWQgPSBmdW5jdGlvbiAoZCwgaWQpIHsKICAgICAgaWYgKCdpZCcgaW4gZCkgewogICAgICAgIGlmIChk");
    sb.append("LmlkID09IGlkKSB7CiAgICAgICAgICByZXR1cm4gZDsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYg");
    sb.append("KCdjaGlsZHJlbicgaW4gZCkgewogICAgICAgIHZhciBhcnIgPSBkLmNoaWxkcmVuOwogICAgICAgIHZh");
    sb.append("ciBuID0gYXJyLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAg");
    sb.append("ICAgICAgdmFyIHJlc3VsdCA9IGZlYmlkKGFycltrXSwgaWQpOwogICAgICAgICAgaWYgKHJlc3VsdCAh");
    sb.append("PT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH07CiAgICByZXR1cm4gZmViaWQoZG9tLCBpZCk7");
    sb.append("CiAgfTsKICBzZWxmLnBvbGxFbGVtZW50ID0gZnVuY3Rpb24oZG9tLCB0aW1lb3V0LCBzdWNjZXNzLCBm");
    sb.append("YWlsdXJlKSB7CiAgICB2YXIgYWRtID0gZnVuY3Rpb24gKGRvbSwgcmVtYWluKSB7CiAgICAgIGlmIChy");
    sb.append("ZW1haW4gPCAwKSB7CiAgICAgICAgZmFpbHVyZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAg");
    sb.append("ICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhkb20pKSB7CiAgICAgICAgc3VjY2VzcygpOwogICAg");
    sb.append("ICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAg");
    sb.append("IGFkbShkb20sIHJlbWFpbiAtIDI1KTsKICAgICAgICB9LCAyNSk7CiAgICAgIH0KICAgIH07CiAgICBh");
    sb.append("ZG0oZG9tLCB0aW1lb3V0KTsKICB9OwogIHZhciBsaWJzTG9hZGVkID0ge307CiAgc2VsZi5sb2FkTGli");
    sb.append("cmFyeSA9IGZ1bmN0aW9uKGxpYiwgY2FsbGJhY2spIHsKICAgIGlmIChsaWIgaW4gbGlic0xvYWRlZCkg");
    sb.append("ewogICAgICBjYWxsYmFjayhsaWJzTG9hZGVkW2xpYl0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBs");
    sb.append("aWJzTG9hZGVkW2xpYl0gPSBmYWxzZTsKICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVt");
    sb.append("ZW50KCdzY3JpcHQnKTsKICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsbGliKTsKICAgIHNjcmlw");
    sb.append("dC5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgbGlic0xvYWRlZFtsaWJdID0gdHJ1ZTsKICAgICAg");
    sb.append("Y2FsbGJhY2sodHJ1ZSk7CiAgICB9OwogICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAg");
    sb.append("ICAgY2FsbGJhY2soZmFsc2UpOwogICAgfTsKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2Ny");
    sb.append("aXB0KTsKICB9OwogIHdpbmRvdy5yeGh0bWwgPSBzZWxmOwogIHJldHVybiBzZWxmOwp9KSgpOwo=");
    return sb.toString();
  }
  public static final String TESTER = new String(Base64.getDecoder().decode(make_tester()), StandardCharsets.UTF_8);
  private static String make_tester() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIF9fZ3JhcGggPSB7fTsNCnZhciBfX3RvZG8gPSBbXTsNCnZhciBfX3N0YXRlID0gew0KICBleGVj");
    sb.append("dXRlX2Zvcm06IGZhbHNlLA0KICBmb3JtX2V4ZWN1dGluZzogIiIsDQogIGlkZ2VuOiAwDQp9Ow0KDQpm");
    sb.append("dW5jdGlvbiBfX2NyZWF0ZShuYW1lKSB7DQogIHJldHVybiB7bmFtZTogbmFtZSwgdmlzaXRlZDogZmFs");
    sb.append("c2UsIHRlc3RzOiB7fSwgbmVlZF9zbmFwc2hvdDogdHJ1ZSwgc3ViX25hbWU6ICIifTsNCn0NCg0KZnVu");
    sb.append("Y3Rpb24gX19nZXRDdXJyZW50TG9jYXRpb25BbmRJbmRleCgpIHsNCiAgdmFyIGN1cnJlbnQgPSB3aW5k");
    sb.append("b3cubG9jYXRpb24ucGF0aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoOw0KICBpZiAoIShjdXJy");
    sb.append("ZW50IGluIF9fZ3JhcGgpKSB7DQogICAgX19ncmFwaFtjdXJyZW50XSA9IF9fY3JlYXRlKGN1cnJlbnQp");
    sb.append("Ow0KICB9DQogIGlmICghX19ncmFwaFtjdXJyZW50XS52aXNpdGVkKSB7DQogICAgX19ncmFwaFtjdXJy");
    sb.append("ZW50XS52aXNpdGVkID0gdHJ1ZTsNCiAgfQ0KDQogIHZhciBsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1l");
    sb.append("bnRzQnlUYWdOYW1lKCJhIik7DQogIGZvciAodmFyIGsgPSAwOyBrIDwgbGlua3MubGVuZ3RoOyBrKysp");
    sb.append("IHsNCiAgICBpZiAoImhyZWYiIGluIGxpbmtzW2tdKSB7DQogICAgICB2YXIgbmV4dCA9IGxpbmtzW2td");
    sb.append("LmhyZWY7DQogICAgICBpZiAoIShuZXh0IGluIF9fZ3JhcGgpKSB7DQogICAgICAgIF9fZ3JhcGhbbmV4");
    sb.append("dF0gPSBfX2NyZWF0ZShuZXh0KTsNCiAgICAgICAgX190b2RvLnB1c2gobmV4dCk7DQogICAgICB9DQog");
    sb.append("ICAgfQ0KICB9DQoNCiAgcmV0dXJuIF9fZ3JhcGhbY3VycmVudF07DQp9DQoNCmZ1bmN0aW9uIF9faW5k");
    sb.append("ZXhDdXJyZW50KGN1cnJlbnQpIHsNCiAgdmFyIGNyZWF0ZWQgPSBbXTsNCiAgLy8gVE9ETzogbG9vayBm");
    sb.append("b3IgYWxsIHRoZSBlbGVtZW50cyB3aXRoIHRlc3Q6JG5hbWU6c2V0PQ0KICB2YXIgaW5kZXggPSBmdW5j");
    sb.append("dGlvbiAoZG9tKSB7DQogICAgZm9yIChjb25zdCBhdHRyIG9mIGRvbS5hdHRyaWJ1dGVzKSB7DQogICAg");
    sb.append("ICBpZiAoYXR0ci5uYW1lLnN0YXJ0c1dpdGgoInRlc3Q6IikpIHsNCiAgICAgICAgdmFyIHRlc3ROYW1l");
    sb.append("QW5kQ29tbWFuZCA9IGF0dHIubmFtZS5zdWJzdHJpbmcoNSk7DQogICAgICAgIHZhciBrQ29sb24gPSB0");
    sb.append("ZXN0TmFtZUFuZENvbW1hbmQuaW5kZXhPZigiOiIpOw0KICAgICAgICBpZiAoa0NvbG9uID4gMCkgew0K");
    sb.append("ICAgICAgICAgIHZhciB0ZXN0bmFtZSA9IHRlc3ROYW1lQW5kQ29tbWFuZC5zdWJzdHJpbmcoMCwga0Nv");
    sb.append("bG9uKTsNCiAgICAgICAgICB2YXIgY29tbWFuZCA9IHRlc3ROYW1lQW5kQ29tbWFuZC5zdWJzdHJpbmco");
    sb.append("a0NvbG9uICsgMSk7DQogICAgICAgICAgdmFyIHRlc3Q7DQogICAgICAgICAgaWYgKCEodGVzdG5hbWUg");
    sb.append("aW4gY3VycmVudC50ZXN0cykpIHsNCiAgICAgICAgICAgIHRlc3QgPSB7bmFtZTogdGVzdG5hbWUsIHNl");
    sb.append("dHM6IHt9LCBjbGljazogbnVsbCwgcmVhZHk6IGZhbHNlLCByYW46IGZhbHNlfTsNCiAgICAgICAgICAg");
    sb.append("IGN1cnJlbnQudGVzdHNbdGVzdG5hbWVdID0gdGVzdDsNCiAgICAgICAgICAgIGNyZWF0ZWQucHVzaCh0");
    sb.append("ZXN0KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGVzdCA9IGN1cnJlbnQudGVzdHNb");
    sb.append("dGVzdG5hbWVdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIXRlc3QucmVhZHkpIHsNCiAgICAg");
    sb.append("ICAgICAgIGlmIChjb21tYW5kID09ICJjbGljayIpIHsNCiAgICAgICAgICAgICAgdGVzdC5jbGljayA9");
    sb.append("IGRvbTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5zdGFydHNXaXRoKCJzZXQ6IikpIHsN");
    sb.append("CiAgICAgICAgICAgICAgdGVzdC5zZXRzW2NvbW1hbmQuc3Vic3RyaW5nKDQpXSA9IHtlbGVtZW50OiBk");
    sb.append("b20sIHZhbHVlOiBhdHRyLnZhbHVlfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAg");
    sb.append("IH0NCiAgICAgIH0NCiAgICB9DQogICAgaWYgKCJjaGlsZHJlbiIgaW4gZG9tKSB7DQogICAgICB2YXIg");
    sb.append("YXJyID0gZG9tLmNoaWxkcmVuOw0KICAgICAgdmFyIG4gPSBhcnIubGVuZ3RoOw0KICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBuOyBrKyspIHsNCiAgICAgICAgaW5kZXgoZG9tLmNoaWxkcmVuW2tdKTsNCiAg");
    sb.append("ICAgIH0NCiAgICB9DQogIH07DQogIGluZGV4KGRvY3VtZW50LmJvZHkpOw0KDQogIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgY3JlYXRlZC5sZW5ndGg7IGsrKykgew0KICAgIGNyZWF0ZWRba10ucmVhZHkgPSB0cnVl");
    sb.append("Ow0KICB9DQogIHJldHVybiBudWxsOw0KfQ0KDQpmdW5jdGlvbiBfX3N0YXJ0VGVzdEFnZW50KCkgew0K");
    sb.append("ICBjb25zb2xlLmxvZygiVGVzdCBBZ2VudCBTdGFydGluZyBVcCIpOw0KICByZXR1cm4gdHJ1ZTsNCn0N");
    sb.append("Cg0KZnVuY3Rpb24gX19wb2xsVGVzdEFnZW50KCkgew0KICB2YXIgJCA9IHdpbmRvdy5yeGh0bWw7DQog");
    sb.append("IGlmICgkLl9pbmZsaWdodCA9PSAwKSB7DQogICAgdmFyIGN1cnJlbnQgPSBfX2dldEN1cnJlbnRMb2Nh");
    sb.append("dGlvbkFuZEluZGV4KCk7DQoNCiAgICBpZiAoY3VycmVudC5uZWVkX3NuYXBzaG90KSB7DQogICAgICBj");
    sb.append("dXJyZW50Lm5lZWRfc25hcHNob3QgPSBmYWxzZTsNCiAgICAgIHJldHVybiAic25hcHNob3Q6IiArIGN1");
    sb.append("cnJlbnQubmFtZSArIGN1cnJlbnQuc3ViX25hbWU7DQogICAgfQ0KDQogICAgaWYgKF9fdG9kby5sZW5n");
    sb.append("dGggPiAwKSB7DQogICAgICB2YXIgdXJpID0gX190b2RvLnBvcCgpOw0KICAgICAgY29uc29sZS5sb2co");
    sb.append("ImdvaW5nIHRvOiIgKyB1cmkpOw0KICAgICAgJC5nb3RvKHVyaSk7DQogICAgICByZXR1cm4gIndhaXQ6");
    sb.append("MjUiOw0KICAgIH0NCg0KICAgIC8vIGluZGV4IHRoZSBjdXJyZW50DQogICAgX19pbmRleEN1cnJlbnQo");
    sb.append("Y3VycmVudCk7DQoNCiAgICBmb3IgKHZhciB0ZXN0bmFtZSBpbiBjdXJyZW50LnRlc3RzKSB7DQogICAg");
    sb.append("ICB2YXIgdGVzdCA9IGN1cnJlbnQudGVzdHNbdGVzdG5hbWVdOw0KICAgICAgaWYgKCF0ZXN0LnJhbikg");
    sb.append("ew0KICAgICAgICB0ZXN0LnJhbiA9IHRydWU7DQogICAgICAgIGlmICh0ZXN0LmNsaWNrKSB7DQogICAg");
    sb.append("ICAgICAgaWYgKCF0ZXN0LmNsaWNrLmlkKSB7DQogICAgICAgICAgICBfX3N0YXRlLmlkZ2VuKys7DQog");
    sb.append("ICAgICAgICAgICB0ZXN0LmNsaWNrLmlkID0gIl9fYXV0b19jbGlja19pZF8iICsgX19zdGF0ZS5pZGdl");
    sb.append("bjsNCiAgICAgICAgICB9DQogICAgICAgICAgY3VycmVudC5uZWVkX3NuYXBzaG90ID0gdHJ1ZTsNCiAg");
    sb.append("ICAgICAgICBjdXJyZW50LnN1Yl9uYW1lID0gIiMjIiArIHRlc3RuYW1lOw0KICAgICAgICAgIHJldHVy");
    sb.append("biAiY2xpY2s6IiArIHRlc3QuY2xpY2suaWQ7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAg");
    sb.append("cmV0dXJuICJkb25lIjsNCiAgfSBlbHNlIHsNCiAgICBjb25zb2xlLmxvZygiKGluc3RhYmxlKSIpOw0K");
    sb.append("ICB9DQogIHJldHVybiAid2FpdDo1MCI7DQp9");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBpcyB0aGUgY29ubmVjdGlvbiBkZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRo");
    sb.append("ZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhp");
    sb.append("cy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAwOwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBv");
    sb.append("dXQgZnJvbSB0aGUgc2VydmVyLCBob3cgbG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAg");
    sb.append("dGhpcy5yZXNldF9iYWNrb2ZmID0gMTAwMDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0");
    sb.append("aGlzLnNvY2tldCA9IG51bGw7CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5n");
    sb.append("ZXMKICAgIHRoaXMub25zdGF0dXNjaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3");
    sb.append("aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFybiB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5j");
    sb.append("dGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkgeyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAg");
    sb.append("IHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNh");
    sb.append("bGxiYWNrcyA9IG5ldyBNYXAoKTsKICAgIC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0g");
    sb.append("MDsKICAgIC8vIGV2ZW50cyB0byBleGVjdXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVj");
    sb.append("dCA9IG5ldyBNYXAoKTsKICAgIC8vIHByb3RvY29sIGZvciBtZXRyaWNzCiAgICB0aGlzLnByb3RvY29s");
    sb.append("ID0gbG9jYXRpb24ucHJvdG9jb2w7CiAgfQoKICAvKiogc3RvcCB0aGUgY29ubmVjdGlvbiAqLwogIHN0");
    sb.append("b3AoKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwogICAgaWYgKHRoaXMuc29ja2V0ICE9PSBudWxsKSB7");
    sb.append("CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgfQoKICBidW1wKGJtKSB7CiAgICB0cnkg");
    sb.append("ewogICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGh0dHAub3Blbigi");
    sb.append("UFVUIiwgdGhpcy5wcm90b2NvbCArICIvLyIgKyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUp");
    sb.append("OwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9keSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0g");
    sb.append("bmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgIHhodHRwLm9wZW4oIlBVVCIsIHRoaXMucHJvdG9jb2wg");
    sb.append("KyAiLy8iICsgdGhpcy5ob3N0ICsgIi9+bGcvIiArIG5hbWUsIHRydWUpOwogICAgICB4aHR0cC5zZW5k");
    sb.append("KGJvZHkpOwogICAgfSBjYXRjaCAoZXgpIHsKICAgICAgLy8gZG9uJ3QgY2FyZQogICAgfQogIH0KCiAg");
    sb.append("LyoqIHByaXZhdGU6IHJldHJ5IHRoZSBjb25uZWN0aW9uICovCiAgX3JldHJ5KCkgewogICAgLy8gbnVs");
    sb.append("bCBvdXQgdGhlIHNvY2tldAogICAgdGhpcy5zb2NrZXQgPSBudWxsOwogICAgLy8gaWYgd2UgYXJlIGNv");
    sb.append("bm5lY3RlZCwgdHJhbnNpdGlvbiB0aGUgc3RhdHVzCiAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAg");
    sb.append("ICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5vbnN0YXR1c2NoYW5nZShmYWxzZSk7");
    sb.append("CiAgICAgIHRoaXMuY2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGNiLCBpZCkgewogICAgICAgIGNi");
    sb.append("KHtmYWlsdXJlOjk5OX0pOwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuY2FsbGJhY2tzLmNsZWFyKCk7");
    sb.append("CiAgICAvLyBpZiB3ZSBhcmUgZGVhZCwgdGhlbiBkb24ndCBhY3R1YWxseSByZXRyeQogICAgaWYgKHRo");
    sb.append("aXMuZGVhZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICAvLyBtYWtlIHN1cmUKICAgIGlmICghdGhp");
    sb.append("cy5zY2hlZHVsZWQpIHsKICAgICAgLy8gc2NoZWR1bGUgYSByZXRyeTsgZmlyc3QgY29tcHV0ZSBob3cg");
    sb.append("bG9uZyB0byB0YWtlCiAgICAgIC8vIGNvbXB1dGUgaG93IGxvbmcgd2UgbmVlZCB0byB3YWl0CiAgICAg");
    sb.append("IHZhciBoYWx2ZUFmdGVyU2NoZWR1bGUgPSBmYWxzZTsKICAgICAgdGhpcy5iYWNrb2ZmICs9IE1hdGgu");
    sb.append("cmFuZG9tKCkgKiB0aGlzLmJhY2tvZmY7CiAgICAgIGlmICh0aGlzLmJhY2tvZmYgPiB0aGlzLm1heGlt");
    sb.append("dW1fYmFja29mZikgewogICAgICAgIHRoaXMuYmFja29mZiA9IHRoaXMubWF4aW11bV9iYWNrb2ZmOwog");
    sb.append("ICAgICAgIGhhbHZlQWZ0ZXJTY2hlZHVsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIC8vIHNjaGVkdWxl");
    sb.append("IGl0CiAgICAgIHRoaXMuc2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("ICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLnN0YXJ0KCk7CiAgICAgIH0sIHRo");
    sb.append("aXMuYmFja29mZik7CgogICAgICAvLyB3ZSBqdXN0IHNjaGVkdWxlZCBpdCBmb3IgdGhlIG1heGltdW0g");
    sb.append("YmFja29mZiB0aW1lLCBsZXQncyByZWR1Y2UgdGhlIGJhY2tvZmYgc28gdGhlIG5leHQgb25lIHdpbGwg");
    sb.append("aGF2ZSBzb21lIGppdHRlcgogICAgICBpZiAoaGFsdmVBZnRlclNjaGVkdWxlKSB7CiAgICAgICAgdGhp");
    sb.append("cy5iYWNrb2ZmIC89IDIuMDsKICAgICAgfQogICAgfQogIH0KCiAgLyoqIHN0YXJ0IHRoZSBjb25uZWN0");
    sb.append("aW9uICovCiAgc3RhcnQoKSB7CiAgICAvLyByZXNldCB0aGUgc3RhdGUKICAgIHZhciBzZWxmID0gdGhp");
    sb.append("czsKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7CiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIHRo");
    sb.append("aXMuaGFzX2hhZF9waW5nID0gZmFsc2U7CiAgICB0aGlzLmxhc3RfcGluZyA9IDA7CiAgICB0aGlzLnBp");
    sb.append("bmdfZmFpbHVyZXMgPSAwOwogICAgLy8gY3JlYXRlIHRoZSBzb2NrZXQgYW5kIGJpbmQgZXZlbnQgaGFu");
    sb.append("ZGxlcnMKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnVybCk7CiAgICB0aGlzLnNv");
    sb.append("Y2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIHJlc3VsdCA9IEpTT04u");
    sb.append("cGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIC8vIGEgbWVzc2FnZSBhcnJpdmVkLCBpcyBpdCBhIGNvbm5l");
    sb.append("Y3Rpb24gc2lnbmFsCiAgICAgIGlmICgicGluZyIgaW4gcmVzdWx0KSB7CiAgICAgICAgc2VsZi5vbnBp");
    sb.append("bmcocmVzdWx0LnBpbmcsIHJlc3VsdC5sYXRlbmN5KTsKICAgICAgICByZXN1bHQucG9uZyA9IG5ldyBE");
    sb.append("YXRlKCkuZ2V0VGltZSgpIC8gMTAwMC4wOwogICAgICAgIHNlbGYuc29ja2V0LnNlbmQoSlNPTi5zdHJp");
    sb.append("bmdpZnkocmVzdWx0KSk7CiAgICAgICAgc2VsZi5sYXN0X3BpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUo");
    sb.append("KTsKICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9");
    sb.append("CiAgICAgIGlmICgic3RhdHVzIiBpbiByZXN1bHQpIHsKICAgICAgICAvLyBoZXksIGFyZSB3ZSBjb25u");
    sb.append("ZWN0ZWQ/CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgIT0gImNvbm5lY3RlZCIpIHsKICAgICAgICAg");
    sb.append("IC8vIG5vcGUsIE9LLCBsZXQncyBtYWtlIHRoaXMgYSBkZWFkIHNvY2tldAogICAgICAgICAgc2VsZi5z");
    sb.append("b2NrZXQuY2xvc2UoKTsKICAgICAgICAgIHNlbGYuc29ja2V0ID0gbnVsbDsKICAgICAgICAgIHNlbGYu");
    sb.append("YmFja29mZiA9IHNlbGYucmVzZXRfYmFja29mZjsKICAgICAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIHRlbGwgdGhlIGNsaWVudCB0aGF0IHdlIGFy");
    sb.append("ZSBnb29kIQogICAgICAgIHNlbGYuYmFja29mZiA9IDE7CiAgICAgICAgc2VsZi5jb25uZWN0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIHNlbGYub25zdGF0dXNjaGFuZ2UodHJ1ZSk7CiAgICAgICAgc2VsZi5fcmVjb25u");
    sb.append("ZWN0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXN0IHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSkpIHsKICAg");
    sb.append("ICAgc20ucmVzcG9uZGVyLmZhaWx1cmUoIm5vdCBjb25uZWN0ZWQiKTsKICAgIH0KICAgIHJldHVybiBu");
    sb.append("dWxsOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSBzdHJlYW0gcmVxdWVzdCB3aXRoIHRoZSBnaXZlbiBzdGF0");
    sb.append("ZSBtYWNoaW5lICovCiAgX19leGVjdXRlX3N0cmVhbShzbSkgewogICAgdmFyIHNlbGYgPSB0aGlzOwog");
    sb.append("ICAgc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmICgi");
    sb.append("ZmFpbHVyZSIgaW4gcmVzcG9uc2UpIHsKICAgICAgICBpZiAoJ2ZhaWx1cmUnIGluIHNtLnJlc3BvbmRl");
    sb.append("cikgewogICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9uc2UucmVhc29uKTsKICAgICAg");
    sb.append("ICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwogICAgICAgIHJldHVybjsK");
    sb.append("ICAgICAgfQogICAgICBpZiAocmVzcG9uc2UucmVzcG9uc2UpIHsKICAgICAgICBpZiAoJ25leHQnIGlu");
    sb.append("IHNtLnJlc3BvbmRlcikgewogICAgICAgICAgc20ucmVzcG9uZGVyLm5leHQocmVzcG9uc2UucmVzcG9u");
    sb.append("c2UpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocmVzcG9uc2UuZG9uZSkgewogICAgICAgIGlm");
    sb.append("ICgnY29tcGxldGUnIGluIHNtLnJlc3BvbmRlcikgewogICAgICAgICAgc20ucmVzcG9uZGVyLmNvbXBs");
    sb.append("ZXRlKCk7CiAgICAgICAgfQogICAgICAgIHNlbGYub25yZWNvbm5lY3QuZGVsZXRlKHNtLmlkKTsKICAg");
    sb.append("ICAgfQogICAgfSk7CiAgICBzZWxmLm9ucmVjb25uZWN0LnNldChzbS5pZCwgc20pOwogICAgc20uX19y");
    sb.append("ZXRyeSA9IGZ1bmN0aW9uICgpIHsKICAgICAgc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHNtKTsKICAgIH07");
    sb.append("CiAgICByZXR1cm4gc207CiAgfQoKICBfX2lkKCkgewogICAgdGhpcy5uZXh0SWQrKzsKICAgIHJldHVy");
    sb.append("biB0aGlzLm5leHRJZDsKICB9CgogIC8qKltCRUdJTi1JTlZPS0VdKiovCiAgSW5pdFNldHVwQWNjb3Vu");
    sb.append("dChlbWFpbCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiaW5pdC9z");
    sb.append("ZXR1cC1hY2NvdW50IiwgImlkIjpwYXJJZCwgImVtYWlsIjogZW1haWx9CiAgICB9KTsKICB9CiAgSW5p");
    sb.append("dENvbnZlcnRHb29nbGVVc2VyKGFjY2Vzc1Rva2VuLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0g");
    sb.append("dGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRl");
    sb.append("X3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVx");
    sb.append("dWVzdDogeyJtZXRob2QiOiJpbml0L2NvbnZlcnQtZ29vZ2xlLXVzZXIiLCAiaWQiOnBhcklkLCAiYWNj");
    sb.append("ZXNzLXRva2VuIjogYWNjZXNzVG9rZW59CiAgICB9KTsKICB9CiAgSW5pdENvbXBsZXRlQWNjb3VudChl");
    sb.append("bWFpbCwgcmV2b2tlLCBjb2RlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZh");
    sb.append("ciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("aWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRo");
    sb.append("b2QiOiJpbml0L2NvbXBsZXRlLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbCwgInJl");
    sb.append("dm9rZSI6IHJldm9rZSwgImNvZGUiOiBjb2RlfQogICAgfSk7CiAgfQogIERlaW5pdChpZGVudGl0eSwg");
    sb.append("cmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQo");
    sb.append("KTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVz");
    sb.append("cG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZGVpbml0IiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgQWNjb3VudFNldFBhc3N3b3Jk");
    sb.append("KGlkZW50aXR5LCBwYXNzd29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoiYWNjb3VudC9zZXQtcGFzc3dvcmQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0");
    sb.append("eSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgQWNjb3VudEdldFBheW1lbnRQbGFu");
    sb.append("KGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhY2Nv");
    sb.append("dW50L2dldC1wYXltZW50LXBsYW4iLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAg");
    sb.append("IH0pOwogIH0KICBBY2NvdW50TG9naW4oZW1haWwsIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZh");
    sb.append("ciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwK");
    sb.append("ICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhY2NvdW50L2xvZ2luIiwgImlkIjpwYXJJZCwgImVtYWls");
    sb.append("IjogZW1haWwsICJwYXNzd29yZCI6IHBhc3N3b3JkfQogICAgfSk7CiAgfQogIEFjY291bnRTb2NpYWxM");
    sb.append("b2dpbihlbWFpbCwgcGFzc3dvcmQsIHNjb3BlcywgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVl");
    sb.append("c3Q6IHsibWV0aG9kIjoiYWNjb3VudC9zb2NpYWwtbG9naW4iLCAiaWQiOnBhcklkLCAiZW1haWwiOiBl");
    sb.append("bWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJzY29wZXMiOiBzY29wZXN9CiAgICB9KTsKICB9CiAg");
    sb.append("UHJvYmUoaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("InByb2JlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3Rh");
    sb.append("dHMocmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwg");
    sb.append("ImlkIjpwYXJJZH0KICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVz");
    sb.append("cG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklk");
    sb.append("LCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5");
    sb.append("LCBuYW1lLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAog");
    sb.append("ICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0");
    sb.append("eS9zdGFzaCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAg");
    sb.append("ICB9KTsKICB9CiAgU3BhY2VDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCB0ZW1wbGF0ZSwgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2UvY3JlYXRlIiwgImlkIjpwYXJJ");
    sb.append("ZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAidGVtcGxhdGUiOiB0ZW1wbGF0");
    sb.append("ZX0KICAgIH0pOwogIH0KICBTcGFjZURlbGV0ZShpZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2RlbGV0ZSIsICJpZCI6cGFySWQsICJp");
    sb.append("ZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxl");
    sb.append("Y3QoaWRlbnRpdHksIHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwog");
    sb.append("ICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6InNwYWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwg");
    sb.append("InNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5");
    sb.append("LCBtYXJrZXIsIGxpbWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoic3BhY2UvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2Vy");
    sb.append("IjogbWFya2VyLCAibGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRp");
    sb.append("dHksIGRvbWFpbiwgc3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBz");
    sb.append("ZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19l");
    sb.append("eGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAg");
    sb.append("ICAgcmVxdWVzdDogeyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5");
    sb.append("IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24s");
    sb.append("ICJkZXZpY2UtaW5mbyI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluUmVmbGVjdChpZGVu");
    sb.append("dGl0eSwgZG9tYWluLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJ");
    sb.append("ZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBh");
    sb.append("cklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJk");
    sb.append("b21haW4vcmVmbGVjdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjog");
    sb.append("ZG9tYWlufQogICAgfSk7CiAgfQogIERvbWFpbkdldFZhcGlkUHVibGljS2V5KGlkZW50aXR5LCBkb21h");
    sb.append("aW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9nZXQt");
    sb.append("dmFwaWQtcHVibGljLWtleSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWlu");
    sb.append("IjogZG9tYWlufQogICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlvbihzcGFjZSwga2V5LCBt");
    sb.append("ZXNzYWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAog");
    sb.append("ICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVu");
    sb.append("dC9hdXRob3JpemF0aW9uIiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJt");
    sb.append("ZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6YXRpb25Eb21haW4o");
    sb.append("ZG9tYWluLCBtZXNzYWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJkb2N1bWVudC9hdXRob3JpemF0aW9uLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21h");
    sb.append("aW4sICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZShzcGFj");
    sb.append("ZSwga2V5LCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlz");
    sb.append("OwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0");
    sb.append("OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZSIsICJpZCI6cGFySWQsICJzcGFjZSI6IHNwYWNl");
    sb.append("LCAia2V5Ijoga2V5LCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAg");
    sb.append("ICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemVEb21haW4oZG9tYWluLCB1c2VybmFtZSwgcGFzc3dv");
    sb.append("cmQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1");
    sb.append("dGhvcml6ZS1kb21haW4iLCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1");
    sb.append("c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3Jp");
    sb.append("emVXaXRoUmVzZXQoc3BhY2UsIGtleSwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJl");
    sb.append("c3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7");
    sb.append("CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3Bv");
    sb.append("bmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6");
    sb.append("ZS13aXRoLXJlc2V0IiwgImlkIjpwYXJJZCwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBrZXksICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19w");
    sb.append("YXNzd29yZH0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbldpdGhSZXNldChkb21h");
    sb.append("aW4sIHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBz");
    sb.append("ZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19l");
    sb.append("eGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAg");
    sb.append("ICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9hdXRob3JpemUtZG9tYWluLXdpdGgtcmVzZXQi");
    sb.append("LCAiaWQiOnBhcklkLCAiZG9tYWluIjogZG9tYWluLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3");
    sb.append("b3JkIjogcGFzc3dvcmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9jdW1lbnRDcmVhdGUoaWRlbnRpdHksIHNwYWNlLCBrZXksIGVudHJvcHksIGFyZywgcmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvY3JlYXRlIiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZW50");
    sb.append("cm9weSI6IGVudHJvcHksICJhcmciOiBhcmd9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRMaXN0KGlkZW50");
    sb.append("aXR5LCBzcGFjZSwgbWFya2VyLCBsaW1pdCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2xpc3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVu");
    sb.append("dGl0eSwgInNwYWNlIjogc3BhY2UsICJtYXJrZXIiOiBtYXJrZXIsICJsaW1pdCI6IGxpbWl0fQogICAg");
    sb.append("fSk7CiAgfQogIE1lc3NhZ2VEaXJlY3RTZW5kKGlkZW50aXR5LCBzcGFjZSwga2V5LCBjaGFubmVsLCBt");
    sb.append("ZXNzYWdlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAog");
    sb.append("ICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJtZXNzYWdl");
    sb.append("L2RpcmVjdC1zZW5kIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNw");
    sb.append("YWNlLCAia2V5Ijoga2V5LCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAg");
    sb.append("IH0pOwogIH0KICBNZXNzYWdlRGlyZWN0U2VuZE9uY2UoaWRlbnRpdHksIHNwYWNlLCBrZXksIGRlZHVw");
    sb.append("ZSwgY2hhbm5lbCwgbWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoibWVzc2FnZS9kaXJlY3Qtc2VuZC1vbmNlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRl");
    sb.append("bnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZGVkdXBlIjogZGVkdXBlLCAiY2hhbm5l");
    sb.append("bCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgIH0pOwogIH0KICBDb25uZWN0aW9uQ3Jl");
    sb.append("YXRlKGlkZW50aXR5LCBzcGFjZSwga2V5LCB2aWV3ZXJTdGF0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIg");
    sb.append("c2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rpb24vY3JlYXRlIiwgImlkIjpwYXJJZCwg");
    sb.append("ImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAidmlld2VyLXN0");
    sb.append("YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlvbihjaGFubmVsLCBtZXNzYWdlLCBz");
    sb.append("dWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxm");
    sb.append("Ll9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1");
    sb.append("YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kIiwg");
    sb.append("aWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgIm1lc3NhZ2Ui");
    sb.append("OiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBwYXNzd29yZDogZnVuY3Rpb24odXNl");
    sb.append("cm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBz");
    sb.append("dWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlk");
    sb.append("OiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVz");
    sb.append("dDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6");
    sb.append("cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNz");
    sb.append("d29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgc2VuZE9uY2U6IGZ1");
    sb.append("bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFy");
    sb.append("IHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAg");
    sb.append("aWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1");
    sb.append("ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlv");
    sb.append("biI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6IGRlZHVwZSwgIm1lc3NhZ2UiOiBt");
    sb.append("ZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5BdHRhY2g6IGZ1bmN0aW9uKHN1YlJl");
    sb.append("c3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19l");
    sb.append("eGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVz");
    sb.append("cG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2Nhbi1hdHRhY2gi");
    sb.append("LCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAg");
    sb.append("YXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHNpemUsIGRpZ2Vz");
    sb.append("dE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAg");
    sb.append("ICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9k");
    sb.append("OiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImFzc2V0");
    sb.append("LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJjb250ZW50LXR5cGUiOiBjb250ZW50");
    sb.append("VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2VzdE1kNSwgImRpZ2VzdC1zaGEzODQi");
    sb.append("OiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24o");
    sb.append("dmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAg");
    sb.append("IHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25u");
    sb.append("ZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidmlld2VyLXN0YXRl");
    sb.append("Ijogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGVuZDogZnVuY3Rpb24oc3Vi");
    sb.append("UmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5f");
    sb.append("X2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJS");
    sb.append("ZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vZW5kIiwgaWQ6");
    sb.append("IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0K");
    sb.append("ICBDb25uZWN0aW9uQ3JlYXRlVmlhRG9tYWluKGlkZW50aXR5LCBkb21haW4sIHZpZXdlclN0YXRlLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAg");
    sb.append("cmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiY29ubmVjdGlvbi9j");
    sb.append("cmVhdGUtdmlhLWRvbWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWlu");
    sb.append("IjogZG9tYWluLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9LAogICAgICBzZW5kOiBmdW5jdGlv");
    sb.append("bihjaGFubmVsLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAg");
    sb.append("ICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9k");
    sb.append("OiAiY29ubmVjdGlvbi9zZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVs");
    sb.append("IjogY2hhbm5lbCwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBw");
    sb.append("YXNzd29yZDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHN1YlJlc3Bv");
    sb.append("bmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9u");
    sb.append("ZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3Bhc3N3b3JkIiwgaWQ6");
    sb.append("IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQi");
    sb.append("OiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgICAgICB9KTsKICAgICAg");
    sb.append("fSwKICAgICAgc2VuZE9uY2U6IGZ1bmN0aW9uKGNoYW5uZWwsIGRlZHVwZSwgbWVzc2FnZSwgc3ViUmVz");
    sb.append("cG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNw");
    sb.append("b25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2VuZC1vbmNlIiwg");
    sb.append("aWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJjaGFubmVsIjogY2hhbm5lbCwgImRlZHVwZSI6");
    sb.append("IGRlZHVwZSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBjYW5B");
    sb.append("dHRhY2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAg");
    sb.append("ICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJj");
    sb.append("b25uZWN0aW9uL2Nhbi1hdHRhY2giLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAg");
    sb.append("ICB9KTsKICAgICAgfSwKICAgICAgYXR0YWNoOiBmdW5jdGlvbihhc3NldElkLCBmaWxlbmFtZSwgY29u");
    sb.append("dGVudFR5cGUsIHNpemUsIGRpZ2VzdE1kNSwgZGlnZXN0U2hhMzg0LCBzdWJSZXNwb25kZXIpIHsKICAg");
    sb.append("ICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAg");
    sb.append("ICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAg");
    sb.append("ICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9hdHRhY2giLCBpZDogc3ViSWQsICJjb25u");
    sb.append("ZWN0aW9uIjpwYXJJZCwgImFzc2V0LWlkIjogYXNzZXRJZCwgImZpbGVuYW1lIjogZmlsZW5hbWUsICJj");
    sb.append("b250ZW50LXR5cGUiOiBjb250ZW50VHlwZSwgInNpemUiOiBzaXplLCAiZGlnZXN0LW1kNSI6IGRpZ2Vz");
    sb.append("dE1kNSwgImRpZ2VzdC1zaGEzODQiOiBkaWdlc3RTaGEzODR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAg");
    sb.append("ICAgIHVwZGF0ZTogZnVuY3Rpb24odmlld2VyU3RhdGUsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZh");
    sb.append("ciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAg");
    sb.append("IGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVx");
    sb.append("dWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3VwZGF0ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24i");
    sb.append("OnBhcklkLCAidmlld2VyLXN0YXRlIjogdmlld2VyU3RhdGV9CiAgICAgICAgfSk7CiAgICAgIH0sCiAg");
    sb.append("ICAgIGVuZDogZnVuY3Rpb24oc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAg");
    sb.append("ICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDog");
    sb.append("ImNvbm5lY3Rpb24vZW5kIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7");
    sb.append("CiAgICAgIH0KICAgIH0pOwogIH0KICBEb2N1bWVudHNDcmVhdGVEZWR1cGUocmVzcG9uZGVyKSB7CiAg");
    sb.append("ICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBz");
    sb.append("ZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnRzL2NyZWF0ZS1kZWR1cGUiLCAiaWQi");
    sb.append("OnBhcklkfQogICAgfSk7CiAgfQogIERvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZCwgcmVzcG9u");
    sb.append("ZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAg");
    sb.append("IHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVy");
    sb.append("OiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnRzL2hhc2gtcGFzc3dv");
    sb.append("cmQiLCAiaWQiOnBhcklkLCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBCaWxsaW5n");
    sb.append("Q29ubmVjdGlvbkNyZWF0ZShpZGVudGl0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJl");
    sb.append("YW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1");
    sb.append("ZXN0OiB7Im1ldGhvZCI6ImJpbGxpbmctY29ubmVjdGlvbi9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRl");
    sb.append("bnRpdHkiOiBpZGVudGl0eX0sCiAgICAgIHNlbmQ6IGZ1bmN0aW9uKGNoYW5uZWwsIG1lc3NhZ2UsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQiLCBp");
    sb.append("ZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6");
    sb.append("IG1lc3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHBhc3N3b3JkOiBmdW5jdGlvbih1c2Vy");
    sb.append("bmFtZSwgcGFzc3dvcmQsIG5ld19wYXNzd29yZCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1");
    sb.append("YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6");
    sb.append("IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0");
    sb.append("OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vcGFzc3dvcmQiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpw");
    sb.append("YXJJZCwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3");
    sb.append("b3JkIjogbmV3X3Bhc3N3b3JkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBzZW5kT25jZTogZnVu");
    sb.append("Y3Rpb24oY2hhbm5lbCwgZGVkdXBlLCBtZXNzYWdlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIg");
    sb.append("c3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBp");
    sb.append("ZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVl");
    sb.append("c3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9zZW5kLW9uY2UiLCBpZDogc3ViSWQsICJjb25uZWN0aW9u");
    sb.append("IjpwYXJJZCwgImNoYW5uZWwiOiBjaGFubmVsLCAiZGVkdXBlIjogZGVkdXBlLCAibWVzc2FnZSI6IG1l");
    sb.append("c3NhZ2V9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGNhbkF0dGFjaDogZnVuY3Rpb24oc3ViUmVz");
    sb.append("cG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNw");
    sb.append("b25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vY2FuLWF0dGFjaCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBh");
    sb.append("dHRhY2g6IGZ1bmN0aW9uKGFzc2V0SWQsIGZpbGVuYW1lLCBjb250ZW50VHlwZSwgc2l6ZSwgZGlnZXN0");
    sb.append("TWQ1LCBkaWdlc3RTaGEzODQsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAg");
    sb.append("ICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6");
    sb.append("ICJjb25uZWN0aW9uL2F0dGFjaCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiYXNzZXQt");
    sb.append("aWQiOiBhc3NldElkLCAiZmlsZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRU");
    sb.append("eXBlLCAic2l6ZSI6IHNpemUsICJkaWdlc3QtbWQ1IjogZGlnZXN0TWQ1LCAiZGlnZXN0LXNoYTM4NCI6");
    sb.append("IGRpZ2VzdFNoYTM4NH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbih2");
    sb.append("aWV3ZXJTdGF0ZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7");
    sb.append("CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAg");
    sb.append("cmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5l");
    sb.append("Y3Rpb24vdXBkYXRlIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJ2aWV3ZXItc3RhdGUi");
    sb.append("OiB2aWV3ZXJTdGF0ZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbihzdWJS");
    sb.append("ZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJl");
    sb.append("c3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9lbmQiLCBpZDog");
    sb.append("c3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQog");
    sb.append("IEZlYXR1cmVTdW1tYXJpemVVcmwoaWRlbnRpdHksIHVybCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2Vs");
    sb.append("ZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhl");
    sb.append("Y3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAg");
    sb.append("IHJlcXVlc3Q6IHsibWV0aG9kIjoiZmVhdHVyZS9zdW1tYXJpemUtdXJsIiwgImlkIjpwYXJJZCwgImlk");
    sb.append("ZW50aXR5IjogaWRlbnRpdHksICJ1cmwiOiB1cmx9CiAgICB9KTsKICB9CiAgQXR0YWNobWVudFN0YXJ0");
    sb.append("KGlkZW50aXR5LCBzcGFjZSwga2V5LCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJl");
    sb.append("c3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdHRhY2htZW50L3N0YXJ0IiwgImlkIjpw");
    sb.append("YXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZmls");
    sb.append("ZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlfSwKICAgICAgYXBwZW5k");
    sb.append("OiBmdW5jdGlvbihjaHVua01kNSwgYmFzZTY0Qnl0ZXMsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZh");
    sb.append("ciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAg");
    sb.append("IGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVx");
    sb.append("dWVzdDogeyBtZXRob2Q6ICJhdHRhY2htZW50L2FwcGVuZCIsIGlkOiBzdWJJZCwgInVwbG9hZCI6cGFy");
    sb.append("SWQsICJjaHVuay1tZDUiOiBjaHVua01kNSwgImJhc2U2NC1ieXRlcyI6IGJhc2U2NEJ5dGVzfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9LAogICAgICBmaW5pc2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAg");
    sb.append("ICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAg");
    sb.append("ICAgcmVxdWVzdDogeyBtZXRob2Q6ICJhdHRhY2htZW50L2ZpbmlzaCIsIGlkOiBzdWJJZCwgInVwbG9h");
    sb.append("ZCI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KICBBdHRhY2htZW50U3RhcnRC");
    sb.append("eURvbWFpbihpZGVudGl0eSwgZG9tYWluLCBmaWxlbmFtZSwgY29udGVudFR5cGUsIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdHRhY2htZW50L3N0YXJ0LWJ5LWRv");
    sb.append("bWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAi");
    sb.append("ZmlsZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRlbnQtdHlwZSI6IGNvbnRlbnRUeXBlfSwKICAgICAgYXBw");
    sb.append("ZW5kOiBmdW5jdGlvbihjaHVua01kNSwgYmFzZTY0Qnl0ZXMsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJhdHRhY2htZW50L2FwcGVuZCIsIGlkOiBzdWJJZCwgInVwbG9hZCI6");
    sb.append("cGFySWQsICJjaHVuay1tZDUiOiBjaHVua01kNSwgImJhc2U2NC1ieXRlcyI6IGJhc2U2NEJ5dGVzfQog");
    sb.append("ICAgICAgIH0pOwogICAgICB9LAogICAgICBmaW5pc2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewog");
    sb.append("ICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAg");
    sb.append("ICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJhdHRhY2htZW50L2ZpbmlzaCIsIGlkOiBzdWJJZCwgInVw");
    sb.append("bG9hZCI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLyoqW0VORC1JTlZP");
    sb.append("S0VdKiovCn0KCnZhciBBZGFtYSA9IHsKICBQcm9kdWN0aW9uOiAiYXdzLXVzLWVhc3QtMi5hZGFtYS1w");
    sb.append("bGF0Zm9ybS5jb20iLAogIEJldGE6ICJiZXRhLmFkYW1hLXBsYXRmb3JtLmNvbSIsCiAgQ29ubmVjdGlv");
    sb.append("bjogV2ViU29ja2V0QWRhbWFDb25uZWN0aW9uCn07Cg==");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
