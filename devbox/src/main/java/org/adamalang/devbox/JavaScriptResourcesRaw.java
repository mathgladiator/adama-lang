/*
* Adama Platform and Language
* Copyright (C) 2021 - 2023 by Adama Platform Initiative, LLC
* 
* This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Affero General Public License as published
* by the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* 
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
* GNU Affero General Public License for more details.
* 
* You should have received a copy of the GNU Affero General Public License
* along with this program.  If not, see <https://www.gnu.org/licenses/>.
*/
package org.adamalang.devbox;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class JavaScriptResourcesRaw {
  public static final String TREE = new String(Base64.getDecoder().decode(make_tree()), StandardCharsets.UTF_8);
  private static String make_tree() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIGEgc2ltcGxpZmllZCBwdWIvc3ViIGRpZmZlcmVudGlhbCB0cmVlICovCmZ1bmN0aW9uIEFkYW1h");
    sb.append("VHJlZSgpIHsKICB2YXIgaWQgPSAwOwoKICB2YXIgcm9vdCA9IHt9OwogIHZhciBhbGxfc3Vic2NyaXB0");
    sb.append("aW9ucyA9IHt9OwogIHZhciBzZXR0bGVJZCA9IDA7CiAgdmFyIHNldHRsZW1lbnRzID0ge307CgogIC8v");
    sb.append("IGludm9rZSBhbGwgdGhlIHNldHRsZSBzdWJzY3JpcHRpb25zCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgdmFyIGF4ZSA9IFtdOwogICAgZm9yICh2YXIgayBpbiBzZXR0bGVtZW50cykgewogICAg");
    sb.append("ICB2YXIgcmVzdWx0ID0gc2V0dGxlbWVudHNba10oKTsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAg");
    sb.append("ICAvLyBpZiB0aGUgcmVzdWx0IGlzbid0IHRydWUsIHRoZW4gdW5zdWJzY3JpYmUKICAgICAgICBheGUu");
    sb.append("cHVzaChrKTsKICAgICAgfQogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIHNldHRsZW1lbnRzW2tdOwogICAgfQogIH07CgogIHZhciBjbG9uZV9v");
    sb.append("YmplY3QgPSBmdW5jdGlvbiAob2JqKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7CiAgICAg");
    sb.append("IHZhciBuZXh0ID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgb2JqLmxlbmd0aDsgaysrKSB7");
    sb.append("CiAgICAgICAgbmV4dC5wdXNoKGNsb25lX29iamVjdChvYmpba10pKTsKICAgICAgfQogICAgICByZXR1");
    sb.append("cm4gbmV4dDsKICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmopID09ICJvYmplY3QiKSB7CiAgICAgIHZh");
    sb.append("ciBuZXh0ID0ge307CiAgICAgIGZvciAoa2V5IGluIG9iaikgewogICAgICAgIGlmIChrZXlbMF0gPT0g");
    sb.append("IiMiIHx8IGtleSA9PSAiX19rZXkiIHx8IGtleSA9PSAiQG8iIHx8IGtleSA9PSAiQHMiKSBjb250aW51");
    sb.append("ZTsKICAgICAgICBuZXh0W2tleV0gPSBjbG9uZV9vYmplY3Qob2JqW2tleV0pOwogICAgICB9CiAgICAg");
    sb.append("IHJldHVybiBuZXh0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9OwoKICB0");
    sb.append("aGlzLm51a2UgPSBmdW5jdGlvbiAoKSB7CiAgICBhbGxfc3Vic2NyaXB0aW9ucyA9IHt9OwogIH07Cgog");
    sb.append("IHRoaXMuY29weSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBjbG9uZV9vYmplY3Qocm9vdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdHIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocm9v");
    sb.append("dCk7CiAgfTsKCiAgdGhpcy5yYXcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcm9vdDsKICB9OwoK");
    sb.append("ICAvLyBmaWx0ZXIgdGhlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIG9uZXMgdGhhdCBoYXZlIHRoZSBrZXkK");
    sb.append("ICB2YXIgc3ViID0gZnVuY3Rpb24gKHMsIGtleSkgewogICAgLy8gaWYgd2UgaGF2ZSBub3RoaW5nLCB0");
    sb.append("aGVuIHdlIHJldHVybiBub3RoaW5nCiAgICBpZiAocy5sZW5ndGggPT0gMCkgewogICAgICByZXR1cm4g");
    sb.append("czsKICAgIH0KICAgIC8vIG1ha2UgYSBuZXcgYXJyYXkKICAgIHZhciBuID0gW107CiAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IHMubGVuZ3RoOyBrKyspIHsgLy8gc3VjaCB0aGF0IGV2ZXJ5IGVsZW1lbnQKICAg");
    sb.append("ICAgaWYgKGtleSBpbiBzW2tdKSB7IC8vIHdoaWNoIGNvbnRhaW5zIHRoZSBrZXkKICAgICAgICBuLnB1");
    sb.append("c2goc1trXVtrZXldKTsgLy8gaXMgYWRkZWQgdG8gdGhlIG5ldyBhcnJheQogICAgICB9CiAgICB9CiAg");
    sb.append("ICByZXR1cm4gbjsKICB9OwoKICAvLyBmaXJlIGV2ZW50cyBhdCB0aGUgY3VycmVudCBzdWJzY3JpcHRp");
    sb.append("b24KICB2YXIgZmlyZSA9IGZ1bmN0aW9uIChzLCB2YWx1ZSwgZXZlbnRzKSB7CiAgICAvLyBmb3IgZWFj");
    sb.append("aCBzdWJzY3JpcHRpb24KICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgewogICAg");
    sb.append("ICB2YXIgdiA9IHNbal07CiAgICAgIC8vIGlmIGl0IGhhcyBldmVudHMKICAgICAgaWYgKCJAZSIgaW4g");
    sb.append("dikgewogICAgICAgIC8vIGZpcmUgZWFjaCBldmVudAogICAgICAgIHZhciBldnRzID0gdlsiQGUiXTsK");
    sb.append("ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV2dHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGV2");
    sb.append("ZW50cy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5mKHRoaXMudik7CiAgICAgICAg");
    sb.append("ICB9LmJpbmQoeyBmOiBldnRzW2tdLCB2OiB2YWx1ZSB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9");
    sb.append("CiAgfTsKCiAgdmFyIHdlYXZlID0gZnVuY3Rpb24gKHMsIGNhbGxiYWNrLCBrZXkpIHsKICAgIGlmIChB");
    sb.append("cnJheS5pc0FycmF5KGNhbGxiYWNrKSkgewogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNr");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgd2VhdmUocywgY2FsbGJhY2tba10sIGtleSk7CiAgICAgIH0K");
    sb.append("ICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxsYmFjaykgPT0gImZ1bmN0aW9uIikgewogICAgICBpZiAo");
    sb.append("IShrZXkgaW4gcykpIHsKICAgICAgICBzW2tleV0gPSB7fTsKICAgICAgfQogICAgICB2YXIgc2sgPSBz");
    sb.append("W2tleV07CiAgICAgIGlmICghKCJAZSIgaW4gc2spKSB7CiAgICAgICAgc2tbIkBlIl0gPSBbY2FsbGJh");
    sb.append("Y2tdOwogICAgICB9IGVsc2UgewogICAgICAgIHNrWyJAZSJdLnB1c2goY2FsbGJhY2spOwogICAgICB9");
    sb.append("CiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2FsbGJhY2spID09ICJvYmplY3QiKSB7CiAgICAgIGlmICgh");
    sb.append("KGtleSBpbiBzKSkgewogICAgICAgIHNba2V5XSA9IHt9OwogICAgICB9CiAgICAgIHZhciBzayA9IHNb");
    sb.append("a2V5XTsKICAgICAgZm9yICh2YXIgY2sgaW4gY2FsbGJhY2spIHsKICAgICAgICBpZiAoY2sgPT0gIkBl");
    sb.append("IikgewogICAgICAgICAgd2VhdmUocywgY2FsbGJhY2tbY2tdLCBrZXkpOwogICAgICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgICAgICB3ZWF2ZShzaywgY2FsbGJhY2tbY2tdLCBjayk7CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICB9CiAgfTsKCiAgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhZGRpdGlvbgogIHZhciBmaXJlX2FkZCA9");
    sb.append("IGZ1bmN0aW9uIChzLCBrZXkpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykg");
    sb.append("eyAvLyBmb3IgZWFjaCBzdWJzY3JpcHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIisi");
    sb.append("IGluIHYpIHsgLy8gaWYgdGhlIHN1YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gYWRkIG5ldyBv");
    sb.append("YmplY3RzCiAgICAgICAgdmFyIHZhID0gdlsiKyJdOwogICAgICAgIGlmICgiQGUiIGluIHZhKSB7IC8v");
    sb.append("IGlmIGFyZSBldmVudHMgYXNzb2NpYXRlZCB0byAnKycKICAgICAgICAgIHZhciBldmEgPSB2YVsiQGUi");
    sb.append("XTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZhLmxlbmd0aDsgaysrKSB7IC8vIGZvciBl");
    sb.append("YWNoICcrJyBhYmlsaXR5CiAgICAgICAgICAgIHdlYXZlKHYsIGV2YVtrXShrZXkpLCBrZXkpOwogICAg");
    sb.append("ICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIGZpcmUgYSBkZWxldGUgbWVz");
    sb.append("c2FnZSBmb3IgdGhlIGdpdmVuIGtleQogIHZhciBmaXJlX2RlbCA9IGZ1bmN0aW9uIChzLCBrZXkpIHsK");
    sb.append("ICAgIGZvciAodmFyIGogPSAwOyBqIDwgcy5sZW5ndGg7IGorKykgeyAvLyBmb3IgZWFjaCBzdWJzY3Jp");
    sb.append("cHRpb24KICAgICAgdmFyIHYgPSBzW2pdOwogICAgICBpZiAoIi0iIGluIHYpIHsgLy8gaWYgdGhlIHN1");
    sb.append("YnNjcmlwdGlvbiBoYXMgdGhlIGFiaWxpdHkgdG8gZGVsZXRlIHByaW9yIGtleXMKICAgICAgICB2YXIg");
    sb.append("dmEgPSB2WyItIl07CiAgICAgICAgaWYgKCJAZSIgaW4gdmEpIHsgLy8gaWYgYXJlIGV2ZW50cyBhc3Nv");
    sb.append("Y2lhdGVkIHRvICctJwogICAgICAgICAgdmFyIGV2YSA9IHZhWyJAZSJdOwogICAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBldmEubGVuZ3RoOyBrKyspIHsgLy8gZm9yIGVhY2ggJy0nIGFiaWxpdHkKICAg");
    sb.append("ICAgICAgICAgZXZhW2tdKGtleSk7IC8vIGV2YWx1YXRlIHRoZSAnLScKICAgICAgICAgIH0KICAgICAg");
    sb.append("ICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBhIGRlbGV0ZSBvZiBhIHRyZWUgaGFzIGJlZW4gZGV0");
    sb.append("ZWN0ZWQsIGxldCdzCiAgdmFyIGRlbCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyBpZiB0aGUgc3Vic2Ny");
    sb.append("aXB0aW9ucyBpcyBhbiBhcnJheSwgdGhlbiBkZWxldGUgYWxsIGNoaWxkcmVuCiAgICBpZiAoQXJyYXku");
    sb.append("aXNBcnJheShzKSkgewogICAgICB2YXIgbiA9IHMubGVuZ3RoOwogICAgICBmb3IgKHZhciBrID0gMDsg");
    sb.append("ayA8IG47IGsrKykgewogICAgICAgIGRlbChzW2tdKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBl");
    sb.append("b2YgKHMpID09ICJvYmplY3QiKSB7IC8vIG90aGVyd2lzZSwgaXRlcmF0ZSBvdmVyIHRoZSBrZXlzCiAg");
    sb.append("ICAgIGZvciAodmFyIGtleSBpbiBzKSB7CiAgICAgICAgaWYgKCEoa2V5ID09ICcrJyB8fCBrZXkgPT0g");
    sb.append("Jy0nKSkgewogICAgICAgICAgdmFyIGNoID0gc1trZXldOwogICAgICAgICAgaWYgKGtleSA9PSAiQGUi");
    sb.append("KSB7IC8vIHdlIGhhdmUgZXZlbnRzLCBzbyBsZXQncyBzZW5kIHRob3NlIGV2ZW50cy4uLgogICAgICAg");
    sb.append("ICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgY2hb");
    sb.append("al0obnVsbCk7IC8vIGEgbnVsbCB0byBpbmRpY2F0ZSBkZWxldGlvbgogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICB9IGVsc2UgeyAvLyByZWN1cnNlIGludG8gdGhlIGNoaWxkIGZpZWxkCiAgICAgICAgICAgIGRl");
    sb.append("bChjaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gZGVsZXRl");
    sb.append("IHRoZSBnaXZlbiBrZXkgd2l0aGluIHRoZSBzdWJzY3JpcHRpb24KICB2YXIgZGVsX2tleSA9IGZ1bmN0");
    sb.append("aW9uIChzLCBrZXkpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7IC8vIGlmIHdlIGhhdmUgYW4g");
    sb.append("YXJyYXkgb2Ygc3Vic2NyaXB0aW9ucywgdGhlbiBzaW1wbHkgcmVwZWF0CiAgICAgIHZhciBuID0gcy5s");
    sb.append("ZW5ndGg7CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgZGVsX2tleShz");
    sb.append("W2tdLCBrZXkpOyAvLyBmb3IgZWFjaCBlbGVtZW50CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9m");
    sb.append("IChzKSA9PSAib2JqZWN0IikgeyAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWJjcmlwdGlvbiBjYWxs");
    sb.append("YmFjawogICAgICBpZiAoa2V5IGluIHMpIHsgLy8gaWYgdGhlIGtleSBpcyBpbiB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIGNhbGxiYWNrCiAgICAgICAgZGVsZXRlIHNba2V5XTsgLy8gZGVsZXRlIGl0CiAgICAgIH0KICAg");
    sb.append("IH0KICB9OwoKICAvLyBtZXJnZSB0aGUgZ2l2ZW4gZGVsdGEgaW50byB0aGUgdHJlZSBhbmQgZmlyZSBz");
    sb.append("dWJzY3JpcHRpb25zIChzKQogIHZhciBtZXJnZSA9IGZ1bmN0aW9uICh0cmVlLCBkZWx0YSwgcywgZXZl");
    sb.append("bnRzLCBvcHRpbWFsKSB7CiAgICBpZiAob3B0aW1hbCAmJiBzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8v");
    sb.append("IG5vIHZhbHVlIGluIG1lcmdpbmcgYWdhaW5zdCBhIGZhdXggdHJlZSB3aXRob3V0IHN1YnNjcmlwdGlv");
    sb.append("bnMKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yICh2YXIga2V5IGluIGRlbHRhKSB7IC8vIGZvciBl");
    sb.append("YWNoIGJpdCBvZiBkYXRhIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgZUtleSA9ICIjIiArIGtleTsg");
    sb.append("Ly8gY29tcHV0ZSB0aGUgc2VjcmV0IGRhdGEgcGF0aAogICAgICB2YXIgcHJpb3IgPSB0cmVlW2tleV07");
    sb.append("IC8vIGZpbmQgdGhlIHByaW9yIHN0YXRlIHdpdGhpbiB0aGUgdHJlZQogICAgICB2YXIgbmV4dCA9IGRl");
    sb.append("bHRhW2tleV07IC8vIGJyaW5nIHRoZSBjaGFuZ2UgcHJlc2VudCBmb3IgdGhlIGN1cnJlbnQga2V5CiAg");
    sb.append("ICAgIGlmIChuZXh0ID09IG51bGwpIHsgLy8gdGhlIGl0ZW0gaXMgZ29pbmcgcG9vZgogICAgICAgIC8v");
    sb.append("IHRoZSBwcmlvciB2YWx1ZSBpcyBhbiBhcnJheSwgc28gd2UgbWF5IGhhdmUgc29tZSBzcGVjaWFsIHRo");
    sb.append("aW5ncyBhc3NvY2lhdGUgd2l0aCBpdAogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByaW9yKSkgeyAv");
    sb.append("LyBVTlRFU1QKICAgICAgICAgIGlmIChlS2V5IGluIHRyZWUpIHsKICAgICAgICAgICAgZGVsKHN1Yihz");
    sb.append("LCBlS2V5KSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdHJlZVtlS2V5XTsKICAgICAgICB9");
    sb.append("CiAgICAgICAgZGVsKHN1YihzLCBrZXkpKTsgLy8gaXNzdWUgYSBkZWxldGUgZm9yIGFsbCB0aGUgc3Vi");
    sb.append("c2NyaXB0aW9ucyBmb3IgdGhlIGtpZAogICAgICAgIGRlbGV0ZSB0cmVlW2tleV07IC8vIGRlbGV0ZSB0");
    sb.append("aGUgZGF0YSBpbiB0aGUgdHJlZQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0eXBlb2YgKG5leHQp");
    sb.append("ID09ICJvYmplY3QiICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7IC8vIGlmIHRoZSBkZWx0YSBpcyBh");
    sb.append("biBvYmplY3QKICAgICAgICAgIHZhciBhcnIgPSBBcnJheS5pc0FycmF5KHByaW9yKSB8fCAiQG8iIGlu");
    sb.append("IG5leHQgfHwgIkBzIiBpbiBuZXh0OyAvLyBkZXRlY3QgaWYgd2UgbmVlZCB0byB1c2UgYXJyYXkgbG9n");
    sb.append("aWMKICAgICAgICAgIGlmIChhcnIpIHsgLy8gd2UgaGF2ZSBkZXRlY3RlZCBhbiBhcnJheQogICAgICAg");
    sb.append("ICAgICBpZiAoIShrZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSB0cmVlIGhhcyBh");
    sb.append("biBlbXB0eSBhcnJheQogICAgICAgICAgICAgIHRyZWVba2V5XSA9IFtdOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICAgIGlmICghKGVLZXkgaW4gdHJlZSkpIHsgLy8gbGV0J3MgbWFrZSBzdXJlIHRoZSBzZWNy");
    sb.append("ZXQgZGF0YSBleGlzdHMgYXMgd2VsbAogICAgICAgICAgICAgIHRyZWVbZUtleV0gPSB7fTsKICAgICAg");
    sb.append("ICAgICAgICBpZiAoIkBvIiBpbiBuZXh0KSB7IC8vIGlmIHdlIGhhdmUgYSBidW5jaCBvZiBrZXlzLCB0");
    sb.append("aGVuIGxldCdzIG1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSB0aGF0IGZvciBtYWtlX2RlbHRhCiAgICAgICAg");
    sb.append("ICAgICAgICB0cmVlW2VLZXldWyJAbyJdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAg");
    sb.append("ICAgdHJlZVtlS2V5XS5fX2tleSA9IGtleTsgLy8gYW5ub3RhdGUgdGhlIG5ldyBpdGVtIHdpdGggdGhl");
    sb.append("IGdpdmVuIGtleQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBlQmFzZSA9IHRyZWVbZUtleV07");
    sb.append("IC8vIGdldCB0aGUgc2VjcmV0IChhbmQgcmVhbCkgZGF0YSBmb3IgdGhlIG9iamVjdCBpbiBxdWVzdGlv");
    sb.append("bgogICAgICAgICAgICB2YXIgZVN1YiA9IHN1YihzLCBrZXkpOyAvLyBzY29wZSB0aGUgc3Vic2NyaXB0");
    sb.append("aW9uIHRvIHRoZSBrZXkKICAgICAgICAgICAgdmFyIG9yZGVyaW5nID0gbnVsbDsgLy8gZGV0ZWN0aW9u");
    sb.append("IG9mIGlmIHdlIGhhdmUgQG8gb3JkZXJpbmcgdG8gcmVvcmRlciB0aGUgdmFsdWVzCiAgICAgICAgICAg");
    sb.append("IHZhciByZXNpemUgPSBudWxsOyAvLyBkZXRlY3Rpb24gb2YgYW4gYXJyYXkgd2l0aG91dCBfX2tleQog");
    sb.append("ICAgICAgICAgICB2YXIgZGVsYXkgPSB7fTsgLy8gd2UgZGVsYXkgYWxsIGV2ZW50cyBzdWNoIHRoYXQg");
    sb.append("dGhlIGFycmF5IGNhbiBiZSBidWlsdCBmb3IgaW5saW5lIG1ha2VfZGVsdGEgY2FsbHMgdG8gd29yawog");
    sb.append("ICAgICAgICAgICBmb3IgKHZhciBhS2V5IGluIG5leHQpIHsgLy8gZm9yIGVhY2ggZmllbGQgd2l0aGlu");
    sb.append("IHRoZSBkaWZmZXJlbmNlCiAgICAgICAgICAgICAgdmFyIHZhbCA9IG5leHRbYUtleV07CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKGFLZXkgPT0gIkBvIikgeyAvLyB0aGUgdmFsdWUgaXMgYSBuZXcgb3JkZXJpbmcgb2Yg");
    sb.append("dGhlIGFycmF5CiAgICAgICAgICAgICAgICBvcmRlcmluZyA9IHZhbDsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgaWYgKGFLZXkgPT0gIkBzIikgeyAvLyB0aGUgdmFsdWUgaXMgYSByZXNpemUgb2YgdGhlIGFycmF5");
    sb.append("CiAgICAgICAgICAgICAgICByZXNpemUgPSB2YWw7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwg");
    sb.append("PT0gbnVsbCkgeyAvLyBkZWxldGUgdGhlIGVsZW1lbnQKICAgICAgICAgICAgICAgIGlmIChhS2V5IGlu");
    sb.append("IGVCYXNlKSB7IC8vIGlmIGl0IGV4aXN0cyB3aXRoaW4gdGhlIHNlY3JldCBrZXkKICAgICAgICAgICAg");
    sb.append("ICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgIGRlbChz");
    sb.append("dWIoZVN1YiwgeCkpOyAvLyBpc3N1ZSBkZWxldGVzCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGVC");
    sb.append("YXNlW3hdOyAvLyBkZWxldGUgdGhlIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgZGVsX2tleShlU3Vi");
    sb.append("LCB4KTsgLy8gZGVsZXRlIHRoZSBrZXlzIGZyb20gdGhlIG9iamVjdAogICAgICAgICAgICAgICAgICAg");
    sb.append("IGZpcmVfZGVsKGVTdWIsIHgpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHdlIGhhdmUgZGF0YQogICAgICAgICAgICAgICAgaWYgKCEo");
    sb.append("YUtleSBpbiBlQmFzZSkpIHsgLy8gdGhlIGRhdGEgZGlkbid0IGV4aXN0LCBzbyBmaXJlIGFuIGFkZGl0");
    sb.append("aW9uIHRvIGV4dGVuZCB0aGUgc3Vic2NyaXB0aW9ucwogICAgICAgICAgICAgICAgICBmaXJlX2FkZChl");
    sb.append("U3ViLCBhS2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBuVmFsID0gbmV4");
    sb.append("dFthS2V5XTsgLy8gZ2V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKG5W");
    sb.append("YWwpID09ICJvYmplY3QiKSB7IC8vIGlmIHRoZSBuZXcgdmFsdWUgaXMgYW4gb2JqZWN0CiAgICAgICAg");
    sb.append("ICAgICAgICAgIGlmICghKGFLZXkgaW4gZUJhc2UpKSB7IC8vIHRoZW4gbWFrZSBzdXJlIHRoZSBuZXcg");
    sb.append("aXRlbSBpcyB3aXRoaW4gdGhlIHNlY3JldCB0cmVlCiAgICAgICAgICAgICAgICAgICAgZUJhc2VbYUtl");
    sb.append("eV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XS5fX2tleSA9IGFLZXk7CiAgICAg");
    sb.append("ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZGVsYXlbYUtleV0gPSBmdW5jdGlvbiAoeCkg");
    sb.append("ewogICAgICAgICAgICAgICAgICAgIG1lcmdlKGVCYXNlW3hdLCBuZXh0W3hdLCBzdWIoZVN1YiwgeCks");
    sb.append("IGV2ZW50cywgb3B0aW1hbCk7IC8vIHJlY3Vyc2U6IG1lcmdlIHRoZSBkaWZmZXJlbmNlIGludG8gdGhl");
    sb.append("IHNlY3JldCB0cmVlIGFuZCBwdWJsaXNoIHRvIGFsbCBlbGVtZW50IHN1YnNjcmlwdGlvbnMKICAgICAg");
    sb.append("ICAgICAgICAgICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAg");
    sb.append("ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIHNldCB0aGUg");
    sb.append("dmFsdWUgaW50byB0aGUgdHJlZQogICAgICAgICAgICAgICAgICBlQmFzZVthS2V5XSA9IG5WYWw7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIGRlbGF5W2FLZXldID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAg");
    sb.append("ICAgICBmaXJlKHN1YihlU3ViLCB4KSwgZUJhc2VbeF0sIGV2ZW50cyk7CiAgICAgICAgICAgICAgICAg");
    sb.append("IH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBhbmQgdGVsbCBldmVyeW9uZSB0");
    sb.append("aGUgbmV3IHZhbHVlIGZvciB0aGlzCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICAgIHZhciBiZWZvcmUgPSB0cmVlW2tleV07IC8vIHN0YXNoIGEgcG9pbnRlciB0byB0aGUgYXJyYXkK");
    sb.append("ICAgICAgICAgICAgdmFyIGRlbGF5T3JkZXIgPSBbXTsKCiAgICAgICAgICAgIGlmIChvcmRlcmluZyAh");
    sb.append("PSBudWxsKSB7IC8vIGFuIG9yZGVyaW5nIGNoYW5nZSBpcyBoYXBwZW5pbmcKICAgICAgICAgICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBbXTsgLy8gd2Ugd2lsbCByZWJ1aWxkIHRoZSBhcnJheSBoZXJlCiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOyAvLyBhbmQgcmVjb3JkIHRoZSBrZXlzIGhlcmUKICAgICAgICAgICAgICBm");
    sb.append("b3IgKHZhciBrID0gMDsgayA8IG9yZGVyaW5nLmxlbmd0aDsgaysrKSB7IC8vIGZvciBlYWNoIG9yZGVy");
    sb.append("aW5nIGluc3RydWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgaW5zdHIgPSBvcmRlcmluZ1trXTsKICAg");
    sb.append("ICAgICAgICAgICAgIHZhciB0eXBlX2luc3RyID0gdHlwZW9mIChpbnN0cik7CiAgICAgICAgICAgICAg");
    sb.append("ICBpZiAodHlwZV9pbnN0ciA9PSAic3RyaW5nIiB8fCB0eXBlX2luc3RyID09ICJudW1iZXIiKSB7IC8v");
    sb.append("IGlmIHRoZSBpbnN0cnVjdGlvbiByZWZlcnMgdG8gYW4gaXRlbQogICAgICAgICAgICAgICAgICBhZnRl");
    sb.append("ci5wdXNoKGVCYXNlW2luc3RyXSk7IC8vIHB1c2ggdGhlIGl0ZW0gaW50byB0aGUgbmV3IGFycmF5CiAg");
    sb.append("ICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgaW5zdHIpOyAvLyByZWNvcmQgdGhlIGtleSBvZiB0");
    sb.append("aGUgaXRlbQogICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlLCB0aGUgaW5zdHJ1Y3Rp");
    sb.append("b24gaXMgYSByYW5nZQogICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpbnN0clswXTsKICAgICAg");
    sb.append("ICAgICAgICAgICAgdmFyIGVuZCA9IGluc3RyWzFdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBq");
    sb.append("ID0gc3RhcnQ7IGogPD0gZW5kOyBqKyspIHsgLy8gaXRlcmF0ZSBvdmVyIHRoZSByYW5nZSBhbmQgY29w");
    sb.append("eQogICAgICAgICAgICAgICAgICAgIGlmIChiZWZvcmVbal0pIHsKICAgICAgICAgICAgICAgICAgICAg");
    sb.append("IGFmdGVyLnB1c2goYmVmb3JlW2pdKTsgLy8gdGhlIGl0ZW1zIGZyb20gdGhlIHByZXZpb3VzIGNvcHkK");
    sb.append("ICAgICAgICAgICAgICAgICAgICAgIG1zZy5wdXNoKGJlZm9yZVtqXS5fX2tleSk7IC8vIGFuZCBhbm5v");
    sb.append("dGF0ZSB0aGUga2V5cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAg");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWxheU9yZGVyLnB1c2go");
    sb.append("ZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZShzdWIoZVN1YiwgIn4iKSwgbXNnLCBldmVu");
    sb.append("dHMpOyAvLyB0ZWxsIHN1YnNjcmlwdGlvbnMgYWJvdXQgdGhlIG5ldyBvcmRlcmluZwogICAgICAgICAg");
    sb.append("ICAgIH0pOwogICAgICAgICAgICAgIHRyZWVba2V5XSA9IGFmdGVyOwogICAgICAgICAgICB9IGVsc2Ug");
    sb.append("aWYgKHJlc2l6ZSAhPSBudWxsKSB7IC8vIGFsdGVybmF0aXZlbHksIGFuIGFycmF5IHdpdGhvdXQga2V5");
    sb.append("cyBpcyBiZWluZyByZXNpemVkCiAgICAgICAgICAgICAgdmFyIGFmdGVyID0gW107CiAgICAgICAgICAg");
    sb.append("ICAgdmFyIG1zZyA9IFtdOwogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzaXplOyBr");
    sb.append("KyspIHsgLy8gd2UgcmVidWlsZCB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGFmdGVyW2tdID0gZUJh");
    sb.append("c2VbIiIgKyBrXTsKICAgICAgICAgICAgICAgIG1zZy5wdXNoKCIiICsgayk7CiAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgIGRlbGF5T3JkZXIucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAg");
    sb.append("ICBmaXJlKHN1YihlU3ViLCAifiIpLCBtc2csIGV2ZW50cyk7IC8vIHRlbGwgc3Vic2NyaXB0aW9ucyBh");
    sb.append("Ym91dCB0aGUgbmV3IG9yZGVyaW5nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdHJlZVtr");
    sb.append("ZXldID0gYWZ0ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChhS2V5IGluIGRlbGF5KSB7");
    sb.append("CiAgICAgICAgICAgICAgZGVsYXlbYUtleV0oYUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBkZWxheU9yZGVyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAg");
    sb.append("ZGVsYXlPcmRlcltrXSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmUoZVN1YiwgdHJlZVtr");
    sb.append("ZXldLCBldmVudHMpOyAvLyB0ZWxsIGV2ZXJ5b25lIGFib3V0IHRoZSBuZXcgdmFsdWUKICAgICAgICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgICAgICAgIGlmICghKGtleSBpbiB0cmVlKSB8fCB0eXBlb2YgKHRyZWVba2V5");
    sb.append("XSkgIT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICB0cmVlW2tleV0gPSB7fTsKICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICB2YXIgZSA9IHN1YihzLCBrZXkpOwogICAgICAgICAgICBtZXJnZSh0cmVlW2tl");
    sb.append("eV0sIG5leHQsIGUsIGV2ZW50cywgb3B0aW1hbCk7CiAgICAgICAgICAgIGZpcmUoZSwgdHJlZVtrZXld");
    sb.append("LCBldmVudHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7IC8vIG5vdCBhbiBvYmplY3QsIHNv");
    sb.append("IGl0IGlzIGEgdmFsdWUKICAgICAgICAgIHRyZWVba2V5XSA9IG5leHQ7IC8vIHN0YXNoIHRoZSBuZXcg");
    sb.append("dmFsdWUKICAgICAgICAgIGZpcmUoc3ViKHMsIGtleSksIG5leHQsIGV2ZW50cyk7IC8vIGFuZCB0ZWxs");
    sb.append("IGV2ZXJ5b25lIGFib3V0IGl0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmaXJlKHMsIHRyZWUs");
    sb.append("IGV2ZW50cyk7CiAgfTsKCiAgdmFyIGZpcmVfZXZlbnRzID0gZnVuY3Rpb24gKGV2ZW50cykgewogICAg");
    sb.append("Zm9yICh2YXIgayA9IDA7IGsgPCBldmVudHMubGVuZ3RoOyBrKyspIHsKICAgICAgZXZlbnRzW2tdKCk7");
    sb.append("CiAgICB9CiAgfTsKCiAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICB0aGlzLnVwZGF0");
    sb.append("ZXMgPSAwOwogIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICB0aGlzLnVwZGF0ZV9p");
    sb.append("bl9wcm9ncmVzcyA9IHRydWU7CiAgICB0aGlzLnVwZGF0ZXMrKzsKICAgIHZhciBhcnIgPSBbXTsgLy8g");
    sb.append("Y29udmVydCB0aGUgc3Vic2NyaXB0aW9ucyBpbnRvIGFuIGFycmF5CiAgICBmb3IgKHZhciBrIGluIGFs");
    sb.append("bF9zdWJzY3JpcHRpb25zKSB7CiAgICAgIGFyci5wdXNoKGFsbF9zdWJzY3JpcHRpb25zW2tdKTsKICAg");
    sb.append("IH0KICAgIHZhciBldmVudHMgPSBbXTsKICAgIG1lcmdlKHJvb3QsIGRlbHRhLCBhcnIsIGV2ZW50cywg");
    sb.append("ZmFsc2UpOyAvLyBleGVjdXRlIHRoZSBtZXJnZSBhbmQgZmlyZSBldmVudHMKICAgIGZpcmVfZXZlbnRz");
    sb.append("KGV2ZW50cyk7CiAgICB3aGlsZSAodGhpcy5zdWJzY3JpYmVfZGVsYXkubGVuZ3RoID4gMCkgewogICAg");
    sb.append("ICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlX2RlbGF5OwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eSA9IFtdOwogICAgICB2YXIgZmxhdCA9IFtdOwogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHku");
    sb.append("bGVuZ3RoOyBrKyspIHsKICAgICAgICBpZiAoIWNvcHlba10uYWJvcnRlZCkgewogICAgICAgICAgZmxh");
    sb.append("dC5wdXNoKGNvcHlba10uc3ViKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZXZlbnRzID0gW107CiAg");
    sb.append("ICAgIG1lcmdlKHt9LCBtYWtlX29wdGltYWxfZGVsdGEocm9vdCwgZmxhdCksIGZsYXQsIGV2ZW50cywg");
    sb.append("dHJ1ZSk7IC8vIGV4ZWN1dGUgdGhlIG1lcmdlIGFuZCBmaXJlIGV2ZW50cwogICAgICBmaXJlX2V2ZW50");
    sb.append("cyhldmVudHMpOwogICAgfQogICAgdGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKICAgIHNl");
    sb.append("dHRsZSgpOwogIH07CgogIC8vIGZpeCB0aGUgY2FsbGJhY2sgc3RydWN0dXJlIGZyb20gdGhlIHVzZXIn");
    sb.append("cyBoYXBweSBsYW5kIHRvIHRoZSByaWdvciBvZiB0aGUgZm9ybWF0IG5lZWRlZAogIHZhciB0cmFuc2Zv");
    sb.append("cm1fY2FsbGJhY2tfaW50b19zdWIgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHN1YikgewogICAgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoY2FsbGJhY2spKSB7IC8vIGlmIHRoZSBjYWxsYmFjayBpcyBhbiBhcnJheSwgdGhl");
    sb.append("biBmbGF0dGVuIHRoZSBhcnJheSBpbnRvIHRoZSBuZXcgb2JqZWN0CiAgICAgIGZvciAodmFyIGsgPSAw");
    sb.append("OyBrIDwgY2FsbGJhY2subGVuZ3RoOyBrKyspIHsKICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50");
    sb.append("b19zdWIoY2FsbGJhY2tba10sIHN1Yik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIChjYWxs");
    sb.append("YmFjaykgPT0gIm9iamVjdCIpIHsgLy8gb2gsIHRoZSBjYWxsYmFjayBpcyBhbiBvYmplY3QKICAgICAg");
    sb.append("Zm9yICh2YXIga2V5IGluIGNhbGxiYWNrKSB7IC8vIGl0ZXJhdGUgb3ZlciBlYWNoIGtleQogICAgICAg");
    sb.append("IGlmIChrZXkgPT0gIkBlIikgeyAvLyBmb3JjZSB0aGUgZnVuY3Rpb25zIHRvIG1lcmdlIHRvZ2V0aGVy");
    sb.append("CiAgICAgICAgICB0cmFuc2Zvcm1fY2FsbGJhY2tfaW50b19zdWIoY2FsbGJhY2tba2V5XSwgc3ViKTsK");
    sb.append("ICAgICAgICB9IGVsc2UgeyAvLyBub3JtYWwgZmxvdwogICAgICAgICAgaWYgKCEoa2V5IGluIHN1Yikp");
    sb.append("IHsgLy8gZGl2ZSBpbnRvIHRoZSBvYmplY3QgYW5kIG1ha2Ugc3VyZSB0aGUgc3Vic2NyaXB0aW9uIGhh");
    sb.append("cyB0aGUgZmllbGQKICAgICAgICAgICAgc3ViW2tleV0gPSB7fTsKICAgICAgICAgIH0KICAgICAgICAg");
    sb.append("IHRyYW5zZm9ybV9jYWxsYmFja19pbnRvX3N1YihjYWxsYmFja1trZXldLCBzdWJba2V5XSk7IC8vIHJl");
    sb.append("Y3Vyc2UgYW5kIHBhaXIgdGhlIGV2ZW50cyB0byB0aGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlb2YgKGNhbGxiYWNrKSA9PSAiZnVuY3Rpb24iKSB7IC8v");
    sb.append("IGl0J3MgYSBmdW5jdGlvbgogICAgICBpZiAoISgiQGUiIGluIHN1YikpIHsgLy8gbGV0J3MgZW5zdXJl");
    sb.append("IHRoZXJlIGlzIGFuIGV2ZW50IGxpc3QKICAgICAgICBzdWJbIkBlIl0gPSBbY2FsbGJhY2tdOwogICAg");
    sb.append("ICB9IGVsc2UgeyAvLyBvdGhlcndpc2UsIGp1c3QgYWRkIGl0CiAgICAgICAgc3ViWyJAZSJdLnB1c2go");
    sb.append("Y2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfTsKCiAgLy8gY29udmVydCB0aGUgdHJlZSB0byBhIGRl");
    sb.append("bHRhOyB0aGlzIHRyZWUgaXMgYXNzdW1lZCB0byBoYXZlIGJlZW4gbWVyZ2VkIGFscmVhZHkKICB2YXIg");
    sb.append("bWFrZV9kZWx0YSA9IGZ1bmN0aW9uIChzdCkgewogICAgdmFyIGRlbHRhID0ge307IC8vIHRoZSBkZWx0");
    sb.append("YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsgaW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhp");
    sb.append("biB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19r");
    sb.append("ZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQogICAgICB2YXIgdiA9IHN0W2tdOwogICAgICBpZiAo");
    sb.append("KCIjIiArIGspIGluIHN0KSB7IC8vIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkKICAgICAgICB2YXIgcHYg");
    sb.append("PSBzdFsnIycgKyBrXTsKICAgICAgICB2YXIgZCA9IHt9OwogICAgICAgIGlmICgiQG8iIGluIHB2KSB7");
    sb.append("IC8vIGFuZCB3ZSBoYXZlIGEgc3BlY2lmaWMgb3JkZXJpbmcgdG8gbWVtb2l6ZQogICAgICAgICAgdmFy");
    sb.append("IG8gPSBbXTsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyAvLyBj");
    sb.append("b3B5IHRoZSBlbGVtZW50cyBmcm9tIHRoZSBhcnJheQogICAgICAgICAgICB2YXIgdmogPSB2W2pdOwog");
    sb.append("ICAgICAgICAgICBpZiAodmopIHsKICAgICAgICAgICAgICBkW3ZqLl9fa2V5XSA9IG1ha2VfZGVsdGEo");
    sb.append("dmopOyAvLyB1c2luZyB0aGUgX19rZXkgZW1iZWRkZWQgaW4gdGhlIG9iamVjdAogICAgICAgICAgICAg");
    sb.append("IG8ucHVzaCh2W2pdLl9fa2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZFsi");
    sb.append("QG8iXSA9IG87CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlOyByZWNvcmQgdGhlIHNpemUgYXMg");
    sb.append("d2UgcmVjdXJzZQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CiAg");
    sb.append("ICAgICAgICAgIGRbIiIgKyBqXSA9IG1ha2VfZGVsdGEocHZbal0pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("ICAgZFsiQHMiXSA9IHYubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkZWx0YVtrXSA9IGQ7CiAgICAg");
    sb.append("IH0gZWxzZSBpZiAodHlwZW9mICh2KSA9PSAib2JqZWN0IikgeyAvLyBpdCdzIGp1c3QgYW4gb2JqZWN0");
    sb.append("LCBzbyByZWN1cnNlIGRpcmVjdGx5CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHsKICAgICAg");
    sb.append("ICAgIHZhciBkID0ge307CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKysp");
    sb.append("IHsKICAgICAgICAgICAgZFsiIiArIGpdID0gbWFrZV9kZWx0YSh2W2pdKTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGRbIkBzIl0gPSB2Lmxlbmd0aDsKICAgICAgICAgIGRlbHRhW2tdID0gZDsKICAgICAgICB9");
    sb.append("IGVsc2UgewogICAgICAgICAgZGVsdGFba10gPSBtYWtlX2RlbHRhKHYpOwogICAgICAgIH0KICAgICAg");
    sb.append("fSBlbHNlIHsgLy8gZmluYWxseSwgaXQgaXMgYSB2YWx1ZSBzbyBqdXN0IHNldCBpdAogICAgICAgIGRl");
    sb.append("bHRhW2tdID0gdjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbHRhOwogIH07CiAgdGhpcy5NYWtl");
    sb.append("RGVsdGEgPSBtYWtlX2RlbHRhOwoKICB2YXIgbWFrZV9vcHRpbWFsX2RlbHRhID0gZnVuY3Rpb24oc3Qs");
    sb.append("IHN1YnMpIHsKICAgIHZhciBmaWx0ZXIgPSB7fTsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc3Vicy5s");
    sb.append("ZW5ndGg7IGsrKykgewogICAgICB2YXIgcyA9IHN1YnNba107CiAgICAgIGlmICh0eXBlb2YocykgPT0g");
    sb.append("ImZ1bmN0aW9uIikgewogICAgICAgIC8vIGZhbGxiYWNrIHdoZW4gdGhlIGhpZ2ggbGV2ZWwgaXMgYSBm");
    sb.append("dW5jdGlvbiAod2UgbmVlZCBpdCBhbGwhKQogICAgICAgIHJldHVybiBtYWtlX2RlbHRhKHN0KTsKICAg");
    sb.append("ICAgfSBlbHNlIGlmICh0eXBlb2YocykgPT0gIm9iamVjdCIpIHsKICAgICAgICBmb3IgKHZhciBqIGlu");
    sb.append("IHMpIHsKICAgICAgICAgIGZpbHRlcltqXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAg");
    sb.append("ICB2YXIgbmV3X3N0ID0ge307IC8vIHRoZSBkZWx0YSB0byBjb25zdHJ1Y3QKICAgIGZvciAodmFyIGsg");
    sb.append("aW4gc3QpIHsgLy8gZm9yIGVhY2gga2V5IHdpdGhpbiB0aGUgb2JqZWN0CiAgICAgIGlmIChrWzBdID09");
    sb.append("ICIjIiB8fCBrID09ICJAbyIgfHwgayA9PSAiX19rZXkiKSBjb250aW51ZTsgLy8gc2tpcCB0aGVzZQog");
    sb.append("ICAgICBpZiAoayBpbiBmaWx0ZXIpIHsKICAgICAgICBuZXdfc3Rba10gPSBzdFtrXTsKICAgICAgICBp");
    sb.append("ZiAoKCIjIiArIGspIGluIHN0KSB7CiAgICAgICAgICBuZXdfc3RbIiMiICsga10gPSBzdFsiIyIgKyBr");
    sb.append("XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYWtlX2RlbHRhKG5ld19zdCk7CiAg");
    sb.append("fTsKCiAgdGhpcy5zdWJzY3JpYmVfZGVsYXkgPSBbXTsKCiAgLy8gYHN1YnNjcmliZWAgdGhlIGdpdmVu");
    sb.append("IHN0cnVjdHVyYWwgY2FsbGJhY2sKICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykg");
    sb.append("ewogICAgdmFyIHN1YiA9IHt9OwogICAgdHJhbnNmb3JtX2NhbGxiYWNrX2ludG9fc3ViKGNhbGxiYWNr");
    sb.append("LCBzdWIpOyAgLy8gdHJhbnNmb3JtIHRoZSBjYWxsYmFjayBpbnRvIGEgc2FmZSBjYWxsYmFjawogICAg");
    sb.append("dmFyIFMgPSAiIiArIGlkKys7IC8vIGNyZWF0ZSBhbiBpZCBmb3IgdGhlIHN1YnNjcmlwdGlvbgogICAg");
    sb.append("YWxsX3N1YnNjcmlwdGlvbnNbU10gPSBzdWI7IC8vIHJlY29yZCB0aGUgc3Vic2NyaXB0aW9uCiAgICBp");
    sb.append("ZiAodGhpcy51cGRhdGVfaW5fcHJvZ3Jlc3MpIHsKICAgICAgdmFyIHNtID0ge307CiAgICAgIHNtLnN1");
    sb.append("YiA9IHN1YjsKICAgICAgc20uYWJvcnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnN1YnNjcmliZV9kZWxh");
    sb.append("eS5wdXNoKHNtKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHNtLmFib3J0ZWQgPSB0");
    sb.append("cnVlOwogICAgICAgIGRlbGV0ZSBhbGxfc3Vic2NyaXB0aW9uc1tTXTsKICAgICAgfTsKICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgIHZhciBkZWx0YSA9IG1ha2Vfb3B0aW1hbF9kZWx0YShyb290LCBbc3ViXSk7CiAgICAg");
    sb.append("IHZhciBldmVudHMgPSBbXTsKICAgICAgbWVyZ2Uoe30sIGRlbHRhLCBbc3ViXSwgZXZlbnRzLCB0cnVl");
    sb.append("KTsgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2sgbm93IG9uIGEgY2FsbGJhY2sgb2YgYWxsIGRhdGEgdG8g");
    sb.append("ZmlyZSBldmVudHMgYW5kIGZpbGwgdGhlIHN1YnNjcmlwdGlvbiBvYmplY3QKICAgICAgZmlyZV9ldmVu");
    sb.append("dHMoZXZlbnRzKTsKICAgICAgaWYgKHRoaXMudXBkYXRlcyA+IDApIHsKICAgICAgICBzZXR0bGUoKTsK");
    sb.append("ICAgICAgfQogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyAvLyByZXR1cm4gYSBtZXRob2QgdG8gdW5z");
    sb.append("dWJzY3JpYmUKICAgICAgICBkZWxldGUgYWxsX3N1YnNjcmlwdGlvbnNbU107CiAgICAgIH07CiAgICB9");
    sb.append("CiAgfTsKCiAgdGhpcy5hZGRfb25fc2V0dGxlID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHZhciBp");
    sb.append("ZCA9IHNldHRsZUlkKys7CiAgICBzZXR0bGVtZW50c1tpZF0gPSBjYWxsYmFjazsKICB9Owp9");
    return sb.toString();
  }
  public static final String DEBUGGER = new String(Base64.getDecoder().decode(make_debugger()), StandardCharsets.UTF_8);
  private static String make_debugger() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoqIFRoZSBBbWF6aW5nIEludGVybmFsIERlYnVnZ2VyIGZvciBSeEhUTUwgQ29ubmVjdGlvbiAqLwpB");
    sb.append("ZGFtYS5EZWJ1Z2dlciA9IChmdW5jdGlvbigpIHsKICB2YXIgc2VsZiA9IHt9OwogIHNlbGYuc2hvd24g");
    sb.append("PSBmYWxzZTsKICB2YXIgY29ubmVjdGlvbnMgPSB7fTsKICB2YXIgY3VycmVudCA9IG51bGw7CgogIC8q");
    sb.append("KiBIZWxwZXIgfCByZW1vdmUgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCAqLwogIHZhciBudWtl");
    sb.append("ID0gZnVuY3Rpb24gKHBhcmVudCkgewogICAgdmFyIGxhc3QgPSBwYXJlbnQubGFzdENoaWxkOwogICAg");
    sb.append("d2hpbGUgKGxhc3QpIHsKICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGxhc3QpOwogICAgICBsYXN0ID0g");
    sb.append("cGFyZW50Lmxhc3RDaGlsZDsKICAgIH0KICB9OwoKICAvKiogSGVscGVyIHwgY3JlYXRlIGEgc2ltcGxl");
    sb.append("IGVsZW1lbnQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudCBhcyB0aGUgaW5uZXJIVE1MICovCiAgdmFyIHNp");
    sb.append("bXBsZSA9IGZ1bmN0aW9uKHRhZywgY29udGVudCkgewogICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KHRhZyk7CiAgICBkLmlubmVySFRNTCA9IGNvbnRlbnQ7CiAgICByZXR1cm4gZDsKICB9Cgog");
    sb.append("IHZhciBidXR0b25TdHlsZSA9ICJiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjogMXB4IHNvbGlkICNmMDA7");
    sb.append("IGNvbG9yOiNmZmY7IHBhZGRpbmc6M3B4OyBtYXJnaW46M3B4OyBib3JkZXItcmFkaXVzOiAzcHg7IjsK");
    sb.append("ICB2YXIgaW5wdXRTdHlsZSA9ICJiYWNrZ3JvdW5kOiNlZWU7IGNvbG9yOiMwMDA7IjsKICB2YXIgcGx1");
    sb.append("c1NWRyA9ICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9u");
    sb.append("ZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCIjNzdk");
    sb.append("NjU2XCIgc3R5bGU9XCJ3aWR0aDoxOHB4OyBoZWlnaHQ6MThweDtcIj48cGF0aCBzdHJva2UtbGluZWNh");
    sb.append("cD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTEyIDl2Nm0zLTNIOW0xMiAw");
    sb.append("YTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+PC9zdmc+IjsKICB2YXIgbWludXNTVkcgPSAi");
    sb.append("PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3");
    sb.append("Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiI2YwMFwiIHN0eWxl");
    sb.append("PVwid2lkdGg6MThweDsgaGVpZ2h0OjE4cHg7XCI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwi");
    sb.append("IHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk0xNSAxMkg5bTEyIDBhOSA5IDAgMTEtMTggMCA5");
    sb.append("IDkgMCAwMTE4IDB6XCIgLz48L3N2Zz4iOwoKICAvLyB3ZSBhcmUgZ29pbmcgdG8gY3JlYXRlIGEgZG9j");
    sb.append("dW1lbnQKICB2YXIgdmlld0pzb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICB2YXIg");
    sb.append("dmlld0NoYW5uZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgogIHZpZXdKc29uLnN0");
    sb.append("eWxlID0gImZvbnQtZmFtaWx5OiBcIkpldEJyYWlucyBNb25vXCIsIHNvdXJjZS1jb2RlLXBybywgTWVu");
    sb.append("bG8sIE1vbmFjbywgQ29uc29sYXMsIG1vbm9zcGFjZTsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2Zm");
    sb.append("ZjsgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsgd2lkdGg6MTAwJSIKICB2aWV3Q2hhbm5lbHMuc3R5bGUg");
    sb.append("PSAiZm9udC1mYW1pbHk6IFwiSmV0QnJhaW5zIE1vbm9cIiwgc291cmNlLWNvZGUtcHJvLCBNZW5sbywg");
    sb.append("TW9uYWNvLCBDb25zb2xhcywgbW9ub3NwYWNlOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjZmZmOyBi");
    sb.append("YWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB3aWR0aDoxMDAlIgoKICAvKiogUmVmbGVjdGlvbiB8IGdpdmVu");
    sb.append("IGEgcmVmbGVjdGVkIHR5cGUsIGV4dHJhY3QgdGhlIHN0cnVjdHVyZSB0eXBlICoqLwogIHZhciBleHRy");
    sb.append("YWN0U3RydWN0dXJlVHlwZSA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVzKSB7CiAgICBpZiAodHlwZS5uYXR1");
    sb.append("cmUgPT0gInJlYWN0aXZlX3JlZiIgfHwgdHlwZS5uYXR1cmUgPT0gIm5hdGl2ZV9yZWYiKSB7CiAgICAg");
    sb.append("IHJldHVybiBleHRyYWN0U3RydWN0dXJlVHlwZSh0eXBlc1t0eXBlLnJlZl0sIHR5cGVzKTsKICAgIH0K");
    sb.append("ICAgIGlmICh0eXBlLm5hdHVyZSA9PSAicmVhY3RpdmVfcmVjb3JkIiB8fCB0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIHJldHVybiB0eXBlOwogICAgfQogICAgcmV0dXJuIG51bGw7");
    sb.append("CiAgfQoKICAvKiogVHJlZVZpZXcgfCBHaXZlbiBhIHR5cGUgKGFuZCBhIHR5cGUgZm9yZXN0KSBjcmVh");
    sb.append("dGUgYSAnbmFtZWQnIGRvbSBlbGVtZW50CiAgICogIGFsb25nIHdpdGggYW4gdXBkYXRlIGRlbHRhLiBU");
    sb.append("aGUgdXBkYXRlIGRlbHRhIGlzIGEgZnVuY3Rpb25hbCAob3Igc3RydWN0dXJhbCBmdW5jdGlvbmFsKQog");
    sb.append("ICAqICBjbG9zdXJlIHRoYXQgd2lsbCB1cGRhdGUgdGhlIGRvbSBlbGVtZW50IHN1Y2ggdGhhdCBpdCBj");
    sb.append("YW4gYmUgYXR0YWNoZWQgdG8gYW4gQWRhbWEgVHJlZSAqLwogIHZhciBjb252ZXJ0VHlwZVRvRG9tRGVs");
    sb.append("dGEgPSBmdW5jdGlvbih0eXBlLCB0eXBlcykgewogICAgaWYgKHR5cGUubmF0dXJlID09ICJyZWFjdGl2");
    sb.append("ZV9yZWYiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfcmVmIikgewogICAgICAvLyBnbyB0byB0aGUg");
    sb.append("Zm9yZXN0IGFuZCB0dXJuIHRoZSByZWYgaW50byBhIG1hbmlmZXN0ZWQgdHlwZQogICAgICByZXR1cm4g");
    sb.append("Y29udmVydFR5cGVUb0RvbURlbHRhKHR5cGVzW3R5cGUucmVmXSwgdHlwZXMpOwogICAgfQogICAgaWYg");
    sb.append("KHR5cGUubmF0dXJlID09ICJuYXRpdmVfbWF5YmUiIHx8IHR5cGUubmF0dXJlID09ICJyZWFjdGl2ZV9t");
    sb.append("YXliZSIpIHsKICAgICAgLy8gYSBtYXliZSBpcyBqdXN0IGEgd3JhcHBlciBhcm91bmQgYW5vdGhlciB0");
    sb.append("eXBlIHRoYXQgY2FuIG51bGwgb3V0CiAgICAgIHZhciBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJzcGFuIik7CiAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEodHlwZS50eXBl");
    sb.append("LCB0eXBlcyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOiBkb20sCiAgICAgICAgbmFtZTogIm1h");
    sb.append("eWJlJmx0OyIgKyByZXN1bHQubmFtZSArICImZ3Q7IiwKICAgICAgICB1cGRhdGU6IFtyZXN1bHQudXBk");
    sb.append("YXRlLCBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgbnVrZShkb20pOwogICAgICAgICAgaWYgKHZh");
    sb.append("bHVlID09IG51bGwpIHsKICAgICAgICAgICAgZG9tLmlubmVySFRNTCA9ICI8aT5udWxsPC9pPiI7CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb20uYXBwZW5kKHJlc3VsdC5kb20pOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0gIm5hdGl2");
    sb.append("ZV9saXN0IiB8fCB0eXBlLm5hdHVyZSA9PSAibmF0aXZlX2FycmF5IikgewogICAgICAvLyB0aGlzIGlz");
    sb.append("IHRoZSBtb3N0IGNvbXBsZXggdHlwZSBhcyBpdCByZXF1aXJlcyBhIGRpZmZlcmVudGlhbCBzdHJ1Y3R1");
    sb.append("cmUuCgogICAgICAvLyB3ZSBjcmVhdGUgYSBkdW1teSB0byBnZXQgdGhlIG5hbWUgb2YgdGhlIHR5cGUK");
    sb.append("ICAgICAgdmFyIGR1bW15ID0gY29udmVydFR5cGVUb0RvbURlbHRhKHR5cGUudHlwZSwgdHlwZXMpOwoK");
    sb.append("ICAgICAgLy8gc28sIHdlIGhhdmUgdHdvIGNvbnNpZGVyYXRpb25zLiBGaXJzdCwgaXMgdGhpcyBhIGxp");
    sb.append("c3Qgb2Ygc3RydWN0dXJlcyBPUiBhIGxpc3Qgb2YgdmFsdWVzLgogICAgICB2YXIgcmVjb3JkVHlwZSA9");
    sb.append("IGV4dHJhY3RTdHJ1Y3R1cmVUeXBlKHR5cGUudHlwZSwgdHlwZXMpOwogICAgICBpZiAocmVjb3JkVHlw");
    sb.append("ZSAhPSBudWxsKSB7CiAgICAgICAgLy8gaXQgaXMgYSBsaXN0IG9mIHN0cnVjdHVyZXMsIHNvIHdlIHdh");
    sb.append("bnQgdG8gY3JlYXRlIGEgbmljZSBsb29raW5nIHRhYmxlIHdpdGggcGFnaW5hdGlvbiEKICAgICAgICB2");
    sb.append("YXIgdGFibGVDb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB2");
    sb.append("YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICB0YWJs");
    sb.append("ZUNvbnRyb2xzLmFwcGVuZChzaG93aGlkZSk7CgogICAgICAgIHZhciB0YWJsZUhvbGRlciA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgICAgdGFibGVDb250cm9scy5hcHBlbmQodGFi");
    sb.append("bGVIb2xkZXIpOwogICAgICAgIHZhciB0YWJsZUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQo");
    sb.append("InRoZWFkIik7CiAgICAgICAgdGFibGVIb2xkZXIuYXBwZW5kKHRhYmxlSGVhZGVyKTsKICAgICAgICB2");
    sb.append("YXIgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5hcHBlbmQoaGVhZGVyUm93KTsKICAgICAgICB2YXIgY29sb3JTdHlsZSA9ICJib3JkZXI6IDFw");
    sb.append("eCBzb2xpZCAjM2I1NGRhOyI7CiAgICAgICAgZm9yICh2YXIgZmllbGROYW1lIGluIHJlY29yZFR5cGUu");
    sb.append("ZmllbGRzKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSByZWNvcmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVd");
    sb.append("OwogICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBmaWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgIGNv");
    sb.append("bnRpbnVlOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21E");
    sb.append("ZWx0YShmaWVsZC50eXBlLCB0eXBlcyk7CiAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJ0ZCIpOwogICAgICAgICAgdGQuaW5uZXJIVE1MID0gcmVzdWx0Lm5hbWUgKyAiICIgKyBm");
    sb.append("aWVsZE5hbWU7CiAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kKHRkKTsKICAgICAgICAgIHRkLnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZSArICJwYWRkaW5nLWxlZnQ6IDAuNWVtOyBwYWRkaW5nLXJpZ2h0OiAwLjVlbTsi");
    sb.append("CiAgICAgICAgfQogICAgICAgIHRhYmxlSG9sZGVyLnN0eWxlID0gY29sb3JTdHlsZSArICJwYWRkaW5n");
    sb.append("OiAwLjVlbTsgbWFyZ2luOjAuNWVtOyBkaXNwbGF5Om5vbmUiCiAgICAgICAgaGVhZGVyUm93LnN0eWxl");
    sb.append("ID0gY29sb3JTdHlsZTsKICAgICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVu");
    sb.append("dCgidGJvZHkiKTsKICAgICAgICB0YWJsZUhvbGRlci5hcHBlbmQodGFibGVCb2R5KTsKICAgICAgICB2");
    sb.append("YXIgcm93c0J5S2V5ID0ge307CiAgICAgICAgdmFyIHBhZ2luZyA9IHsKICAgICAgICAgIHNob3duOmZh");
    sb.append("bHNlLAogICAgICAgICAgb3JkZXI6W10sCiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgcGFnZV9s");
    sb.append("aW1pdDogMTAsCiAgICAgICAgfTsKICAgICAgICB2YXIgY29udHJvbGxlciA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgICAgICB0YWJsZUNvbnRyb2xzLmFwcGVuZChjb250cm9sbGVyKTsK");
    sb.append("ICAgICAgICBwYWdpbmcucmVmb3JtID1mdW5jdGlvbigpIHsKICAgICAgICAgIG51a2UodGFibGVCb2R5");
    sb.append("KTsKICAgICAgICAgIHZhciBzdGFydCA9IE1hdGgubWluKHRoaXMucGFnZSAqIHRoaXMucGFnZV9saW1p");
    sb.append("dCwgdGhpcy5vcmRlci5sZW5ndGggLSB0aGlzLnBhZ2VfbGltaXQpOwogICAgICAgICAgZm9yICh2YXIg");
    sb.append("YXQgPSBzdGFydDsgYXQgPCBzdGFydCArIHBhZ2luZy5wYWdlX2xpbWl0OyBhdCsrKSB7CiAgICAgICAg");
    sb.append("ICAgIHZhciByb3cgPSByb3dzQnlLZXlbcGFnaW5nLm9yZGVyW2F0XV07CiAgICAgICAgICAgIGlmIChy");
    sb.append("b3cpIHsKICAgICAgICAgICAgICB0YWJsZUJvZHkuYXBwZW5kKHJvdyk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIG51a2UoY29udHJvbGxlcik7CiAgICAgICAgICBpZiAodGhpcy5zaG93");
    sb.append("bikgewogICAgICAgICAgICB2YXIgcGFnZXMgPSB0aGlzLm9yZGVyLmxlbmd0aCAvIHRoaXMucGFnZV9s");
    sb.append("aW1pdDsKICAgICAgICAgICAgaWYgKHBhZ2VzID4gMSkgewogICAgICAgICAgICAgIGZvciAodmFyIGsg");
    sb.append("PSAwOyBrIDwgcGFnZXM7IGsrKykgewogICAgICAgICAgICAgICAgdmFyIGdvdG9QYWdlID0gZG9jdW1l");
    sb.append("bnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CiAgICAgICAgICAgICAgICBnb3RvUGFnZS5zdHlsZSA9");
    sb.append("IGJ1dHRvblN0eWxlOwogICAgICAgICAgICAgICAgZ290b1BhZ2UuaW5uZXJIVE1MID0gIltQRzoiICsg");
    sb.append("ayArICJdIjsKICAgICAgICAgICAgICAgIGdvdG9QYWdlLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgICAgICAgICAgIHRoaXMucGFnaW5nLnBhZ2UgPSB0aGlzLnBnOwogICAgICAgICAgICAgICAg");
    sb.append("ICB0aGlzLnBhZ2luZy5yZWZvcm0oKTsKICAgICAgICAgICAgICAgIH0uYmluZCh7cGFnaW5nOiB0aGlz");
    sb.append("LCBwZzoga30pOwogICAgICAgICAgICAgICAgY29udHJvbGxlci5hcHBlbmQoZ290b1BhZ2UpOwogICAg");
    sb.append("ICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2hvd2hpZGUuaW5u");
    sb.append("ZXJIVE1MID0gdGhpcy5zaG93biA/IG1pbnVzU1ZHIDogcGx1c1NWRzsKICAgICAgICAgIHNob3doaWRl");
    sb.append("Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5zaG93biA9ICF0aGlzLnNob3du");
    sb.append("OwogICAgICAgICAgICBpZiAodGhpcy5zaG93bikgewogICAgICAgICAgICAgIHRhYmxlSG9sZGVyLnN0");
    sb.append("eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWJsZUhv");
    sb.append("bGRlci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu");
    sb.append("cmVmb3JtKCk7CiAgICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgICAgfS5iaW5kKHBhZ2luZyk7CgoK");
    sb.append("ICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9tOiB0YWJsZUNvbnRyb2xzLAogICAgICAgICAgbmFt");
    sb.append("ZTogImxpc3QmbHQ7IiArIGR1bW15Lm5hbWUgKyAiJmd0OyIsCiAgICAgICAgICB1cGRhdGU6IHsKICAg");
    sb.append("ICAgICAgICAgJysnOiBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3Vt");
    sb.append("ZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CiAgICAgICAgICAgICAgcm93c0J5S2V5W2tleV0gPSByb3c7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIGRlbHRhID0ge307CiAgICAgICAgICAgICAgZm9yICh2YXIgZmllbGRO");
    sb.append("YW1lIGluIHJlY29yZFR5cGUuZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSByZWNv");
    sb.append("cmRUeXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgICAgICAgICAgaWYgKCJwcml2YXRlIiA9PSBm");
    sb.append("aWVsZC5wcml2YWN5KSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg");
    sb.append("fQogICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUeXBlVG9Eb21EZWx0YShmaWVsZC50");
    sb.append("eXBlLCB0eXBlcyk7CiAgICAgICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50");
    sb.append("KCJ0ZCIpOwogICAgICAgICAgICAgICAgdGQuc3R5bGUgPSBjb2xvclN0eWxlICsgInBhZGRpbmc6IDAu");
    sb.append("MjVlbTsgdGV4dC1hbGlnbjp0b3AiOwogICAgICAgICAgICAgICAgdGQuYXBwZW5kKHJlc3VsdC5kb20p");
    sb.append("OwogICAgICAgICAgICAgICAgcm93LmFwcGVuZCh0ZCk7CiAgICAgICAgICAgICAgICBkZWx0YVtmaWVs");
    sb.append("ZE5hbWVdID0gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJu");
    sb.append("IGRlbHRhOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnLSc6IGZ1bmN0aW9uIChrZXkpIHsKICAg");
    sb.append("ICAgICAgICAgICB2YXIgZG9tID0gcm93c0J5S2V5W2tleV07CiAgICAgICAgICAgICAgdGFibGVCb2R5");
    sb.append("LnJlbW92ZShkb20pOwogICAgICAgICAgICAgIGRlbGV0ZSByb3dzQnlLZXlba2V5XTsKICAgICAgICAg");
    sb.append("ICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgICBpZiAo");
    sb.append("b3JkZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFnaW5nLm9yZGVyID0gb3JkZXI7CiAgICAg");
    sb.append("ICAgICAgICAgICBwYWdpbmcucmVmb3JtKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vdCBhIHJlY29yZCwg");
    sb.append("c28gd2UgdXNlIGEgc2ltcGxlIGxpc3QKICAgICAgICB2YXIgbGlzdEhvbGRlciA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBkb21CeUtleSA9IHt9OwogICAgICAgIHJldHVy");
    sb.append("biB7CiAgICAgICAgICBkb206IGxpc3RIb2xkZXIsCiAgICAgICAgICBuYW1lOiAibGlzdDwiICsgZHVt");
    sb.append("bXkubmFtZSArICI+IiwKICAgICAgICAgIHVwZGF0ZTogewogICAgICAgICAgICAnKyc6IGZ1bmN0aW9u");
    sb.append("IChrZXkpIHsKICAgICAgICAgICAgICB2YXIgaXRlbUhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1l");
    sb.append("bnQoInNwYW4iKTsKICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29udmVydFR5cGVUb0RvbURlbHRh");
    sb.append("KHR5cGUudHlwZSwgdHlwZXMpOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHJlc3VsdC5k");
    sb.append("b20pOwogICAgICAgICAgICAgIGl0ZW1Ib2xkZXIuYXBwZW5kKHNpbXBsZSgic3BhbiIsICIsICIpKTsK");
    sb.append("ICAgICAgICAgICAgICBkb21CeUtleVtrZXldID0gaXRlbUhvbGRlcjsKICAgICAgICAgICAgICByZXR1");
    sb.append("cm4gcmVzdWx0LnVwZGF0ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJy0nOiBmdW5jdGlvbiAo");
    sb.append("a2V5KSB7CiAgICAgICAgICAgICAgdmFyIGRvbSA9IGRvbUJ5S2V5W2tleV07CiAgICAgICAgICAgICAg");
    sb.append("bGlzdEhvbGRlci5yZW1vdmUoZG9tKTsKICAgICAgICAgICAgICBkZWxldGUgZG9tQnlLZXlba2V5XTsK");
    sb.append("ICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ34nOiBmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgIH0KICAgIGlmICh0eXBlLm5hdHVy");
    sb.append("ZSA9PSAicmVhY3RpdmVfdmFsdWUiIHx8IHR5cGUubmF0dXJlID09ICJuYXRpdmVfdmFsdWUiKSB7CiAg");
    sb.append("ICAgIC8vIGl0J3MganVzdCBkYXRhLCBzbyBjcmVhdGUgYSBzaW5nbGUgbm9kZSB0byBkcmF3IGl0CiAg");
    sb.append("ICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICBpdGVtLmlu");
    sb.append("bmVySFRNTCA9ICJudWxsIjsKICAgICAgaXRlbS5zdHlsZSA9ICJjb2xvcjogIzc3YTVmZjsiOwogICAg");
    sb.append("ICB2YXIgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZTsgfTsK");
    sb.append("ICAgICAgaWYgKHR5cGUudHlwZSA9PSAic3RyaW5nIikgewogICAgICAgIGl0ZW0uc3R5bGUgPSAiY29s");
    sb.append("b3I6ICM3N2Q2NTYiOwogICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW0uaW5uZXJI");
    sb.append("VE1MID0gIlwiIiArIHZhbHVlICsgIlwiIjsgfTsKICAgICAgfSBlbHNlIGlmICh0eXBlLnR5cGUgPT0g");
    sb.append("InByaW5jaXBhbCIpIHsKICAgICAgICBpdGVtLnN0eWxlID0gImNvbG9yOiAjQkE4M0ZGOyI7CiAgICAg");
    sb.append("ICAgdXBkYXRlID0gZnVuY3Rpb24odmFsdWUpIHsgaXRlbS5pbm5lckhUTUwgPSB2YWx1ZSAhPSBudWxs");
    sb.append("ID8gKHZhbHVlLmFnZW50ICsgIkAiICsgdmFsdWUuYXV0aG9yaXR5KSA6ICJudWxsIjsgfTsKICAgICAg");
    sb.append("fSBlbHNlIGlmICh0eXBlLnR5cGUgPT0gImJvb2wiKSB7CiAgICAgICAgaXRlbS5zdHlsZSA9ICJjb2xv");
    sb.append("cjogI0U4M0IzQjsiOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZG9tOml0ZW0sCiAgICAg");
    sb.append("ICAgbmFtZTogdHlwZS50eXBlLAogICAgICAgIHVwZGF0ZTogdXBkYXRlCiAgICAgIH07CiAgICB9CiAg");
    sb.append("ICBpZiAodHlwZS5uYXR1cmUgPT0gInJlYWN0aXZlX3JlY29yZCIgfHwgdHlwZS5uYXR1cmUgPT0gIm5h");
    sb.append("dGl2ZV9tZXNzYWdlIikgewogICAgICAvLyBpdCdzIGEgc3RydWN0dXJlLCBzbyBsZXQncyBjcmVhdGUg");
    sb.append("YSByZWNvcmQgdGhhdCBjYW4gc2hvdy9oaWRlCiAgICAgIHZhciBvYmpfaG9sZGVyID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICB2YXIgc2hvd2hpZGUgPSBkb2N1bWVudC5jcmVhdGVF");
    sb.append("bGVtZW50KCJidXR0b24iKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoc2hvd2hpZGUpOwogICAgICBv");
    sb.append("YmpfaG9sZGVyLnNob3dHcm91cCA9IHR5cGUubmFtZSAhPSAiUm9vdCI7CgogICAgICB2YXIgZ3JvdXAg");
    sb.append("PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgb2JqX2hvbGRlci5hcHBlbmQoZ3Jv");
    sb.append("dXApOwogICAgICBncm91cC5hcHBlbmQoc2ltcGxlKCJkaXYiLCAieyIpKTsKICAgICAgdmFyIGNoaWxk");
    sb.append("cmVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKICAgICAgZ3JvdXAuYXBwZW5kKGNoaWxk");
    sb.append("cmVuKTsKICAgICAgZ3JvdXAuYXBwZW5kKHNpbXBsZSgiZGl2IiwgIn0iKSk7CiAgICAgIGdyb3VwLnN0");
    sb.append("eWxlID0gInBhZGRpbmctbGVmdDoxMHB4IjsKICAgICAgY2hpbGRyZW4uc3R5bGUgPSAicGFkZGluZy1s");
    sb.append("ZWZ0OjEwcHg7IjsKICAgICAgc2hvd2hpZGUub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgIG9i");
    sb.append("al9ob2xkZXIuc2hvd0dyb3VwID0gISBvYmpfaG9sZGVyLnNob3dHcm91cDsKICAgICAgICBpZiAob2Jq");
    sb.append("X2hvbGRlci5zaG93R3JvdXApIHsKICAgICAgICAgIGdyb3VwLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAg");
    sb.append("ICAgICAgIHNob3doaWRlLmlubmVySFRNTCA9IG1pbnVzU1ZHOwogICAgICAgIH0gZWxzZSB7CiAgICAg");
    sb.append("ICAgICBncm91cC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgc2hvd2hpZGUuaW5uZXJI");
    sb.append("VE1MID0gcGx1c1NWRzsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNob3doaWRlLm9uY2xpY2soKTsK");
    sb.append("CiAgICAgIHZhciBkZWx0YSA9IHt9OwogICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gdHlwZS5maWVs");
    sb.append("ZHMpIHsKICAgICAgICB2YXIgZmllbGQgPSB0eXBlLmZpZWxkc1tmaWVsZE5hbWVdOwogICAgICAgIGlm");
    sb.append("ICgicHJpdmF0ZSIgPT0gZmllbGQucHJpdmFjeSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAg");
    sb.append("fQogICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEoZmllbGQudHlwZSwgdHlw");
    sb.append("ZXMpOwogICAgICAgIHZhciBmaWVsZERvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7CiAg");
    sb.append("ICAgICAgZmllbGREb20uYXBwZW5kKHNpbXBsZSgic3BhbiIsICBmaWVsZC5wcml2YWN5ICsgIiAiICsg");
    sb.append("cmVzdWx0Lm5hbWUgKyAiICIgKyBmaWVsZE5hbWUgKyAiID0gIikpOwogICAgICAgIGZpZWxkRG9tLmFw");
    sb.append("cGVuZChyZXN1bHQuZG9tKTsKICAgICAgICBjaGlsZHJlbi5hcHBlbmQoZmllbGREb20pOwogICAgICAg");
    sb.append("IGRlbHRhW2ZpZWxkTmFtZV0gPSByZXN1bHQudXBkYXRlOwogICAgICB9CiAgICAgIHJldHVybiB7CiAg");
    sb.append("ICAgICAgZG9tOiBvYmpfaG9sZGVyLAogICAgICAgIG5hbWU6IHR5cGUubmFtZSwKICAgICAgICB1cGRh");
    sb.append("dGU6ZGVsdGEKICAgICAgfTsKICAgIH0KICAgIHZhciB1bmtub3duID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICB1bmtub3duLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KHR5cGUpOwog");
    sb.append("ICAgcmV0dXJuIHtkb206IHVua25vd24sIHVwZGF0ZTogZnVuY3Rpb24oKSB7fX07CiAgfTsKCiAgc2Vs");
    sb.append("Zi5mb3JtSWRHZW4gPSAwOwogIHZhciBuZXh0Rm9ybUlkID0gZnVuY3Rpb24oKSB7CiAgICBzZWxmLmZv");
    sb.append("cm1JZEdlbisrOwogICAgcmV0dXJuIHNlbGYuZm9ybUlkR2VuOwogIH07CiAgdmFyIGZpbGxPdXRGb3Jt");
    sb.append("Rm9yVHlwZSA9IGZ1bmN0aW9uKGRvbSwgbmFtZSwgdHlwZSwgdHlwZXMpIHsKICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX3JlZiIpIHsKICAgICAgZmlsbE91dEZvcm1Gb3JUeXBlKGRvbSwgbmFtZSwg");
    sb.append("dHlwZXNbdHlwZS5yZWZdLCB0eXBlcyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5h");
    sb.append("dHVyZSA9PSAibmF0aXZlX21lc3NhZ2UiKSB7CiAgICAgIGZvciAodmFyIGZpZWxkIGluIHR5cGUuZmll");
    sb.append("bGRzKSB7CiAgICAgICAgdmFyIGZpZWxkVHlwZSA9IHR5cGUuZmllbGRzW2ZpZWxkXS50eXBlOwogICAg");
    sb.append("ICAgIHZhciBmaWVsZEhvbGRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAg");
    sb.append("IGZpbGxPdXRGb3JtRm9yVHlwZShmaWVsZEhvbGRlciwgbmFtZSA9PSAiIiA/IGZpZWxkIDogKG5hbWUg");
    sb.append("KyAiLiIgKyBmaWVsZCksIGZpZWxkVHlwZSwgdHlwZXMpOwogICAgICAgIGRvbS5hcHBlbmQoZmllbGRI");
    sb.append("b2xkZXIpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAi");
    sb.append("bmF0aXZlX2FycmF5IikgewogICAgICAvLyBUT0RPCiAgICB9CiAgICBpZiAodHlwZS5uYXR1cmUgPT0g");
    sb.append("Im5hdGl2ZV9tYXliZSIpIHsKICAgICAgdmFyIG1heWJlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxl");
    sb.append("bWVudCgiZGl2Iik7CiAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVs");
    sb.append("Iik7CiAgICAgIGxhYmVsLmlubmVySFRNTCA9ICJlbmFibGUgIiArIG5hbWU7CiAgICAgIHZhciBjaGVj");
    sb.append("a2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CiAgICAgIGNoZWNrYm94LnR5cGUg");
    sb.append("PSAiY2hlY2tib3giOwogICAgICBjaGVja2JveC5pZCA9IG5leHRGb3JtSWQoKTsKICAgICAgY2hlY2ti");
    sb.append("b3gubmFtZSA9ICIiOwogICAgICBsYWJlbC5odG1sRm9yID0gY2hlY2tib3guaWQ7CiAgICAgIHZhciBt");
    sb.append("YXliZVZhbHVlUmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBtYXli");
    sb.append("ZVZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGZpbGxPdXRGb3JtRm9y");
    sb.append("VHlwZShtYXliZVZhbHVlLCBuYW1lLCB0eXBlLnR5cGUsIHR5cGVzKTsKICAgICAgbWF5YmVIb2xkZXIu");
    sb.append("YXBwZW5kKGxhYmVsKTsKICAgICAgbWF5YmVIb2xkZXIuYXBwZW5kKGNoZWNrYm94KTsKICAgICAgbWF5");
    sb.append("YmVIb2xkZXIuYXBwZW5kKG1heWJlVmFsdWVSZWYpOwogICAgICBkb20uYXBwZW5kKG1heWJlSG9sZGVy");
    sb.append("KTsKICAgICAgY2hlY2tib3gub25jaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBudWtlKG1heWJl");
    sb.append("VmFsdWVSZWYpOwogICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7CiAgICAgICAgICBtYXliZVZh");
    sb.append("bHVlUmVmLmFwcGVuZChtYXliZVZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybjsK");
    sb.append("ICAgIH0KICAgIGlmICh0eXBlLm5hdHVyZSA9PSAibmF0aXZlX3ZhbHVlIikgewogICAgICB2YXIgbGFi");
    sb.append("ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwogICAgICB2YXIgaW5wdXQgPSBkb2N1");
    sb.append("bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoKICAgICAgaW5wdXQuaWQgPSAiZGVidWdnZXJfZm9y");
    sb.append("bV9pZF8iICsgbmV4dEZvcm1JZCgpOwogICAgICBsYWJlbC5pbm5lckhUTUwgPSBuYW1lOwogICAgICBp");
    sb.append("bnB1dC5uYW1lID0gbmFtZTsKICAgICAgaW5wdXQuc3R5bGUgPSBpbnB1dFN0eWxlOwogICAgICBpbnB1");
    sb.append("dC50eXBlID0gInRleHQiOwogICAgICBsYWJlbC5mb3JIdG1sID0gaW5wdXQuaWQ7CiAgICAgIGRvbS5h");
    sb.append("cHBlbmQobGFiZWwpOwogICAgICBkb20uYXBwZW5kKGlucHV0KTsKICAgICAgcmV0dXJuOwogICAgfQog");
    sb.append("ICAgZG9tLmlubmVySFRNTCA9IG5hbWUgKyAiLS0+IiArIEpTT04uc3RyaW5naWZ5KHR5cGUpOwogIH07");
    sb.append("CgogIHZhciBtYWtlQ2hhbm5lbERlYnVnZ2VyID0gZnVuY3Rpb24oY2hhbm5lbHMsIHR5cGVzLCBjb25u");
    sb.append("ZWN0aW9uKSB7CiAgICB2YXIgc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3Qi");
    sb.append("KTsKICAgIHNlbGVjdG9yLnN0eWxlID0gImJhY2tncm91bmQ6ICMzMzM7IGNvbG9yOiNmZmY7IjsKICAg");
    sb.append("IHZpZXdDaGFubmVscy5hcHBlbmQoc2VsZWN0b3IpOwogICAgdmFyIGZvcm1Ib2xkZXIgPSBkb2N1bWVu");
    sb.append("dC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHZpZXdDaGFubmVscy5hcHBlbmQoZm9ybUhvbGRlcik7");
    sb.append("CiAgICB2YXIgY2hvb3NlID0gZnVuY3Rpb24oY2hhbm5lbCkgewogICAgICBudWtlKGZvcm1Ib2xkZXIp");
    sb.append("OwogICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKICAgICAgZm9y");
    sb.append("bUhvbGRlci5hcHBlbmQoZm9ybSk7CiAgICAgIHZhciB0eXBlID0gdHlwZXNbY2hhbm5lbHNbY2hhbm5l");
    sb.append("bF1dOwogICAgICBmaWxsT3V0Rm9ybUZvclR5cGUoZm9ybSwgIiIsIHR5cGUsIHR5cGVzKTsKCiAgICAg");
    sb.append("IHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgYnV0dG9u");
    sb.append("LnN0eWxlID0gYnV0dG9uU3R5bGU7CiAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQp");
    sb.append("IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBtZXNzYWdlID0gUnhI");
    sb.append("VE1MLkJ1aWxkRm9ybU9iamVjdChmb3JtKTsKICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlNlbmRp");
    sb.append("bmciOwogICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwgKyAiOiIgKyBKU09OLnN0cmluZ2lmeShtZXNz");
    sb.append("YWdlKSk7CiAgICAgICAgY29ubmVjdGlvbi5zZW5kKGNoYW5uZWwsIG1lc3NhZ2UsIHsKICAgICAgICAg");
    sb.append("IHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIlN1Y2Nl");
    sb.append("c3MhIFNlbmQgQW5vdGhlciEiOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gIltGYWlsZWQ6IiArIHJlYXNv");
    sb.append("biArICJdLCBUcnkgQWdhaW4iOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICB9OwogICAgICBi");
    sb.append("dXR0b24uaW5uZXJIVE1MID0gIlNlbmQiOwogICAgICBmb3JtLmFwcGVuZChidXR0b24pOwogICAgICAv");
    sb.append("LyBCdWlsZEZvcm1PYmplY3QKICAgIH07CiAgICB2YXIgZmlyc3QgPSBudWxsOwogICAgdmFyIGNoYW5u");
    sb.append("ZWxzU29ydGVkID0gW107CiAgICBmb3IgKHZhciBjaCBpbiBjaGFubmVscykgewogICAgICBjaGFubmVs");
    sb.append("c1NvcnRlZC5wdXNoKGNoKTsKICAgIH0KICAgIGNoYW5uZWxzU29ydGVkLnNvcnQoKTsKICAgIGZvciAo");
    sb.append("dmFyIGsgaW4gY2hhbm5lbHNTb3J0ZWQpIHsKICAgICAgdmFyIGNoID0gY2hhbm5lbHNTb3J0ZWRba107");
    sb.append("CiAgICAgIGlmIChmaXJzdCA9PSBudWxsKSB7CiAgICAgICAgZmlyc3QgPSBjaDsKICAgICAgfQogICAg");
    sb.append("ICB2YXIgbXNnVHlwZSA9IGNoYW5uZWxzW2NoXTsKICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQuaW5uZXJIVE1MID0gY2ggKyAiIDogIiArIG1zZ1R5");
    sb.append("cGU7CiAgICAgIG9wdC5sYWJlbCA9IGNoICsgIiA6ICIgKyBtc2dUeXBlOwogICAgICBvcHQudmFsdWUg");
    sb.append("PSBjaDsKICAgICAgc2VsZWN0b3IuYXBwZW5kKG9wdCk7CiAgICAgIHNlbGVjdG9yLm9uY2hhbmdlID0g");
    sb.append("ZnVuY3Rpb24oKSB7CiAgICAgICAgY2hvb3NlKHNlbGVjdG9yLnZhbHVlKTsKICAgICAgfTsKICAgIH0K");
    sb.append("CiAgICBpZiAoZmlyc3QgIT0gbnVsbCkgewogICAgICBjaG9vc2UoZmlyc3QpOwogICAgfQogIH07Cgog");
    sb.append("IHZhciByZW5kZXIgPSBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgY28gPSBjb25uZWN0aW9uc1tuYW1l");
    sb.append("XTsKICAgIGlmIChjby5yZW5kZXJlZCA9PSBjby5ib3VuZCkgewogICAgICByZXR1cm47CiAgICB9CiAg");
    sb.append("ICBjby5yZW5kZXJlZCA9IGNvLmJvdW5kOwogICAgY28uZGVidWdfdHJlZS5udWtlKCk7CiAgICBudWtl");
    sb.append("KHZpZXdKc29uKTsKICAgIG51a2Uodmlld0NoYW5uZWxzKTsKCiAgICB2YXIgaGFuZGxlciA9IHsKICAg");
    sb.append("ICAgc3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIGRhdGEg");
    sb.append("aW5zcGVjdG9yIHRhYgogICAgICAgIHZhciByZWZsZWN0aW9uID0gcGF5bG9hZC5yZWZsZWN0aW9uOwog");
    sb.append("ICAgICAgIHZhciByZXN1bHQgPSBjb252ZXJ0VHlwZVRvRG9tRGVsdGEocmVmbGVjdGlvbi50eXBlc1si");
    sb.append("X19Sb290Il0sIHJlZmxlY3Rpb24udHlwZXMpOwogICAgICAgIHZpZXdKc29uLmFwcGVuZChyZXN1bHQu");
    sb.append("ZG9tKTsKICAgICAgICBjby5kZWJ1Z190cmVlLnN1YnNjcmliZShyZXN1bHQudXBkYXRlKTsKICAgICAg");
    sb.append("ICAvLyBoYW5kbGUgdGhlIGNoYW5uZWxzIHRhYgogICAgICAgIG1ha2VDaGFubmVsRGVidWdnZXIocmVm");
    sb.append("bGVjdGlvbi5jaGFubmVscywgcmVmbGVjdGlvbi50eXBlcywgY28ucHRyKTsKICAgICAgfSwKICAgICAg");
    sb.append("ZmFpbHVyZTogZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0gIltG");
    sb.append("QUlMRUQgVE8gR0VUIFNDSEVNQToiICsgcmVhc29uICsgIl0iOwogICAgICAgIHZpZXdDaGFubmVscy5p");
    sb.append("bm5lckhUTUwgPSAiW0ZBSUxFRCBUTyBHRVQgU0NIRU1BOiIgKyByZWFzb24gKyAiXSI7CiAgICAgIH0K");
    sb.append("ICAgIH07CiAgICBpZiAoY28udmlhX2JpbGxpbmcpIHsKICAgICAgdmlld0pzb24uaW5uZXJIVE1MID0g");
    sb.append("IkJpbGlsbmcgZG9jdW1lbnQgbm90IHN1cHBvcnRlZCI7CiAgICAgIHZpZXdDaGFubmVscy5pbm5lckhU");
    sb.append("TUwgPSB2aWV3SnNvbi5pbm5lckhUTUw7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChjby52aWFf");
    sb.append("ZG9tYWluKSB7CiAgICAgIGNvLnJhdy5Eb21haW5SZWZsZWN0KGNvLmlkZW50aXR5LCBjby5kb21haW4s");
    sb.append("IGhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgY28ucmF3LlNwYWNlUmVmbGVjdChjby5pZGVudGl0");
    sb.append("eSwgY28uc3BhY2UsIGNvLmtleSwgaGFuZGxlcik7CiAgICB9CiAgfTsKCiAgdmFyIGNvbm5lY3Rpb25T");
    sb.append("ZWxlY3RvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogIGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMzMzOyBjb2xvcjogI2ZmZiI7CiAgdmFyIHN3aXRjaF90");
    sb.append("b19jb25uZWN0aW9uID0gZnVuY3Rpb24obmFtZSkgewogICAgY3VycmVudCA9IG5hbWU7CiAgICBudWtl");
    sb.append("KHZpZXdDaGFubmVscyk7CiAgICBudWtlKHZpZXdKc29uKTsKICAgIGNvbm5lY3Rpb25zW25hbWVdLnJl");
    sb.append("bmRlcmVkID0gIiI7CiAgICByZW5kZXIobmFtZSk7CiAgfTsKICBjb25uZWN0aW9uU2VsZWN0b3Iub25j");
    sb.append("aGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgIHN3aXRjaF90b19jb25uZWN0aW9uKGNvbm5lY3Rpb25TZWxl");
    sb.append("Y3Rvci52YWx1ZSk7CiAgfTsKICB2YXIgcmVmcmVzaF9zZWxlY3QgPSBmdW5jdGlvbigpIHsKICAgIG51");
    sb.append("a2UoY29ubmVjdGlvblNlbGVjdG9yKTsKICAgIGZvciAodmFyIG5hbWUgaW4gY29ubmVjdGlvbnMpIHsK");
    sb.append("ICAgICAgdmFyIG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwogICAgICBvcHQu");
    sb.append("dmFsdWUgPSBuYW1lOwogICAgICBvcHQuaW5uZXJUZXh0ID0gbmFtZTsKICAgICAgY29ubmVjdGlvblNl");
    sb.append("bGVjdG9yLmFwcGVuZENoaWxkKG9wdCk7CiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHsKICAgICAg");
    sb.append("ICBzd2l0Y2hfdG9fY29ubmVjdGlvbihuYW1lKTsKICAgICAgICBjb25uZWN0aW9uU2VsZWN0b3IudmFs");
    sb.append("dWUgPSBuYW1lOwogICAgICB9CiAgICB9CiAgfTsKCiAgc2VsZi50b2dnbGUgPSBmdW5jdGlvbigpIHsK");
    sb.append("ICAgIGlmIChzZWxmLnNob3duKSB7CiAgICAgIHRyeSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1v");
    sb.append("dmVDaGlsZChzZWxmLnJvb3QpOwogICAgICB9IGNhdGNoIChub3RwcmVzZW50KSB7CiAgICAgICAgc2Vs");
    sb.append("Zi5zaG93biA9ICFzZWxmLnNob3duOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHNlbGYucm9v");
    sb.append("dCk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgc2VsZi5yb290ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIGRlYnVnZ2VyUG9zaXRpb24gPSBsb2NhbFN0b3JhZ2Uu");
    sb.append("Z2V0SXRlbSgiQWRhbWFEZWJ1Z2dlclBvc2l0aW9uIik7CiAgICAgIGlmICghZGVidWdnZXJQb3NpdGlv");
    sb.append("biB8fCBkZWJ1Z2dlclBvc2l0aW9uID09ICIiKSB7CiAgICAgICAgZGVidWdnZXJQb3NpdGlvbiA9ICJ0");
    sb.append("b3A6MHB4OyBsZWZ0OjBweDt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiOwogICAgICB9CiAgICAgIHNl");
    sb.append("bGYucm9vdC5zdHlsZSA9ICJwb3NpdGlvbjphYnNvbHV0ZTsiICsgZGVidWdnZXJQb3NpdGlvbiArICI7");
    sb.append("YmFja2dyb3VuZDogIzAwMDtib3JkZXI6MXB4IHNvbGlkIHJlZDt6LWluZGV4OjEwMDA7IG92ZXJmbG93");
    sb.append("OnNjcm9sbCI7CiAgICAgIHZhciB0aXRsZUJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIp");
    sb.append("OwogICAgICB0aXRsZUJhci5pbm5lckhUTUwgPSAiQWRhbWEgRGVidWdnZXIiOwogICAgICB0aXRsZUJh");
    sb.append("ci5zdHlsZSA9ICJiYWNrZ3JvdW5kOiAjMjIyOyBjb2xvcjogIzBmMDsgY3Vyc29yOm1vdmU7IHdpZHRo");
    sb.append("OjEwMCU7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsgcGFkZGluZzoycHg7IHRleHQtYWxpZ246IGNl");
    sb.append("bnRlcjsiOwogICAgICB0aXRsZUJhci5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAg");
    sb.append("ZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgcmVjdCA9IHNlbGYucm9vdC5nZXRCb3VuZGlu");
    sb.append("Z0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgc3RhcnQgPSB7eDogZXYuY2xpZW50WCwgeTogZXYuY2xp");
    sb.append("ZW50WX07CiAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uKG54KSB7CiAgICAgICAgICBzZWxmLnJv");
    sb.append("b3Quc3R5bGUubGVmdCA9IChyZWN0LmxlZnQgKyBueC5jbGllbnRYIC0gc3RhcnQueCkgKyAicHgiOwog");
    sb.append("ICAgICAgICAgc2VsZi5yb290LnN0eWxlLnRvcCA9IChyZWN0LnRvcCArIG54LmNsaWVudFkgLSBzdGFy");
    sb.append("dC55KSArICJweCI7CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlv");
    sb.append("bihueCkgewogICAgICAgICAgdXBkYXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVt");
    sb.append("KCJBZGFtYURlYnVnZ2VyUG9zaXRpb24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0");
    sb.append("OiIrc2VsZi5yb290LnN0eWxlLmxlZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAg");
    sb.append("ICB9OwogICAgICAgIHdpbmRvdy5vbm1vdXNldXAgPSBmdW5jdGlvbihueCkgewogICAgICAgICAgdXBk");
    sb.append("YXRlKG54KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJBZGFtYURlYnVnZ2VyUG9zaXRp");
    sb.append("b24iLCAidG9wOiIrc2VsZi5yb290LnN0eWxlLnRvcCsiOyBsZWZ0OiIrc2VsZi5yb290LnN0eWxlLmxl");
    sb.append("ZnQrIjt3aWR0aDo4MDBweDtoZWlnaHQ6NjAwcHgiKTsKICAgICAgICAgIHdpbmRvdy5vbm1vdXNlbW92");
    sb.append("ZSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICB3aW5kb3cub25tb3VzZXVwID0gZnVuY3Rpb24oKSB7");
    sb.append("fTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzZWxmLnJvb3Qu");
    sb.append("YXBwZW5kQ2hpbGQodGl0bGVCYXIpOwogICAgICBzZWxmLnJvb3QuYXBwZW5kQ2hpbGQoY29ubmVjdGlv");
    sb.append("blNlbGVjdG9yKTsKICAgICAgc2VsZi5yb290LmFwcGVuZENoaWxkKHZpZXdKc29uKTsKICAgICAgc2Vs");
    sb.append("Zi5yb290LmFwcGVuZENoaWxkKHZpZXdDaGFubmVscyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5k");
    sb.append("Q2hpbGQoc2VsZi5yb290KTsKICAgIH0KICAgIHNlbGYuc2hvd24gPSAhc2VsZi5zaG93bjsKICB9OwoK");
    sb.append("ICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oY29ubmVjdGlvbikgewogICAgY29ubmVjdGlvbnNbY29u");
    sb.append("bmVjdGlvbi5uYW1lXSA9IGNvbm5lY3Rpb247CiAgICBjb25uZWN0aW9uLmRlYnVnX3RyZWUgPSBuZXcg");
    sb.append("QWRhbWFUcmVlKCk7CiAgICBjb25uZWN0aW9uLmRlYnVnZ2luZyA9ICI/IjsKICAgIHJlZnJlc2hfc2Vs");
    sb.append("ZWN0KCk7CiAgICByZXR1cm4gZnVuY3Rpb24ocGF5bG9hZCkgewogICAgICBpZiAoY29ubmVjdGlvbi5i");
    sb.append("b3VuZCAhPSBjb25uZWN0aW9uLmRlYnVnZ2luZyAmJiBjdXJyZW50ID09IGNvbm5lY3Rpb24ubmFtZSkg");
    sb.append("ewogICAgICAgIHJlbmRlcihjb25uZWN0aW9uLm5hbWUpOwogICAgICB9CiAgICAgIGlmICgiZGF0YSIg");
    sb.append("aW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgIGNvbm5lY3Rpb24uZGVidWdfdHJlZS51cGRhdGUocGF5");
    sb.append("bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgfQogICAgICAvKgogICAgICBpZiAoIm91dHN0YW5kaW5nIiBp");
    sb.append("biBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBjby5vbmRlY2lkZShwYXlsb2FkLmRlbHRhLm91dHN0");
    sb.append("YW5kaW5nKTsKICAgICAgfQogICAgICBpZiAoJ3ZpZXdzdGF0ZScgaW4gcGF5bG9hZC5kZWx0YSkgewov");
    sb.append("LyAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRhLnZpZXdzdGF0ZSk7CiAg");
    sb.append("ICAgIH0KICAgICAgaWYgKCdnb3RvJyBpbiBwYXlsb2FkLmRlbHRhKSB7Ci8vICAgICAgICBzZWxmLmdv");
    sb.append("dG8ocGF5bG9hZC5kZWx0YS5nb3RvKTsKICAgICAgfQogICAgICAqLwogICAgfQogIH07CiAgcmV0dXJu");
    sb.append("IHNlbGY7Cn0pKCk7");
    return sb.toString();
  }
  public static final String RXHTML = new String(Base64.getDecoder().decode(make_rxhtml()), StandardCharsets.UTF_8);
  private static String make_rxhtml() {
    StringBuilder sb = new StringBuilder();
    sb.append("dmFyIFJ4SFRNTCA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHNlbGYgPSB7fTsKCiAgdmFyIHRlbXBsYXRl");
    sb.append("cyA9IHt9OwogIHZhciByb3V0ZXIgPSB7fTsKICAvLyBUaGlzIHN0cmFuZ2UgZXNjYXBpbmcgaXMgZm9y");
    sb.append("IGRldmVsb3BlciBtb2RlIHRvIHByb3h5IHRvIGxvY2FsaG9zdC4KICB2YXIgY29ubmVjdGlvbiA9IG5l");
    sb.append("dyBBZGFtYS5Db25uZWN0aW9uKC8qRU5EUE9JTlQ9WyovQWRhbWEuUHJvZHVjdGlvbi8qXSovKTsKICB2");
    sb.append("YXIgY29ubmVjdGlvbnMgPSB7fTsKICBzZWxmLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uOwogIHNlbGYu");
    sb.append("YnVtcCA9IGZ1bmN0aW9uKG0pIHsKICAgIGNvbm5lY3Rpb24uYnVtcChtKTsKICB9OwoKICB2YXIgY29u");
    sb.append("bmVjdGlvbk1vbml0b3JEb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICBjb25uZWN0");
    sb.append("aW9uLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgdmFyIGljb24gPSBmdW5j");
    sb.append("dGlvbiAoY29sb3IpIHsgcmV0dXJuICI8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9z");
    sb.append("dmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVc");
    sb.append("IiBzdHJva2U9XCIiICsgY29sb3IgKyAiXCIgc3R5bGU9XCJ3aWR0aDoxNnB4OyBoZWlnaHQ6MTZweFwi");
    sb.append("PjxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9");
    sb.append("XCJNOC4yODggMTUuMDM4YTUuMjUgNS4yNSAwIDAxNy40MjQgME01LjEwNiAxMS44NTZjMy44MDctMy44");
    sb.append("MDggOS45OC0zLjgwOCAxMy43ODggME0xLjkyNCA4LjY3NGM1LjU2NS01LjU2NSAxNC41ODctNS41NjUg");
    sb.append("MjAuMTUyIDBNMTIuNTMgMTguMjJsLS41My41My0uNTMtLjUzYS43NS43NSAwIDAxMS4wNiAwelwiIC8+");
    sb.append("PC9zdmc+XG4iOyB9OwogICAgaWYgKCFzdGF0dXMpIHsKICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20u");
    sb.append("dGl0bGUgPSAiZGlzY29ubmVjdGVkIjsKICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1M");
    sb.append("ID0gaWNvbigicmVkIik7CiAgICAgIGNvbm5lY3Rpb24ub25waW5nID0gZnVuY3Rpb24gKF8xLCBfMikg");
    sb.append("eyB9OwogICAgfSBlbHNlIHsKICAgICAgY29ubmVjdGlvbi5vbnBpbmcgPSBmdW5jdGlvbiAoXywgbGF0");
    sb.append("ZW5jeSkgewogICAgICAgIGNvbm5lY3Rpb25Nb25pdG9yRG9tLnRpdGxlID0gImNvbm5lY3RlZDsgbGF0");
    sb.append("ZW5jeT0iICsgbGF0ZW5jeSArICJtcyI7CiAgICAgICAgaWYgKGxhdGVuY3kgPj0gMTAwKSB7CiAgICAg");
    sb.append("ICAgICBjb25uZWN0aW9uTW9uaXRvckRvbS5pbm5lckhUTUwgPSBpY29uKCJvcmFuZ2UiKTsKICAgICAg");
    sb.append("ICB9IGVsc2UgewogICAgICAgICAgY29ubmVjdGlvbk1vbml0b3JEb20uaW5uZXJIVE1MID0gaWNvbigi");
    sb.append("Z3JlZW4iKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfTsKICBjb25uZWN0aW9uTW9uaXRvckRv");
    sb.append("bS5zdHlsZSA9ICJwb3NpdGlvbjpmaXhlZDsgYm90dG9tOjBweDsgcmlnaHQ6MHB4IjsKICBjb25uZWN0");
    sb.append("aW9uTW9uaXRvckRvbS5jbGFzc05hbWUgPSAiYWRhbWEtZGVidWdnZXIiCiAgaWYgKEFkYW1hLkRlYnVn");
    sb.append("Z2VyKSB7CiAgICBjb25uZWN0aW9uTW9uaXRvckRvbS5vbmNsaWNrID0gQWRhbWEuRGVidWdnZXIudG9n");
    sb.append("Z2xlOwogIH0KICBjb25uZWN0aW9uLnN0YXJ0KCk7CiAgY29ubmVjdGlvbi5rZWVwYWxpdmUoKTsKCiAg");
    sb.append("d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgIHZhciBw");
    sb.append("YXlsb2FkID0ge307CiAgICBwYXlsb2FkLm1lc3NhZ2UgPSBldmVudC5tZXNzYWdlOwogICAgcGF5bG9h");
    sb.append("ZC5maWxlbmFtZSA9IGV2ZW50LmZpbGVuYW1lOwogICAgcGF5bG9hZC5saW5lbm8gPSBldmVudC5saW5l");
    sb.append("bm87CiAgICBwYXlsb2FkLmNvbG5vID0gZXZlbnQuY29sbm87CiAgICBwYXlsb2FkLmZpbGVuYW1lID0g");
    sb.append("ZXZlbnQuZmlsZW5hbWU7CiAgICBjb25uZWN0aW9uLmxvZygid2luZG93LmVycm9yIiwgSlNPTi5zdHJp");
    sb.append("bmdpZnkocGF5bG9hZCkpOwogIH0pOwoKICBjb25uZWN0aW9uLmJ1bXAoInJ4aHRtbCIpOwoKICB2YXIg");
    sb.append("cm9vdFJlcGxhY2UgPSAiLyI7CiAgdmFyIGZpeFBhdGggPSBmdW5jdGlvbiAocGF0aCkgewogICAgcmV0");
    sb.append("dXJuIHBhdGg7CiAgfTsKICBpZiAod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLmVuZHNXaXRoKCIuYWRh");
    sb.append("bWEtcGxhdGZvcm0uY29tIikgJiYgIXdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5lbmRzV2l0aCgiaWRl");
    sb.append("LmFkYW1hLXBsYXRmb3JtLmNvbSIpKSB7CiAgICAvLyB0aGlzIGV4aXN0cyBpZiBzb21lb25lIGlzIHRy");
    sb.append("eWluZyB0byB1c2UgdGhlIGdsb2JhbCBkb21haW4gZm9yIHRoZWlyIHNpdGUKICAgIHZhciBwYXJ0cyA9");
    sb.append("IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgiLyIpOwogICAgcm9vdFJlcGxhY2UgPSBbcGFy");
    sb.append("dHNbMF0sIHBhcnRzWzFdLCBwYXJ0c1syXSwgIiJdLmpvaW4oIi8iKTsKICAgIHZhciBvZmZzZXQgPSBw");
    sb.append("YXJ0c1swXS5sZW5ndGggKyBwYXJ0c1sxXS5sZW5ndGggKyBwYXJ0c1syXS5sZW5ndGggKyAyOwogICAg");
    sb.append("Zml4UGF0aCA9IGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgIHJldHVybiBwYXRoLnN1YnN0cmluZyhvZmZz");
    sb.append("ZXQpOwogICAgfTsKICB9CgogIHZhciBmaXhIcmVmID0gZnVuY3Rpb24gKGhyZWYpIHsKICAgIGlmICgh");
    sb.append("aHJlZikgewogICAgICByZXR1cm4gIiMiOwogICAgfQogICAgaWYgKGhyZWYuc3RhcnRzV2l0aCgiLyIp");
    sb.append("KSB7CiAgICAgIHJldHVybiByb290UmVwbGFjZSArIGhyZWYuc3Vic3RyaW5nKDEpOwogICAgfQogICAg");
    sb.append("cmV0dXJuIGhyZWY7CiAgfTsKCiAgdmFyIGdldF9jb25uZWN0aW9uX29iaiA9IGZ1bmN0aW9uIChuYW1l");
    sb.append("KSB7CiAgICBpZiAobmFtZSBpbiBjb25uZWN0aW9ucykgewogICAgICByZXR1cm4gY29ubmVjdGlvbnNb");
    sb.append("bmFtZV07CiAgICB9IGVsc2UgewogICAgICB2YXIgb2JqID0gewogICAgICAgIG5hbWU6IG5hbWUsCiAg");
    sb.append("ICAgICAgcHRyOiBudWxsLAogICAgICAgIHRyZWU6IG5ldyBBZGFtYVRyZWUoKSwKICAgICAgICBvdXRz");
    sb.append("dGFuZGluZzoge30sCiAgICAgICAgZGVjaXNpb25zOiB7fSwKICAgICAgICBjaG9pY2Vfc3Viczoge30s");
    sb.append("CiAgICAgICAgcmVzZXRzOiB7fSwKICAgICAgICBjb25uZWN0aW9uX2V2ZW50czoge30sCiAgICAgICAg");
    sb.append("c3luY19ldmVudHM6IHt9LAogICAgICAgIGlkOiAwLAogICAgICAgIGNvbm5lY3Rpb25fc3RhdGU6IGZh");
    sb.append("bHNlLAogICAgICAgIGNob2ljZXM6IHt9LAogICAgICAgIGJvdW5kOiAiIiwKICAgICAgICB2aWV3c3Rh");
    sb.append("dGVfc2VudDogdHJ1ZSwKICAgICAgICB2aWV3c3RhdGVfY2xvbmU6ICIiLAogICAgICAgIGhhc19maWx0");
    sb.append("ZXI6IGZhbHNlLAogICAgICAgIHN5bmNlZDogZmFsc2UsCiAgICAgICAgZmlsdGVyOiB7fSwKICAgICAg");
    sb.append("ICB2c3NlcTogMCwKICAgICAgICBkZWJ1Z2dlcjogZnVuY3Rpb24gKGRlbHRhKSB7IH0sCiAgICAgICAg");
    sb.append("cmF3OiBjb25uZWN0aW9uCiAgICAgIH07CiAgICAgIG9iai5udWtlID0gZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICAgIHRoaXMuY29ubmVjdGlvbl9ldmVudHMgPSB7fTsKICAgICAgICB0aGlzLnN5bmNfZXZlbnRzID0g");
    sb.append("e307CiAgICAgICAgdGhpcy5jaG9pY2Vfc3VicyA9IHt9OwogICAgICB9LmJpbmQob2JqKTsKICAgICAg");
    sb.append("aWYgKEFkYW1hLkRlYnVnZ2VyKSB7CiAgICAgICAgb2JqLmRlYnVnZ2VyID0gQWRhbWEuRGVidWdnZXIu");
    sb.append("cmVnaXN0ZXIob2JqKTsKICAgICAgfQogICAgICBvYmouc3luYyA9IGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("ICB2YXIgc3luY2VkID0gdGhpcy5jb25uZWN0aW9uX3N0YXRlICYmIHRoaXMudmlld3N0YXRlX3NlbnQ7");
    sb.append("CiAgICAgICAgaWYgKHRoaXMuc3luY2VkID09IHN5bmNlZCkgewogICAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICAgIH0KICAgICAgICB0aGlzLnN5bmNlZCA9IHN5bmNlZDsKICAgICAgICB2YXIgYXhlID0gW107CiAg");
    sb.append("ICAgICAgZm9yICh2YXIgc3ViIGluIG9iai5zeW5jX2V2ZW50cykgewogICAgICAgICAgaWYgKCEob2Jq");
    sb.append("LnN5bmNfZXZlbnRzW3N1Yl0oc3luY2VkKSkpIHsKICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAg");
    sb.append("ICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouc3luY19ldmVudHNbYXhlW2tdXTsKICAgICAgICB9CiAg");
    sb.append("ICAgIH0uYmluZChvYmopOwogICAgICBvYmouc3Vic2NyaWJlX3N5bmMgPSBmdW5jdGlvbiAoY2FsbGJh");
    sb.append("Y2spIHsKICAgICAgICB2YXIgcyA9ICItfCIgKyB0aGlzLmlkKys7CiAgICAgICAgdGhpcy5zeW5jX2V2");
    sb.append("ZW50c1tzXSA9IGNhbGxiYWNrOwogICAgICAgIGNhbGxiYWNrKHRoaXMuc3luY2VkKTsKICAgICAgICBy");
    sb.append("ZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuc3luY19ldmVudHNbc107CiAg");
    sb.append("ICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9OwogICAgICBvYmouc2V0X2Nvbm5lY3RlZCA9IGZ1bmN0");
    sb.append("aW9uIChjcykgewogICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25fc3RhdGUgPT0gY3MpIHsKICAgICAg");
    sb.append("ICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25uZWN0aW9uX3N0YXRlID0gY3M7CiAg");
    sb.append("ICAgICAgdmFyIGF4ZSA9IFtdOwogICAgICAgIGZvciAodmFyIHN1YiBpbiBvYmouY29ubmVjdGlvbl9l");
    sb.append("dmVudHMpIHsKICAgICAgICAgIGlmICghKG9iai5jb25uZWN0aW9uX2V2ZW50c1tzdWJdKGNzKSkpIHsK");
    sb.append("ICAgICAgICAgICAgYXhlLnB1c2goc3ViKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9y");
    sb.append("ICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIGRlbGV0ZSBvYmouY29u");
    sb.append("bmVjdGlvbl9ldmVudHNbYXhlW2tdXTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zeW5jKCk7CiAgICAg");
    sb.append("IH0uYmluZChvYmopOwogICAgICBvYmouY29ubmVjdGVkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAg");
    sb.append("ICAgICAgdmFyIHMgPSAiLXwiICsgdGhpcy5pZCsrOwogICAgICAgIHRoaXMuY29ubmVjdGlvbl9ldmVu");
    sb.append("dHNbc10gPSBjYWxsYmFjazsKICAgICAgICBjYWxsYmFjayh0aGlzLmNvbm5lY3Rpb25fc3RhdGUpOwog");
    sb.append("ICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5jb25uZWN0aW9u");
    sb.append("X2V2ZW50c1tzXTsKICAgICAgICB9LmJpbmQodGhpcyk7CiAgICAgIH0uYmluZChvYmopOwogICAgICBv");
    sb.append("Ymouc3Vic2NyaWJlX2FueSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gIi18");
    sb.append("IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNrOwogICAgICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lvbnNbc107CiAg");
    sb.append("ICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZSA9");
    sb.append("IGZ1bmN0aW9uIChjaGFubmVsLCBjYWxsYmFjaykgewogICAgICAgIHZhciBzID0gY2hhbm5lbCArICJ8");
    sb.append("IiArIHRoaXMuaWQrKzsKICAgICAgICB0aGlzLmRlY2lzaW9uc1tzXSA9IGNhbGxiYWNrOwogICAgICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5kZWNpc2lvbnNbc107CiAg");
    sb.append("ICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLnN1YnNjcmliZV9y");
    sb.append("ZXNldCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHZhciBkciA9ICJyZXNldHwiICsgdGhp");
    sb.append("cy5pZCsrOwogICAgICAgIHRoaXMucmVzZXRzW2RyXSA9IGNhbGxiYWNrOwogICAgICAgIHJldHVybiBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5yZXNldHNbZHJdOwogICAgICAgIH0uYmlu");
    sb.append("ZCh0aGlzKTsKICAgICAgfS5iaW5kKG9iaik7CiAgICAgIG9iai5zdWJzY3JpYmVfY2hvaWNlID0gZnVu");
    sb.append("Y3Rpb24gKGNoYW5uZWwsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHMgPSBjaGFubmVsICsgInwiICsg");
    sb.append("dGhpcy5pZCsrOwogICAgICAgIHRoaXMuY2hvaWNlX3N1YnNbc10gPSBjYWxsYmFjazsKICAgICAgICBy");
    sb.append("ZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgZGVsZXRlIHRoaXMuY2hvaWNlX3N1YnNbc107CiAg");
    sb.append("ICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9LmJpbmQob2JqKTsKICAgICAgb2JqLm9uY2hvaWNlcyA9");
    sb.append("IGZ1bmN0aW9uIChjaGFubmVsLCBjaG9pY2UpIHsKICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAg");
    sb.append("Zm9yICh2YXIgc3ViIGluIG9iai5jaG9pY2Vfc3VicykgewogICAgICAgICAgaWYgKHN1Yi5zdGFydHNX");
    sb.append("aXRoKGNoYW5uZWwgKyAifCIpKSB7CiAgICAgICAgICAgIGlmICghb2JqLmNob2ljZV9zdWJzW3N1Yl0o");
    sb.append("Y2hvaWNlKSkgewogICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBrKysp");
    sb.append("IHsKICAgICAgICAgIGRlbGV0ZSBvYmouY2hvaWNlX3N1YnNbYXhlW2tdXTsKICAgICAgICB9CiAgICAg");
    sb.append("IH07CiAgICAgIG9iai5vbmRlY2lkZSA9IGZ1bmN0aW9uIChvdXRzdGFuZGluZykgewogICAgICAgIHZh");
    sb.append("ciBheGVSZXNldCA9IFtdOwogICAgICAgIGZvciAodmFyIGRyIGluIG9iai5yZXNldHMpIHsKICAgICAg");
    sb.append("ICAgIHZhciByID0gb2JqLnJlc2V0c1tkcl07CiAgICAgICAgICBpZiAoIShyKCkpKSB7CiAgICAgICAg");
    sb.append("ICAgIGF4ZVJlc2V0LnB1c2goZHIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmb3IgKHZh");
    sb.append("ciBrID0gMDsgayA8IGF4ZVJlc2V0Lmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBkZWxldGUgb2JqLnJl");
    sb.append("c2V0c1theGVSZXNldFtrXV07CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIGNoIGluIG9iai5vdXRz");
    sb.append("dGFuZGluZykgewogICAgICAgICAgb2JqLm91dHN0YW5kaW5nW2NoXSA9IHsgb3B0aW9uczogW10gfTsK");
    sb.append("ICAgICAgICB9CiAgICAgICAgdmFyIG4gPSBvdXRzdGFuZGluZy5sZW5ndGg7CiAgICAgICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICAgIHZhciBvID0gb3V0c3RhbmRpbmdba107CiAg");
    sb.append("ICAgICAgICBvYmoub3V0c3RhbmRpbmdbby5jaGFubmVsXSA9IG87CiAgICAgICAgfQogICAgICAgIGZv");
    sb.append("ciAodmFyIGNoIGluIG9iai5vdXRzdGFuZGluZykgewogICAgICAgICAgdmFyIG91dCA9IG9iai5vdXRz");
    sb.append("dGFuZGluZ1tjaF07CiAgICAgICAgICB2YXIgYXhlID0gW107CiAgICAgICAgICBmb3IgKHZhciBzdWIg");
    sb.append("aW4gb2JqLmRlY2lzaW9ucykgewogICAgICAgICAgICBpZiAoc3ViLnN0YXJ0c1dpdGgoY2ggKyAifCIp");
    sb.append("IHx8IHN1Yi5zdGFydHNXaXRoKCItfCIpKSB7CiAgICAgICAgICAgICAgaWYgKCFvYmouZGVjaXNpb25z");
    sb.append("W3N1Yl0ob3V0LCBjaCkpIHsKICAgICAgICAgICAgICAgIGF4ZS5wdXNoKHN1Yik7CiAgICAgICAgICAg");
    sb.append("ICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8");
    sb.append("IGF4ZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgICBkZWxldGUgb2JqLmRlY2lzaW9uc1theGVba11d");
    sb.append("OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgY29ubmVjdGlvbnNbbmFtZV0gPSBv");
    sb.append("Ymo7CiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfTsKICBzZWxmLmdldENvbm5lY3Rpb25CeU5hbWUg");
    sb.append("PSBnZXRfY29ubmVjdGlvbl9vYmo7CgogIHNlbGYubWFrZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVy");
    sb.append("biBuZXcgQWRhbWFUcmVlKCk7CiAgfTsKCiAgLy8gSEVMUEVSIHwgc3Vic2NyaWJlIHRoZSBnaXZlbiAn");
    sb.append("c3ViJyB0byBjaGFuZ2VzIHdpdGhpbiBzdGF0ZSBmb3IgdGhlIGdpdmVuIGZpZWxkIG5hbWVkIG5hbWUK");
    sb.append("ICB2YXIgc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCBzdWIpIHsKICAgIHZhciBzcyA9");
    sb.append("IHNlbGYucEkoc3RhdGUsIG5hbWUpOwogICAgdmFyIHMgPSBzc1tzcy5jdXJyZW50XTsKICAgIGlmIChz");
    sb.append("ID09IG51bGwpIHsKICAgICAgY29uc29sZS5lcnJvcihzcy5jdXJyZW50ICsgIiBpcyBub3QgYXZhaWxh");
    sb.append("YmxlOyB1bmFibGUgdG8gc3Vic2NyaWJlLiIpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIkBl");
    sb.append("IiBpbiBzLmRlbHRhKSB7CiAgICAgIHMuZGVsdGFbIkBlIl0ucHVzaChzdWIpOwogICAgfSBlbHNlIHsK");
    sb.append("ICAgICAgcy5kZWx0YVsiQGUiXSA9IFtzdWJdOwogICAgfQogIH07CiAgc2VsZi5zdWJzY3JpYmUgPSBz");
    sb.append("dWJzY3JpYmU7CgogIC8vIEhFTFBFUiB8IGNyZWF0ZSBmcmVzaCBzdGF0ZQogIHZhciBmcmVzaCA9IGZ1");
    sb.append("bmN0aW9uICh3aGVyZSkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZTogbmV3IEFkYW1hVHJlZSgpLAog");
    sb.append("ICAgICBkZWx0YToge30sCiAgICAgIHBhcmVudDogbnVsbCwKICAgICAgcGF0aDogbnVsbCwKICAgICAg");
    sb.append("d2hlcmU6IHdoZXJlCiAgICB9OwogIH07CiAgc2VsZi5mcmVzaCA9IGZyZXNoOwoKICAvLyBIRUxQRVI6");
    sb.append("IHJlbW92ZSBwb3RlbnRpYWxseSBzZW5zaXRpdmUgaW5mb3JtYXRpb24gZnJvbSBhbiBvYmplY3QKICB2");
    sb.append("YXIgc2FmZV9maWx0ZXIgPSBmdW5jdGlvbihvKSB7CiAgICBpZiAoJ3Bhc3N3b3JkJyBpbiBvKSB7CiAg");
    sb.append("ICAgIGRlbGV0ZSBvWydwYXNzd29yZCddOwogICAgfQogICAgaWYgKCdvbmVfdGltZV9wYXNzd29yZCcg");
    sb.append("aW4gbykgewogICAgICBkZWxldGUgb1snb25lX3RpbWVfcGFzc3dvcmQnXTsKICAgIH0KICAgIHJldHVy");
    sb.append("biBvOwogIH0KCiAgLy8gSEVMUEVSIHwgY3JlYXRlIGEgbmV3IGRlbHRhIGNvcHkgZnJvbSB0aGUgZ2l2");
    sb.append("ZW4gc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIGRhdGEgb3IgdmlldykKICB2YXIgbmV3X2RlbHRh");
    sb.append("X2NvcHkgPSBmdW5jdGlvbiAoc3MpIHsKICAgIGlmIChzcyA9PSBudWxsKSB7CiAgICAgIHJldHVybiBu");
    sb.append("dWxsOwogICAgfQogICAgdmFyIHBhcmVudCA9IG51bGw7CiAgICBpZiAoc3MucGFyZW50ICE9IG51bGwp");
    sb.append("IHsKICAgICAgcGFyZW50ID0gbmV3X2RlbHRhX2NvcHkoc3MucGFyZW50KTsKICAgIH0KICAgIHZhciBu");
    sb.append("ZXdfZGVsdGEgPSB7fTsKICAgIGlmIChwYXJlbnQgIT0gbnVsbCkgewogICAgICBwYXJlbnQuZGVsdGFb");
    sb.append("c3MucGF0aF0gPSBuZXdfZGVsdGE7CiAgICB9CiAgICByZXR1cm4geyB0cmVlOiBzcy50cmVlLCBwYXJl");
    sb.append("bnQ6IHBhcmVudCwgZGVsdGE6IG5ld19kZWx0YSwgcGF0aDogc3MucGF0aCB9OwogIH07CiAgc2VsZi5t");
    sb.append("YWtlRGVsdGFDb3B5ID0gbmV3X2RlbHRhX2NvcHk7CgogIC8vIEhFTFBFUiB8IGNvbnN0cnVjdCBhIHBh");
    sb.append("dGggdG8KICB2YXIgcGF0aF90byA9IGZ1bmN0aW9uIChzcywgb2JqKSB7CiAgICBpZiAoc3MucGFyZW50");
    sb.append("ICE9IG51bGwpIHsKICAgICAgdmFyIHBlZWwgPSB7fTsKICAgICAgcGVlbFtzcy5wYXRoXSA9IG9iajsK");
    sb.append("ICAgICAgcmV0dXJuIHBhdGhfdG8oc3MucGFyZW50LCBwZWVsKTsKICAgIH0gZWxzZSB7CiAgICAgIHJl");
    sb.append("dHVybiBvYmo7CiAgICB9CiAgfTsKICBzZWxmLnBhdGhUbyA9IHBhdGhfdG87CgogIC8vIEhFTFBFUiB8");
    sb.append("IGdldCB0aGUgcm9vdCBvZiB0aGUgc3BlY2lmaWMgc3RhdGUgKGkuZS4gZWl0aGVyIHRoZSBkYXRhJ3Mg");
    sb.append("cm9vdCBvciB0aGUgdmlldydzIHJvb3QpCiAgdmFyIHJvb3Rfb2YgPSBmdW5jdGlvbiAoc3MpIHsKICAg");
    sb.append("IHZhciB4ID0gc3M7CiAgICB3aGlsZSAoeC5wYXJlbnQgIT0gbnVsbCkgewogICAgICB4ID0geC5wYXJl");
    sb.append("bnQ7CiAgICB9CiAgICByZXR1cm4geDsKICB9OwogIHNlbGYucm9vdE9mID0gcm9vdF9vZjsKCiAgLy8g");
    sb.append("SEVMUEVSIHwgcmVtb3ZlIGFsbCB0aGUgY2hpbGRyZW4gZnJvbSB0aGUgZ2l2ZW4gRE9NIG5vZGUKICB2");
    sb.append("YXIgbnVrZSA9IGZ1bmN0aW9uIChwYXJlbnQpIHsKICAgIHZhciBsYXN0ID0gcGFyZW50Lmxhc3RDaGls");
    sb.append("ZDsKICAgIHdoaWxlIChsYXN0KSB7CiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChsYXN0KTsKICAgICAg");
    sb.append("bGFzdCA9IHBhcmVudC5sYXN0Q2hpbGQ7CiAgICB9CiAgfTsKICBzZWxmLm51a2UgPSBudWtlOwoKICAv");
    sb.append("LyBIRUxQRVI6IGRlYm91bmNlIHRoZSBnaXZlbiBmdW5jdGlvbmFsIHdoZW4gcmFwaWQgZnVuY3Rpb24g");
    sb.append("c3ByZWFkIGlzIGV4cGVjdGVkCiAgdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gKG1zLCBmb28pIHsKICAg");
    sb.append("IHZhciBzdGF0dXMgPSB7IGluZmxpZ2h0OiBmYWxzZSwgdGltZW91dDogbnVsbCB9OwogICAgc3RhdHVz");
    sb.append("LmluZmxpZ2h0ID0gZmFsc2U7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXN0YXR1");
    sb.append("cy5pbmZsaWdodCkgewogICAgICAgIHN0YXR1cy5pbmZsaWdodCA9IHRydWU7CiAgICAgICAgc3RhdHVz");
    sb.append("LnRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzdGF0dXMu");
    sb.append("aW5mbGlnaHQgPSBmYWxzZTsKICAgICAgICAgIHN0YXR1cy50aW1lb3V0ID0gbnVsbDsKICAgICAgICAg");
    sb.append("IGZvbygpOwogICAgICAgIH0sIG1zIC8qIG1zICovKTsgLy8gZGVib3VuY2UgdGhlIHBhcmFtZXRlcnMK");
    sb.append("ICAgICAgfQogICAgfTsKICB9OwogIHNlbGYuZGVib3VuY2UgPSBkZWJvdW5jZTsKCiAgLy8gSEVMUEVS");
    sb.append("IHwgcHJlcGFyZSBhIGZyZWUgdW5zdWJzY3JpYmUgb2JqZWN0CiAgdmFyIG1ha2VfdW5zdWIgPSBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBfX2RhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgfSwg");
    sb.append("X192aWV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gSEVMUEVSIHwgYXVn");
    sb.append("bWVudCBhbiBleGlzdGluZyBvYmplY3Qgd2l0aCB1bnN1YnNjcmliZSBkYXRhCiAgdmFyIGFkZF91bnN1");
    sb.append("YiA9IGZ1bmN0aW9uIChvYmopIHsKICAgIG9iai5fX2RhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICB9Owog");
    sb.append("ICAgb2JqLl9fdmlldyA9IGZ1bmN0aW9uICgpIHsKICAgIH07CiAgfTsKCiAgLy8gSEVMUEVSIHwgZmly");
    sb.append("ZSB0aGUgdW5zdWJzY3JpYmUgY2FsbHMgd2l0aGluIGFuIG9iamVjdAogIHZhciBmaXJlX3Vuc3ViID0g");
    sb.append("ZnVuY3Rpb24gKHVuc3ViKSB7CiAgICB1bnN1Yi5fX2RhdGEoKTsKICAgIHVuc3ViLl9fdmlldygpOwog");
    sb.append("IH07CgogIHZhciBpc0VtcHR5RGVsdGEgPSBmdW5jdGlvbihkZWx0YSkgewogICAgaWYgKHR5cGVvZihk");
    sb.append("ZWx0YSkgPT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGVsc2UgaWYgKEFy");
    sb.append("cmF5LmlzQXJyYXkoZGVsdGEpKSB7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGVsdGEubGVuZ3Ro");
    sb.append("OyBqKyspIHsKICAgICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YVtqXSkpIHsKICAgICAgICAgIHJl");
    sb.append("dHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mKGRlbHRhKSA9");
    sb.append("PSAib2JqZWN0IikgewogICAgICBmb3IgKHZhciBrIGluIGRlbHRhKSB7CiAgICAgICAgaWYgKCFpc0Vt");
    sb.append("cHR5RGVsdGEoZGVsdGFba10pKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAg");
    sb.append("ICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8vIEhFTFBFUiB8IHN1YnNjcmliZSB0byBz");
    sb.append("dGF0ZSBhbmQgcG9wdWxhdGUgdW5zdWJzY3JpYmUgb2JqZWN0CiAgdmFyIHN1YnNjcmliZV9zdGF0ZSA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSwgdW5zdWIpIHsKICAgIC8vICAmJiAhaXNFbXB0eURlbHRhKHN0YXRlLmRh");
    sb.append("dGEpCiAgICB1bnN1Yi5fX2RhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICB9OwogICAgdW5zdWIuX192aWV3");
    sb.append("ID0gZnVuY3Rpb24gKCkgewogICAgfTsKCiAgICBpZiAoc3RhdGUuZGF0YSAhPSBudWxsKSB7CiAgICAg");
    sb.append("IHZhciBkZWx0YSA9IHJvb3Rfb2Yoc3RhdGUuZGF0YSkuZGVsdGE7CiAgICAgIGlmICghaXNFbXB0eURl");
    sb.append("bHRhKGRlbHRhKSkgewogICAgICAgIHVuc3ViLl9fZGF0YSA9IHN0YXRlLmRhdGEudHJlZS5zdWJzY3Jp");
    sb.append("YmUoZGVsdGEpOwogICAgICB9CiAgICB9CiAgICAvLyAgJiYgIWlzRW1wdHlEZWx0YShzdGF0ZS52aWV3");
    sb.append("KQogICAgaWYgKHN0YXRlLnZpZXcgIT0gbnVsbCkgewogICAgICB2YXIgZGVsdGEgPSByb290X29mKHN0");
    sb.append("YXRlLnZpZXcpLmRlbHRhOwogICAgICBpZiAoIWlzRW1wdHlEZWx0YShkZWx0YSkpIHsKICAgICAgICB1");
    sb.append("bnN1Yi5fX3ZpZXcgPSBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKGRlbHRhKTsKICAgICAgfQogICAg");
    sb.append("fQogIH07CgogIC8vIFJVTlRJTUUgfCBTd2l0Y2ggdG8gdGhlIHZpZXcgb2JqZWN0CiAgc2VsZi5wViA9");
    sb.append("IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHsgc2VydmljZTogc3RhdGUuc2VydmljZSwgZGF0");
    sb.append("YTogc3RhdGUuZGF0YSwgdmlldzogc3RhdGUudmlldywgY3VycmVudDogInZpZXciIH07CiAgfTsKICBz");
    sb.append("ZWxmLm5ld1N0YXRlVmlld09mID0gc2VsZi5wVjsKCiAgLy8gUlVOVElNRSB8IFN3aXRjaCB0byB0aGUg");
    sb.append("ZGF0YSBvYmplY3QKICBzZWxmLnBEID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICByZXR1cm4geyBzZXJ2");
    sb.append("aWNlOiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJy");
    sb.append("ZW50OiAiZGF0YSIgfTsKICB9OwogIHNlbGYubmV3U3RhdGVEYXRhT2YgPSBzZWxmLnBEOwoKICAvLyBS");
    sb.append("VU5USU1FIHwgU3dpdGNoIHRvIHRoZSByb290IG9iamVjdCAvIChSb290KQogIHNlbGYucFIgPSBmdW5j");
    sb.append("dGlvbiAoc3RhdGUpIHsKICAgIHZhciBuZXh0ID0geyBzZXJ2aWNlOiBzdGF0ZS5zZXJ2aWNlLCBkYXRh");
    sb.append("OiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50OiBzdGF0ZS5jdXJyZW50IH07CiAg");
    sb.append("ICB2YXIgcHJpb3IgPSBuZXh0W3N0YXRlLmN1cnJlbnRdOwogICAgd2hpbGUgKHByaW9yICE9IG51bGwp");
    sb.append("IHsKICAgICAgbmV4dFtzdGF0ZS5jdXJyZW50XSA9IHByaW9yOwogICAgICBwcmlvciA9IHByaW9yLnBh");
    sb.append("cmVudDsKICAgIH0KICAgIHJldHVybiBuZXh0OwogIH07CiAgc2VsZi5uZXdTdGF0ZVJvb3RPZiA9IHNl");
    sb.append("bGYucFI7CgogIC8vIFJVTlRJTUUgfCAuLi8gKFVwKQogIHNlbGYucFUgPSBmdW5jdGlvbiAoc3RhdGUp");
    sb.append("IHsKICAgIHZhciBuZXh0ID0geyBzZXJ2aWNlOiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRh");
    sb.append("LCB2aWV3OiBzdGF0ZS52aWV3LCBjdXJyZW50OiBzdGF0ZS5jdXJyZW50IH07CiAgICB2YXIgcHJpb3Ig");
    sb.append("PSBuZXh0W3N0YXRlLmN1cnJlbnRdOwogICAgaWYgKHByaW9yLnBhcmVudCAhPSBudWxsKSB7CiAgICAg");
    sb.append("IG5leHRbc3RhdGUuY3VycmVudF0gPSBwcmlvci5wYXJlbnQ7CiAgICB9CiAgICByZXR1cm4gbmV4dDsK");
    sb.append("ICB9OwogIHNlbGYubmV3U3RhdGVQYXJlbnRPZiA9IHNlbGYucFU7CgogIC8vIFJVTlRJTUUgfCBkaXZl");
    sb.append("IG9uZSBsZXZlbCBJbnRvIHBhdGgxL3BhdGgyLy4uLi4vcGF0aE4KICBzZWxmLnBJID0gZnVuY3Rpb24g");
    sb.append("KHN0YXRlLCBuYW1lKSB7CiAgICB2YXIgcHJpb3IgPSBzdGF0ZVtzdGF0ZS5jdXJyZW50XTsKICAgIGlm");
    sb.append("IChwcmlvciA9PSBudWxsKSB7CiAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdGUuY3VycmVudCArICIgaXMg");
    sb.append("bm90IHByZXNlbnQiKTsKICAgICAgcmV0dXJuIHN0YXRlOwogICAgfQogICAgaWYgKCEobmFtZSBpbiBw");
    sb.append("cmlvci5kZWx0YSkpIHsKICAgICAgcHJpb3IuZGVsdGFbbmFtZV0gPSB7fTsKICAgIH0KICAgIHZhciBu");
    sb.append("ZXh0ID0geyBzZXJ2aWNlOiBzdGF0ZS5zZXJ2aWNlLCBkYXRhOiBzdGF0ZS5kYXRhLCB2aWV3OiBzdGF0");
    sb.append("ZS52aWV3LCBjdXJyZW50OiBzdGF0ZS5jdXJyZW50IH07CiAgICBuZXh0W3N0YXRlLmN1cnJlbnRdID0g");
    sb.append("ewogICAgICB0cmVlOiBwcmlvci50cmVlLAogICAgICBkZWx0YTogcHJpb3IuZGVsdGFbbmFtZV0sCiAg");
    sb.append("ICAgIHBhcmVudDogcHJpb3IsCiAgICAgIHBhdGg6IG5hbWUKICAgIH07CiAgICBpZiAobmV4dC5jdXJy");
    sb.append("ZW50ID09ICJkYXRhIikgewogICAgICBuZXh0LmRhdGEuY29ubmVjdGlvbiA9IHByaW9yLmNvbm5lY3Rp");
    sb.append("b247CiAgICB9CiAgICByZXR1cm4gbmV4dDsKICB9OwogIHNlbGYubmV3U3RhdGVEaXZlSW50byA9IHNl");
    sb.append("bGYucEk7CgogIC8vIFJVTlRJTUUgfCBleHRlbmQgdGhlIGdpdmVuIHN0YXRlIHdpdGggdGhlIHZpZXcg");
    sb.append("aGF2aW5nIGEgc2VwYXJhdGUgY2hpbGQKICBzZWxmLnBFViA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkg");
    sb.append("ewogICAgaWYgKCEobmFtZSBpbiBzdGF0ZS52aWV3LmRlbHRhKSkgewogICAgICBzdGF0ZS52aWV3LmRl");
    sb.append("bHRhW25hbWVdID0ge307CiAgICB9CiAgICByZXR1cm4gewogICAgICBzZXJ2aWNlOiBzdGF0ZS5zZXJ2");
    sb.append("aWNlLAogICAgICBkYXRhOiBzdGF0ZS5kYXRhLAogICAgICB2aWV3OiB7CiAgICAgICAgdHJlZTogc3Rh");
    sb.append("dGUudmlldy50cmVlLAogICAgICAgIGRlbHRhOiBzdGF0ZS52aWV3LmRlbHRhW25hbWVdLAogICAgICAg");
    sb.append("IHBhcmVudDogc3RhdGUudmlldywKICAgICAgICBwYXRoOiBuYW1lCiAgICAgIH0sCiAgICAgIGN1cnJl");
    sb.append("bnQ6IHN0YXRlLmN1cnJlbnQKICAgIH07CiAgfTsKICBzZWxmLm5ld1N0YXRlQ3JlYXRlVmlld0NoaWxk");
    sb.append("ID0gc2VsZi5wRVY7CgogIHNlbGYucElFID0gZnVuY3Rpb24gKHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3");
    sb.append("KSB7CiAgICB2YXIgbmV4dCA9IHNlbGYucEkoc3RhdGUsIG5hbWUpOwogICAgaWYgKGV4cGFuZFZpZXcp");
    sb.append("IHsKICAgICAgcmV0dXJuIHNlbGYucEVWKG5leHQsIG5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgcmV0");
    sb.append("dXJuIG5leHQ7CiAgICB9CiAgfTsKCiAgdmFyIGZvcmsgPSBmdW5jdGlvbiAocHJpb3JTdGF0ZSkgewog");
    sb.append("ICAgdmFyIHN0YXRlID0gewogICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgIGRh");
    sb.append("dGE6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUuZGF0YSksCiAgICAgIHZpZXc6IG5ld19kZWx0YV9j");
    sb.append("b3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgIGN1cnJlbnQ6IHByaW9yU3RhdGUuY3VycmVudAogICAg");
    sb.append("fTsKICAgIGlmIChzdGF0ZS5kYXRhICE9IG51bGwpIHsKICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9u");
    sb.append("ID0gcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb247CiAgICB9CiAgICByZXR1cm4gc3RhdGU7CiAgfTsK");
    sb.append("CiAgLy8gUlVOVElNRSB8IHN1YnNjcmliZSBiZXR3ZWVuIHRoZSBzdGF0ZSBhbmQgdGhlIG9iamVjdC4K");
    sb.append("ICAvLyBXaGVuIHRoZSBtZW1iZXIgZmllbGQgd2l0aGluIHN0YXRlIG9mIG5hbWUgY2hhbmdlcywgY29w");
    sb.append("eSB0aGF0IHZhbHVlIGludG8gdGhlIG9iaiBhbmQgcnVuIHJlY29tcHV0ZSgpCiAgc2VsZi5ZID0gZnVu");
    sb.append("Y3Rpb24gKHN0YXRlLCBvYmosIG5hbWUsIHJlY29tcHV0ZSkgewogICAgdmFyIHN1YiA9IGZ1bmN0aW9u");
    sb.append("ICh2YWx1ZSkgewogICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgcmVjb21wdXRlKCk7CiAgICB9");
    sb.append("OwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBzdWIpOwogIH07CgogIHNlbGYuWTIgPSBmdW5jdGlv");
    sb.append("biAoc3RhdGUsIHIsIGtleSwgbmFtZSwgcmVjb21wdXRlKSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24g");
    sb.append("KHZhbHVlKSB7CiAgICAgIHZhciBvYmogPSByLl9ba2V5XTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7");
    sb.append("CiAgICAgIHJlY29tcHV0ZShvYmopOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICBzdWJzY3Jp");
    sb.append("YmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgfTsKCiAgLy8gUlVOVElNRTogYnVpbGQgYW4gcnhvYmoKICBz");
    sb.append("ZWxmLlJYID0gZnVuY3Rpb24gKHZhcnMpIHsKICAgIHZhciBvID0ge307CiAgICBvLl8gPSB7fTsKICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgdmFycy5sZW5ndGg7IGsrKykgewogICAgICBvLl9bdmFyc1trXV0g");
    sb.append("PSB7fTsKICAgIH0KICAgIG8uX18gPSBmdW5jdGlvbigpIHt9OwogICAgcmV0dXJuIG87CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRSB8IEp1c3Qgc3Vic2NyaWJlZSB2YWx1ZSB0byB0aGUgb2JqZWN0IGZpZWxkIG9mIG5h");
    sb.append("bWUgKG5vLXJlY29tcHV0ZSkKICBzZWxmLllTID0gZnVuY3Rpb24gKHN0YXRlLCBvYmosIG5hbWUpIHsK");
    sb.append("ICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAg");
    sb.append("ICAgIHJldHVybiB0cnVlOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9");
    sb.append("OwoKICAvLyBSVU5USU1FIHwgIlRleHQiCiAgc2VsZi5UID0gZnVuY3Rpb24gKHR4KSB7CiAgICByZXR1");
    sb.append("cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodHgpOwogIH07CgogIC8vIGNvbnZlcnQgYSB2YWx1ZSBp");
    sb.append("bnRvIGEgYm9vbGVhbgogIHNlbGYuQiA9IGZ1bmN0aW9uKHZhbCkgewogICAgaWYgKHZhbCA9PT0gdHJ1");
    sb.append("ZSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB2YWwgPT0gInRydWUiOwogIH07");
    sb.append("CgogIC8vIFJVTlRJTUUgfCA8dmlldy13cml0ZSBuYW1lPSIiIHZhbHVlPSIiPgogIHNlbGYuVlcgPSBm");
    sb.append("dW5jdGlvbihzdGF0ZSwgbmFtZSwgcnhPYmopIHsKICAgIHJ4T2JqLl9fID0gZGVib3VuY2UoNTAsIGZ1");
    sb.append("bmN0aW9uKCkgewogICAgICB2YXIgb2JqID0ge307CiAgICAgIHZhciB2YWx1ZSA9IHJ4T2JqLnZhbHVl");
    sb.append("OwogICAgICBpZiAodHlwZW9mICh2YWx1ZSkgPT0gImZ1bmN0aW9uIikgewogICAgICAgIG9ialtuYW1l");
    sb.append("XSA9IHZhbHVlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAg");
    sb.append("IH0KICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52");
    sb.append("aWV3LnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUUgfCA8bG9va3Vw");
    sb.append("IHBhdGg9Li4uPgogIHNlbGYuTCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIGRvbSA9");
    sb.append("IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUp");
    sb.append("IHsKICAgICAgZG9tLm5vZGVWYWx1ZSA9IHZhbHVlOwogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwg");
    sb.append("bmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxsb29rdXAgcGF0");
    sb.append("aD0uLi4gdHJhbnNmb3JtPSIkdHJhbnNmb3JtIiAvPgogIHNlbGYuTFQgPSBmdW5jdGlvbiAoc3RhdGUs");
    sb.append("IG5hbWUsIHRyYW5zZm9ybSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIi");
    sb.append("KTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlICE9IG51bGwp");
    sb.append("IHsKICAgICAgICBkb20ubm9kZVZhbHVlID0gdHJhbnNmb3JtKHZhbHVlKTsKICAgICAgfQogICAgfTsK");
    sb.append("ICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICAgIHJldHVybiBkb207CiAgfTsKCiAgc2Vs");
    sb.append("Zi5MaCA9IGZ1bmN0aW9uIChzdGF0ZSwgbmFtZSkgewogICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0");
    sb.append("ZUVsZW1lbnQoInNwYW4iKTsKICAgIHZhciBzdWIgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYg");
    sb.append("KHZhbHVlICE9IG51bGwpIHsKICAgICAgICBkb20uaW5uZXJIVE1MID0gdmFsdWU7CiAgICAgIH0KICAg");
    sb.append("IH07CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwogIH07Cgog");
    sb.append("IC8vIFJVTlRJTUUgfCA8bG9va3VwIHBhdGg9Li4uIHRyYW5zZm9ybT0iJHRyYW5zZm9ybSIgLz4KICBz");
    sb.append("ZWxmLkxUZFQgPSBmdW5jdGlvbiAoc3RhdGUsIG5hbWUsIHRyYW5zZm9ybSwgZnJlcSkgewogICAgdmFy");
    sb.append("IGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTsKICAgIC8vIGNyZWF0ZSB0aGUgbmV4dXMg");
    sb.append("b2JqZWN0CiAgICB2YXIgb2JqID0ge307CiAgICBvYmouZnJlcSA9IGZyZXE7CiAgICBvYmoudmFsdWUg");
    sb.append("PSAiIjsKCiAgICAvLyB1cGRhdGUgd2lsbCBleGVjdXRlIHRoZSB0cmFuc2Zvcm0gb24gdGhlIHZhbHVl");
    sb.append("CiAgICBvYmoudXBkYXRlID0gZnVuY3Rpb24oKSB7CiAgICAgIGRvbS5ub2RlVmFsdWUgPSB0cmFuc2Zv");
    sb.append("cm0odGhpcy52YWx1ZSk7CiAgICB9LmJpbmQob2JqKTsKCiAgICAvLyBzdWJzY3JpcHRpb24gd2lsbCBz");
    sb.append("eW5jIHRoZSB2YWx1ZQogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFs");
    sb.append("dWUgIT0gbnVsbCkgewogICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgICB0aGlzLnVwZGF0");
    sb.append("ZSgpOwogICAgICB9CiAgICB9LmJpbmQob2JqKTsKCiAgICAvLyByZWZyZXNoIHdpbGwgcmUtZXhlY3V0");
    sb.append("ZSB0aGUgdXBkYXRlIChhbmQgdGh1cyB0aGUgdHJhbnNmb3JtKQogICAgb2JqLnJlZnJlc2ggPSBmdW5j");
    sb.append("dGlvbigpIHsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFp");
    sb.append("bnMoZG9tKSkgeyAvLyB3aWxsIHJ1biBzbyBsb25nIGFzIHRoZSBET00gY29udGFpbnMgdGhlIG5vZGUg");
    sb.append("d2UgbWFuaXB1bGF0ZWQKICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh0aGlzLnJlZnJlc2gsIHRoaXMu");
    sb.append("ZnJlcSk7CiAgICAgIH0KICAgIH0uYmluZChvYmopOwogICAgLy8ga2ljayBvZmYgdGhlIGF1dG8gdHJh");
    sb.append("bnNmb3JtCiAgICB3aW5kb3cuc2V0VGltZW91dChvYmoucmVmcmVzaCwgZnJlcSk7CiAgICBzdWJzY3Jp");
    sb.append("YmUoc3RhdGUsIG5hbWUsIHN1Yik7CiAgICByZXR1cm4gZG9tOwogIH07CgogIC8vIFJVTlRJTUUgfCA8");
    sb.append("dGFnPgogIHNlbGYuRSA9IGZ1bmN0aW9uICh0YWcsIG5zKSB7CiAgICBpZiAobnMgPT0gdW5kZWZpbmVk");
    sb.append("IHx8IG5zID09IG51bGwpIHsKICAgICAgdmFyIGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFn");
    sb.append("KTsKICAgICAgaWYgKHRhZyA9PSAic2VsZWN0IikgewogICAgICAgIGRvbS5hZGRFdmVudExpc3RlbmVy");
    sb.append("KCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsgZG9tLnJ4dmFsdWUgPSBkb20udmFsdWU7IH0pOwogICAgICB9");
    sb.append("CiAgICAgIHJldHVybiBkb207CiAgICB9IGVsc2UgewogICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnQu");
    sb.append("Y3JlYXRlRWxlbWVudE5TKG5zLCB0YWcpOwogICAgICByZXN1bHQuc2V0QXR0cmlidXRlKCJ4bWxucyIs");
    sb.append("IG5zKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9OwoKICBzZWxmLkNTdCA9IGZ1bmN0aW9u");
    sb.append("IChwYXJlbnQsIHN0YXRlLCBjaGlsZE1ha2VyQ29ubmVjdGVkLCBjaGlsZE1ha2VyRGlzY29ubmVjdGVk");
    sb.append("KSB7CiAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICBpZiAoIXN0YXRlLmRhdGEuY29ubmVj");
    sb.append("dGlvbikgewogICAgICByZXR1cm47CiAgICB9CiAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY29ubmVj");
    sb.append("dGVkKGZ1bmN0aW9uKGNzKSB7CiAgICAgIGlmICh0aGlzLnByaW9yID09IGNzKSB7CiAgICAgICAgcmV0");
    sb.append("dXJuOwogICAgICB9CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAg");
    sb.append("ICAgIHRoaXMucHJpb3IgPSBjczsKICAgICAgdmFyIG5ld1N0YXRlID0gZm9yayhzdGF0ZSk7CiAgICAg");
    sb.append("IGlmIChjcykgewogICAgICAgIGNoaWxkTWFrZXJDb25uZWN0ZWQocGFyZW50LCBuZXdTdGF0ZSk7CiAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZChwYXJlbnQsIG5ld1N0YXRl");
    sb.append("KTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUobmV3U3RhdGUsIHVuc3ViKTsKICAgICAgcmV0");
    sb.append("dXJuIGRvY3VtZW50LmJvZHkuY29udGFpbnMocGFyZW50KTsKICAgIH0uYmluZCh7cHJpb3I6bnVsbH0p");
    sb.append("KTsKICB9OwoKICAvLyBkb2N1bWVudC1nZXQKICBzZWxmLkRjRyA9IGZ1bmN0aW9uKHBhcmVudCwgcHJp");
    sb.append("b3JTdGF0ZSwgcnhPYmosIGNoaWxkTWFrZXJGZXRjaGVkLCBjaGlsZE1ha2VyRmFpbGVkKSB7CiAgICAv");
    sb.append("LyBUT0RPCiAgfTsKCiAgLy8gUlVOVElNRSA8ZG9tYWluLWdldCB1cmw9InBhdGgiIHNlYXJjaDp4PSIu");
    sb.append("Li4iPgogIHNlbGYuREcgPSBmdW5jdGlvbihwYXJlbnQsIHByaW9yU3RhdGUsIHJ4T2JqLCBjaGlsZE1h");
    sb.append("a2VyRmV0Y2hlZCwgY2hpbGRNYWtlckZhaWxlZCkgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1Yigp");
    sb.append("OwogICAgcnhPYmouX18gPSBkZWJvdW5jZSg1MCwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgndXJs");
    sb.append("JyBpbiByeE9iaikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGFyZ3MgPSBbXTsK");
    sb.append("ICAgICAgdmFyIGlkZW50aXR5ID0gbnVsbDsKICAgICAgZm9yICh2YXIgYXJnIGluIHJ4T2JqKSB7CiAg");
    sb.append("ICAgICAgdmFyIHZhbCA9IHJ4T2JqW2FyZ107CiAgICAgICAgc3dpdGNoIChhcmcpIHsKICAgICAgICAg");
    sb.append("IGNhc2UgIl9fIjoKICAgICAgICAgIGNhc2UgIl8iOgogICAgICAgICAgY2FzZSAidXJsIjoKICAgICAg");
    sb.append("ICAgIGNhc2UgInJlZGlyZWN0IjoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJpZGVu");
    sb.append("dGl0eSI6CiAgICAgICAgICAgIGlmICh0eXBlb2YodmFsKSA9PSAic3RyaW5nIikgewogICAgICAgICAg");
    sb.append("ICAgIGlkZW50aXR5ID0gcnhPYmpbYXJnXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsK");
    sb.append("ICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGFyZ3MucHVzaChhcmcgKyAiPSIgKyBlbmNvZGVV");
    sb.append("UklDb21wb25lbnQodmFsKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciB1cmwgPSByeE9iai51");
    sb.append("cmwgKyAoYXJncy5sZW5ndGggPiAwID8gIj8iICsgYXJncy5qb2luKCImIikgOiAiIik7CiAgICAgIHRo");
    sb.append("aXMuZ2VuICsrOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxI");
    sb.append("dHRwUmVxdWVzdCgpOwogICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgICAgaWYgKHRoaXMueGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuZ2VuID09IHNlbGYu");
    sb.append("Z2VuKSB7CiAgICAgICAgICBmaXJlX3Vuc3ViKHVuc3ViKTsKICAgICAgICAgIG51a2UocGFyZW50KTsK");
    sb.append("ICAgICAgICAgIHZhciB0cmVlID0gbmV3IEFkYW1hVHJlZSgpOwogICAgICAgICAgdmFyIHN0YXRlID0g");
    sb.append("ewogICAgICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgICAgIGRhdGE6");
    sb.append("IHsgY29ubmVjdGlvbjogcHJpb3JTdGF0ZS5jb25uZWN0aW9uLCB0cmVlOiB0cmVlLCBkZWx0YToge30s");
    sb.append("IHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAogICAgICAgICAgICB2aWV3OiBuZXdfZGVsdGFfY29w");
    sb.append("eShwcmlvclN0YXRlLnZpZXcpLAogICAgICAgICAgICBjdXJyZW50OiAiZGF0YSIKICAgICAgICAgIH07");
    sb.append("CgogICAgICAgICAgaWYgKHRoaXMueGh0dHAuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICB2YXIg");
    sb.append("dHlwZSA9IHRoaXMueGh0dHAuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpOwogICAgICAg");
    sb.append("ICAgICBpZiAodHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsKICAgICAgICAgICAgICB2YXIgdG9Q");
    sb.append("dXNoID0gdHJlZS5NYWtlRGVsdGEoSlNPTi5wYXJzZSh0aGlzLnhodHRwLnJlc3BvbnNlVGV4dCkpOwog");
    sb.append("ICAgICAgICAgICAgIGNoaWxkTWFrZXJGZXRjaGVkKHBhcmVudCwgc3RhdGUpOwogICAgICAgICAgICAg");
    sb.append("IHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwogICAgICAgICAgICAgIHRyZWUudXBkYXRlKHRv");
    sb.append("UHVzaCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY2hpbGRNYWtlckZhaWxlZChw");
    sb.append("YXJlbnQsIHN0YXRlKTsKICAgICAgICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsK");
    sb.append("ICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2hpbGRNYWtlckZhaWxl");
    sb.append("ZChwYXJlbnQsIHN0YXRlKTsKICAgICAgICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB1bnN1Yik7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LmJpbmQoe2dlbjpzZWxmLmdlbiwgeGh0dHA6eGh0");
    sb.append("dHB9KTsKICAgICAgeGh0dHAub3BlbigiR0VUIiwgIi9+ZCIgKyB1cmwsIHRydWUpOwogICAgICBpZiAo");
    sb.append("aWRlbnRpdHkgIT0gbnVsbCkgewogICAgICAgIHhodHRwLnNldFJlcXVlc3RIZWFkZXIoIkF1dGhvcml6");
    sb.append("YXRpb24iLCAiQmVhcmVyICIgKyBpZGVudGl0eSk7CiAgICAgIH0KICAgICAgeGh0dHAud2l0aENyZWRl");
    sb.append("bnRpYWxzID0gdHJ1ZTsKICAgICAgeGh0dHAuc2VuZCgpOwogICAgfS5iaW5kKHt1cmw6IiIsIGdlbjow");
    sb.append("fSkpOwogICAgcnhPYmouX18oKTsKICB9CgogIC8vIFJVTlRJTUUgfCA8cGljayBuYW1lPS4uLj4KICBz");
    sb.append("ZWxmLlAgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0YXRlLCByeE9iaiwgY2hpbGRNYWtlckNvbm5l");
    sb.append("Y3RlZCwgY2hpbGRNYWtlckRpc2Nvbm5lY3RlZCwga2VlcE9wZW4pIHsKICAgIHZhciB1bnN1YiA9IG1h");
    sb.append("a2VfdW5zdWIoKTsKICAgIHJ4T2JqLl9fID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgnbmFtZScg");
    sb.append("aW4gcnhPYmopKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLm5hbWUgPT0g");
    sb.append("cnhPYmoubmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgY28gPSBnZXRfY29u");
    sb.append("bmVjdGlvbl9vYmoocnhPYmoubmFtZSk7CiAgICAgIHRoaXMubmFtZSA9IHJ4T2JqLm5hbWU7CiAgICAg");
    sb.append("IGNvLmNvbm5lY3RlZChmdW5jdGlvbiAoY3MpIHsKICAgICAgICBpZiAodGhpcy5yZW5kZXJlZCAmJiBr");
    sb.append("ZWVwT3BlbikgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBudWtlKHBhcmVudCk7");
    sb.append("CiAgICAgICAgZmlyZV91bnN1Yih1bnN1Yik7CiAgICAgICAgdmFyIHN0YXRlID0gewogICAgICAgICAg");
    sb.append("c2VydmljZTogcHJpb3JTdGF0ZS5zZXJ2aWNlLAogICAgICAgICAgZGF0YTogeyBjb25uZWN0aW9uOiBj");
    sb.append("bywgdHJlZTogY28udHJlZSwgZGVsdGE6IHt9LCBwYXJlbnQ6IG51bGwsIHBhdGg6IG51bGwgfSwKICAg");
    sb.append("ICAgICAgIHZpZXc6IG5ld19kZWx0YV9jb3B5KHByaW9yU3RhdGUudmlldyksCiAgICAgICAgICBjdXJy");
    sb.append("ZW50OiAiZGF0YSIKICAgICAgICB9OwogICAgICAgIGlmIChjcykgewogICAgICAgICAgdGhpcy5yZW5k");
    sb.append("ZXJlZCA9IHRydWU7CiAgICAgICAgICBjaGlsZE1ha2VyQ29ubmVjdGVkKHBhcmVudCwgc3RhdGUpOwog");
    sb.append("ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaGlsZE1ha2VyRGlzY29ubmVjdGVkKHBhcmVudCwgc3Rh");
    sb.append("dGUpOwogICAgICAgIH0KICAgICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsKICAgICAg");
    sb.append("ICAvLyBUT0RPOiByZXR1cm4gZmFsc2UgdG8gdW5zdWIKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg");
    sb.append("fS5iaW5kKHRoaXMpKTsKICAgIH0uYmluZCh7IG5hbWU6ICIiLCByZW5kZXJlZDpmYWxzZSB9KTsKICB9");
    sb.append("OwoKICAvLyBSVU5USU1FIHwgPHRlbXBsYXRlIG5hbWU9Ii4uLiI+CiAgc2VsZi5UUCA9IGZ1bmN0aW9u");
    sb.append("IChuYW1lLCBmb28pIHsKICAgIHRlbXBsYXRlc1tuYW1lXSA9IGZvbzsKICB9OwoKICAvLyBSVU5USU1F");
    sb.append("IHwgPHRhZyByeDp0ZW1wbGF0ZT0kbmFtZT4KICBzZWxmLlVUID0gZnVuY3Rpb24gKHBhcmVudCwgc3Rh");
    sb.append("dGUsIG5hbWUsIGNoaWxkX21ha2VyKSB7CiAgICB2YXIgZm9vID0gdGVtcGxhdGVzW25hbWVdOwogICAg");
    sb.append("aWYgKHR5cGVvZihmb28pID09ICJmdW5jdGlvbiIpIHsKICAgICAgZm9vKHBhcmVudCwgc3RhdGUsIGNo");
    sb.append("aWxkX21ha2VyKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoImZhaWxlZCB0byBmaW5k");
    sb.append("IHRlbXBsYXRlOiAiICsgbmFtZSk7CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IDx0YWcgcng6c3dp");
    sb.append("dGNoPXBhdGggLi4+CiAgc2VsZi5TVyA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIG5hbWUs");
    sb.append("IGNoaWxkcmVuTWFrZXIpIHsKICAgIHZhciBzd3N0ID0geyBwcmlvcjogbnVsbCB9OwogICAgYWRkX3Vu");
    sb.append("c3ViKHN3c3QpOwogICAgdmFyIHN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUg");
    sb.append("PT0gdGhpcy5wcmlvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnByaW9yID0g");
    sb.append("dmFsdWU7CiAgICAgIGZpcmVfdW5zdWIodGhpcyk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFy");
    sb.append("IHN0YXRlID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgY2hpbGRyZW5NYWtlcihwYXJlbnQsIHNlbGYu");
    sb.append("cEQoc3RhdGUpLCAiIiArIHZhbHVlKTsKICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCB0aGlzKTsK");
    sb.append("ICAgIH0uYmluZChzd3N0KTsKICAgIHN1YnNjcmliZShwcmlvclN0YXRlLCBuYW1lLCBzdWIpOwogIH07");
    sb.append("CgogIC8vIFJVTlRJTUUgfCA8dGFnIHJ4Oml0ZXJhdGU9cGF0aCAuLi4+CiAgc2VsZi5JVCA9IGZ1bmN0");
    sb.append("aW9uIChwYXJlbnREb20sIHN0YXRlLCBuYW1lLCBleHBhbmRWaWV3LCBtYWtlcikgewogICAgdmFyIGl0");
    sb.append("X3N0YXRlID0gc2VsZi5wSUUoc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcpOwogICAgdmFyIGRvbUJ5S2V5");
    sb.append("ID0ge307CiAgICB2YXIgdmlld1VuU3ViQnlLZXkgPSB7fTsKICAgIHZhciBraWxsID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gdmlld1VuU3ViQnlLZXkpIHsKICAgICAgICBmaXJlX3Vu");
    sb.append("c3ViKHZpZXdVblN1YkJ5S2V5W2tleV0pOwogICAgICAgIGRlbGV0ZSB2aWV3VW5TdWJCeUtleVtrZXld");
    sb.append("OwogICAgICB9CiAgICAgIGZvciAodmFyIGtleSBpbiBkb21CeUtleSkgewogICAgICAgIGRlbGV0ZSBk");
    sb.append("b21CeUtleVtrZXldOwogICAgICB9CiAgICB9OwoKICAgIHZhciBzdWIgPSB7CiAgICAgICIrIjogZnVu");
    sb.append("Y3Rpb24gKGtleSkgewogICAgICAgIHZhciBuZXdfc3RhdGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRl");
    sb.append("LCBrZXksIGV4cGFuZFZpZXcpKTsKICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAg");
    sb.append("ICAgdmFyIGRvbSA9IG1ha2VyKG5ld19zdGF0ZSk7CiAgICAgICAgZG9tQnlLZXlba2V5XSA9IGRvbTsK");
    sb.append("ICAgICAgICB2aWV3VW5TdWJCeUtleVtrZXldID0gdW5zdWI7CiAgICAgICAgcGFyZW50RG9tLmFwcGVu");
    sb.append("ZChkb20pOwogICAgICAgIHZhciBpdGVtX2RlbHRhID0gbmV3X3N0YXRlLmRhdGEuZGVsdGE7CiAgICAg");
    sb.append("ICAgbmV3X3N0YXRlLmRhdGEuZGVsdGEgPSB7fTsKICAgICAgICBzdWJzY3JpYmVfc3RhdGUobmV3X3N0");
    sb.append("YXRlLCB1bnN1Yik7CiAgICAgICAgaWYgKGV4cGFuZFZpZXcpIHsKICAgICAgICAgIHN0YXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUocGF0aF90byhuZXdfc3RhdGUudmlldywgeyIka2V5Ijoga2V5fSkpOwogICAgICAg");
    sb.append("IH07CiAgICAgICAgcmV0dXJuIGl0ZW1fZGVsdGE7CiAgICAgIH0sCiAgICAgICItIjogZnVuY3Rpb24g");
    sb.append("KGtleSkgewogICAgICAgIGlmIChrZXkgaW4gZG9tQnlLZXkpIHsKICAgICAgICAgIHBhcmVudERvbS5y");
    sb.append("ZW1vdmVDaGlsZChkb21CeUtleVtrZXldKTsKICAgICAgICAgIGRlbGV0ZSBkb21CeUtleVtrZXldOwog");
    sb.append("ICAgICAgIH0KICAgICAgICBpZiAoa2V5IGluIHZpZXdVblN1YkJ5S2V5KSB7CiAgICAgICAgICBmaXJl");
    sb.append("X3Vuc3ViKHZpZXdVblN1YkJ5S2V5W2tleV0pOwogICAgICAgICAgZGVsZXRlIHZpZXdVblN1YkJ5S2V5");
    sb.append("W2tleV07CiAgICAgICAgfQogICAgICB9LAogICAgICAifiI6IGZ1bmN0aW9uIChvcmQpIHsKICAgICAg");
    sb.append("ICB2YXIgdmFsdWVUb1NldCA9IGZhbHNlOwogICAgICAgIC8vIHRoZSB2YWx1ZXMgYXJlIGZpbGxpbmcg");
    sb.append("dXAgQUZURXIgdGhlIHZhbHVlIHdhcyBzZXQsCiAgICAgICAgLy8gc28gZGV0ZWN0IHRoZSBhYnNlbmNl");
    sb.append("IG9mIGEgdmFsdWUgYWxvbmcgd2l0aCB0aGUgZXhpc3RlbmNlIG9mIGEgdmFsdWUKICAgICAgICBpZiAo");
    sb.append("IXBhcmVudERvbS52YWx1ZSAmJiBwYXJlbnREb20ucnh2YWx1ZSAhPSAiIikgewogICAgICAgICAgdmFs");
    sb.append("dWVUb1NldCA9IHBhcmVudERvbS5yeHZhbHVlOwogICAgICAgICAgLy8gdGhpcyB2YWx1ZSwgd2Ugd2Fu");
    sb.append("dCB0byByZXN0b3JlIG9uY2UKICAgICAgICB9CiAgICAgICAgbnVrZShwYXJlbnREb20pOwogICAgICAg");
    sb.append("IGlmIChvcmQgPT0gbnVsbCkgewogICAgICAgICAga2lsbCgpOwogICAgICAgICAgcmV0dXJuOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9yZC5sZW5ndGg7IGsrKykgewogICAgICAg");
    sb.append("ICAgcGFyZW50RG9tLmFwcGVuZChkb21CeUtleVtvcmRba11dKTsKICAgICAgICB9CiAgICAgICAgaWYg");
    sb.append("KHZhbHVlVG9TZXQpIHsKICAgICAgICAgIHBhcmVudERvbS52YWx1ZSA9IHZhbHVlVG9TZXQ7CiAgICAg");
    sb.append("ICAgfQogICAgICAgIHBhcmVudERvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgib3JkZXJlZCIpKTsK");
    sb.append("ICAgICAgfQogICAgfTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FOiA8dGFnIC4uLiByeDptb25pdG9yPSJzdGF0ZS1wYXRoIiByeDpyaXNlPSJjb21tYW5kcy4u");
    sb.append("LiIgcng6ZmFsbD0iY29tbWFuZHMuLi4iCiAgc2VsZi5NTiA9IGZ1bmN0aW9uIChkb20sIHN0YXRlLCBu");
    sb.append("YW1lLCBza2lwRmlyc3QsIGRlbGF5KSB7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAg");
    sb.append("ICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBuID0gMDsKICAgICAg");
    sb.append("ICB0cnkgewogICAgICAgICAgbiA9IHR5cGVvZiAodmFsdWUpID09ICdudW1iZXInID8gdmFsdWUgOiBw");
    sb.append("YXJzZUludCh2YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAoZmFpbGVkUGFyc2luZ04pIHsKICAgICAgICB9");
    sb.append("CiAgICAgICAgaWYgKHRoaXMuZmlyc3QpIHsKICAgICAgICAgIHRoaXMuYXQgPSBuOwogICAgICAgICAg");
    sb.append("dGhpcy5maXJzdCA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAo");
    sb.append("dGhpcy5hdCA8IG4pIHsKICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KCJyaXNlIik7CiAgICAgICAg");
    sb.append("ICBkb20uZGlzcGF0Y2hFdmVudChlKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYXQgPiBuKSB7CiAg");
    sb.append("ICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgiZmFsbCIpOwogICAgICAgICAgZG9tLmRpc3BhdGNoRXZl");
    sb.append("bnQoZSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYXQgPSBuOwogICAgICB9LmJpbmQodGhpcyksIHRo");
    sb.append("aXMuZGVsYXkpOwogICAgfS5iaW5kKHthdDotMSwgZmlyc3Q6c2tpcEZpcnN0LCBkZWxheTpkZWxheSA/");
    sb.append("IGRlbGF5IDogMTB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9OwoKICAvLyBS");
    sb.append("VU5USU1FOiA8dGFnIC4uLiByeDpyZXBlYXQ9JD4KICBzZWxmLlJQID0gZnVuY3Rpb24gKHBhcmVudERv");
    sb.append("bSwgc3RhdGUsIG5hbWUsIGV4cGFuZFZpZXcsIG1ha2VyKSB7CiAgICB2YXIgaXRfc3RhdGUgPSBzZWxm");
    sb.append("LnBJRShzdGF0ZSwgIiQiICsgbmFtZSwgZXhwYW5kVmlldyk7CiAgICB2YXIgc3ViID0gZnVuY3Rpb24g");
    sb.append("KHZhbHVlKSB7CiAgICAgIHZhciBuID0gMDsKICAgICAgdHJ5IHsKICAgICAgICBuID0gdHlwZW9mICh2");
    sb.append("YWx1ZSkgPT0gJ251bWJlcicgPyB2YWx1ZSA6IHBhcnNlSW50KHZhbHVlKTsKICAgICAgfSBjYXRjaCAo");
    sb.append("ZmFpbGVkUGFyc2luZ04pIHsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy5hdCA8IG4gLSAxKSB7CiAg");
    sb.append("ICAgICAgdGhpcy5hdCArKzsKICAgICAgICB0aGlzLnRyYWNrICsrOwogICAgICAgIHZhciBuZXdfc3Rh");
    sb.append("dGUgPSBmb3JrKHNlbGYucElFKGl0X3N0YXRlLCB0aGlzLnRyYWNrICsgIiIsIGV4cGFuZFZpZXcpKTsK");
    sb.append("ICAgICAgICB2YXIgdW5zdWIgPSBtYWtlX3Vuc3ViKCk7CiAgICAgICAgdmFyIGRvbSA9IG1ha2VyKHNl");
    sb.append("bGYucEQobmV3X3N0YXRlKSk7CiAgICAgICAgdGhpcy5pdGVtc1t0aGlzLmF0XSA9IHt1bnN1Yjp1bnN1");
    sb.append("YiwgZG9tOmRvbX07CiAgICAgICAgcGFyZW50RG9tLmFwcGVuZChkb20pOwogICAgICAgIGlmIChleHBh");
    sb.append("bmRWaWV3KSB7CiAgICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKHBhdGhfdG8obmV3X3N0YXRl");
    sb.append("LnZpZXcsIHsiJGluZGV4IjogdGhpcy50cmFja30pKTsKICAgICAgICB9CiAgICAgICAgc3Vic2NyaWJl");
    sb.append("X3N0YXRlKG5ld19zdGF0ZSwgdW5zdWIpOwogICAgICB9CiAgICAgIHdoaWxlICh0aGlzLmF0ID49IG4g");
    sb.append("JiYgdGhpcy5hdCA+PSAwKSB7CiAgICAgICAgZmlyZV91bnN1Yih0aGlzLml0ZW1zW3RoaXMuYXRdLnVu");
    sb.append("c3ViKTsKICAgICAgICBwYXJlbnREb20ucmVtb3ZlQ2hpbGQodGhpcy5pdGVtc1t0aGlzLmF0XS5kb20p");
    sb.append("OwogICAgICAgIHRoaXMuaXRlbXNbdGhpcy5hdF0gPSBudWxsOwogICAgICAgIGRlbGV0ZSB0aGlzLml0");
    sb.append("ZW1zW3RoaXMuYXRdOwogICAgICAgIHRoaXMuYXQtLTsKICAgICAgfQogICAgfS5iaW5kKHtpdGVtczpb");
    sb.append("XSwgYXQ6LTEsIHRyYWNrOjB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgc3ViKTsKICB9CiAg");
    sb.append("dmFyIGZpbmQgPSBmdW5jdGlvbiAoc3RhdGUsIGNoYW5uZWwsIGtleSwgdmFsdWUpIHsKICAgIGlmIChj");
    sb.append("aGFubmVsIGluIHN0YXRlWyJkYXRhIl0uY29ubmVjdGlvbi5vdXRzdGFuZGluZykgewogICAgICB2YXIg");
    sb.append("YXJyID0gc3RhdGVbImRhdGEiXS5jb25uZWN0aW9uLm91dHN0YW5kaW5nW2NoYW5uZWxdLm9wdGlvbnM7");
    sb.append("CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXJyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIHMg");
    sb.append("PSBhcnJba107CiAgICAgICAgaWYgKGtleSBpbiBzICYmIHNba2V5XSA9PSB2YWx1ZSkgewogICAgICAg");
    sb.append("ICAgcmV0dXJuIHM7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSBlbHNl");
    sb.append("IHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfTsKCiAgdmFyIGN1c3RvbXMgPSB7fTsKCiAgc2Vs");
    sb.append("Zi5QUkNVQUMgPSBmdW5jdGlvbiAobmFtZSwgZm9vKSB7CiAgICBjdXN0b21zW25hbWVdID0gZm9vOwog");
    sb.append("IH07CgogIHNlbGYuZXhDQyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlLCBjdXN0b21Db21tYW5k");
    sb.append("TmFtZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("aWYgKGN1c3RvbUNvbW1hbmROYW1lIGluIGN1c3RvbXMpIHsKICAgICAgICBjdXN0b21zW2N1c3RvbUNv");
    sb.append("bW1hbmROYW1lXShzdGF0ZSwgZG9tKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gY3VzdG9tIGV2");
    sb.append("ZW50IG9uIGZvcm1zOyByeDpzdWNjZXNzPSIuLi4iCiAgdmFyIGZpcmVfc3VjY2VzcyA9IGZ1bmN0aW9u");
    sb.append("IChmb3JtKSB7CiAgICBmb3JtLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJzdWNjZXNzIikpOwogICAg");
    sb.append("Zm9ybS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgic3VibWl0dGVkIikpOwogIH07CiAgc2VsZi5maXJl");
    sb.append("X3N1Y2Nlc3MgPSBmaXJlX3N1Y2Nlc3M7CgogIC8vIGN1c3RvbSBldmVudCBvbiBmb3Jtczsgcng6ZmFp");
    sb.append("bGVkPSIuLi4iCiAgdmFyIGZpcmVfZmFpbHVyZSA9IGZ1bmN0aW9uIChkb20sIG1zZykgewogICAgdmFy");
    sb.append("IGUgPSBuZXcgRXZlbnQoImZhaWx1cmUiKTsKICAgIGUubWVzc2FnZSA9IG1zZzsKICAgIGNvbnNvbGUu");
    sb.append("ZXJyb3IobXNnKTsKICAgIGRvbS5kaXNwYXRjaEV2ZW50KGUpOwogIH07CiAgc2VsZi5maXJlX2ZhaWx1");
    sb.append("cmUgPSBmaXJlX2ZhaWx1cmU7CgogIHNlbGYuYUNDID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBjdXN0");
    sb.append("b21Db21tYW5kTmFtZSkgewogICAgdmFyIHNpZ25hbCA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgaWYg");
    sb.append("KHNpZ25hbCA9PSBudWxsKSB7CiAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCBtc2cpOwogICAgICB9CiAgICB9OwogICAgZm9ybS5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGlmIChjdXN0b21D");
    sb.append("b21tYW5kTmFtZSBpbiBjdXN0b21zKSB7CiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAg");
    sb.append("ICAgdmFyIG9iaiA9IGdldF9mb3JtKGZvcm0sIHt9KTsKICAgICAgICBjdXN0b21zW2N1c3RvbUNvbW1h");
    sb.append("bmROYW1lXShvYmosIHN0YXRlLCBzaWduYWwsIHNlbGYpOwogICAgICAgIGZpcmVfc3VjY2Vzcyhmb3Jt");
    sb.append("KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCB0byBmaW5k");
    sb.append("ICciICsgY3VzdG9tQ29tbWFuZE5hbWUgKyAiJyIpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9OwoK");
    sb.append("ICB2YXIgbWFrZV9jaG9pY2VfYXJyYXkgPSBmdW5jdGlvbiAoc3RhdGUsIGNoYW5uZWwpIHsKICAgIHZh");
    sb.append("ciBjaG9pY2VzID0gc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2ljZXM7CiAgICBpZiAoIShjaGFubmVs");
    sb.append("IGluIGNob2ljZXMpKSB7CiAgICAgIGNob2ljZXNbY2hhbm5lbF0gPSB7fTsKICAgIH0KICAgIHZhciBj");
    sb.append("aG9pY2UgPSBjaG9pY2VzW2NoYW5uZWxdOwogICAgdmFyIGFyciA9IFtdOwogICAgZm9yICh2YXIgaWQg");
    sb.append("aW4gY2hvaWNlKSB7CiAgICAgIGFyci5wdXNoKGNob2ljZVtpZF0pOwogICAgfQogICAgcmV0dXJuIGFy");
    sb.append("cjsKICB9CgogIHNlbGYuZXhGSU4gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgY2hhbm5lbCkg");
    sb.append("ewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFy");
    sb.append("ciA9IG1ha2VfY2hvaWNlX2FycmF5KHN0YXRlLCBjaGFubmVsKTsKICAgICAgdmFyIGNsZWFyID0gZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24uY2hvaWNlc1tjaGFu");
    sb.append("bmVsXTsKICAgICAgICBzdGF0ZS5kYXRhLmNvbm5lY3Rpb24ub25jaG9pY2VzKGNoYW5uZWwsIHt9KTsK");
    sb.append("ICAgICAgfTsKICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIGFyciwg");
    sb.append("ewogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNsZWFyKCk7CiAg");
    sb.append("ICAgICAgICBjb25zb2xlLmxvZygiZmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0sCiAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGNsZWFyKCk7CiAgICAgICAgICBj");
    sb.append("b25zb2xlLmxvZygiU3VjY2Vzc3wiICsgcGF5bG9hZC5zZXEpOwogICAgICAgIH0KICAgICAgfSk7CiAg");
    sb.append("ICB9KTsKICB9OwoKICBzZWxmLkZJTiA9IGZ1bmN0aW9uIChwYXJlbnQsIHByaW9yU3RhdGUsIGNoYW5u");
    sb.append("ZWwsIHNob3VsZEJlLCBfZXhwYW5kLCBtYWtlclRydWUsIG1ha2VyRmFsc2UpIHsKICAgIHZhciBmaW5h");
    sb.append("bGl6ZSA9IHsKICAgICAgb3duZXI6IHBhcmVudCwKICAgICAgc2hvd246IGZhbHNlCiAgICB9OwogICAg");
    sb.append("YWRkX3Vuc3ViKGZpbmFsaXplKTsKCiAgICB2YXIgY2hhbmdlID0gZnVuY3Rpb24gKHNob3cpIHsKICAg");
    sb.append("ICAgZmlyZV91bnN1YihmaW5hbGl6ZSk7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRl");
    sb.append("ID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAg");
    sb.append("bWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2Uo");
    sb.append("cGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBmaW5hbGl6");
    sb.append("ZSk7CiAgICB9OwoKICAgIGZpbmFsaXplLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG91");
    sb.append("dCA9IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLm91dHN0YW5kaW5nW2NoYW5uZWxdOwogICAgICBp");
    sb.append("ZiAoIShvdXQpKSByZXR1cm47CiAgICAgIHZhciBhcnIgPSBtYWtlX2Nob2ljZV9hcnJheShwcmlvclN0");
    sb.append("YXRlLCBjaGFubmVsKTsKICAgICAgdmFyIHJlc3VsdCA9ICgnbWluJyBpbiBvdXQgJiYgJ21heCcgaW4g");
    sb.append("b3V0KSA/IChvdXQubWluIDw9IGFyci5sZW5ndGggJiYgYXJyLmxlbmd0aCA8PSBvdXQubWF4KSA6IHRy");
    sb.append("dWU7CiAgICAgIGlmIChmaW5hbGl6ZS5ldmFsICE9IHJlc3VsdCkgewogICAgICAgIGZpbmFsaXplLmV2");
    sb.append("YWwgPSByZXN1bHQ7CiAgICAgICAgY2hhbmdlKGZpbmFsaXplLmV2YWwpOwogICAgICB9CiAgICB9OwoK");
    sb.append("ICAgIHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZV9jaG9pY2UoY2hhbm5lbCwgZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICBmaW5hbGl6ZS51cGRhdGUoKTsKICAgICAgLy8gVE9ETzogcmV0dXJuIHdo");
    sb.append("ZXRoZXIgb3Igbm90IHRoaXMgbmVlZHMgdG8gYmUgYXhlZAogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0p");
    sb.append("OwogIH07CgogIHZhciBmb3JtX29mID0gZnVuY3Rpb24oZG9tKSB7CiAgICB2YXIgbmV4dCA9IGRvbTsK");
    sb.append("ICAgIHdoaWxlIChuZXh0ICE9IG51bGwpIHsKICAgICAgaWYgKG5leHQudGFnTmFtZS50b1VwcGVyQ2Fz");
    sb.append("ZSgpID09ICJGT1JNIikgewogICAgICAgIHJldHVybiBuZXh0OwogICAgICB9CiAgICAgIG5leHQgPSBu");
    sb.append("ZXh0LnBhcmVudEVsZW1lbnQ7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHZhciByZWdfZXZl");
    sb.append("bnQgPSBmdW5jdGlvbiAoc3RhdGUsIGRvbSwgdHlwZSwgcnVubmFibGUpIHsKICAgIC8vIFRPRE86IGNv");
    sb.append("bm5lY3RlZC9kaXNjb25uZWN0ZWQgYXMgc3BlY2lhbCBldmVudHMgdG8gY29uc2lkZXIKICAgIGlmICh0");
    sb.append("eXBlID09ICJjaGVjayIgfHwgdHlwZSA9PSAidW5jaGVjayIpIHsKICAgICAgZG9tLmFkZEV2ZW50TGlz");
    sb.append("dGVuZXIoImNoYW5nZSIsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh0aGlzLnR5cGUgPT0gImNoZWNr");
    sb.append("IiAmJiBkb20uY2hlY2tlZCkgewogICAgICAgICAgcnVubmFibGUoKTsKICAgICAgICB9IGVsc2UgaWYg");
    sb.append("KHRoaXMudHlwZSA9PSAidW5jaGVjayIgJiYgIWRvbS5jaGVja2VkKSB7CiAgICAgICAgICBydW5uYWJs");
    sb.append("ZSgpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHt0eXBlOnR5cGV9KSk7CiAgICB9IGVsc2UgaWYgKHR5");
    sb.append("cGUgPT0gImxvYWQiKSB7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJ1bm5hYmxlLCAxKTsKICAgIH0g");
    sb.append("ZWxzZSBpZiAodHlwZT09InN1Ym1pdCIgfHwgdHlwZT09InN1Ym1pdHRlZCIpIHsKICAgICAgd2luZG93");
    sb.append("LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGZvcm0gPSBmb3JtX29mKGRvbSk7CiAg");
    sb.append("ICAgICAgaWYgKGZvcm0pIHsKICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAg");
    sb.append("ICAgICAgICAgICBydW5uYWJsZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0sIDEpOwogICAgfSBlbHNlIGlmICh0eXBlLnN0YXJ0c1dpdGgoImRlbGF5OiIpKSB7CiAg");
    sb.append("ICAgIC8vIGRlbGF5IHdpbGwgcnVuIGFmdGVyICRkZWxheVRpbWVNUyBJRiB0aGUgZG9tIGVsZW1lbnQg");
    sb.append("aXMgc3RpbGwgdmlzaWJsZSB0byB0aGUgZG9jdW1lbnQKICAgICAgdmFyIGRlbGF5VGltZU1TID0gcGFy");
    sb.append("c2VJbnQodHlwZS5zdWJzdHJpbmcoNikpOwogICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgICAgcnVu");
    sb.append("bmFibGUoKTsKICAgICAgICB9CiAgICAgIH0sIGRlbGF5VGltZU1TKTsKICAgIH0gZWxzZSBpZiAodHlw");
    sb.append("ZSA9PSAic2V0dGxlIikgewogICAgICBzdGF0ZS5kYXRhLnRyZWUuYWRkX29uX3NldHRsZShmdW5jdGlv");
    sb.append("bigpIHsKICAgICAgICAvLyBpZiB0aGUgRE9NIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LCB0aGVu");
    sb.append("IHJ1biB0aGUgY29kZQogICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGRvbSkpIHsKICAg");
    sb.append("ICAgICAgIHJ1bm5hYmxlKCk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAg");
    sb.append("cmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PSAic2V0dGxlLW9uY2Ui");
    sb.append("KSB7CiAgICAgIHN0YXRlLmRhdGEudHJlZS5hZGRfb25fc2V0dGxlKGZ1bmN0aW9uKCkgewogICAgICAg");
    sb.append("IC8vIGlmIHRoZSBET00gaGFzIGJlZW4gYWRkZWQgdG8gdGhlIGJvZHksIHRoZW4gcnVuIHRoZSBjb2Rl");
    sb.append("CiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY29udGFpbnMoZG9tKSkgewogICAgICAgICAgcnVubmFi");
    sb.append("bGUoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIGlmICh0eXBlID09ICJjbGljayIpIHsKICAgICAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0");
    sb.append("eXBlLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgdmFyIGZpcmUgPSB0cnVlOwogICAgICAgICAg");
    sb.append("dHJ5IHsKICAgICAgICAgICAgdmFyIGVsID0gZXZlbnQudGFyZ2V0OwogICAgICAgICAgICB3aGlsZSAo");
    sb.append("ZWwgJiYgZmlyZSkgewogICAgICAgICAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ByZXZlbnQ6Y2xp");
    sb.append("Y2snKSkgewogICAgICAgICAgICAgICAgZmlyZSA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0");
    sb.append("Y2ggKGV4KSB7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmlyZSkgewogICAgICAgICAgICBydW5u");
    sb.append("YWJsZSgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGRvbS5h");
    sb.append("ZGRFdmVudExpc3RlbmVyKHR5cGUsIHJ1bm5hYmxlKTsKICAgICAgfQogICAgfQogIH0KCgoKICAvLyBS");
    sb.append("VU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gc2V0Om5hbWU9dmFsdWUgLi4uIj4KICBzZWxmLmJT");
    sb.append("ID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHZhbHVlKSB7CiAgICBpZiAodHlwZW9mICh2YWx1");
    sb.append("ZSkgPT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gewogICAgICAgIHJ1bjogZnVuY3Rpb24oKSB7");
    sb.append("fSwgLy8gZG8gbm90aGluZywgdGhpcyBpcyBhIHNpbXBsZSBtZXJnZQogICAgICAgIG1lcmdlOiBmdW5j");
    sb.append("dGlvbigpIHsKICAgICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICAgIG9ialtuYW1lXSA9IHZhbHVl");
    sb.append("KCk7CiAgICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gZGVsdGE7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB2YXIgb2Jq");
    sb.append("ID0ge307CiAgICAgIG9ialtuYW1lXSA9IHZhbHVlOwogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0");
    sb.append("YXRlLnZpZXcsIG9iaik7CiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuOiBmdW5jdGlvbigpIHt9LCAv");
    sb.append("LyBkbyBub3RoaW5nLCB0aGlzIGlzIGEgc2ltcGxlIG1lcmdlCiAgICAgICAgbWVyZ2U6IGZ1bmN0aW9u");
    sb.append("KCkgeyByZXR1cm4gZGVsdGE7IH0KICAgICAgfQogICAgfQogIH07CgogIHZhciBtZXJnZV9kZWx0YSA9");
    sb.append("IGZ1bmN0aW9uKGEsIGIpIHsKICAgIGlmICh0eXBlb2YoYSkgPT0gIm9iamVjdCIgJiYgdHlwZW9mKGIp");
    sb.append("ID09ICJvYmplY3QiKSB7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgZm9yICh2YXIgayBpbiBh");
    sb.append("KSB7CiAgICAgICAgaWYgKGsgaW4gYikgewogICAgICAgICAgcmVzdWx0W2tdID0gbWVyZ2VfZGVsdGEo");
    sb.append("YVtrXSwgYltrXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdFtrXSA9IGFba107CiAg");
    sb.append("ICAgICAgfQogICAgICB9CiAgICAgIGZvcih2YXIgayBpbiBiKSB7CiAgICAgICAgaWYgKCEoayBpbiBh");
    sb.append("KSkgewogICAgICAgICAgcmVzdWx0W2tdID0gYltrXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0");
    sb.append("dXJuIHJlc3VsdDsKICAgIH0KICAgIHJldHVybiBhOwogIH07CiAgc2VsZi5NRCA9IG1lcmdlX2RlbHRh");
    sb.append("OwoKICBzZWxmLm9uQiA9IGZ1bmN0aW9uKGRvbSwgdHlwZSwgc3RhdGUsIGFycikgewogICAgcmVnX2V2");
    sb.append("ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgc3VtID0ge307CiAgICAg");
    sb.append("IGZvciAodmFyIGsgPSAwOyBrIDwgYXJyLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdmFyIGNtZCA9IGFy");
    sb.append("cltrXTsKICAgICAgICBjbWQucnVuKCk7CiAgICAgICAgdmFyIHRvTWVyZ2UgPSBjbWQubWVyZ2UoKQog");
    sb.append("ICAgICAgIHN1bSA9IG1lcmdlX2RlbHRhKHN1bSwgdG9NZXJnZSk7CiAgICAgIH0KICAgICAgc3RhdGUu");
    sb.append("dmlldy50cmVlLnVwZGF0ZShzdW0pOwogICAgfSk7CiAgfTsKCiAgLy8gY2hvb3NlCiAgc2VsZi5leENI");
    sb.append("ID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUsIGNoYW5uZWwsIGtleSkgewogICAgdmFy");
    sb.append("IGRlY2lkZSA9IHsgdmFsdWU6IG51bGwgfTsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBm");
    sb.append("dW5jdGlvbiAoKSB7CiAgICAgIHZhciByZXN1bHQgPSBmaW5kKHN0YXRlLCBjaGFubmVsLCBrZXksIGRl");
    sb.append("Y2lkZS52YWx1ZSk7CiAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewogICAgICAgIHZhciBjaG9pY2Vz");
    sb.append("ID0gc3RhdGUuZGF0YS5jb25uZWN0aW9uLmNob2ljZXM7CiAgICAgICAgaWYgKCEoY2hhbm5lbCBpbiBj");
    sb.append("aG9pY2VzKSkgewogICAgICAgICAgY2hvaWNlc1tjaGFubmVsXSA9IHt9OwogICAgICAgIH0KICAgICAg");
    sb.append("ICB2YXIgY2hvaWNlID0gY2hvaWNlc1tjaGFubmVsXTsKICAgICAgICB2YXIgdmFsS2V5ID0gcmVzdWx0");
    sb.append("W2tleV07CiAgICAgICAgaWYgKHZhbEtleSBpbiBjaG9pY2UpIHsKICAgICAgICAgIGRlbGV0ZSBjaG9p");
    sb.append("Y2VbdmFsS2V5XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hvaWNlW3ZhbEtleV0gPSByZXN1");
    sb.append("bHQ7CiAgICAgICAgfQogICAgICAgIHN0YXRlLmRhdGEuY29ubmVjdGlvbi5vbmNob2ljZXMoY2hhbm5l");
    sb.append("bCwgY2hvaWNlKTsKICAgICAgfQogICAgfSk7CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0");
    sb.append("aW9uICh2YWx1ZSkgewogICAgICBkZWNpZGUudmFsdWUgPSB2YWx1ZTsKICAgIH0pOwogIH07CgogIC8v");
    sb.append("IGRlY2lkZQogIHNlbGYuZXhEID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUsIGNoYW5u");
    sb.append("ZWwsIGtleSkgewogICAgdmFyIGRlY2lkZSA9IHsgdmFsdWU6IG51bGwgfTsKICAgIHJlZ19ldmVudChz");
    sb.append("dGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciByZXN1bHQgPSBmaW5kKHN0YXRl");
    sb.append("LCBjaGFubmVsLCBrZXksIGRlY2lkZS52YWx1ZSk7CiAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkgewog");
    sb.append("ICAgICAgIGxldCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIHN0YXRlLmRhdGEuY29u");
    sb.append("bmVjdGlvbi5wdHIuc2VuZChjaGFubmVsLCByZXN1bHQsIHsKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0");
    sb.append("aW9uIChyZWFzb24pIHsKCiAgICAgICAgICB9LAogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBh");
    sb.append("eWxvYWQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3N8IiArIHBheWxvYWQuc2VxICsg");
    sb.append("IjtsYXRlbmN5PSIgKyAocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCkpOwogICAgICAgICAgfQogICAg");
    sb.append("ICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIHN1YnNjcmliZShzdGF0ZSwgbmFtZSwgZnVuY3Rpb24g");
    sb.append("KHZhbHVlKSB7CiAgICAgIGRlY2lkZS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgfTsKCiAgLy8gUlVO");
    sb.append("VElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIGZpcmU6Y2hhbm5lbCAuLi4iIC4uLj4KICBzZWxmLm9u");
    sb.append("RlIgPSBmdW5jdGlvbiAoc3RhdGUsIGRvbSwgdHlwZSwgY2hhbm5lbCkgewogICAgcmVnX2V2ZW50KHN0");
    sb.append("YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0");
    sb.append("ci5zZW5kKGNoYW5uZWwsIHt9LCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkgewogICAgICAg");
    sb.append("ICAgY29uc29sZS5sb2coIlNFTlQgJyIgKyBjaGFubmVsICsgIiciKTsKICAgICAgICB9LAogICAgICAg");
    sb.append("IGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJGQUlMRUQg");
    sb.append("VE8gRklSRSAnIiArIGNoYW5uZWwgKyAiJyBEVUU6IiArIHJlYXNvbik7ICcnCiAgICAgICAgfQogICAg");
    sb.append("ICB9KTsKICAgIH0pOwogIH0KCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpldmVudD0iLi4uIGZvcmNl");
    sb.append("LWF1dGg9bmFtZSx0b2tlbiAuLi4iPgogIHNlbGYub25GT1JDRV9BVVRIID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("dHlwZSwgaWRlbnRpdHlOYW1lLCBpZGVudGl0eSkgewogICAgcmVnX2V2ZW50KG51bGwsIGRvbSwgdHlw");
    sb.append("ZSwgZnVuY3Rpb24gKCkgewogICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSBpZGVudGl0eTsK");
    sb.append("ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUsIGlkZW50");
    sb.append("aXR5KTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBzZXQ6");
    sb.append("bmFtZT12YWx1ZSAuLi4iPgogIHNlbGYub25TID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5h");
    sb.append("bWUsIHZhbHVlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewog");
    sb.append("ICAgICB2YXIgb2JqID0ge307CiAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSAiZnVuY3Rpb24iKSB7");
    sb.append("CiAgICAgICAgb2JqW25hbWVdID0gdmFsdWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvYmpbbmFt");
    sb.append("ZV0gPSB2YWx1ZTsKICAgICAgfQogICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9i");
    sb.append("aik7CiAgICAgIHN0YXRlW3N0YXRlLmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwog");
    sb.append("IH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0ZTpuYW1lIC4uLiI+CiAgc2Vs");
    sb.append("Zi5vblRNID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUsIG94LCBveSkgewogICAgcmVn");
    sb.append("X2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgb2JqID0g");
    sb.append("e307CiAgICAgIG9ialtuYW1lXSA9IHsKICAgICAgICB4OmV2ZW50LmNsaWVudFggKyB3aW5kb3cuc2Ny");
    sb.append("b2xsWCArIG94LAogICAgICAgIHk6ZXZlbnQuY2xpZW50WSArIHdpbmRvdy5zY3JvbGxZICsgb3kKICAg");
    sb.append("ICAgfTsKICAgICAgdmFyIGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0");
    sb.append("ZVtzdGF0ZS5jdXJyZW50XS50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICB9KTsKICB9OwoKICAvLyBSVU5U");
    sb.append("SU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIuLi4gdGU6bmFtZSAuLi4iPgogIHNlbGYub25URSA9IGZ1bmN0");
    sb.append("aW9uIChkb20sIHR5cGUsIHN0YXRlLCBuYW1lKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlw");
    sb.append("ZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0g");
    sb.append("ZXZlbnQubWVzc2FnZTsKICAgICAgaWYgKGV2ZW50Lm1lc3NhZ2UpIHsKICAgICAgICB2YXIgZGVsdGEg");
    sb.append("PSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJl");
    sb.append("ZS51cGRhdGUoZGVsdGEpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4u");
    sb.append("IHJ4OmV2ZW50PSIuLi4gcmVzZXQgLi4uIj4KICBzZWxmLm9SU1QgPSBmdW5jdGlvbiAoZG9tLCB0eXBl");
    sb.append("LCBzdGF0ZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20sIHR5cGUsIGZ1bmN0aW9uIChldmVudCkg");
    sb.append("ewogICAgICB2YXIgZiA9IGZvcm1fb2YoZG9tKTsKICAgICAgaWYgKGYgIT0gbnVsbCkgewogICAgICAg");
    sb.append("IGYucmVzZXQoKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElNRTogPHRhZyAuLiByeDpl");
    sb.append("dmVudD0iLi4uIHJlc2V0IC4uLiI+CiAgc2VsZi5vUkxEID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgc3Rh");
    sb.append("dGUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAg");
    sb.append("ICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4");
    sb.append("OmV2ZW50PSIuLi4gc3VibWl0IC4uLiI+CiAgc2VsZi5vU0JNVCA9IGZ1bmN0aW9uIChkb20sIHR5cGUs");
    sb.append("IHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7");
    sb.append("CiAgICAgIHZhciBmID0gZm9ybV9vZihkb20pOwogICAgICBpZiAoZiAhPSBudWxsKSB7CiAgICAgICAg");
    sb.append("dmFyIGUgPSBuZXcgU3VibWl0RXZlbnQoJ3N1Ym1pdCcsIHsKICAgICAgICAgICdidWJibGVzJyAgICA6");
    sb.append("IHRydWUsCiAgICAgICAgICAnY2FuY2VsYWJsZScgOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgZi5k");
    sb.append("aXNwYXRjaEV2ZW50KGUpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBzZWxmLm9OSyA9IGZ1bmN0aW9u");
    sb.append("IChkb20sIHR5cGUsIHN0YXRlKSB7CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rp");
    sb.append("b24gKGV2ZW50KSB7CiAgICAgIHZhciBjdXIgPSBkb207CiAgICAgIHdoaWxlIChjdXIudGFnTmFtZS50");
    sb.append("b1VwcGVyQ2FzZSgpICE9ICJOVUNMRUFSIikgewogICAgICAgIGN1ciA9IGN1ci5wYXJlbnRFbGVtZW50");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChjdXIgIT0gbnVsbCkgewogICAgICAgIG51a2UoY3VyKTsKICAgICAg");
    sb.append("fQogICAgfSk7CiAgfTsKCgogIHNlbGYub1VDSyA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIHN0YXRlKSB7");
    sb.append("CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGRv");
    sb.append("bS5jaGVja2VkID0gZmFsc2U7CiAgICB9KTsKICB9OwoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2");
    sb.append("ZW50PSIuLi4gZ290bzp1cmkgLi4uIj4KICBzZWxmLm9uR08gPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBz");
    sb.append("dGF0ZSwgdmFsdWUpIHsKICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIHZhciB1cmkgPSAodHlwZW9mICh2YWx1ZSkgPT0gImZ1bmN0aW9uIikgPyB2YWx1ZSgpIDog");
    sb.append("dmFsdWU7CiAgICAgIHNlbGYuZ290byh1cmksIGZhbHNlKTsKICAgIH0pOwogIH07CgogIC8vIFJVTlRJ");
    sb.append("TUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiB0b2dnbGU6bmFtZSAuLi4iPgogIHNlbGYub25UID0gZnVu");
    sb.append("Y3Rpb24gKGRvbSwgdHlwZSwgc3RhdGUsIG5hbWUpIHsKICAgIHZhciBjYXB0dXJlZCA9IHsgdmFsdWU6");
    sb.append("IGZhbHNlIH07CiAgICByZWdfZXZlbnQoc3RhdGUsIGRvbSwgdHlwZSwgZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICB2YXIgb2JqID0ge307CiAgICAgIG9ialtuYW1lXSA9ICFjYXB0dXJlZC52YWx1ZTsKICAgICAgdmFy");
    sb.append("IGRlbHRhID0gcGF0aF90byhzdGF0ZS52aWV3LCBvYmopOwogICAgICBzdGF0ZS52aWV3LnRyZWUudXBk");
    sb.append("YXRlKGRlbHRhKTsKICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBuYW1lLCBmdW5jdGlvbiAodmFs");
    sb.append("dWUpIHsKICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWx1ZSA9PSB0cnVlOwogICAgfSk7CiAgfTsKCiAg");
    sb.append("dmFyIG9yZGVyX3RvZ2dsZSA9IGZ1bmN0aW9uKHByaW9yLCB2YWwpIHsKICAgIHZhciBwYXJ0cyA9IHBy");
    sb.append("aW9yLnNwbGl0KCIsIik7CiAgICB2YXIgcHJlZml4ID0gJyc7CiAgICB2YXIgbmV4dCA9IFsiIl07CiAg");
    sb.append("ICBmb3IgKHZhciBrID0gMDsgayA8IHBhcnRzLmxlbmd0aDsgaysrKSB7CiAgICAgIGlmIChwYXJ0c1tr");
    sb.append("XSA9PSAiIikgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9IGVsc2UgaWYgKHZhbCA9PSBwYXJ0c1tr");
    sb.append("XSkgewogICAgICAgIHByZWZpeCA9ICctJzsKICAgICAgfSBlbHNlIGlmICgiLSIgKyB2YWwgPT1wYXJ0");
    sb.append("c1trXSkgewogICAgICAgIHByZWZpeCA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIG5leHQucHVz");
    sb.append("aChwYXJ0c1trXSk7CiAgICAgIH0KICAgIH0KICAgIG5leHRbMF0gPSBwcmVmaXggKyB2YWw7CiAgICBy");
    sb.append("ZXR1cm4gbmV4dC5qb2luKCIsIik7CiAgfQoKICAvLyBSVU5USU1FOiA8dGFnIC4uIHJ4OmV2ZW50PSIu");
    sb.append("Li4gb3JkZXItdG9nZ2xlOm5hbWU9dmFsIC4uLiI+CiAgc2VsZi5vbk9UID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("dHlwZSwgc3RhdGUsIG5hbWUsIHZhbCkgewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogIiIgfTsK");
    sb.append("ICAgIHJlZ19ldmVudChzdGF0ZSwgZG9tLCB0eXBlLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBvYmog");
    sb.append("PSB7fTsKICAgICAgb2JqW25hbWVdID0gb3JkZXJfdG9nZ2xlKGNhcHR1cmVkLnZhbHVlLCB2YWwpOwog");
    sb.append("ICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgIHN0YXRlW3N0YXRl");
    sb.append("LmN1cnJlbnRdLnRyZWUudXBkYXRlKGRlbHRhKTsKICAgIH0pOwogICAgc3Vic2NyaWJlKHN0YXRlLCBu");
    sb.append("YW1lLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgY2FwdHVyZWQudmFsdWUgPSB2YWx1ZTsKICAgIH0p");
    sb.append("OwogIH07CgogIC8vIFJVTlRJTUU6IDx0YWcgLi4gcng6ZXZlbnQ9Ii4uLiBkZWx0YTpuYW1lPWRpZmYi");
    sb.append("IC4uLiI+CiAgc2VsZi5vbkQgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBzdGF0ZSwgbmFtZSwgZGlmZikg");
    sb.append("ewogICAgdmFyIGNhcHR1cmVkID0geyB2YWx1ZTogMCB9OwogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20s");
    sb.append("IHR5cGUsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICBvYmpbbmFtZV0gPSBj");
    sb.append("YXB0dXJlZC52YWx1ZSArIGRpZmY7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywg");
    sb.append("b2JqKTsKICAgICAgc3RhdGVbc3RhdGUuY3VycmVudF0udHJlZS51cGRhdGUoZGVsdGEpOwogICAgfSk7");
    sb.append("CiAgICBzdWJzY3JpYmUoc3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodHlw");
    sb.append("ZW9mICh2YWx1ZSkgPT0gIm51bWJlciIpIHsKICAgICAgICBjYXB0dXJlZC52YWx1ZSA9IHZhbHVlOwog");
    sb.append("ICAgICB9IGVsc2UgewogICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KHZhbHVlKTsKICAgICAgICBp");
    sb.append("ZiAoIWlzTmFOKHZhbCkpIHsKICAgICAgICAgIGNhcHR1cmVkLnZhbHVlID0gdmFsOwogICAgICAgIH0K");
    sb.append("ICAgICAgfQogICAgfSk7CiAgfTsKICBzZWxmLkNTRU4gPSBmdW5jdGlvbiAocGFyZW50LCBwcmlvclN0");
    sb.append("YXRlLCBldmFsU3RhdGUsIGNoYW5uZWwsIGtleSwgbmFtZSwgc2hvdWxkQmUsIF9leHBhbmQsIG1ha2Vy");
    sb.append("VHJ1ZSwgbWFrZXJGYWxzZSkgewogICAgdmFyIGNob3NlbiA9IHsKICAgICAgdmFsdWU6ICIiLAogICAg");
    sb.append("ICBvd25lcjogcGFyZW50LAogICAgICBzaG93bjogZmFsc2UsCiAgICAgIGV2YWw6IG51bGwKICAgIH07");
    sb.append("CiAgICBhZGRfdW5zdWIoY2hvc2VuKTsKICAgIHZhciBjaGFuZ2UgPSBmdW5jdGlvbiAoc2hvdykgewog");
    sb.append("ICAgICBmaXJlX3Vuc3ViKGNob3Nlbik7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgdmFyIHN0YXRl");
    sb.append("ID0gZm9yayhwcmlvclN0YXRlKTsKICAgICAgaWYgKHNob3cgPT09IHNob3VsZEJlKSB7CiAgICAgICAg");
    sb.append("bWFrZXJUcnVlKHBhcmVudCwgc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIG1ha2VyRmFsc2Uo");
    sb.append("cGFyZW50LCBzdGF0ZSk7CiAgICAgIH0KICAgICAgc3Vic2NyaWJlX3N0YXRlKHN0YXRlLCBjaG9zZW4p");
    sb.append("OwogICAgfTsKCiAgICBjaG9zZW4udXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgb3V0ID0g");
    sb.append("cHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rpb24ub3V0c3RhbmRpbmdbY2hhbm5lbF07CiAgICAgIGlmICgh");
    sb.append("KG91dCkpIHJldHVybjsKCiAgICAgIHZhciBjaG9pY2VzID0gcHJpb3JTdGF0ZS5kYXRhLmNvbm5lY3Rp");
    sb.append("b24uY2hvaWNlczsKICAgICAgaWYgKCEoY2hhbm5lbCBpbiBjaG9pY2VzKSkgewogICAgICAgIGNob2lj");
    sb.append("ZXNbY2hhbm5lbF0gPSB7fTsKICAgICAgfQogICAgICB2YXIgY2hvaWNlID0gY2hvaWNlc1tjaGFubmVs");
    sb.append("XTsKICAgICAgdmFyIHJlc3VsdCA9IGNob3Nlbi52YWx1ZSBpbiBjaG9pY2U7CiAgICAgIGlmIChjaG9z");
    sb.append("ZW4uZXZhbCAhPSByZXN1bHQpIHsKICAgICAgICBjaG9zZW4uZXZhbCA9IHJlc3VsdDsKICAgICAgICBj");
    sb.append("aGFuZ2UoY2hvc2VuLmV2YWwpOwogICAgICB9CiAgICB9OwoKICAgIHByaW9yU3RhdGUuZGF0YS5jb25u");
    sb.append("ZWN0aW9uLnN1YnNjcmliZV9jaG9pY2UoY2hhbm5lbCwgZnVuY3Rpb24gKCkgewogICAgICBjaG9zZW4u");
    sb.append("dXBkYXRlKCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CgogICAgc3Vic2NyaWJlKGV2YWxTdGF0");
    sb.append("ZSwgbmFtZSwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGNob3Nlbi52YWx1ZSA9IHZhbHVlOwogICAg");
    sb.append("ICBjaG9zZW4udXBkYXRlKCk7CiAgICB9KTsKICB9OwoKICBzZWxmLkRFID0gZnVuY3Rpb24gKHBhcmVu");
    sb.append("dCwgcHJpb3JTdGF0ZSwgZXZhbFN0YXRlLCBjaGFubmVsLCBrZXksIG5hbWUsIHNob3VsZEJlLCBfZXhw");
    sb.append("YW5kLCBtYWtlclRydWUsIG1ha2VyRmFsc2UpIHsKICAgIHZhciBkZWNpZGUgPSB7CiAgICAgIHZhbHVl");
    sb.append("OiAiIiwKICAgICAgb3duZXI6IHBhcmVudCwKICAgICAgc2hvd246IGZhbHNlLAogICAgICBldmFsOiBu");
    sb.append("dWxsCiAgICB9OwogICAgYWRkX3Vuc3ViKGRlY2lkZSk7CiAgICB2YXIgY2hhbmdlID0gZnVuY3Rpb24g");
    sb.append("KHNob3cpIHsKICAgICAgZmlyZV91bnN1YihkZWNpZGUpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAg");
    sb.append("IHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzaG93ID09PSBzaG91bGRCZSkg");
    sb.append("ewogICAgICAgIG1ha2VyVHJ1ZShwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBt");
    sb.append("YWtlckZhbHNlKHBhcmVudCwgc3RhdGUpOwogICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0");
    sb.append("ZSwgZGVjaWRlKTsKICAgIH07CgogICAgZGVjaWRlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAg");
    sb.append("dmFyIHJlc3VsdCA9IGZpbmQocHJpb3JTdGF0ZSwgY2hhbm5lbCwga2V5LCBkZWNpZGUudmFsdWUpICE9");
    sb.append("IG51bGw7CiAgICAgIGlmIChkZWNpZGUuZXZhbCAhPSByZXN1bHQpIHsKICAgICAgICBkZWNpZGUuZXZh");
    sb.append("bCA9IHJlc3VsdDsKICAgICAgICBjaGFuZ2UoZGVjaWRlLmV2YWwpOwogICAgICB9CiAgICB9OwoKICAg");
    sb.append("IHByaW9yU3RhdGUuZGF0YS5jb25uZWN0aW9uLnN1YnNjcmliZShjaGFubmVsLCBmdW5jdGlvbiAoKSB7");
    sb.append("CiAgICAgIGRlY2lkZS51cGRhdGUoKTsKICAgICAgLy8gVE9ETzogcmV0dXJuIHdoZXRoZXIgb3Igbm90");
    sb.append("IHRoaXMgbmVlZHMgdG8gYmUgYXhlZAogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwoKICAgIHN1YnNj");
    sb.append("cmliZShldmFsU3RhdGUsIG5hbWUsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBkZWNpZGUudmFsdWUg");
    sb.append("PSB2YWx1ZTsKICAgICAgZGVjaWRlLnVwZGF0ZSgpOwogICAgfSk7CiAgfTsKCiAgdmFyIGNvbW1vbklm");
    sb.append("ID0gZnVuY3Rpb24ocGFyZW50LCBvcmlnaW5hbFN0YXRlLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFr");
    sb.append("ZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykgewogICAgdmFyIHVuc3ViID0gbWFrZV91bnN1");
    sb.append("YigpOwogICAgaWYgKGZvcmNlSGlkaW5nKSB7CiAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIm5v");
    sb.append("bmUiOwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgc2hvdyA9ICh2");
    sb.append("YWx1ZSA/IHRydWUgOiBmYWxzZSkgPT09IHNob3VsZEJlOwogICAgICBpZiAodGhpcy5zaG93biA9PSBz");
    sb.append("aG93KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuc2hvd24gPSBzaG93OwogICAg");
    sb.append("ICBudWtlKHBhcmVudCk7CiAgICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICB2YXIgbmV4dCA9IHNl");
    sb.append("bGYucEQoZm9yayhvcmlnaW5hbFN0YXRlKSk7CiAgICAgIGlmIChzaG93KSB7CiAgICAgICAgaWYgKGZv");
    sb.append("cmNlSGlkaW5nKSB7CiAgICAgICAgICBwYXJlbnQuc3R5bGUuZGlzcGxheSA9ICIiOwogICAgICAgIH0K");
    sb.append("ICAgICAgICBtYWtlclRydWUocGFyZW50LCBuZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAo");
    sb.append("Zm9yY2VIaWRpbmcpIHsKICAgICAgICAgIHBhcmVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAg");
    sb.append("ICAgIH0gZWxzZSB7CiAgICAgICAgICBtYWtlckZhbHNlKHBhcmVudCwgbmV4dCk7CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICAgIHN1YnNjcmliZV9zdGF0ZShuZXh0LCB1bnN1Yik7CiAgICB9LmJpbmQoeyBzaG93");
    sb.append("bjogJ25vJyB9KTsKICB9CgogIC8vIFJVTlRJTUUgfCByeDppZiAvIHJ4Omlmbm90ID0gInBhdGgxPXBh");
    sb.append("dGgyIgogIHNlbGYuSUZlcSA9IGZ1bmN0aW9uIChwYXJlbnQsIG9yaWdpbmFsU3RhdGUsIHF1ZXJ5U3Rh");
    sb.append("dGVMZWZ0LCBuYW1lTGVmdCwgcXVlcnlTdGF0ZVJpZ2h0LCBuYW1lUmlnaHQsIHNob3VsZEJlLCBleHBh");
    sb.append("bmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2UsIGZvcmNlSGlkaW5nKSB7CiAgICB2YXIgY29tbW9u");
    sb.append("ID0ge2xlZnQ6ZmFsc2UsIHJpZ2h0OnRydWV9OwogICAgY29tbW9uLnMgPSBjb21tb25JZihwYXJlbnQs");
    sb.append("IG9yaWdpbmFsU3RhdGUsIHNob3VsZEJlLCBleHBhbmRWaWV3LCBtYWtlclRydWUsIG1ha2VyRmFsc2Us");
    sb.append("IGZvcmNlSGlkaW5nKTsKICAgIGNvbW1vbi5rID0gZGVib3VuY2UoNSwgZnVuY3Rpb24oKSB7CiAgICAg");
    sb.append("IHRoaXMucyh0aGlzLmxlZnQgPT0gdGhpcy5yaWdodCk7CiAgICB9LmJpbmQoY29tbW9uKSk7CiAgICBz");
    sb.append("dWJzY3JpYmUocXVlcnlTdGF0ZUxlZnQsIG5hbWVMZWZ0LCBmdW5jdGlvbiAobGVmdCkgewogICAgICB0");
    sb.append("aGlzLmxlZnQgPSBsZWZ0OwogICAgICB0aGlzLmsoKTsKICAgIH0uYmluZChjb21tb24pKQogICAgc3Vi");
    sb.append("c2NyaWJlKHF1ZXJ5U3RhdGVSaWdodCwgbmFtZVJpZ2h0LCBmdW5jdGlvbiAocmlnaHQpIHsKICAgICAg");
    sb.append("dGhpcy5yaWdodCA9IHJpZ2h0OwogICAgICB0aGlzLmsoKTsKICAgIH0uYmluZChjb21tb24pKTsKICB9");
    sb.append("OwoKICAvKiogdGhlIGFib3ZlIHNwZWFrcyB0byBhIGRlZXAgcGF0dGVybi4gV2UgY291bGQgdGFrZSBh");
    sb.append("bnkgZXhwcmVzc2lvbiBhbmQgdGhlbiBsaW5lYXJpemUgaXQgaW50byByZWFjdGl2ZSBwYXJ0cywgYW5k");
    sb.append("IHRoZW4gYXNzZW1ibGUgYSBzdGF0ZW1lbnQgc3RhdGVtZW50IG9uIHRoZSBmbHkuIFdlIHNob3VsZCBs");
    sb.append("b29rIGludG8gdXNpbmcgdGhlIGNvbmRpdGlvbiBsYW5ndWFnZSBmb3IgdGhpcyAqLwoKICAvLyBSVU5U");
    sb.append("SU1FIHwgcng6aWYgLyByeDppZm5vdCA9ICJwYXRoIgogIHNlbGYuSUYgPSBmdW5jdGlvbiAocGFyZW50");
    sb.append("LCBvcmlnaW5hbFN0YXRlLCBxdWVyeVN0YXRlLCBuYW1lLCBzaG91bGRCZSwgZXhwYW5kVmlldywgbWFr");
    sb.append("ZXJUcnVlLCBtYWtlckZhbHNlLCBmb3JjZUhpZGluZykgewogICAgc3Vic2NyaWJlKHF1ZXJ5U3RhdGUs");
    sb.append("IG5hbWUsIGNvbW1vbklmKHBhcmVudCwgb3JpZ2luYWxTdGF0ZSwgc2hvdWxkQmUsIGV4cGFuZFZpZXcs");
    sb.append("IG1ha2VyVHJ1ZSwgbWFrZXJGYWxzZSwgZm9yY2VIaWRpbmcpKTsKICB9OwoKICAvLy8gUlVOVElNRSB8");
    sb.append("IHJ4OmFjdGlvbj1jb3B5OnBhdGgKICBzZWxmLmFDUCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgbmFt");
    sb.append("ZSkgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAg");
    sb.append("ICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgb2JqID0gZ2V0X2Zvcm0oZm9ybSwge30p");
    sb.append("OwogICAgICBpZiAobmFtZSAhPSAiLiIgJiYgbmFtZSAhPSAiIikgewogICAgICAgIHZhciBubyA9IHt9");
    sb.append("OwogICAgICAgIG5vW25hbWVdID0gb2JqOwogICAgICAgIG9iaiA9IG5vOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBkZWx0YSA9IHBhdGhfdG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVw");
    sb.append("ZGF0ZShkZWx0YSk7CiAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgIH0sIHRydWUpOwogIH07Cgog");
    sb.append("IHNlbGYuVlNQID0gZnVuY3Rpb24oc3RhdGUsIHZhcnMpIHsKICAgIHZhciBzbSA9IHt9OwogICAgc20u");
    sb.append("dmFycyA9IHZhcnM7CiAgICBzbS5sYXN0ID0ge307CiAgICBzbS5wYXJhbXMgPSAiIjsKICAgIHNtLm1v");
    sb.append("ZGUgPSAicmVwbGFjZSI7CiAgICBzbS5waW5nID0gZGVib3VuY2UoNSwgZnVuY3Rpb24oKSB7CiAgICAg");
    sb.append("IHZhciBhcmdzID0gW107CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy52YXJzLmxlbmd0aDsg");
    sb.append("aysrKSB7CiAgICAgICAgdmFyIGFyZyA9IHRoaXMudmFyc1trXTsKICAgICAgICBpZiAoYXJnIGluIHRo");
    sb.append("aXMubGFzdCkgewogICAgICAgICAgYXJncy5wdXNoKGFyZyArICI9IiArIHRoaXMubGFzdFthcmddKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHJlc3VsdCA9ICI/IiArYXJncy5qb2luKCImIik7CiAg");
    sb.append("ICAgIGlmIChyZXN1bHQgIT0gIj8iICYmIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09IHJlc3VsdCkg");
    sb.append("ewogICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICBvYmoudmlld2VyX3NlYXJjaF9xdWVyeSA9IHJl");
    sb.append("c3VsdDsKICAgICAgICB2YXIgZGVsdGEgPSBwYXRoX3RvKHN0YXRlLnZpZXcsIG9iaik7CiAgICAgICAg");
    sb.append("c3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFj");
    sb.append("ZVN0YXRlKHt9LCAiIiwgZml4SHJlZih3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyByZXN1bHQpKTsK");
    sb.append("ICAgICAgfQogICAgfS5iaW5kKHNtKSk7CiAgICBzdGF0ZS52aWV3LnRyZWUuc3Vic2NyaWJlKGZ1bmN0");
    sb.append("aW9uKHMpIHsKICAgICAgdGhpcy5sYXN0ID0gczsKICAgICAgdGhpcy5waW5nKCk7CiAgICB9LmJpbmQo");
    sb.append("c20pKTsKICB9OwoKICBzZWxmLkYgPSBmdW5jdGlvbihvLGspIHsKICAgIGlmIChrIGluIG8pIHsKICAg");
    sb.append("ICAgcmV0dXJuIG9ba107CiAgICB9CiAgICByZXR1cm4gIiI7CiAgfTsKCiAgLy8gUlVOVElNRSB8IDxp");
    sb.append("bnB1dCAuLi4gcng6c3luYz1wYXRoIC4uLj4KICBzZWxmLlNZID0gZnVuY3Rpb24gKGVsLCBzdGF0ZSwg");
    sb.append("bmFtZSwgbXMpIHsKICAgIHZhciB0eXBlID0gKCJ0eXBlIiBpbiBlbCkgPyBlbC50eXBlLnRvVXBwZXJD");
    sb.append("YXNlKCkgOiAidGV4dCI7CiAgICB2YXIgc2lnbmFsID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZh");
    sb.append("ciBvYmogPSB7fTsKICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgIHZhciBkZWx0YSA9IHBhdGhf");
    sb.append("dG8oc3RhdGUudmlldywgb2JqKTsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShkZWx0YSk7CiAg");
    sb.append("ICAgIGlmICh0aGlzLmRlZHVwZSAhPSB2YWx1ZSkgewogICAgICAgIHRoaXMuZGVkdXBlID0gdmFsdWU7");
    sb.append("CiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoImFmdGVyc3luYyIpKTsKICAgICAgfQog");
    sb.append("ICAgfS5iaW5kKHtkZWR1cGU6IiJ9KTsKICAgIGlmICh0eXBlID09ICJDSEVDS0JPWCIpIHsKICAgICAg");
    sb.append("ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZGVib3VuY2UobXMsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgICBzaWduYWwoZWwuY2hlY2tlZCA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0pKTsKICAgICAgd2lu");
    sb.append("ZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC5jaGVja2VkID8gdHJ1");
    sb.append("ZSA6IGZhbHNlKTsKICAgICAgfSwgMSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gIlJBRElPIikgewog");
    sb.append("ICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBkZWJvdW5jZShtcywgZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgIGlmIChlbC5jaGVja2VkKSB7CiAgICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAg");
    sb.append("ICAgIH0KICAgICAgfSkpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGYgPSBkZWJvdW5jZShtcywgZnVu");
    sb.append("Y3Rpb24gKCkgewogICAgICAgIHNpZ25hbChlbC52YWx1ZSk7CiAgICAgIH0pOwogICAgICBlbC5hZGRF");
    sb.append("dmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmKTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAn");
    sb.append("LCBmKQogICAgICBlbC5vbmtleXVwID0gZWwub25jaGFuZ2U7CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0");
    sb.append("KGZ1bmN0aW9uICgpIHsKICAgICAgICBzaWduYWwoZWwudmFsdWUpOwogICAgICB9LCA1KTsKICAgIH0K");
    sb.append("ICB9OwoKICB2YXIgZmlyc3RPY2N1ciA9IGZ1bmN0aW9uKGEsIGIpIHsKICAgIGlmIChhID4gMCAmJiBi");
    sb.append("ID4gMCkgewogICAgICByZXR1cm4gTWF0aC5taW4oYSwgYik7CiAgICB9CiAgICBpZiAoYSA+IDApIHsK");
    sb.append("ICAgICAgcmV0dXJuIGE7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gYjsKICAgIH0KICB9OwogIC8v");
    sb.append("IEhFTFBFUiB8IGV4dHJhY3QgYWxsIHRoZSBpbnB1dHMgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQg");
    sb.append("YnVpbGQgYW4gb2JqZWN0CiAgdmFyIGJ1aWxkX29iaiA9IGZ1bmN0aW9uIChlbCwgb2JqVG9JbnNlcnRJ");
    sb.append("bnRvLCBwYXNzd29yZHMsIGlzUm9vdCkgewogICAgaWYgKGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKSA9");
    sb.append("PSAiRk9STSIgJiYgIWlzUm9vdCkgewogICAgICAvLyBkb24ndCBjYXJlIGFib3V0IG5lc3RlZCBmb3Jt");
    sb.append("cwogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgdXBwZXJUYWcgPSBlbC50YWdOYW1lLnRvVXBwZXJD");
    sb.append("YXNlKCk7CiAgICB2YXIganVzdFNldCA9IHVwcGVyVGFnID09ICJURVhUQVJFQSIgfHwgdXBwZXJUYWcg");
    sb.append("PT0gIlNFTEVDVCI7CiAgICB2YXIgaXNJbnB1dEJveCA9IHVwcGVyVGFnID09ICJJTlBVVCI7CiAgICB2");
    sb.append("YXIgaXNGaWVsZFNldCA9IHVwcGVyVGFnID09ICJGSUVMRFNFVCI7CiAgICB2YXIgaXNQdWxsID0gdXBw");
    sb.append("ZXJUYWcgPT0gIlBVTExWQUxVRSI7CiAgICB2YXIgaGFzTmFtZSA9ICJuYW1lIiBpbiBlbDsKICAgIHZh");
    sb.append("ciBpbnNlcnRBdCA9IG9ialRvSW5zZXJ0SW50bzsKICAgIC8vIHRoZSBhcHBseSBmdW5jdGlvbiBpcyBo");
    sb.append("b3cgd2UgaW5qZWN0IHRoZSB2YWx1ZSBpbnRvIHRoZSBvYmplY3QKICAgIHZhciBhcHBseSA9IGZ1bmN0");
    sb.append("aW9uICh2YWwpIHsgfTsKCiAgICB2YXIgbmFtZSA9ICIiOwogICAgaWYgKGhhc05hbWUgJiYgKGp1c3RT");
    sb.append("ZXQgfHwgaXNJbnB1dEJveCB8fCBpc0ZpZWxkU2V0IHx8IGlzUHVsbCkpIHsKICAgICAgbmFtZSA9IGVs");
    sb.append("Lm5hbWU7CiAgICAgIGlmIChuYW1lID09ICIiKSB7IC8vIHRoaXMgaXMgYSBzcGVjaWFsIG5hbWUgZm9y");
    sb.append("IHRoaW5ncyB0aGF0IGRvbid0IGdldCBwaWNrZWQgdXAKICAgICAgICByZXR1cm47CiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIGtEb3RPclNsYXNoID0gZmlyc3RPY2N1cihuYW1lLmluZGV4T2YoJy4nKSwgbmFtZS5pbmRl");
    sb.append("eE9mKCcvJykpOwogICAgICB3aGlsZSAoa0RvdE9yU2xhc2ggPiAwKSB7CiAgICAgICAgdmFyIHBhciA9");
    sb.append("IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBpZiAoIShwYXIgaW4gaW5zZXJ0");
    sb.append("QXQpKSB7CiAgICAgICAgICBpbnNlcnRBdFtwYXJdID0ge307CiAgICAgICAgfQogICAgICAgIGluc2Vy");
    sb.append("dEF0ID0gaW5zZXJ0QXRbcGFyXTsKICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoa0RvdE9yU2xh");
    sb.append("c2ggKyAxKTsKICAgICAgICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIobmFtZS5pbmRleE9mKCcuJyks");
    sb.append("IG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgfQoKICAgICAgaWYgKG5hbWUuZW5kc1dpdGgoIisiKSkg");
    sb.append("ewogICAgICAgIC8vIGhlcmUsIHdlIHB1c2ggdGhlIHZhbHVlIGludG8gdGhlIGFycmF5CiAgICAgICAg");
    sb.append("bmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoIC0gMSk7CiAgICAgICAgYXBwbHkgPSBm");
    sb.append("dW5jdGlvbiAodikgewogICAgICAgICAgaWYgKCEobmFtZSBpbiBpbnNlcnRBdCkpIHsKICAgICAgICAg");
    sb.append("ICAgaW5zZXJ0QXRbbmFtZV0gPSBbdl07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbnNl");
    sb.append("cnRBdFtuYW1lXS5wdXNoKHYpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAg");
    sb.append("ICAgICAgLy8gaGVyZSB3ZSBzZXQgdGhlIG9iamVjdAogICAgICAgIGFwcGx5ID0gZnVuY3Rpb24gKHYp");
    sb.append("IHsKICAgICAgICAgIGluc2VydEF0W25hbWVdID0gdjsKICAgICAgICB9OwogICAgICB9CiAgICB9Cgog");
    sb.append("ICAgaWYgKGlzUHVsbCkgewogICAgICBhcHBseShlbC5wdWxsKCkpOwogICAgICByZXR1cm47CiAgICB9");
    sb.append("CgogICAgaWYgKGp1c3RTZXQpIHsKICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgfSBlbHNlIGlmIChp");
    sb.append("c0ZpZWxkU2V0KSB7CiAgICAgIHZhciBuZXh0T2JqZWN0ID0ge307CiAgICAgIGlmICgiY2hpbGRyZW4i");
    sb.append("IGluIGVsKSB7CiAgICAgICAgdmFyIGFyciA9IGVsLmNoaWxkcmVuOwogICAgICAgIHZhciBuID0gYXJy");
    sb.append("Lmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgdmFy");
    sb.append("IGNoID0gZWwuY2hpbGRyZW5ba107CiAgICAgICAgICBidWlsZF9vYmooY2gsIG5leHRPYmplY3QsIHBh");
    sb.append("c3N3b3JkcywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfQogICAgICBhcHBseShuZXh0T2JqZWN0KTsK");
    sb.append("ICAgIH0gZWxzZSBpZiAoaXNJbnB1dEJveCkgewogICAgICB2YXIgdHlwZSA9ICgidHlwZSIgaW4gZWwp");
    sb.append("ID8gZWwudHlwZS50b1VwcGVyQ2FzZSgpIDogIlRFWFQiOwogICAgICBpZiAodHlwZSA9PSAiU1VCTUlU");
    sb.append("IiB8fCB0eXBlID09ICJSRVNFVCIpIHJldHVybjsKICAgICAgaWYgKCh0eXBlID09ICJQQVNTV09SRCIg");
    sb.append("fHwgbmFtZSA9PSAicGFzc3dvcmQiIHx8IG5hbWUgPT0gImNvbmZpcm0tcGFzc3dvcmQiIHx8IG5hbWUg");
    sb.append("PT0gIm5ld19wYXNzd29yZCIgfHwgbmFtZSA9PSAiY29uZmlybS1uZXdfcGFzc3dvcmQiKSkgewogICAg");
    sb.append("ICAgIHBhc3N3b3Jkc1tuYW1lXSA9IGVsLnZhbHVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAg");
    sb.append("ICBpZiAodHlwZSA9PSAiQ0hFQ0tCT1giKSB7CiAgICAgICAgYXBwbHkoZWwuY2hlY2tlZCA/IHRydWUg");
    sb.append("OiBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiUkFESU8iKSB7CiAgICAgICAgaWYgKGVs");
    sb.append("LmNoZWNrZWQpIHsKICAgICAgICAgIGFwcGx5KGVsLnZhbHVlKTsKICAgICAgICB9CiAgICAgIH0gZWxz");
    sb.append("ZSB7CiAgICAgICAgYXBwbHkoZWwudmFsdWUpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAo");
    sb.append("ImNoaWxkcmVuIiBpbiBlbCkgewogICAgICAgIHZhciBhcnIgPSBlbC5jaGlsZHJlbjsKICAgICAgICB2");
    sb.append("YXIgbiA9IGFyci5sZW5ndGg7CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsKICAg");
    sb.append("ICAgICAgIHZhciBjaCA9IGVsLmNoaWxkcmVuW2tdOwogICAgICAgICAgYnVpbGRfb2JqKGNoLCBvYmpU");
    sb.append("b0luc2VydEludG8sIHBhc3N3b3JkcywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07");
    sb.append("CgogIHNlbGYuQnVpbGRGb3JtT2JqZWN0ID0gZnVuY3Rpb24oZm9ybSkgewogICAgdmFyIG9iaiA9IHt9");
    sb.append("OwogICAgYnVpbGRfb2JqKGZvcm0sIG9iaiwgZmFsc2UsIHRydWUpOwogICAgcmV0dXJuIG9iajsKICB9");
    sb.append("OwoKICAvLyBIRUxQRVIgfCByZXR1cm4gYW4gb2JqZWN0IG9mIGFsbCB0aGUgaW5wdXRzIG9mIHRoZSBn");
    sb.append("aXZlbiBmb3JtIGVsZW1lbnQKICB2YXIgZ2V0X2Zvcm0gPSBmdW5jdGlvbiAoZm9ybSwgcGFzc3dvcmRz");
    sb.append("KSB7CiAgICB2YXIgb2JqID0ge307CiAgICBidWlsZF9vYmooZm9ybSwgb2JqLCBwYXNzd29yZHMsIHRy");
    sb.append("dWUpOwogICAgcmV0dXJuIG9iajsKICB9OwoKICAvLyA8Li4uIHJ4OndyYXA9Y29uc3QgPgogIHZhciBj");
    sb.append("dXN0b21zX2NvbXBvbmVudHMgPSB7fTsKICBzZWxmLnByb3ZpZGVDdXN0b21Db21wb25lbnQgPSBmdW5j");
    sb.append("dGlvbihuYW1lLCBmb28pIHsKICAgIGN1c3RvbXNfY29tcG9uZW50c1tuYW1lXSA9IGZvbzsKICB9OwoK");
    sb.append("ICAvLyBSVU5USU1FIHwgPHRhZyAuLi4gcng6Y3VzdG9tPSI/IiBwb3J0OiRuYW1lPSRvdXRwdXQgLi4u");
    sb.append("ID4uLi48L3RhZz4gfCBhc3NlbWJsZSBhIHdyaXRlciBvYmplY3QKICBzZWxmLldYID0gZnVuY3Rpb24o");
    sb.append("aW5zdHJ1Y3Rpb25zKSB7CiAgICB2YXIgd3JpdGVyID0ge307CiAgICBmb3IgKHZhciBrID0gMDsgayAr");
    sb.append("IDIgPCBpbnN0cnVjdGlvbnMubGVuZ3RoOyBrKyspIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICB3");
    sb.append("cml0ZXJbaW5zdHJ1Y3Rpb25zW2tdXSA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgdmFyIHMgPSB0");
    sb.append("aGlzOwogICAgICAgIHMud1tzLmtdID0gdmFsdWU7CiAgICAgICAgcy50LnVwZGF0ZShzLmQpOwogICAg");
    sb.append("ICB9LmJpbmQoewogICAgICAgIGQ6cGF0aF90byhpbnN0cnVjdGlvbnNbMV0udmlldywgb2JqKSwKICAg");
    sb.append("ICAgICB3OiBvYmosCiAgICAgICAgazogaW5zdHJ1Y3Rpb25zWzJdLAogICAgICAgIHQ6IGluc3RydWN0");
    sb.append("aW9uc1sxXS52aWV3LnRyZWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gd3JpdGVyOwogIH07CiAg");
    sb.append("c2VsZi5DID0gZnVuY3Rpb24gKGRvbSwgc3RhdGUsIG5hbWUsIHJ4b2JqLCB3cml0ZXIsIGNoaWxkTWFr");
    sb.append("ZXJXaXRoQ2FzZSkgewogICAgdmFyIG9iaiA9IHsKICAgICAgZG9tOiBkb20sCiAgICAgIHN0YXRlOiBz");
    sb.append("dGF0ZSwKICAgICAgaW5wdXRzOiByeG9iaiwKICAgICAgb3V0cHV0czogd3JpdGVyLAogICAgICBtYWtl");
    sb.append("cjogY2hpbGRNYWtlcldpdGhDYXNlLAogICAgICBmcmFtZXdvcms6IHNlbGYKICAgIH07CiAgICBpZiAo");
    sb.append("bmFtZSBpbiBjdXN0b21zX2NvbXBvbmVudHMpIHsKICAgICAgY3VzdG9tc19jb21wb25lbnRzW25hbWVd");
    sb.append("KG9iaik7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8gZmluZCBjdXN0");
    sb.append("b20gY29tcG9uZW50OiAnIiArIG5hbWUgKyAiJyIpOwogICAgfQogIH07CgogIHZhciB3cmFwcGVycyA9");
    sb.append("IHt9OwogIHZhciB3cmFwcGVyc19vbmxvYWQgPSB7fTsgLy8gVE9ETzogc3R1ZHkgaWYgdGhpcyBjYW4g");
    sb.append("YmUgcmVtb3ZlZAogIHNlbGYuUFJXUCA9IGZ1bmN0aW9uIChuYW1lLCBmb28pIHsKICAgIHdyYXBwZXJz");
    sb.append("W25hbWVdID0gZm9vOwogICAgaWYgKG5hbWUgaW4gd3JhcHBlcnNfb25sb2FkKSB7CiAgICAgIHZhciB0");
    sb.append("b2xvYWQgPSB3cmFwcGVyc19vbmxvYWRbbmFtZV07CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdG9s");
    sb.append("b2FkLmxlbmd0aDsgaysrKSB7CiAgICAgICAgdG9sb2FkW2tdKCk7CiAgICAgIH0KICAgIH0KICB9OwoK");
    sb.append("ICAvLyA8Li4uIHJ4OndyYXA9Y29uc3QgPgogIHNlbGYuV1AgPSBmdW5jdGlvbiAoZG9tLCBzdGF0ZSwg");
    sb.append("bmFtZSwgcnhvYmosIGNoaWxkTWFrZXJXaXRoQ2FzZSkgewogICAgaWYgKG5hbWUgaW4gd3JhcHBlcnMp");
    sb.append("IHsKICAgICAgd3JhcHBlcnNbbmFtZV0oZG9tLCBzdGF0ZSwgcnhvYmosIGNoaWxkTWFrZXJXaXRoQ2Fz");
    sb.append("ZSwgc2VsZik7CiAgICB9IGVsc2UgewogICAgICB2YXIgbG9hZGVyID0gZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICAgIHdyYXBwZXJzW25hbWVdKGRvbSwgc3RhdGUsIHJ4b2JqLCBjaGlsZE1ha2VyV2l0aENhc2UsIHNl");
    sb.append("bGYpOwogICAgICB9OwogICAgICBpZiAobmFtZSBpbiB3cmFwcGVyc19vbmxvYWQpIHsKICAgICAgICB3");
    sb.append("cmFwcGVyc19vbmxvYWRbbmFtZV0ucHVzaChsb2FkZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHdy");
    sb.append("YXBwZXJzX29ubG9hZFtuYW1lXSA9IFtsb2FkZXJdOwogICAgICB9CiAgICB9CiAgfTsKCiAgdmFyIGJl");
    sb.append("aGF2aW9ycyA9IHt9OwogIHNlbGYuZGVmaW5lQmVoYXZpb3IgPSBmdW5jdGlvbihuYW1lLCBiZWhhdmlv");
    sb.append("cikgewogICAgaWYgKHR5cGVvZihiZWhhdmlvcikgPT0gJ2Z1bmN0aW9uJykgewogICAgICBiZWhhdmlv");
    sb.append("cnNbbmFtZV0gPSBiZWhhdmlvcjsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiZGVm");
    sb.append("aW5pbmcgYmVoYXZpb3IgJyIgKyBuYW1lICsgIicgZmFpbGVkIGR1ZSB0byBub3QgYSBmdW5jdGlvbiIp");
    sb.append("CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmJlaGF2aW9yPSRuYW1lCiAgc2VsZi5CSFYgPSBm");
    sb.append("dW5jdGlvbihkb20sIG5hbWUpIHsKICAgIGlmIChuYW1lIGluIGJlaGF2aW9ycykgewogICAgICBiZWhh");
    sb.append("dmlvcnNbbmFtZV07CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiY291bGRuJ3QgZmluZCBi");
    sb.append("ZWhhdmlvcjoiICsgbmFtZSk7CiAgICB9CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJlZ2lzdGVyIHRoZSBw");
    sb.append("YWdlIGZvciB0aGUgdXJpIHRvIHRoZSBnaXZlbiBmb28oKS4KICBzZWxmLlBHID0gZnVuY3Rpb24gKHVy");
    sb.append("aSwgZm9vKSB7CiAgICB2YXIgaGVhZCA9IHJvdXRlcjsKICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdXJp");
    sb.append("Lmxlbmd0aDsgaysrKSB7CiAgICAgIHZhciBwYXJ0ID0gdXJpW2tdOwogICAgICBpZiAoIShwYXJ0IGlu");
    sb.append("IGhlYWQpKSB7CiAgICAgICAgaGVhZFtwYXJ0XSA9IHt9OwogICAgICB9CiAgICAgIGhlYWQgPSBoZWFk");
    sb.append("W3BhcnRdOwogICAgfQogICAgaGVhZFsiQCJdID0gZm9vOwogIH07CgogIHZhciByb3V0ZSA9IGZ1bmN0");
    sb.append("aW9uIChwYXJ0cywgYXQsIGhlYWQsIHZpZXcpIHsKICAgIGlmIChhdCA8IHBhcnRzLmxlbmd0aCkgewog");
    sb.append("ICAgICBpZiAoIm51bWJlciIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsibnVtYmVy");
    sb.append("Il07CiAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQocGFydHNbYXRdKTsKICAgICAgICBpZiAoIWlz");
    sb.append("TmFOKHZhbCkpIHsKICAgICAgICAgIGZvciAodmFyIGJyYW5jaCBpbiBuZWNrKSB7CiAgICAgICAgICAg");
    sb.append("IHZpZXdbYnJhbmNoXSA9IHZhbDsKICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRz");
    sb.append("LCBhdCArIDEsIG5lY2tbYnJhbmNoXSwgdmlldyk7CiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09");
    sb.append("IG51bGwpIHsKICAgICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICAgIGRlbGV0ZSB2aWV3W2JyYW5jaF07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAg");
    sb.append("ICAgIGlmICgidGV4dCIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsidGV4dCJdOwog");
    sb.append("ICAgICAgIHZhciB2YWwgPSBwYXJ0c1thdF07CiAgICAgICAgZm9yICh2YXIgYnJhbmNoIGluIG5lY2sp");
    sb.append("IHsKICAgICAgICAgIHZpZXdbYnJhbmNoXSA9IHZhbDsKICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSBy");
    sb.append("b3V0ZShwYXJ0cywgYXQgKyAxLCBuZWNrW2JyYW5jaF0sIHZpZXcpOwogICAgICAgICAgaWYgKGNhbmRp");
    sb.append("ZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgICAgZGVsZXRlIHZpZXdbYnJhbmNoXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCJm");
    sb.append("aXhlZCIgaW4gaGVhZCkgewogICAgICAgIHZhciBuZWNrID0gaGVhZFsiZml4ZWQiXTsKICAgICAgICBm");
    sb.append("b3IgKHZhciBicmFuY2ggaW4gbmVjaykgewogICAgICAgICAgaWYgKGJyYW5jaCA9PSBwYXJ0c1thdF0p");
    sb.append("IHsKICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHJvdXRlKHBhcnRzLCBhdCArIDEsIG5lY2tbYnJh");
    sb.append("bmNoXSwgdmlldyk7CiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAg");
    sb.append("ICAgICByZXR1cm4gY2FuZGlkYXRlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoIkAiIGluIGhlYWQpIHsKICAgICAgICByZXR1cm4g");
    sb.append("aGVhZFsiQCJdOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9OwoKCiAgc2VsZi5yZXN1");
    sb.append("bWVfdXJpID0gIi8iOwogIHNlbGYuZ2F0ZXMgPSBbXTsKICAvKiogUlVOVElNRSB8IDxnYXRlLWV4aXQg");
    sb.append("Z3VhcmQ9InJlYWQiIHNldD0iIj4gKi8KICBzZWxmLklHID0gZnVuY3Rpb24oc3RhdGVSZWFkLCByZWFk");
    sb.append("LCBzdGF0ZVdyaXRlLCB3cml0ZSkgewogICAgdmFyIHNtID0gewogICAgICB2YWx1ZTogZmFsc2UsCiAg");
    sb.append("ICAgIHJ1bjogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICAgIHZh");
    sb.append("ciBvYmogPSB7fTsKICAgICAgICAgIG9ialt3cml0ZV0gPSB0cnVlOwogICAgICAgICAgdmFyIGRlbHRh");
    sb.append("ID0gcGF0aF90byhzdGF0ZVdyaXRlLnZpZXcsIG9iaik7CiAgICAgICAgICBzdGF0ZVdyaXRlLnZpZXcu");
    sb.append("dHJlZS51cGRhdGUoZGVsdGEpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAg");
    sb.append("IHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgIH07CiAgICBzdWJzY3JpYmUoc3RhdGVSZWFkLCByZWFk");
    sb.append("LCBmdW5jdGlvbih2YWx1ZSkgewogICAgICBzbS52YWx1ZSA9IHZhbHVlOwogICAgfSk7CiAgICBzZWxm");
    sb.append("LmdhdGVzLnB1c2goc20pOwogIH07CiAgc2VsZi5nb3RvID0gZnVuY3Rpb24gKHVyaSwgbm93KSB7CiAg");
    sb.append("ICBzZWxmLnJlc3VtZV91cmkgPSB1cmk7CiAgICB2YXIgYmxvY2tlZCA9IGZhbHNlOwogICAgZm9yICh2");
    sb.append("YXIgayA9IDA7IGsgPCBzZWxmLmdhdGVzLmxlbmd0aDsgaysrKSB7CiAgICAgIGlmIChzZWxmLmdhdGVz");
    sb.append("W2tdLnJ1bigpKSB7CiAgICAgICAgYmxvY2tlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIGlmIChi");
    sb.append("bG9ja2VkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChub3cpIHsKICAgICAgc2VsZi5nb3Rv");
    sb.append("X25vdyh1cmkpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgIHNlbGYuZ290b19ub3codXJpKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfTsKICAvLyBS");
    sb.append("VU5USU1FOiA8dGFnIC4uLiByeDpldmVudD0iLi4uIHJlc3VtZSAuLi4iPi4uCiAgc2VsZi5iUiA9IGZ1");
    sb.append("bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVuOiBmdW5jdGlvbigpIHsKICAgICAgICBzZWxm");
    sb.append("LmdhdGVzID0gW107CiAgICAgICAgc2VsZi5nb3RvKHNlbGYucmVzdW1lX3VyaSwgZmFsc2UpOwogICAg");
    sb.append("ICB9LAogICAgICBtZXJnZTogZnVuY3Rpb24oKSB7fQogICAgfTsKICB9OwogIHNlbGYuZ290b19ub3cg");
    sb.append("PSBmdW5jdGlvbih1cmkpIHsKICAgIGlmICh1cmkuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgIHNlbGYu");
    sb.append("cnVuKGRvY3VtZW50LmJvZHksIHVyaSwgdHJ1ZSk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cubG9j");
    sb.append("YXRpb24uaHJlZiA9IGZpeEhyZWYodXJpKTsKICAgIH0KICB9OwoKICB2YXIgdXJsQmFzZTY0VG9VaW50");
    sb.append("OEFycmF5ID0gZnVuY3Rpb24oYmFzZTY0KSB7CiAgICB2YXIgcmF3RGF0YSA9IHdpbmRvdy5hdG9iKGJh");
    sb.append("c2U2NCk7CiAgICB2YXIgb3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7");
    sb.append("CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd0RhdGEubGVuZ3RoOyArK2kpIHsKICAgICAgb3V0cHV0");
    sb.append("QXJyYXlbaV0gPSByYXdEYXRhLmNoYXJDb2RlQXQoaSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0QXJy");
    sb.append("YXk7CiAgfQoKICBzZWxmLmN1cnJlbnRQdXNoRXZlbnQgPSBmdW5jdGlvbigpIHt9OwoKICB2YXIgZ2V0");
    sb.append("V2ViUHVzaFN0YXR1cyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5n");
    sb.append("ZXRJdGVtKCJ3ZWJwdXNoX3N0YXR1cyIpOwogICAgaWYgKHJlc3VsdCAmJiB0eXBlb2YocmVzdWx0KSA9");
    sb.append("PSAic3RyaW5nIikgewogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuICJ1bmtub3du");
    sb.append("IjsKICB9CgogIHZhciBzZXRQdXNoU3RhdHVzID0gZnVuY3Rpb24oc3RhdHVzKSB7CiAgICBsb2NhbFN0");
    sb.append("b3JhZ2Uuc2V0SXRlbSgid2VicHVzaF9zdGF0dXMiLCBzdGF0dXMpOwogICAgc2VsZi5jdXJyZW50UHVz");
    sb.append("aEV2ZW50KCk7CiAgfTsKICBzZWxmLnNldFB1c2hTdGF0dXMgPSBzZXRQdXNoU3RhdHVzOwoKICB2YXIg");
    sb.append("c2V0UHVzaEV2ZW50ID0gZnVuY3Rpb24oZm9vKSB7CiAgICBzZWxmLmN1cnJlbnRQdXNoRXZlbnQgPSBm");
    sb.append("b287CiAgfTsKCiAgdmFyIHNldHVwU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbiwg");
    sb.append("dmFwaWRQdWJsaWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIGNvbm5l");
    sb.append("Y3Rpb24uYnVtcCgid3BzIik7CiAgICB2YXIgcHVzaEtleUxvY2FsID0gInB1c2hfZW5kcG9pbnRfIiAr");
    sb.append("IGlkZW50aXR5TmFtZTsKICAgIHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlcgogICAgLmdldFN1YnNjcmlw");
    sb.append("dGlvbigpLnRoZW4oYXN5bmMgZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgewogICAgICAgIGlmIChzdWJz");
    sb.append("Y3JpcHRpb24pIHsKICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgICAgICAgfQogICAgICAg");
    sb.append("IGNvbnN0IGNvbnZlcnRlZFZhcGlkS2V5ID0gdXJsQmFzZTY0VG9VaW50OEFycmF5KHZhcGlkUHVibGlj");
    sb.append("S2V5KTsKICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7CiAg");
    sb.append("ICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsCiAgICAgICAgICBhcHBsaWNhdGlvblNlcnZlcktl");
    sb.append("eTogY29udmVydGVkVmFwaWRLZXkKICAgICAgICB9KTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN1YnNj");
    sb.append("cmlwdGlvbikgewogICAgICAvLyBtYWtlIHN1cmUgd2UgaGF2ZSBhbiBlbmRwb2ludCBzYXZlZCByZWxh");
    sb.append("dGVkIHRvIHRoZSByaWdodCB2ZXJzaW9uCiAgICAgIGNvbm5lY3Rpb24uSWRlbnRpdHlIYXNoKGlkZW50");
    sb.append("aXR5LCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgICBpZiAobG9j");
    sb.append("YWxTdG9yYWdlLmdldEl0ZW0oInB1c2hfd29ya2VyX3ZlcnNpb24iKSAhPSB2ZXJzaW9uIHx8IGxvY2Fs");
    sb.append("U3RvcmFnZS5nZXRJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiKSAhPSByZXN1bHQuaWRlbnRpdHlIYXNo");
    sb.append("KSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHB1c2hLZXlMb2NhbCk7CiAgICAg");
    sb.append("ICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwdXNoX3dvcmtlcl92ZXJzaW9uIiwgdmVyc2lvbik7");
    sb.append("CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJsYXN0X2lkZW50aXR5X3VzZWQiLCByZXN1");
    sb.append("bHQuaWRlbnRpdHlIYXNoKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBzdWIgPSBzdWJzY3JpcHRp");
    sb.append("b24udG9KU09OKCk7CiAgICAgICAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocHVzaEtl");
    sb.append("eUxvY2FsKTsKICAgICAgICAgIGlmICh2YWwgJiYgdmFsID09IHN1Yi5lbmRwb2ludCkgewogICAgICAg");
    sb.append("ICAgICBjb25uZWN0aW9uLmJ1bXAoIndwYSIpOwogICAgICAgICAgICBzZXRQdXNoU3RhdHVzKCJzdWNj");
    sb.append("ZXNzIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHN1YlsnQG1ldGhv");
    sb.append("ZCddID0gJ3dlYnB1c2gnOwogICAgICAgICAgc3ViWydAdGltZSddID0gbmV3IERhdGUoKS5nZXRUaW1l");
    sb.append("KCk7CiAgICAgICAgICB2YXIgZGV2aWNlID0ge307CiAgICAgICAgICBkZXZpY2UubW9kZSA9ICd3ZWIn");
    sb.append("CiAgICAgICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRv");
    sb.append("ci51c2VyQWdlbnQpIHsKICAgICAgICAgICAgZGV2aWNlLnVhID0gd2luZG93Lm5hdmlnYXRvci51c2Vy");
    sb.append("QWdlbnQ7CiAgICAgICAgICB9CiAgICAgICAgICBjb25uZWN0aW9uLlB1c2hSZWdpc3RlcihpZGVudGl0");
    sb.append("eSwgc2VsZi5kb21haW4sIHN1YiwgZGV2aWNlLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9u");
    sb.append("KCkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHB1c2hLZXlMb2NhbCwgc3ViLmVu");
    sb.append("ZHBvaW50KTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid2VicHVzaF9zdGF0dXMi");
    sb.append("LCAic3VjY2VzcyIpOwogICAgICAgICAgICAgIHNldFB1c2hTdGF0dXMoInN1Y2Nlc3MiKTsKICAgICAg");
    sb.append("ICAgICAgfSwKICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgY29u");
    sb.append("bmVjdGlvbi5idW1wKCJ3cGYiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwK");
    sb.append("ICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbm5lY3Rpb24uYnVtcCgid3Bm");
    sb.append("Iik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICBzZXRQdXNo");
    sb.append("U3RhdHVzKCJmYWlsZWQiKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHVzaEtleUxvY2Fs");
    sb.append("KTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImxhc3RfaWRlbnRpdHlfdXNlZCIpOwogICAg");
    sb.append("ICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicHVzaF93b3JrZXJfdmVyc2lvbiIpOwogICAgICBjb25u");
    sb.append("ZWN0aW9uLmJ1bXAoIndwZCIpOwogICAgICBjb25uZWN0aW9uLmxvZygicHVzaHNldHVwIiwgIiIgKyBl");
    sb.append("cnIpOwogICAgfSk7CiAgfQoKICB2YXIgc2V0dXBQdXNoID0gZnVuY3Rpb24ocGF0aCwgdmFwaWRQdWJs");
    sb.append("aWNLZXksIGlkZW50aXR5LCBpZGVudGl0eU5hbWUsIHZlcnNpb24pIHsKICAgIGlmIChuYXZpZ2F0b3Iu");
    sb.append("c2VydmljZVdvcmtlcikgewogICAgICB0cnkgewogICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2Vy");
    sb.append("LmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb25zKSB7CiAgICAgICAg");
    sb.append("ICB2YXIgZm91bmQgPSBmYWxzZTsKICAgICAgICAgIGZvciAobGV0IHJlZ2lzdHJhdGlvbiBvZiByZWdp");
    sb.append("c3RyYXRpb25zKSB7CiAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb24uYWN0aXZlKSB7CiAgICAgICAg");
    sb.append("ICAgICAgaWYgKCFyZWdpc3RyYXRpb24uYWN0aXZlLnNjcmlwdFVSTC5lbmRzV2l0aChwYXRoKSkgewog");
    sb.append("ICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uLnVucmVnaXN0ZXIoKTsKICAgICAgICAgICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0dXBTdWJz");
    sb.append("Y3JpcHRpb24ocmVnaXN0cmF0aW9uLCB2YXBpZFB1YmxpY0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFt");
    sb.append("ZSwgdmVyc2lvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lz");
    sb.append("dGVyKHBhdGgpOwogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKGZ1");
    sb.append("bmN0aW9uIChyZWdpc3RyYXRpb24pIHsKICAgICAgICAgICAgICBzZXR1cFN1YnNjcmlwdGlvbihyZWdp");
    sb.append("c3RyYXRpb24sIHZhcGlkUHVibGljS2V5LCBpZGVudGl0eSwgaWRlbnRpdHlOYW1lLCB2ZXJzaW9uKTsK");
    sb.append("ICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24oZXgpIHsKICAgICAg");
    sb.append("ICAgIGNvbm5lY3Rpb24uYnVtcCgid3BpMyIpOwogICAgICAgICAgY29ubmVjdGlvbi5sb2coIndvcmtl");
    sb.append("ci1maW5kIiwgIiIgKyBleCk7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiZmFpbGVkIHRvIHJlZ2lzdGVyIHNlcnZpY2Ugd29ya2VyIiwgZXgpOwogICAg");
    sb.append("ICAgIHNldFB1c2hTdGF0dXMoImltcG9zc2libGUiKTsKICAgICAgICBjb25uZWN0aW9uLmJ1bXAoIndw");
    sb.append("aTIiKTsKICAgICAgICBjb25uZWN0aW9uLmxvZygid29ya2VyLWluc3RhbGwiLCAiIiArIGV4KTsKICAg");
    sb.append("ICAgfQogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coIm5vIHNlcnZpY2Ugd29ya2VyIGF2YWls");
    sb.append("YWJsZSIpOwogICAgICBzZXRQdXNoU3RhdHVzKCJpbXBvc3NpYmxlIik7CiAgICAgIGNvbm5lY3Rpb24u");
    sb.append("YnVtcCgid3BpMSIpOwogICAgfQogIH0KCiAgc2VsZi53b3JrZXIgPSBmdW5jdGlvbihpZGVudGl0eU5h");
    sb.append("bWUsIHBhdGgsIHZlcnNpb24pIHsKICAgIHRyeSB7CiAgICAgIGFmdGVySGF2ZUlkZW50aXR5KGlkZW50");
    sb.append("aXR5TmFtZSwgZnVuY3Rpb24oaWRlbnRpdHkpIHsKICAgICAgICBjb25uZWN0aW9uLkRvbWFpbkdldFZh");
    sb.append("cGlkUHVibGljS2V5KGlkZW50aXR5LCBzZWxmLmRvbWFpbiwgewogICAgICAgICAgc3VjY2VzczogZnVu");
    sb.append("Y3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgc2V0dXBQdXNoKHBhdGgsIHJlc3BvbnNlLnB1Ymxp");
    sb.append("Y0tleSwgaWRlbnRpdHksIGlkZW50aXR5TmFtZSwgdmVyc2lvbik7CiAgICAgICAgICB9LAogICAgICAg");
    sb.append("ICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJm");
    sb.append("YWlsZWQgdG8gZ2V0IHB1YmxpYy1rZXk6IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAgICAgICAgfSkK");
    sb.append("ICAgICAgfSk7CiAgICB9IGNhdGNoIChleCkgewogICAgICBjb25zb2xlLmVycm9yKCJmYWlsZWQgdG8g");
    sb.append("aW5pdGlhbGl6ZSB3b3JrZXIiLCBleCk7CiAgICB9CiAgfTsKCiAgc2VsZi5pbml0ID0gZnVuY3Rpb24g");
    sb.append("KCkgewogICAgc2VsZi5ydW4oZG9jdW1lbnQuYm9keSwgZml4UGF0aCh3aW5kb3cubG9jYXRpb24ucGF0");
    sb.append("aG5hbWUgKyB3aW5kb3cubG9jYXRpb24uc2VhcmNoICsgd2luZG93LmxvY2F0aW9uLmhhc2gpLCBmYWxz");
    sb.append("ZSk7CiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChwKSB7CiAgICAgIHNlbGYucnVuKGRv");
    sb.append("Y3VtZW50LmJvZHksIGZpeFBhdGgod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0");
    sb.append("aW9uLnNlYXJjaCArIHdpbmRvdy5sb2NhdGlvbi5oYXNoKSwgZmFsc2UpOwogICAgfTsKICB9OwoKICBz");
    sb.append("ZWxmLmN1cnJlbnRWaWV3ZXJJZCA9IDA7CiAgLy8gQVBJIHwgUnVuIHRoZSBwYWdlIGluIHRoZSBnaXZl");
    sb.append("biBwbGFjZQogIHNlbGYucnVuID0gZnVuY3Rpb24gKHdoZXJlLCByYXdQYXRoLCBwdXNoKSB7CiAgICB2");
    sb.append("YXIgcGF0aCA9IHJhd1BhdGg7CiAgICB3aGlsZSAocGF0aC5lbmRzV2l0aCgiLyIpICYmIHBhdGggIT0g");
    sb.append("Ii8iKSB7CiAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxlbmd0aCAtIDEpOwogICAg");
    sb.append("fQogICAgZm9yIChjb25LZXkgaW4gY29ubmVjdGlvbnMpIHsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5");
    sb.append("XS50cmVlLm51a2UoKTsKICAgICAgY29ubmVjdGlvbnNbY29uS2V5XS5udWtlKCk7CiAgICB9CiAgICB2");
    sb.append("YXIgc2VhcmNoID0gIiI7CiAgICB2YXIga1F1ZXN0aW9uID0gcGF0aC5pbmRleE9mKCc/Jyk7CiAgICBp");
    sb.append("ZiAoa1F1ZXN0aW9uID4gMCkgewogICAgICBzZWFyY2ggPSBwYXRoLnN1YnN0cmluZyhrUXVlc3Rpb24p");
    sb.append("OwogICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwga1F1ZXN0aW9uKTsKICAgIH0KICAgIHZhciBw");
    sb.append("YXJ0cyA9IChwYXRoLnN0YXJ0c1dpdGgoIi8iKSA/IHBhdGguc3Vic3RyaW5nKDEpIDogcGF0aCkuc3Bs");
    sb.append("aXQoIi8iKTsKICAgIHZhciBpbml0ID0ge307CiAgICBzZWxmLmN1cnJlbnRWaWV3ZXJJZCsrOwogICAg");
    sb.append("aW5pdC52aWV3ZXJfY3VycmVudF9wYWdlX2lkID0gc2VsZi5jdXJyZW50Vmlld2VySWQ7CiAgICB0cnkg");
    sb.append("ewogICAgICBpbml0LnZpZXdlcl90aW1lem9uZSA9IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZl");
    sb.append("ZE9wdGlvbnMoKS50aW1lWm9uZTsKICAgICAgaW5pdC52aWV3ZXJfbGFuZ3VhZ2UgPSBuYXZpZ2F0b3Iu");
    sb.append("bGFuZ3VhZ2U7CiAgICB9IGNhdGNoIChicm93c2VyQmFkKSB7CiAgICAgIC8vIHdlIGp1c3QgZG9uJ3Qg");
    sb.append("c2VlIHRoZSB2aWV3c3RhdGUgaWYgd2UgZG9uJ3QgaGF2ZSB0aGVzZSBhdmFpbGFibGUKICAgIH0KICAg");
    sb.append("IGluaXQudmlld2VyX3NlYXJjaF9xdWVyeSA9ICIiOwogICAgaW5pdC52aWV3ZXJfd2ViX3B1c2hfc3Rh");
    sb.append("dHVzID0gZ2V0V2ViUHVzaFN0YXR1cygpOwogICAgaWYgKHNlYXJjaCAhPSAiPyIpIHsKICAgICAgaW5p");
    sb.append("dC52aWV3ZXJfc2VhcmNoX3F1ZXJ5ID0gc2VhcmNoOwogICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJM");
    sb.append("U2VhcmNoUGFyYW1zKHNlYXJjaC5zdWJzdHJpbmcoMSkpOwogICAgICB2YXIga0l0ID0gcGFyYW1zLmtl");
    sb.append("eXMoKTsKICAgICAgdmFyIHAgPSBrSXQubmV4dCgpOwogICAgICB3aGlsZSAoIXAuZG9uZSkgewogICAg");
    sb.append("ICAgIGluaXRbcC52YWx1ZV0gPSBwYXJhbXMuZ2V0KHAudmFsdWUpOwogICAgICAgIHAgPSBrSXQubmV4");
    sb.append("dCgpOwogICAgICB9CiAgICB9CiAgICB2YXIgZm9vID0gcm91dGUocGFydHMsIDAsIHJvdXRlciwgaW5p");
    sb.append("dCk7CiAgICBudWtlKHdoZXJlKTsKICAgIGlmIChmb28gIT0gbnVsbCkgewogICAgICB3aW5kb3cuc2Ny");
    sb.append("b2xsVG8oMCwgMCk7CiAgICAgIHZhciBzdGF0ZSA9IHsgc2VydmljZTogY29ubmVjdGlvbiwgZGF0YTog");
    sb.append("bnVsbCwgdmlldzogZnJlc2god2hlcmUpLCBjdXJyZW50OiAidmlldyIgfTsKICAgICAgc2VsZi5fX2N1");
    sb.append("cnJlbnQgPSBzdGF0ZTsKCiAgICAgIGNvbnN0IHZpZXdzdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVt");
    sb.append("KCdyeHZpZXdzdGF0ZScpOwogICAgICBpZiAobnVsbCAhPT0gdmlld3N0YXRlKSB7CiAgICAgICAgbG9j");
    sb.append("YWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3J4dmlld3N0YXRlJyk7CiAgICAgICAgaW5pdCA9IE9iamVjdC5h");
    sb.append("c3NpZ24oe30sIGluaXQsIEpTT04ucGFyc2Uodmlld3N0YXRlKSk7CiAgICAgIH0KCiAgICAgIHN0YXRl");
    sb.append("LnZpZXcuaW5pdCA9IGluaXQ7CiAgICAgIHNlbGYuZ2F0ZXMgPSBbXTsKICAgICAgc2VsZi5yZXN1bWVf");
    sb.append("dXJpID0gcGF0aDsKICAgICAgZm9vKHdoZXJlLCBzdGF0ZSk7CiAgICAgIHN0YXRlLnZpZXcudHJlZS5z");
    sb.append("dWJzY3JpYmUoc3RhdGUudmlldy5kZWx0YSk7CiAgICAgIHN0YXRlLnZpZXcudHJlZS51cGRhdGUoaW5p");
    sb.append("dCk7CiAgICAgIGlmIChwdXNoKSB7CiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHttZXJn");
    sb.append("ZTpmYWxzZX0sICIiLCBmaXhIcmVmKHBhdGgpICsgc2VhcmNoKTsKICAgICAgfQogICAgICBzZXRQdXNo");
    sb.append("RXZlbnQoZnVuY3Rpb24oKSB7CiAgICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZSh7IHZpZXdlcl93");
    sb.append("ZWJfcHVzaF9zdGF0dXM6IGdldFdlYlB1c2hTdGF0dXMoKX0pOwogICAgICB9KTsKICAgIH0gZWxzZSB7");
    sb.append("CiAgICAgIGlmIChwYXRoICE9ICIvNDA0IikgewogICAgICAgIHNlbGYucnVuKHdoZXJlLCAiLzQwNCIp");
    sb.append("OwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGRlZmF1bHQgNDA0CiAgICAgIH0KICAgIH0KICAgIHdo");
    sb.append("ZXJlLmFwcGVuZENoaWxkKGNvbm5lY3Rpb25Nb25pdG9yRG9tKTsKICB9OwoKICB2YXIgaWRlbnRpdGll");
    sb.append("cyA9IHt9OwoKICBzZWxmLlNJR05PVVQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZGVudGl0aWVzID0ge307");
    sb.append("CiAgICBmb3IgKHZhciBpZGVudGl0eU5hbWUgaW4gaWRlbnRpdGllcykgewogICAgICBsb2NhbFN0b3Jh");
    sb.append("Z2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSk7CiAgICB9CiAgICBsb2NhbFN0");
    sb.append("b3JhZ2UucmVtb3ZlSXRlbSgiaWRlbnRpdHlfZGVmYXVsdCIpOwogICAgdmFyIGF4ZSA9IFtdOwogICAg");
    sb.append("Zm9yICh2YXIgY2lkIGluIGNvbm5lY3Rpb25zKSB7CiAgICAgIHZhciBjbyA9IGNvbm5lY3Rpb25zW2Np");
    sb.append("ZF07CiAgICAgIGlmIChjby5wdHIgIT0gbnVsbCkgewogICAgICAgIGNvLnB0ci5lbmQoeyBzdWNjZXNz");
    sb.append("OiBmdW5jdGlvbiAoKSB7IH0sIGZhaWx1cmU6IGZ1bmN0aW9uICgpIHsgfSB9KTsKICAgICAgfQogICAg");
    sb.append("ICBheGUucHVzaChjaWQpOwogICAgfQogICAgZm9yICh2YXIgayA9IDA7IGsgPCBheGUubGVuZ3RoOyBr");
    sb.append("KyspIHsKICAgICAgZGVsZXRlIGNvbm5lY3Rpb25zW2F4ZVtrXV07CiAgICB9CiAgfTsKCiAgc2VsZi5H");
    sb.append("T09HTEVfU0lHTl9PTiA9IGZ1bmN0aW9uIChhY2Nlc3NUb2tlbikgewogICAgY29ubmVjdGlvbi5Jbml0");
    sb.append("Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHsKICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHBh");
    sb.append("eWxvYWQpIHsKICAgICAgICBpZGVudGl0aWVzWyJkZWZhdWx0Il0gPSBwYXlsb2FkLmlkZW50aXR5Owog");
    sb.append("ICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV9kZWZhdWx0IiwgcGF5bG9hZC5pZGVu");
    sb.append("dGl0eSk7CiAgICAgICAgc2VsZi5nb3RvKCIvIiwgZmFsc2UpOwogICAgICB9LAogICAgICBmYWlsdXJl");
    sb.append("OiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5sb2coIkdvb2dsZSBmYWlsdXJlOiAi");
    sb.append("ICsgcmVhc29uKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLyoqIFJVTlRJTUUgfCByZWRpcmVjdCB0");
    sb.append("byBhIHBhZ2Ugd2l0aCBzdGF0ZSAqLwogIHNlbGYuYVJEcCA9IGZ1bmN0aW9uIChzdGF0ZSwgcHVsbGVy");
    sb.append("KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdXJpID0gcHVsbGVyKHN0YXRlLnZp");
    sb.append("ZXcuaW5pdCk7CiAgICAgIHJldHVybiB1cmk7CiAgICB9OwogIH07CgogIC8qKiBSVU5USU1FIHwgcmVk");
    sb.append("aXJlY3QgdG8gYSBzdGF0aWMgcGFnZSAqLwogIHNlbGYuYVJEeiA9IGZ1bmN0aW9uIChyYXcpIHsKICAg");
    sb.append("IHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByYXc7CiAgICB9CiAgfTsKCiAgdmFyIGlk");
    sb.append("ZW50aXR5RXZlbnRzID0ge307CiAgdmFyIGFmdGVySGF2ZUlkZW50aXR5ID0gZnVuY3Rpb24oaWRlbnRp");
    sb.append("dHlOYW1lLCBjYWxsYmFjaykgewogICAgaWRlbnRpdHlFdmVudHNbaWRlbnRpdHlOYW1lXSA9IGNhbGxi");
    sb.append("YWNrOwogIH07CiAgc2VsZi5hZnRlckhhdmVJZGVudGl0eSA9IGFmdGVySGF2ZUlkZW50aXR5OwoKICAv");
    sb.append("KiogZm9yIGN1c3RvbSBlbGVtZW50cyB0byBsZWFybiBvZiB0aGUgaWRlbnRpdHkgKi8KICBzZWxmLklE");
    sb.append("ID0gZnVuY3Rpb24gKGlkZW50aXR5TmFtZSwgcmVkaXJlY3RUb0Z1bmMpIHsKICAgIGlmIChpZGVudGl0");
    sb.append("eU5hbWUgPT09IHRydWUpIHsKICAgICAgaWRlbnRpdHlOYW1lID0gImRlZmF1bHQiOwogICAgfQogICAg");
    sb.append("Ly8gSUYgaWRlbnRpdHkgY29udGFpbnMgZG90cwogICAgdmFyIGlkZW50aXR5ID0gbnVsbDsKICAgIHZh");
    sb.append("ciBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgfTsKCiAgICB2YXIgdmFsID0gbG9jYWxTdG9yYWdl");
    sb.append("LmdldEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUpOwogICAgaWYgKHZhbCkgewogICAgICBp");
    sb.append("ZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSB2YWw7CiAgICB9CgogICAgaWYgKGlkZW50aXR5TmFtZS5z");
    sb.append("dGFydHNXaXRoKCJkaXJlY3Q6IikpIHsKICAgICAgLy8gVXNlLCBhcyBpcwogICAgICBpZGVudGl0eSA9");
    sb.append("IGlkZW50aXR5TmFtZS5zdWJzdHJpbmcoNyk7CiAgICB9IGVsc2UgaWYgKGlkZW50aXR5TmFtZSBpbiBp");
    sb.append("ZGVudGl0aWVzKSB7CiAgICAgIGlkZW50aXR5ID0gaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdOwogICAg");
    sb.append("ICBjbGVhbnVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZSBpZGVudGl0aWVzW2lkZW50aXR5");
    sb.append("TmFtZV07CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0");
    sb.append("eU5hbWUpOwogICAgICAgIHNlbGYuZ290byhyZWRpcmVjdFRvRnVuYygpLCBmYWxzZSk7CiAgICAgIH07");
    sb.append("CiAgICB9IGVsc2UgewogICAgICAvLyB3aGF0ZXZlciBwYWdlIHdlIGFyZSwgbmVlZHMgdG8gZGllIHdo");
    sb.append("aWNoIG1lYW5zIHdlIG5lZWQgdG8gbnVrZSBldmVyeXRoaW5nIQogICAgICB3aW5kb3cuc2V0VGltZW91");
    sb.append("dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5nb3RvKHJlZGlyZWN0VG9GdW5jKCksIGZhbHNlKTsK");
    sb.append("ICAgICAgfSwgMTApOwogICAgICByZXR1cm4geyBhYm9ydDogdHJ1ZSB9OwogICAgfQogICAgaWYgKGlk");
    sb.append("ZW50aXR5TmFtZSBpbiBpZGVudGl0eUV2ZW50cykgewogICAgICBpZGVudGl0eUV2ZW50c1tpZGVudGl0");
    sb.append("eU5hbWVdKGlkZW50aXR5KTsKICAgICAgZGVsZXRlIGlkZW50aXR5RXZlbnRzW2lkZW50aXR5TmFtZV07");
    sb.append("CiAgICB9CiAgICByZXR1cm4geyBhYm9ydDogZmFsc2UsIGNsZWFudXA6IGNsZWFudXAsIGlkZW50aXR5");
    sb.append("OiBpZGVudGl0eSB9OwogIH07CgogIC8qIEZvciBjdXN0b20gY2FsbGJhY2tzIHRvIHJlZGlyZWN0IGFu");
    sb.append("ZCBpbnZhbGlkYXRlIElEIGZhaWx1cmVzICovCiAgc2VsZi5GSURDTCA9IGZ1bmN0aW9uIChjYWxsYmFj");
    sb.append("aywgbG9va3VwKSB7CiAgICByZXR1cm4gewogICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7");
    sb.append("CiAgICAgICAgY2FsbGJhY2suc3VjY2VzcyhyZXN1bHQpOwogICAgICB9LAogICAgICBuZXh0OiBmdW5j");
    sb.append("dGlvbiAoaXRlbSkgewogICAgICAgIGNhbGxiYWNrLm5leHQoaXRlbSk7CiAgICAgIH0sCiAgICAgIGNv");
    sb.append("bXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FsbGJhY2suY29tcGxldGUoKTsKICAgICAgfSwK");
    sb.append("ICAgICAgZmFpbHVyZTogZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNhbGxiYWNrLmZhaWx1cmUo");
    sb.append("cmVhc29uKTsKICAgICAgICBpZiAocmVhc29uID09IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8");
    sb.append("IHJlYXNvbiA9PSAxODQzMzMpIHsKICAgICAgICAgIGxvb2t1cC5jbGVhbnVwKCk7CiAgICAgICAgfQog");
    sb.append("ICAgICB9CiAgICB9OwogIH07CgogIHZhciBjdXN0b21EYXRhU291cmNlcyA9IHt9OwoKICAvKiogcHJv");
    sb.append("dmlkZSBjdXN0b20gZGF0YSAqLwogIHNlbGYuUFJDVURBID0gZnVuY3Rpb24gKG5hbWUsIGZvbykgewog");
    sb.append("ICAgY3VzdG9tRGF0YVNvdXJjZXNbbmFtZV0gPSBmb287CiAgfTsKCiAgLy8gPGN1c3RvbWRhdGEgc3Jj");
    sb.append("PXNyYyAocGFyYW1ldGVyOng9eSkqID4KICBzZWxmLkNVREEgPSBmdW5jdGlvbiAocGFyZW50LCBwcmlv");
    sb.append("clN0YXRlLCBzcmMsIHJ4b2JqLCByZWRpcmVjdFRvLCBjaGlsZE1ha2VyKSB7CiAgICB2YXIgdW5zdWIg");
    sb.append("PSBtYWtlX3Vuc3ViKCk7CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDEwLCBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgIGZpcmVfdW5zdWIodW5zdWIpOwogICAgICBudWtlKHBhcmVudCk7CiAgICAgIHZhciBjdXN0b21U");
    sb.append("cmVlID0gZmFsc2U7CiAgICAgIGlmIChzcmMgaW4gY3VzdG9tRGF0YVNvdXJjZXMpIHsKICAgICAgICB2");
    sb.append("YXIgY29ucyA9IGN1c3RvbURhdGFTb3VyY2VzW3NyY107CiAgICAgICAgaWYgKHR5cGVvZiAoY29ucykg");
    sb.append("PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgY3VzdG9tVHJlZSA9IGNvbnMocnhvYmosIHByaW9yU3Rh");
    sb.append("dGUsIHJlZGlyZWN0VG8sIHNlbGYpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIWN1c3RvbVRy");
    sb.append("ZWUpIHsKICAgICAgICBjdXN0b21UcmVlID0gbmV3IEFkYW1hVHJlZSgpOwogICAgICB9CiAgICAgIHZh");
    sb.append("ciBzdGF0ZSA9IHsKICAgICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNlcnZpY2UsCiAgICAgICAgZGF0");
    sb.append("YTogeyBjb25uZWN0aW9uOiBwcmlvclN0YXRlLmNvbm5lY3Rpb24sIHRyZWU6IGN1c3RvbVRyZWUsIGRl");
    sb.append("bHRhOiB7fSwgcGFyZW50OiBudWxsLCBwYXRoOiBudWxsIH0sCiAgICAgICAgdmlldzogbmV3X2RlbHRh");
    sb.append("X2NvcHkocHJpb3JTdGF0ZS52aWV3KSwKICAgICAgICBjdXJyZW50OiAiZGF0YSIKICAgICAgfTsKICAg");
    sb.append("ICAgY2hpbGRNYWtlcihzdGF0ZSk7CiAgICAgIHN1YnNjcmliZV9zdGF0ZShzdGF0ZSwgdW5zdWIpOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgLy8gPHRpdGxlIHZhbHVlPSIuLi4iIC8+CiAgc2VsZi5TVCA9IGZ1bmN0aW9u");
    sb.append("IChyeG9iaikgewogICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgIGRvY3VtZW50LnRpdGxlID0gcnhv");
    sb.append("YmoudmFsdWU7CiAgICB9CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1bmN0aW9uICgpIHsKICAg");
    sb.append("ICAgaWYgKHJ4b2JqLnZhbHVlKSB7CiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSByeG9iai52YWx1ZTsK");
    sb.append("ICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gPHZpZXdzeW5jPgogIHNlbGYuVlN5ID0gZnVuY3Rpb24g");
    sb.append("KHBhcmVudCwgcHJpb3JTdGF0ZSwgYXZhaWwsIG5vdGF2YWlsKSB7CiAgICB2YXIgdW5zdWIgPSBtYWtl");
    sb.append("X3Vuc3ViKCk7CiAgICBwcmlvclN0YXRlLmRhdGEuY29ubmVjdGlvbi5zdWJzY3JpYmVfc3luYyhmdW5j");
    sb.append("dGlvbiAoc3luY2VkKSB7CiAgICAgIG51a2UocGFyZW50KTsKICAgICAgZmlyZV91bnN1Yih1bnN1Yik7");
    sb.append("CiAgICAgIHZhciBzdGF0ZSA9IGZvcmsocHJpb3JTdGF0ZSk7CiAgICAgIGlmIChzeW5jZWQpIHsKICAg");
    sb.append("ICAgICBhdmFpbChwYXJlbnQsIHN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBub3RhdmFpbChw");
    sb.append("YXJlbnQsIHN0YXRlKTsKICAgICAgfQogICAgICBzdWJzY3JpYmVfc3RhdGUoc3RhdGUsIHVuc3ViKTsK");
    sb.append("ICAgICAgLy8gVE9ETzogcmV0dXJuIGZhbHNlIHRvIHVuc3ViCiAgICAgIHJldHVybiB0cnVlOwogICAg");
    sb.append("fSk7CiAgfTsKCiAgdmFyIGJpbmRfcmVzcG9uZGVyID0gZnVuY3Rpb24gKGNvLCBjbGVhbnVwLCByZXRy");
    sb.append("eV9zbSkgewogICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwogICAgcmV0cnlfc20uYmFj");
    sb.append("a29mZiA9IDE7CiAgICByZXR1cm4gewogICAgICBuZXh0OiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAg");
    sb.append("ICAgIGNvLmRlYnVnZ2VyKHBheWxvYWQpOwogICAgICAgIGNvLnNldF9jb25uZWN0ZWQodHJ1ZSk7CiAg");
    sb.append("ICAgICAgcmV0cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPSAwOwogICAgICAgIHJldHJ5X3NtLmJhY2tv");
    sb.append("ZmYgPSAxOwogICAgICAgIGlmICgiZGF0YSIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28u");
    sb.append("dHJlZS51cGRhdGUocGF5bG9hZC5kZWx0YS5kYXRhKTsKICAgICAgICB9CiAgICAgICAgaWYgKCJvdXRz");
    sb.append("dGFuZGluZyIgaW4gcGF5bG9hZC5kZWx0YSkgewogICAgICAgICAgY28ub25kZWNpZGUocGF5bG9hZC5k");
    sb.append("ZWx0YS5vdXRzdGFuZGluZyk7CiAgICAgICAgfQogICAgICAgIGlmICgndmlld3N0YXRlJyBpbiBwYXls");
    sb.append("b2FkLmRlbHRhKSB7CiAgICAgICAgICBjby52aWV3c3RhdGV0cmVlLnVwZGF0ZShwYXlsb2FkLmRlbHRh");
    sb.append("LnZpZXdzdGF0ZSk7CiAgICAgICAgfQogICAgICAgIGlmICgnbG9nJyBpbiBwYXlsb2FkLmRlbHRhKSB7");
    sb.append("CiAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkLmRlbHRhLmxvZyk7CiAgICAgICAgfQogICAgICAg");
    sb.append("IGlmICgncmVsb2FkJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAgICAgICBpZiAocGF5bG9hZC5kZWx0");
    sb.append("YS5yZWxvYWRbJ3ByZXNlcnZlLXZpZXcnXSkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRl");
    sb.append("bSgncnh2aWV3c3RhdGUnLCBKU09OLnN0cmluZ2lmeShjby52aWV3c3RhdGV0cmVlLnJhdygpKSk7CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAg");
    sb.append("ICAgIGlmICgndmlld3BvcnQnIGluIHBheWxvYWQuZGVsdGEgJiYgJ21lc3NhZ2UnIGluIHBheWxvYWQu");
    sb.append("ZGVsdGEpIHsKICAgICAgICAgIHZhciB2aWV3cG9ydCA9IHBheWxvYWQuZGVsdGEudmlld3BvcnQ7CiAg");
    sb.append("ICAgICAgICBpZiAodmlld3BvcnQgaW4gY28uaGFuZGxlcnMpIHsKICAgICAgICAgICAgY28uaGFuZGxl");
    sb.append("cnNbdmlld3BvcnRdKHBheWxvYWQuZGVsdGEubWVzc2FnZSwgY28pOwogICAgICAgICAgfQogICAgICAg");
    sb.append("IH0KICAgICAgICBpZiAoJ3ZpZXctc3RhdGUtZmlsdGVyJyBpbiBwYXlsb2FkLmRlbHRhKSB7CiAgICAg");
    sb.append("ICAgICB2YXIgZmlsdGVyID0ge307CiAgICAgICAgICB2YXIga2V5cyA9IHBheWxvYWQuZGVsdGFbJ3Zp");
    sb.append("ZXctc3RhdGUtZmlsdGVyJ107CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGtleXMubGVuZ3Ro");
    sb.append("OyBrKyspIHsKICAgICAgICAgICAgZmlsdGVyW2tleXNba11dID0gdHJ1ZTsKICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIGNvLmZpbHRlciA9IGZpbHRlcjsKICAgICAgICAgIGNvLmhhc19maWx0ZXIgPSB0cnVlOwog");
    sb.append("ICAgICAgIH0KICAgICAgICBpZiAoJ2dvdG8nIGluIHBheWxvYWQuZGVsdGEpIHsKICAgICAgICAgIHNl");
    sb.append("bGYuZ290byhwYXlsb2FkLmRlbHRhLmdvdG8sIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAg");
    sb.append("IGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gc2hvdWxkbid0IHJlYWxpc3RpY2FsbHkg");
    sb.append("aGFwcGVuIFRPRE86IHZhbGlkYXRlIDwtIHRydXRoCiAgICAgICAgY28uc2V0X2Nvbm5lY3RlZChmYWxz");
    sb.append("ZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAgICAgfSwKICAgICAgZmFpbHVyZTogZnVuY3Rpb24g");
    sb.append("KHJlYXNvbikgewogICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBmYWlsdXJlCiAgICAgICAgY28uc2V0X2Nv");
    sb.append("bm5lY3RlZChmYWxzZSk7CiAgICAgICAgY28ucHRyID0gbnVsbDsKICAgICAgICBpZiAocmVhc29uID09");
    sb.append("IDQwMzQwMyB8fCByZWFzb24gPT0gNDAzNTAwIHx8IHJlYXNvbiA9PSAxODQzMzMpIHsKICAgICAgICAg");
    sb.append("IGNsZWFudXAoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gaXMgaXQgYW4g");
    sb.append("ZXhwZWN0ZWQgZXJyb3IgdGhhdCB3aWxsIGhhcHBlbiBhIGJ1bmNoPwogICAgICAgIHZhciBleHBlY3Rl");
    sb.append("ZF9lcnJvciA9IHJlYXNvbiA9PSA5OTk7CiAgICAgICAgLy8gZG8gd2Ugbm90IGtub3cgYWJvdXQgYW4g");
    sb.append("ZXJyb3IgdGhhdCBoYXBwZW5zIGEgYnVuY2g/IGlmIHNvLCB0aGVuIGxldCdzIGF0IGxlYXN0IHRyeSBh");
    sb.append("Z2FpbiBhIG51bWJlciBvZiBmaW5pdGUgdGltZXMuCiAgICAgICAgdmFyIGJsaW5kX3JldHJ5ID0gcmV0");
    sb.append("cnlfc20udW5leHBlY3RlZF9lcnJvcnMgPCAxNjsKICAgICAgICBpZiAoYmxpbmRfcmV0cnkpIHsKICAg");
    sb.append("ICAgICAgIHJldHJ5X3NtLnVuZXhwZWN0ZWRfZXJyb3JzKys7CiAgICAgICAgfQogICAgICAgIC8vIHJl");
    sb.append("dHJ5IG9uIGVpdGhlciBjYXNlCiAgICAgICAgaWYgKGV4cGVjdGVkX2Vycm9yIHx8IGJsaW5kX3JldHJ5");
    sb.append("KSB7CiAgICAgICAgICByZXRyeV9zbS5iYWNrb2ZmID0gTWF0aC5jZWlsKE1hdGgubWluKHJldHJ5X3Nt");
    sb.append("LmJhY2tvZmYgKyBNYXRoLnJhbmRvbSgpICogcmV0cnlfc20uYmFja29mZiArIChibGluZF9yZXRyeSA/");
    sb.append("IDEyNSA6IDEpLCAyNTAwKSk7CiAgICAgICAgICBpZiAoZXhwZWN0ZWRfZXJyb3IpIHsKICAgICAgICAg");
    sb.append("ICAgLy8gdGhlIGV4cGVjdGVkIGVycm9yIGlzIGEgY29ubmVjdGlvbiBldmVudCwgc28gd2UgcHJvdGVj");
    sb.append("dCB0aGUgc2VydmljZSBhbmQganVtcCBiYWNrLW9mZiByaWdodCB0byBuZWFyIG1heCBvdmVyIGEgbmlj");
    sb.append("ZSBzcHJlYWQKICAgICAgICAgICAgcmV0cnlfc20uYmFja29mZiA9IE1hdGgubWluKDEyNTAsIHJldHJ5");
    sb.append("X3NtLmJhY2tvZmYpICsgTWF0aC5yYW5kb20oKSAqIDEyNTA7CiAgICAgICAgICB9CiAgICAgICAgICBp");
    sb.append("ZiAoZXhwZWN0ZWRfZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImNvbm5lY3QtbG9zc3xy");
    sb.append("ZXRyeWluZy4uLiAoIiArIHJldHJ5X3NtLmJhY2tvZmYgKyAiKTsgcmVhc29uPSIgKyByZWFzb24gKyAo");
    sb.append("YmxpbmRfcmV0cnkgPyAiIFtibGluZF0iIDogIiIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("ICAgIGNvbnNvbGUubG9nKCJjb25uZWN0LWZhaWx1cmV8cmV0cnlpbmcuLi4gKCIgKyByZXRyeV9zbS5i");
    sb.append("YWNrb2ZmICsgIik7IHJlYXNvbj0iICsgcmVhc29uICsgKGJsaW5kX3JldHJ5ID8gIiBbYmxpbmRdIiA6");
    sb.append("ICIiKSk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBUT0RPOiBuZWVkIGEgZGlmZmVyZW50IGZlZWRi");
    sb.append("YWNrIG1lY2hhbmlzbSAobWF5YmUgYSBudW1iZXIgdW5kZXIgdGhlIHdpZmkgaWNvbj8pCiAgICAgICAg");
    sb.append("ICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0cnlfc20uZ28oKTsK");
    sb.append("ICAgICAgICAgIH0sIHJldHJ5X3NtLmJhY2tvZmYpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBj");
    sb.append("b25zb2xlLmxvZygiZ2F2ZSB1cCBjb25uZWN0aW9uOyIgKyBjby5sYWJlbCArICI7IHJlYXNvbj0iICsg");
    sb.append("cmVhc29uKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICB2YXIgc2V0dXBfY28gPSBmdW5j");
    sb.append("dGlvbihkZXNpcmVkLCB1bnN1YiwgY28sIHN0YXRlKSB7CiAgICBjby52aWV3c3RhdGV0cmVlID0gc3Rh");
    sb.append("dGUudmlldy50cmVlOwogICAgdmFyIHN5bmNfdHJlZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gbGV0");
    sb.append("J3MgY29weSBvdXQgdGhlIHRyZWUgZnJvbSB0aGUgdmlld3N0YXRlCiAgICAgIHZhciBuZXdfdHJlZSA9");
    sb.append("IHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpOwoKICAgICAgLy8gaWYgd2UgaGF2ZSBn");
    sb.append("b3QgYSBmaWx0ZXIgZnJvbSB0aGUgc2VydmVyLCB0aGVuIGxldCdzIGZpbHRlcgogICAgICBpZiAoY28u");
    sb.append("aGFzX2ZpbHRlcikgewogICAgICAgIC8vIHJlY29uc3RydWN0IHRoZSBuZXcgdmlldyBiYXNlZCBvbiB0");
    sb.append("aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSBmaWx0ZXIgYW5kIHRoZSBuZXcgc3RhdGUKICAgICAgICB2YXIg");
    sb.append("ZmlsdGVyZWQgPSB7fTsKICAgICAgICBmb3IgKHZhciBrIGluIG5ld190cmVlKSB7CiAgICAgICAgICBp");
    sb.append("ZiAoY28uZmlsdGVyW2tdKSB7CiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gbmV3X3RyZWVba107CiAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIGFzc3VtZSB0aGUgbmV3IHRyZWUKICAgICAgICBu");
    sb.append("ZXdfdHJlZSA9IGZpbHRlcmVkOwogICAgICB9CiAgICAgIC8vIGlmIHRoZSBjbG9uZSAoaS5lLiBzdHJp");
    sb.append("bmdpZmllZCB2ZXJzaW9uKSBpcyB0aGUgc2FtZSBhcyB3aGF0IHdlIGxhc3Qgc2VudCwgdGhlbiBkb24n");
    sb.append("dCBzZW5kIGFueXRoaW5nCiAgICAgIHZhciBwcmlvcl9jbG9uZSA9IEpTT04uc3RyaW5naWZ5KG5ld190");
    sb.append("cmVlKTsKICAgICAgaWYgKHByaW9yX2Nsb25lID09IGNvLnZpZXdzdGF0ZV9jbG9uZSkgewogICAgICAg");
    sb.append("IHJldHVybjsKICAgICAgfQogICAgICBjby52aWV3c3RhdGVfc2VudCA9IGZhbHNlOwogICAgICBjby52");
    sb.append("c3NlcSsrOwogICAgICBjby5zeW5jKCk7CiAgICAgIHZhciBzeW5jZWQgPSBmdW5jdGlvbiAoKSB7CiAg");
    sb.append("ICAgICAgaWYgKGNvLnZzc2VxID09IHRoaXMuYm91bmQpIHsKICAgICAgICAgIGNvLnZpZXdzdGF0ZV9z");
    sb.append("ZW50ID0gdHJ1ZTsKICAgICAgICAgIGNvLnN5bmMoKTsKICAgICAgICB9CiAgICAgIH0uYmluZCh7IGJv");
    sb.append("dW5kOiBjby52c3NlcSB9KTsKICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gSlNPTi5zdHJpbmdpZnko");
    sb.append("bmV3X3RyZWUpOwogICAgICBjby5wdHIudXBkYXRlKG5ld190cmVlLCB7IHN1Y2Nlc3M6IHN5bmNlZCwg");
    sb.append("ZmFpbHVyZTogc3luY2VkIH0pOwogICAgfTsKICAgIHZhciBiaW5kID0gZnVuY3Rpb24gKHNlbmROb3cp");
    sb.append("IHsKICAgICAgdW5zdWIudmlldyA9IHN0YXRlLnZpZXcudHJlZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkg");
    sb.append("ewogICAgICAgIGlmIChjby5wdHIgPT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K");
    sb.append("ICAgICAgICBzeW5jX3RyZWUoKTsKICAgICAgfSk7CiAgICAgIGlmIChzZW5kTm93KSB7CiAgICAgICAg");
    sb.append("c3luY190cmVlKCk7CiAgICAgIH0KICAgIH07CiAgICBpZiAoY28ucHRyICE9IG51bGwgJiYgY28uYm91");
    sb.append("bmQgPT0gZGVzaXJlZCkgewogICAgICBiaW5kKHRydWUpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9");
    sb.append("CiAgICBpZiAoY28ucHRyICE9IG51bGwpIHsKICAgICAgY28ucHRyLmVuZCh7IHN1Y2Nlc3M6IGZ1bmN0");
    sb.append("aW9uICgpIHsgfSwgZmFpbHVyZTogZnVuY3Rpb24gKCkgeyB9IH0pOwogICAgICBjby5wdHIgPSBudWxs");
    sb.append("OwogICAgfQogICAgcmV0dXJuIGJpbmQ7CiAgfTsKCiAgLy8gPGNvbm5lY3Rpb24gYmlsbGluZyAuLi4+");
    sb.append("CiAgc2VsZi5CQ09OTkVDVCA9IGZ1bmN0aW9uIChzdGF0ZSwgcnhvYmopIHsKICAgIHZhciB1bnN1YiA9");
    sb.append("IHsKICAgICAgdmlldzogZnVuY3Rpb24gKCkgewogICAgICB9CiAgICB9OwogICAgcnhvYmouX18gPSBk");
    sb.append("ZWJvdW5jZSg1LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKCduYW1lJyBpbiByeG9iaikpIHsKICAg");
    sb.append("ICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVu");
    sb.append("dGl0eSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICBpZiAoaWRM");
    sb.append("b29rdXAuYWJvcnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nv");
    sb.append("bm5lY3Rpb25fb2JqKHJ4b2JqLm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9ICI6YmlsbGluZzoiICsg");
    sb.append("aWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIHZhciBiaW5kID0gc2V0dXBfY28oZGVzaXJlZCwgdW5zdWIs");
    sb.append("IGNvLCBzdGF0ZSk7CiAgICAgIGlmIChiaW5kID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAg");
    sb.append("ICAgfQogICAgICBjby5ib3VuZCA9IGRlc2lyZWQ7CiAgICAgIHZhciBpZGVudGl0eSA9IGlkTG9va3Vw");
    sb.append("LmlkZW50aXR5OwogICAgICB2YXIgY2xlYW51cCA9IGlkTG9va3VwLmNsZWFudXA7CiAgICAgIHVuc3Vi");
    sb.append("LnZpZXcoKTsKICAgICAgY28uaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgY28uaGFuZGxlcnMgPSB7");
    sb.append("fTsKICAgICAgY28udmlld3N0YXRlX3NlbnQgPSB0cnVlOwogICAgICBjby5sYWJlbCA9ICJCaWxsaW5n");
    sb.append("IFsgIiArIHJ4b2JqLm5hbWUgKyAiXSI7CiAgICAgIGNvLnZpYV9iaWxsaW5nID0gdHJ1ZTsKICAgICAg");
    sb.append("Y28udmlhX2RvbWFpbiA9IGZhbHNlOwogICAgICB2YXIgcmV0cnlfc20gPSB7fTsKICAgICAgcmV0cnlf");
    sb.append("c20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJldHJ5X3NtKTsKICAgICAg");
    sb.append("cmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRvIG5vdGhpbmcgbmV3CiAg");
    sb.append("ICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBjby5wdHIgPSBjb25uZWN0aW9u");
    sb.append("LkJpbGxpbmdDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByZXRyeV9zbS5yZXNwb25kZXIpOwogICAg");
    sb.append("ICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7fSk7CiAgICAgIGJp");
    sb.append("bmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5kb21haW4gPSBsb2NhdGlvbi5ob3N0bmFtZTsK");
    sb.append("ICBzZWxmLmhvc3QgPSBsb2NhdGlvbi5ob3N0OwogIHNlbGYucHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90");
    sb.append("b2NvbDsKCiAgc2VsZi5tb2JpbGVJbml0ID0gZnVuY3Rpb24ob3ZlcnJpZGVEb21haW4pIHsKICAgIHNl");
    sb.append("bGYuZG9tYWluID0gb3ZlcnJpZGVEb21haW47CiAgICBzZWxmLmhvc3QgPSBvdmVycmlkZURvbWFpbjsK");
    sb.append("ICAgIHNlbGYucHJvdG9jb2wgPSAiaHR0cHMiOwogIH07CgogIC8vIDxjb25uZWN0aW9uIHVzZS1kb21h");
    sb.append("aW4gLi4uPgogIHNlbGYuRENPTk5FQ1QgPSBmdW5jdGlvbiAoc3RhdGUsIHJ4b2JqKSB7CiAgICB2YXIg");
    sb.append("dW5zdWIgPSB7CiAgICAgIHZpZXc6IGZ1bmN0aW9uICgpIHsKICAgICAgfQogICAgfTsKICAgIHJ4b2Jq");
    sb.append("Ll9fID0gZGVib3VuY2UoNSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoISgnbmFtZScgaW4gcnhvYmop");
    sb.append("KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQocnhv");
    sb.append("YmouaWRlbnRpdHksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJ4b2JqLnJlZGlyZWN0OyB9KTsKICAgICAg");
    sb.append("aWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbyA9");
    sb.append("IGdldF9jb25uZWN0aW9uX29iaihyeG9iai5uYW1lKTsKICAgICAgdmFyIGRvbWFpbiA9IHNlbGYuZG9t");
    sb.append("YWluOwogICAgICB2YXIgZGVzaXJlZCA9IGRvbWFpbiArIGlkTG9va3VwLmlkZW50aXR5OwogICAgICB2");
    sb.append("YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3ViLCBjbywgc3RhdGUpOwogICAgICBpZiAoYmlu");
    sb.append("ZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY28uYm91bmQgPSBkZXNp");
    sb.append("cmVkOwoKICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29rdXAuaWRlbnRpdHk7CiAgICAgIHZhciBjbGVh");
    sb.append("bnVwID0gaWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5zdWIudmlldygpOwogICAgICBjby5pZGVudGl0");
    sb.append("eSA9IGlkZW50aXR5OwogICAgICBjby5oYW5kbGVycyA9IHt9OwogICAgICBjby52aWV3c3RhdGVfc2Vu");
    sb.append("dCA9IHRydWU7CiAgICAgIGNvLmxhYmVsID0gIkRvbWFpbjoiICsgZG9tYWluICsgIiBbICIgKyByeG9i");
    sb.append("ai5uYW1lICsgIl0iOwogICAgICBjby52aWFfZG9tYWluID0gdHJ1ZTsKICAgICAgY28udmlhX2JpbGxp");
    sb.append("bmcgPSBmYWxzZTsKICAgICAgY28uZG9tYWluID0gZG9tYWluOwogICAgICB2YXIgcmV0cnlfc20gPSB7");
    sb.append("fTsKICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAsIHJl");
    sb.append("dHJ5X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFzIHRv");
    sb.append("IG5vdGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBjby5w");
    sb.append("dHIgPSBjb25uZWN0aW9uLkNvbm5lY3Rpb25DcmVhdGVWaWFEb21haW4oaWRlbnRpdHksIGRvbWFpbiwg");
    sb.append("c2FmZV9maWx0ZXIoc3RhdGUudmlldy50cmVlLmNvcHkoKSksIHJldHJ5X3NtLnJlc3BvbmRlcik7CiAg");
    sb.append("ICAgIH07CiAgICAgIHJldHJ5X3NtLmdvKCk7CiAgICAgIGNvLnRyZWUudXBkYXRlKHt9KTsKICAgICAg");
    sb.append("YmluZChmYWxzZSk7CiAgICB9KTsKICB9OwoKICAvLyA8Y29ubmVjdGlvbiAuLi4+CiAgc2VsZi5DT05O");
    sb.append("RUNUID0gZnVuY3Rpb24gKHN0YXRlLCByeG9iaikgewogICAgdmFyIHVuc3ViID0gewogICAgICB2aWV3");
    sb.append("OiBmdW5jdGlvbiAoKSB7CiAgICAgIH0KICAgIH07CiAgICByeG9iai5fXyA9IGRlYm91bmNlKDUsIGZ1");
    sb.append("bmN0aW9uICgpIHsKICAgICAgdmFyIHZhbGlkID0gJ2tleScgaW4gcnhvYmogJiYgJ3NwYWNlJyBpbiBy");
    sb.append("eG9iaiAmJiAnbmFtZScgaW4gcnhvYmo7CiAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICByZXR1cm47");
    sb.append("CiAgICAgIH0KICAgICAgdmFyIGlkTG9va3VwID0gc2VsZi5JRChyeG9iai5pZGVudGl0eSwgZnVuY3Rp");
    sb.append("b24gKCkgeyByZXR1cm4gcnhvYmoucmVkaXJlY3Q7IH0pOwogICAgICBpZiAoaWRMb29rdXAuYWJvcnQp");
    sb.append("IHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGNvID0gZ2V0X2Nvbm5lY3Rpb25fb2Jq");
    sb.append("KHJ4b2JqLm5hbWUpOwogICAgICB2YXIgZGVzaXJlZCA9IHJ4b2JqLnNwYWNlICsgIi8iICsgcnhvYmou");
    sb.append("a2V5ICsgIi8iICsgaWRMb29rdXAuaWRlbnRpdHk7IC8vIFRPRE86IG5lZWQgc29tZSBraW5kIG9mIGhh");
    sb.append("c2hpbmcgZnVuY3Rpb24gaGVyZQogICAgICB2YXIgYmluZCA9IHNldHVwX2NvKGRlc2lyZWQsIHVuc3Vi");
    sb.append("LCBjbywgc3RhdGUpOwogICAgICBpZiAoYmluZCA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAg");
    sb.append("ICAgIH0KICAgICAgY28uYm91bmQgPSBkZXNpcmVkOwoKICAgICAgdmFyIGlkZW50aXR5ID0gaWRMb29r");
    sb.append("dXAuaWRlbnRpdHk7CiAgICAgIHZhciBjbGVhbnVwID0gaWRMb29rdXAuY2xlYW51cDsKICAgICAgdW5z");
    sb.append("dWIudmlldygpOwogICAgICBjby5zcGFjZSA9IHJ4b2JqLnNwYWNlOwogICAgICBjby5rZXkgPSByeG9i");
    sb.append("ai5rZXk7CiAgICAgIGNvLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgIGNvLmhhbmRsZXJzID0ge307");
    sb.append("CiAgICAgIGNvLnZpZXdzdGF0ZV9zZW50ID0gdHJ1ZTsKICAgICAgY28ubGFiZWwgPSBjby5zcGFjZSAr");
    sb.append("ICIvIiArIGNvLmtleSArICIgWyAiICsgcnhvYmoubmFtZSArICJdIjsKICAgICAgY28udmlhX2RvbWFp");
    sb.append("biA9IGZhbHNlOwogICAgICBjby52aWFfYmlsbGluZyA9IGZhbHNlOwogICAgICB2YXIgcmV0cnlfc20g");
    sb.append("PSB7fTsKICAgICAgcmV0cnlfc20ucmVzcG9uZGVyID0gYmluZF9yZXNwb25kZXIoY28sIGNsZWFudXAs");
    sb.append("IHJldHJ5X3NtKTsKICAgICAgcmV0cnlfc20uZ28gPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBiaWFz");
    sb.append("IHRvIG5vdGhpbmcgbmV3CiAgICAgICAgY28udmlld3N0YXRlX2Nsb25lID0gInt9IjsKICAgICAgICBj");
    sb.append("by5wdHIgPSBjb25uZWN0aW9uLkNvbm5lY3Rpb25DcmVhdGUoaWRlbnRpdHksIHJ4b2JqLnNwYWNlLCBy");
    sb.append("eG9iai5rZXksIHNhZmVfZmlsdGVyKHN0YXRlLnZpZXcudHJlZS5jb3B5KCkpLCByZXRyeV9zbS5yZXNw");
    sb.append("b25kZXIpOwogICAgICB9OwogICAgICByZXRyeV9zbS5nbygpOwogICAgICBjby50cmVlLnVwZGF0ZSh7");
    sb.append("fSk7CiAgICAgIGJpbmQoZmFsc2UpOwogICAgfSk7CiAgfTsKCiAgc2VsZi5JTlRFUk5BTCA9IGZ1bmN0");
    sb.append("aW9uIChwcmlvclN0YXRlKSB7CiAgICByZXR1cm4gewogICAgICBzZXJ2aWNlOiBwcmlvclN0YXRlLnNl");
    sb.append("cnZpY2UsCiAgICAgIGRhdGE6IHsgY29ubmVjdGlvbjogbnVsbCwgdHJlZTogbmV3IEFkYW1hVHJlZSgp");
    sb.append("LCBkZWx0YToge30sIHBhcmVudDogbnVsbCwgcGF0aDogbnVsbCB9LAogICAgICB2aWV3OiBuZXdfZGVs");
    sb.append("dGFfY29weShwcmlvclN0YXRlLnZpZXcpLAogICAgICBjdXJyZW50OiAiZGF0YSIKICAgIH07CiAgfTsK");
    sb.append("CiAgdmFyIHJlY2FsbF9lbWFpbCA9IGZ1bmN0aW9uIChlbCkgewogICAgaWYgKGVsLnRhZ05hbWUudG9V");
    sb.append("cHBlckNhc2UoKSA9PSAiSU5QVVQiKSB7CiAgICAgIGlmICgiZW1haWwiID09IGVsLnR5cGUgJiYgImVt");
    sb.append("YWlsIiA9PSBlbC5uYW1lKSB7CiAgICAgICAgZWwudmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgi");
    sb.append("ZW1haWxfcmVtZW1iZXIiKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCJjaGlsZHJlbiIg");
    sb.append("aW4gZWwpIHsKICAgICAgICB2YXIgYXJyID0gZWwuY2hpbGRyZW47CiAgICAgICAgdmFyIG4gPSBhcnIu");
    sb.append("bGVuZ3RoOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7CiAgICAgICAgICByZWNh");
    sb.append("bGxfZW1haWwoZWwuY2hpbGRyZW5ba10pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIHNl");
    sb.append("bGYuYVVQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICB2");
    sb.append("YXIgaWRMb29rdXAgPSBzZWxmLklEKGlkZW50aXR5TmFtZSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcnhv");
    sb.append("YmoucnhfZm9yd2FyZDsgfSk7IC8vIFRPRE86IG1ha2Ugcnh2YXIKICAgIGlmIChpZExvb2t1cC5hYm9y");
    sb.append("dCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBmb3JtLmFjdGlvbiA9ICJodHRwczovLyIgKyBBZGFt");
    sb.append("YS5Qcm9kdWN0aW9uICsgIi9+dXBsb2FkIjsKICAgIGZvcm0ubWV0aG9kID0gInBvc3QiOwogICAgZm9y");
    sb.append("bS5lbmN0eXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogICAgdmFyIGlkZW50aXR5SW5wdXQgPSBk");
    sb.append("b2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgaWRlbnRpdHlJbnB1dC50eXBlID0gImhp");
    sb.append("ZGRlbiI7CiAgICBpZGVudGl0eUlucHV0Lm5hbWUgPSAiaWRlbnRpdHkiOwogICAgaWRlbnRpdHlJbnB1");
    sb.append("dC52YWx1ZSA9IGlkTG9va3VwLmlkZW50aXR5OwogICAgZm9ybS5hcHBlbmRDaGlsZChpZGVudGl0eUlu");
    sb.append("cHV0KTsKICAgIHZhciBpZnJhbWVUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUi");
    sb.append("KTsKICAgIGlmcmFtZVRhcmdldC5uYW1lID0gIlVQTE9BRF8iICsgTWF0aC5yYW5kb20oKTsKICAgIGlm");
    sb.append("cmFtZVRhcmdldC53aWR0aCA9ICIxIjsKICAgIGlmcmFtZVRhcmdldC5oZWlnaHQgPSAiMSI7CgogICAg");
    sb.append("Zm9ybS5hcHBlbmRDaGlsZChpZnJhbWVUYXJnZXQpOwogICAgZm9ybS50YXJnZXQgPSBpZnJhbWVUYXJn");
    sb.append("ZXQubmFtZTsKICB9OwoKICBzZWxmLmFEVVAgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5");
    sb.append("TmFtZSwgcnhvYmopIHsKICAgIHZhciBpZExvb2t1cCA9IHNlbGYuSUQoaWRlbnRpdHlOYW1lLCBmdW5j");
    sb.append("dGlvbiAoKSB7IHJldHVybiByeG9iai5yeF9mb3J3YXJkOyB9KTsgLy8gVE9ETzogbWFrZSByeHZhcgog");
    sb.append("ICAgaWYgKGlkTG9va3VwLmFib3J0KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvcm0uYWN0aW9u");
    sb.append("ID0gc2VsZi5wcm90b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiL351cGxvYWQiOwogICAgZm9ybS5t");
    sb.append("ZXRob2QgPSAicG9zdCI7CiAgICBmb3JtLmVuY3R5cGUgPSAibXVsdGlwYXJ0L2Zvcm0tZGF0YSI7CiAg");
    sb.append("ICB7CiAgICAgIHZhciBpZGVudGl0eUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQi");
    sb.append("KTsKICAgICAgaWRlbnRpdHlJbnB1dC50eXBlID0gImhpZGRlbiI7CiAgICAgIGlkZW50aXR5SW5wdXQu");
    sb.append("bmFtZSA9ICJpZGVudGl0eSI7CiAgICAgIGlkZW50aXR5SW5wdXQudmFsdWUgPSBpZExvb2t1cC5pZGVu");
    sb.append("dGl0eTsKICAgICAgZm9ybS5hcHBlbmRDaGlsZChpZGVudGl0eUlucHV0KTsKICAgIH0KICAgIHsKICAg");
    sb.append("ICAgdmFyIGRvbWFpbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAg");
    sb.append("ZG9tYWluSW5wdXQudHlwZSA9ICJoaWRkZW4iOwogICAgICBkb21haW5JbnB1dC5uYW1lID0gImRvbWFp");
    sb.append("biI7CiAgICAgIGRvbWFpbklucHV0LnZhbHVlID0gc2VsZi5kb21haW47CiAgICAgIGZvcm0uYXBwZW5k");
    sb.append("Q2hpbGQoZG9tYWluSW5wdXQpOwogICAgfQogICAgdmFyIGlmcmFtZVRhcmdldCA9IGRvY3VtZW50LmNy");
    sb.append("ZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgaWZyYW1lVGFyZ2V0Lm5hbWUgPSAiVVBMT0FEXyIgKyBN");
    sb.append("YXRoLnJhbmRvbSgpOwogICAgaWZyYW1lVGFyZ2V0LndpZHRoID0gIjEiOwogICAgaWZyYW1lVGFyZ2V0");
    sb.append("LmhlaWdodCA9ICIxIjsKICAgIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lVGFyZ2V0KTsKICAgIGZvcm0u");
    sb.append("dGFyZ2V0ID0gaWZyYW1lVGFyZ2V0Lm5hbWU7CiAgfTsKCiAgdmFyIHN0YXNoX2lkZW50aXR5ID0gZnVu");
    sb.append("Y3Rpb24obmFtZSwgaWRlbnRpdHksIGNvbm5lY3Rpb24pIHsKICAgIHZhciByZXEgPSB7fTsKICAgIHJl");
    sb.append("cVsnbmFtZSddID0gbmFtZTsKICAgIHJlcVsnaWRlbnRpdHknXSA9IGlkZW50aXR5OwogICAgcmVxWydt");
    sb.append("YXgtYWdlJ10gPSA1NTI5NjAwOwoKICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwog");
    sb.append("ICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5y");
    sb.append("ZWFkeVN0YXRlID09IDQpIHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAg");
    sb.append("ICBjb25uZWN0aW9uLklkZW50aXR5U3Rhc2goaWRlbnRpdHksIG5hbWUsIHsKICAgICAgICAgICAgc3Vj");
    sb.append("Y2VzczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgLy8gVEhJUyBIQVMgRFJBR09OUyBVTlRJTCBB");
    sb.append("IEZVTEwgUFJPRFVDVElPTiBERVBMT1lNRU5UCiAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oImlkZW50aXR5XyIgKyBuYW1lLCAiY29va2llOiIgKyBuYW1lKTsKICAgICAgICAgICAgfSwK");
    sb.append("ICAgICAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24oeHl6KSB7CgogICAgICAgICAgICB9CiAgICAgICAg");
    sb.append("ICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB4aHR0cC5vcGVuKCJQVVQiLCBzZWxmLnBy");
    sb.append("b3RvY29sICsgIi8vIiArIHNlbGYuaG9zdCArICIvfnN0YXNoLyIgKyBEYXRlLm5vdygpLCB0cnVlKTsK");
    sb.append("ICAgIHhodHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICB4aHR0cC5zZW5kKEpTT04uc3RyaW5n");
    sb.append("aWZ5KHJlcSkpOwogIH07CgogIHZhciBnZXRfZm9ybV9hbmRfcHcgPSBmdW5jdGlvbihmb3JtKSB7CiAg");
    sb.append("ICB2YXIgcGFzc3dvcmRzID0ge307CiAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRz");
    sb.append("KTsKICAgIGlmICgncGFzc3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICByZXFbJ3Bhc3N3b3JkJ10g");
    sb.append("PSBwYXNzd29yZHNbJ3Bhc3N3b3JkJ107CiAgICB9CiAgICBpZiAoJ25ld19wYXNzd29yZCcgaW4gcGFz");
    sb.append("c3dvcmRzKSB7CiAgICAgIHJlcVsnbmV3X3Bhc3N3b3JkJ10gPSBwYXNzd29yZHNbJ25ld19wYXNzd29y");
    sb.append("ZCddOwogICAgfQogICAgcmV0dXJuIHJlcTsKICB9CgogIHZhciBjb21tb25BdXRob3JpemUgPSBmdW5j");
    sb.append("dGlvbihmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgbmV4dFN0ZXApIHsKICAgIHJ4b2Jq");
    sb.append("Ll9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBm");
    sb.append("dW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgc2VuZFJl");
    sb.append("cSA9IGZ1bmN0aW9uKHJlcSkgewogICAgICAgIHZhciBzbSA9IHthdHRlbXB0czowfTsKICAgICAgICBz");
    sb.append("bS5yZXNwb25kZXIgPSB7CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAg");
    sb.append("ICAgICAgICBpZGVudGl0aWVzW2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAg");
    sb.append("ICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50aXR5TmFtZSwgcGF5bG9h");
    sb.append("ZC5pZGVudGl0eSk7CiAgICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9h");
    sb.append("ZC5pZGVudGl0eSwgY29ubmVjdGlvbik7CiAgICAgICAgICAgIC8vIFRPRE86IGJsb3cgYXdheSBjb25u");
    sb.append("ZWN0aW9ucwogICAgICAgICAgICBzZWxmLmdvdG8ocnhvYmoucnhfZm9yd2FyZCwgZmFsc2UpOwogICAg");
    sb.append("ICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbHVyZTog");
    sb.append("ZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBz");
    sb.append("aWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAg");
    sb.append("ICAgICBuZXh0U3RlcChyZXEsIHNtLnJlc3BvbmRlcik7CiAgICAgIH0KICAgICAgdmFyIHBhc3N3b3Jk");
    sb.append("cyA9IHt9OwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKICAgICAgaWYg");
    sb.append("KCdwYXNzd29yZCcgaW4gcGFzc3dvcmRzKSB7CiAgICAgICAgcmVxWydwYXNzd29yZCddID0gcGFzc3dv");
    sb.append("cmRzWydwYXNzd29yZCddOwogICAgICB9CiAgICAgIGlmICgnbmV3X3Bhc3N3b3JkJyBpbiBwYXNzd29y");
    sb.append("ZHMpIHsKICAgICAgICBjb25uZWN0aW9uLkRvY3VtZW50c0hhc2hQYXNzd29yZChwYXNzd29yZHNbJ25l");
    sb.append("d19wYXNzd29yZCddLCB7CiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3KSB7CiAg");
    sb.append("ICAgICAgICAgIHJlcVsnbmV3X3Bhc3N3b3JkJ10gPSBoYXNoZWRfcHcucGFzc3dvcmRIYXNoOwogICAg");
    sb.append("ICAgICAgICBzZW5kUmVxKHJlcSk7CiAgICAgICAgICB9LAogICAgICAgICAgZmFpbGVkOiBmdW5jdGlv");
    sb.append("biAoKSB7CiAgICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGhhc2ggcGFzc3dv");
    sb.append("cmQiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZW5kUmVx");
    sb.append("KHJlcSk7CiAgICAgIH0KICAgIH0sIHRydWUpOwogIH0KCiAgLy8gcng6YWN0aW9uPWRvY3VtZW50OmF1");
    sb.append("dGhvcml6ZQogIHNlbGYuYURPQyA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCBy");
    sb.append("eG9iaikgewogICAgY29tbW9uQXV0aG9yaXplKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2Jq");
    sb.append("LCBmdW5jdGlvbihyZXEsIHJlc3BvbmRlcikgewogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9y");
    sb.append("aXphdGlvbihyZXEuc3BhY2UsIHJlcS5rZXksIHJlcSwgcmVzcG9uZGVyKTsKICAgIH0pOwogIH07Cgog");
    sb.append("IC8vIHJ4OmFjdGlvbj1kb21haW46YXV0aG9yaXplCiAgc2VsZi5hRE9NID0gZnVuY3Rpb24gKGZvcm0s");
    sb.append("IHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICBjb21tb25BdXRob3JpemUoZm9ybSwgc3Rh");
    sb.append("dGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIGZ1bmN0aW9uKHJlcSwgcmVzcG9uZGVyKSB7CiAgICAgIGNv");
    sb.append("bm5lY3Rpb24uRG9jdW1lbnRBdXRob3JpemF0aW9uRG9tYWluKHNlbGYuZG9tYWluLCByZXEsIHJlc3Bv");
    sb.append("bmRlcik7CiAgICB9KTsKICB9OwoKICAvLyByeDpldmVudD10b2dnbGUtcGFzc3dvcmQKICBzZWxmLm9u");
    sb.append("UFdUID0gZnVuY3Rpb24oZG9tLCBzdGF0ZSwgdHlwZSkgewogICAgcmVnX2V2ZW50KHN0YXRlLCBkb20s");
    sb.append("IHR5cGUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgY3VyID0gZG9tOwogICAgICB3aGlsZSAo");
    sb.append("Y3VyLnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPSAiUEFTU1dPUkQtSE9MREVSIikgewogICAgICAgIGN1");
    sb.append("ciA9IGN1ci5wYXJlbnRFbGVtZW50OwogICAgICB9CiAgICAgIHZhciBodW50ID0gZnVuY3Rpb24obm9k");
    sb.append("ZSkgewogICAgICAgIGlmIChub2RlLnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PSAiSU5QVVQiICYmIChu");
    sb.append("b2RlLm5hbWUgPT0gInBhc3N3b3JkIiB8fCBub2RlLm5hbWUgPT0gImNvbmZpcm0tcGFzc3dvcmQiIHx8");
    sb.append("IG5hbWUgPT0gIm5ld19wYXNzd29yZCIgfHwgbmFtZSA9PSAiY29uZmlybS1uZXdfcGFzc3dvcmQiKSkg");
    sb.append("ewogICAgICAgICAgaWYgKG5vZGUudHlwZSA9PSAicGFzc3dvcmQiKSB7CiAgICAgICAgICAgIG5vZGUu");
    sb.append("dHlwZSA9ICJ0ZXh0IgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbm9kZS50eXBlID0gInBh");
    sb.append("c3N3b3JkIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoJ2NoaWxkcmVuJyBpbiBub2Rl");
    sb.append("KSB7CiAgICAgICAgICB2YXIgY2ggPSBub2RlLmNoaWxkcmVuOwogICAgICAgICAgdmFyIG4gPSBjaC5s");
    sb.append("ZW5ndGg7CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgewogICAgICAgICAgICBo");
    sb.append("dW50KGNoW2tdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChjdXIgIT0g");
    sb.append("bnVsbCkgewogICAgICAgIGh1bnQoY3VyKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gUlVOVElN");
    sb.append("RSB8IHJ4OmFjdGlvbj1kb21haW46c2lnbi1pbiAodG8gZGVwcmVjYXRlKQogIHNlbGYuYWREU08gPSBm");
    sb.append("dW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsKICAgIHJ4b2JqLl9fID0g");
    sb.append("ZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlv");
    sb.append("biAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zv");
    sb.append("cm1fYW5kX3B3KGZvcm0pOwogICAgICB2YXIgc20gPSB7YXR0ZW1wdHM6MH07CiAgICAgIHNtLnJlc3Bv");
    sb.append("bmRlciA9IHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgaWRl");
    sb.append("bnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAgIGxvY2FsU3Rv");
    sb.append("cmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50aXR5KTsK");
    sb.append("ICAgICAgICAgIHN0YXNoX2lkZW50aXR5KGlkZW50aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSwgY29u");
    sb.append("bmVjdGlvbik7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29ubmVjdGlvbnMKICAgICAgICAg");
    sb.append("IHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3Mo");
    sb.append("Zm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAg");
    sb.append("ICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGludG8gZG9jdW1lbnQ6IiArIHJl");
    sb.append("YXNvbik7CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXpl");
    sb.append("RG9tYWluKHNlbGYuZG9tYWluLCByZXEudXNlcm5hbWUsIHJlcS5wYXNzd29yZCwgc20ucmVzcG9uZGVy");
    sb.append("KTsKICAgIH0sIHRydWUpOwogIH0KCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb2N1bWVudDpzaWdu");
    sb.append("LWluICh0byBkZXByZWNhdGUpCiAgc2VsZi5hRFNPID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVu");
    sb.append("dGl0eU5hbWUsIHJ4b2JqKSB7IC8vIERFUFJFQ0FURUQKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkg");
    sb.append("eyB9OwogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAg");
    sb.append("ICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZv");
    sb.append("cm0pOwogICAgICBjb25uZWN0aW9uLkRvY3VtZW50QXV0aG9yaXplKHJlcS5zcGFjZSwgcmVxLmtleSwg");
    sb.append("cmVxLnVzZXJuYW1lLCByZXEucGFzc3dvcmQsIHsKICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocGF5");
    sb.append("bG9hZCkgewogICAgICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0gcGF5bG9hZC5pZGVudGl0");
    sb.append("eTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8iICsgaWRlbnRpdHlOYW1l");
    sb.append("LCBwYXlsb2FkLmlkZW50aXR5KTsKICAgICAgICAgIC8vIFRPRE86IGJsb3cgYXdheSBjb25uZWN0aW9u");
    sb.append("cwogICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgIGZp");
    sb.append("cmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFz");
    sb.append("b24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNpZ25pbmcgaW50byBkb2N1");
    sb.append("bWVudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAg");
    sb.append("Ly8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb21haW46c2lnbi1pbi1yZXNldCAodG8gZGVwcmVjYXRlKQog");
    sb.append("IHNlbGYuYWREU09yID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7");
    sb.append("IC8vIERFUFJFQ0FURUQKICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgZm9ybS5hZGRF");
    sb.append("dmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVm");
    sb.append("YXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm1fYW5kX3B3KGZvcm0pOwogICAgICBjb25uZWN0");
    sb.append("aW9uLkRvY3VtZW50QXV0aG9yaXplRG9tYWluV2l0aFJlc2V0KHNlbGYuZG9tYWluLCByZXEudXNlcm5h");
    sb.append("bWUsIHJlcS5wYXNzd29yZCwgcmVxLm5ld19wYXNzd29yZCx7CiAgICAgICAgc3VjY2VzczogZnVuY3Rp");
    sb.append("b24gKHBheWxvYWQpIHsKICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQu");
    sb.append("aWRlbnRpdHk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiaWRlbnRpdHlfIiArIGlkZW50");
    sb.append("aXR5TmFtZSwgcGF5bG9hZC5pZGVudGl0eSk7CiAgICAgICAgICAvLyBUT0RPOiBibG93IGF3YXkgY29u");
    sb.append("bmVjdGlvbnMKICAgICAgICAgIHNlbGYuZ290byhyeG9iai5yeF9mb3J3YXJkLCBmYWxzZSk7CiAgICAg");
    sb.append("ICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWlsdXJlOiBmdW5jdGlv");
    sb.append("biAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBzaWduaW5nIGlu");
    sb.append("dG8gZG9jdW1lbnQ6IiArIHJlYXNvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIHRydWUpOwog");
    sb.append("IH0KCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1kb2N1bWVudDpzaWduLWluLXJlc2V0ICh0byBkZXBy");
    sb.append("ZWNhdGUpCiAgc2VsZi5hRFNPciA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCBy");
    sb.append("eG9iaikgeyAvLyBERVBSRUNBVEVECiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZv");
    sb.append("cm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJl");
    sb.append("dmVudERlZmF1bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAg");
    sb.append("Y29ubmVjdGlvbi5Eb2N1bWVudEF1dGhvcml6ZVdpdGhSZXNldChyZXEuc3BhY2UsIHJlcS5rZXksIHJl");
    sb.append("cS51c2VybmFtZSwgcmVxLnBhc3N3b3JkLCByZXEubmV3X3Bhc3N3b3JkLHsKICAgICAgICBzdWNjZXNz");
    sb.append("OiBmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgaWRlbnRpdGllc1tpZGVudGl0eU5hbWVdID0g");
    sb.append("cGF5bG9hZC5pZGVudGl0eTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8i");
    sb.append("ICsgaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50aXR5KTsKICAgICAgICAgIC8vIFRPRE86IGJsb3cg");
    sb.append("YXdheSBjb25uZWN0aW9ucwogICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNl");
    sb.append("KTsKICAgICAgICAgIGZpcmVfc3VjY2Vzcyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6");
    sb.append("IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHNp");
    sb.append("Z25pbmcgaW50byBkb2N1bWVudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0sIHRydWUpOwog");
    sb.append("ICAgfSk7CiAgfTsKCiAgc2VsZi5hdXRvZ2VuaWQgPSAxOwogIHNlbGYuWCA9IGZ1bmN0aW9uKCkgewog");
    sb.append("ICAgc2VsZi5hdXRvZ2VuaWQrKzsKICAgIHJldHVybiAneCcgKyBzZWxmLmF1dG9nZW5pZDsKICB9OwoK");
    sb.append("ICB2YXIgdHJhbnNmb3JtcyA9IHt9OwogIHRyYW5zZm9ybXNbJ3ByaW5jaXBhbC5hZ2VudCddID0gZnVu");
    sb.append("Y3Rpb24oeCkgeyByZXR1cm4geC5hZ2VudDsgfTsKICB0cmFuc2Zvcm1zWydwcmluY2lwYWwuYXV0aG9y");
    sb.append("aXR5J10gPSBmdW5jdGlvbih4KSB7IHJldHVybiB4LmF1dGhvcml0eTsgfTsKICB0cmFuc2Zvcm1zWyd0");
    sb.append("cmltJ10gPSBmdW5jdGlvbih4KSB7IHJldHVybiAoJycgKyB4KS50cmltKCk7IH07CiAgdHJhbnNmb3Jt");
    sb.append("c1sndXBwZXInXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuICgnJyArIHgpLnRvVXBwZXJDYXNlKCk7IH07");
    sb.append("CiAgdHJhbnNmb3Jtc1snbG93ZXInXSA9IGZ1bmN0aW9uKHgpIHsgcmV0dXJuICgnJyArIHgpLnRvTG93");
    sb.append("ZXJDYXNlKCk7IH07CiAgdHJhbnNmb3Jtc1snaXNfZW1wdHlfc3RyJ10gPSBmdW5jdGlvbih4KSB7IHJl");
    sb.append("dHVybiB4ID09ICIiOyB9OwogIHRyYW5zZm9ybXNbJ2lzX25vdF9lbXB0eV9zdHInXSA9IGZ1bmN0aW9u");
    sb.append("KHgpIHsgcmV0dXJuIHggIT0gIiI7IH07CiAgdHJhbnNmb3Jtc1snanNvbmlmeSddID0gZnVuY3Rpb24o");
    sb.append("eCkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeCk7IH07CiAgdHJhbnNmb3Jtc1sndGltZV9ub3cnXSA9");
    sb.append("IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIERhdGUubm93KCkgKyAiIjsgfTsKICB0cmFuc2Zvcm1zWydzaXpl");
    sb.append("X2J5dGVzJ10gPSBmdW5jdGlvbih4cmF3KSB7CiAgICB2YXIgeCA9IDAuMDsKICAgIGlmICh0eXBlb2Yo");
    sb.append("eHJhdykgPT0gJ251bWJlcicpIHsKICAgICAgeCA9IHhyYXc7CiAgICB9IGVsc2UgewogICAgICB0cnkg");
    sb.append("ewogICAgICAgIHggPSBwYXJzZUZsb2F0KHhyYXcpOwogICAgICB9IGNhdGNoIChleCkgewoKICAgICAg");
    sb.append("fQogICAgfQogICAgdmFyIGl2YWwgPSBNYXRoLmZsb29yKHgpOwogICAgaWYgKGl2YWwgPCAxMDI0KSB7");
    sb.append("CiAgICAgIHJldHVybiBpdmFsICsgIiBCIjsKICAgIH0KICAgIGl2YWwgLz0gMTAyNDsKICAgIGlmIChp");
    sb.append("dmFsIDwgMTAyNCkgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChpdmFsICogMTApIC8gMTAuMCArICIg");
    sb.append("S0IiOwogICAgfQogICAgaXZhbCAvPSAxMDI0OwogICAgaWYgKGl2YWwgPCAxMDI0KSB7CiAgICAgIHJl");
    sb.append("dHVybiBNYXRoLnJvdW5kKGl2YWwgKiAxMCkgLyAxMC4wICsgIiBNQiI7CiAgICB9CiAgICBpdmFsIC89");
    sb.append("IDEwMjQ7CiAgICBpZiAoaXZhbCA8IDEwMjQpIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQoaXZhbCAq");
    sb.append("IDEwKSAvIDEwLjAgKyAiIEdCIjsKICAgIH0KICB9CiAgdHJhbnNmb3Jtc1sndnVsZ2FyX2ZyYWN0aW9u");
    sb.append("J10gPSBmdW5jdGlvbih4cmF3KSB7CiAgICB2YXIgeCA9IDAuMDsKICAgIGlmICh0eXBlb2YoeHJhdykg");
    sb.append("PT0gJ251bWJlcicpIHsKICAgICAgeCA9IHhyYXc7CiAgICB9IGVsc2UgewogICAgICB0cnkgewogICAg");
    sb.append("ICAgIHggPSBwYXJzZUZsb2F0KHhyYXcpOwogICAgICB9IGNhdGNoIChleCkgewoKICAgICAgfQogICAg");
    sb.append("fQogICAgdmFyIGl2YWwgPSBNYXRoLmZsb29yKHgpOwogICAgdmFyIGNoYW5nZSA9IHggLSBpdmFsOwog");
    sb.append("ICAgdmFyIHN1ZmZpeCA9ICIiOwogICAgaWYgKGNoYW5nZSA8PSAwLjA2MjUpIHsKICAgICAgLy8gMAog");
    sb.append("ICAgfSBlbHNlIGlmIChjaGFuZ2UgPD0gMC4xODc1KSB7CiAgICAgIHN1ZmZpeCA9ICLihZsiOwogICAg");
    sb.append("fSBlbHNlIGlmIChjaGFuZ2UgPD0gMC4zMTI1KSB7CiAgICAgIHN1ZmZpeCA9ICLCvCI7CiAgICB9IGVs");
    sb.append("c2UgaWYgKGNoYW5nZSA8PSAwLjQzNzUpIHsKICAgICAgc3VmZml4ID0gIuKFnCI7CiAgICB9IGVsc2Ug");
    sb.append("aWYgKGNoYW5nZSA8PSAwLjU2MjUpIHsKICAgICAgc3VmZml4ID0gIsK9IjsKICAgIH0gZWxzZSBpZiAo");
    sb.append("Y2hhbmdlIDw9IDAuNjg3NSkgewogICAgICBzdWZmaXggPSAi4oWdIjsKICAgIH0gZWxzZSBpZiAoY2hh");
    sb.append("bmdlIDw9IDAuODEyNSkgewogICAgICBzdWZmaXggPSAiwr4iOyAvLyAzLzQKICAgIH0gZWxzZSBpZiAo");
    sb.append("Y2hhbmdlIDw9IDAuOTM3NSkgewogICAgICBzdWZmaXggPSAi4oWeIjsKICAgIH0gLy8gZWxzZSAxCiAg");
    sb.append("ICByZXR1cm4gaXZhbCArIHN1ZmZpeDsKICB9CiAgdHJhbnNmb3Jtc1sndGltZV9hZ28nXSA9IGZ1bmN0");
    sb.append("aW9uKGR0KSB7CiAgICAvLyBvbmx5IHRyYW5zZm9ybSBzdHJpbmdzCiAgICBpZiAodHlwZW9mIChkdCkg");
    sb.append("PT0gInN0cmluZyIpIHsKICAgICAgLy8gbGV0J3Mgc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhl");
    sb.append("IGJyYWNrZXRzCiAgICAgIHZhciBzID0gZHQ7CiAgICAgIHZhciBrID0gcy5pbmRleE9mKCdbJyk7CiAg");
    sb.append("ICAgIGlmIChrID49IDApIHsKICAgICAgICBzID0gcy5zdWJzdHJpbmcoMCwgayk7CiAgICAgIH0KICAg");
    sb.append("ICAgdmFyIGQgPSBEYXRlLnBhcnNlKHMpOwogICAgICBpZiAoTnVtYmVyLmlzTmFOKGQpKSB7CiAgICAg");
    sb.append("ICAgLy8gaXQgaXNuJ3QgYSBudW1iZXIsIHNvIHdlIGRpZG4ndCBnZXQgYSBkYXRlIHN0YW1wOyBkZWZh");
    sb.append("dWx0IHRvIHRoZSBpbnB1dAogICAgICAgIHJldHVybiBkdDsKICAgICAgfQogICAgICAvLyB3ZSBhcmUg");
    sb.append("aW50ZXJlc3RlZCBpbiBwcm9kdWNpbmcgYSBzdHJpbmcgbGlrZSAiWCBtaW51dGVzIGFnbyIsIHNvIHN0");
    sb.append("YXJ0IHdpdGggc2Vjb25kcwogICAgICB2YXIgZGVsdGEgPSAoRGF0ZS5ub3coKSAtIGQpLzEwMDA7IC8v");
    sb.append("IHNlY29uZHM7CiAgICAgIGlmIChkZWx0YSA8IDYwKSB7CiAgICAgICAgcmV0dXJuICJMZXNzIHRoYW4g");
    sb.append("YSBtaW51dGUgYWdvIjsKICAgICAgfQogICAgICAvLyBpdCB3YXNuJ3QgOTAgc2Vjb25kcyBhZ28gb3Ig");
    sb.append("bGVzcywgc28gbGV0J3MgcmVmaW5lIHRvd2FyZHMgbWludXRlcwogICAgICBkZWx0YSAvPSA2MDsgLy8g");
    sb.append("bm93IGl0IGlzIG1pbnV0ZXMKICAgICAgaWYgKGRlbHRhIDwgNjApIHsKICAgICAgICByZXR1cm4gTWF0");
    sb.append("aC5mbG9vcihkZWx0YSkgKyAiIG1pbnV0ZXMgYWdvIjsKICAgICAgfQogICAgICBpZiAoZGVsdGEgPiAy");
    sb.append("LjYyOGUrNykgewogICAgICAgIHJldHVybiAiTmV2ZXIiOwogICAgICB9CiAgICAgIC8vIGl0IHdhc24n");
    sb.append("dCA5MCBtaW51dGVzIGFnbywgc28gbGV0J3MganVzdCBwdXQgdGhlIHRpbWUgc3RhbXAgdXAKICAgICAg");
    sb.append("dmFyIGR0aGVuID0gbmV3IERhdGUoZCk7CiAgICAgIHZhciBkbm93ID0gbmV3IERhdGUoKTsKICAgICAg");
    sb.append("aWYgKGR0aGVuLnRvTG9jYWxlRGF0ZVN0cmluZygpICE9IGRub3cudG9Mb2NhbGVEYXRlU3RyaW5nKCkp");
    sb.append("IHsKICAgICAgICByZXR1cm4gZHRoZW4udG9Mb2NhbGVEYXRlU3RyaW5nKCkgKyAiICIgKyBkdGhlbi50");
    sb.append("b0xvY2FsZVRpbWVTdHJpbmcoKTsKICAgICAgfQogICAgICByZXR1cm4gZHRoZW4udG9Mb2NhbGVUaW1l");
    sb.append("U3RyaW5nKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAgIHJldHVybiBkdDsK");
    sb.append("ICAgIH0KICB9OwoKICB0cmFuc2Zvcm1zWyd0aW1lJ10gPSBmdW5jdGlvbihkdCkgewogICAgICAgIC8v");
    sb.append("IG9ubHkgdHJhbnNmb3JtIHN0cmluZ3MKICAgIGlmICh0eXBlb2YgKGR0KSA9PSAic3RyaW5nIikgewog");
    sb.append("ICAgICAvLyBsZXQncyBzdHJpcCBvdXQgZXZlcnl0aGluZyBhZnRlciB0aGUgYnJhY2tldHMKICAgICAg");
    sb.append("dmFyIHMgPSBkdDsKICAgICAgdmFyIGsgPSBzLmluZGV4T2YoJ1snKTsKICAgICAgaWYgKGsgPj0gMCkg");
    sb.append("ewogICAgICAgIHMgPSBzLnN1YnN0cmluZygwLCBrKTsKICAgICAgfQoKICAgICAgLy8gQ29udmVydCBz");
    sb.append("dHJpbmcgdG8gdGltZSBmb3JtYXQKICAgICAgdmFyIHQgPSBkdC5pbmRleE9mKCI6Iik7CiAgICAgIGlm");
    sb.append("ICh0IDwgMCkgewogICAgICAgIHJldHVybiBkdDsKICAgICAgfQogICAgICB2YXIgaCA9IGR0LnNwbGl0");
    sb.append("KCI6IilbMF07CiAgICAgIHZhciBob3VycyA9IGg7CiAgICAgIGlmIChoLmxlbmd0aCA+IDIpIHsKICAg");
    sb.append("ICAgICBob3VycyA9IGguc3Vic3RyaW5nKGgubGVuZ3RoIC0gMiwgaC5sZW5ndGgpOyAvLyB0cmltIGxl");
    sb.append("ZnQgaW4gY2FzZSBvZiBkYXRldGltZQogICAgICB9CiAgICAgIHZhciBBbU9yUG0gPSBob3VycyA+PSAx");
    sb.append("MiA/ICdwbScgOiAnYW0nOwogICAgICBob3VycyA9IChob3VycyAlIDEyKSB8fCAxMjsKICAgICAgdmFy");
    sb.append("IG0gPSBkdC5zcGxpdCgiOiIpWzFdCiAgICAgIHZhciBtaW51dGVzID0gbTsKICAgICAgaWYgKG0ubGVu");
    sb.append("Z3RoID4gMikgewogICAgICAgIG1pbnV0ZXMgPSBtLnN1YnN0cmluZygwLDIpOyAvLyB0cmltIHJpZ2h0");
    sb.append("IGluIGNhc2Ugb2YgZGF0ZXRpbWUKICAgICAgfQoKICAgICAgcmV0dXJuIGhvdXJzICsgIjoiICsgbWlu");
    sb.append("dXRlcyArICIgIiArIEFtT3JQbTsgCiAgICB9IGVsc2UgewogICAgICAvLyBkbyBub3RoaW5nCiAgICAg");
    sb.append("IHJldHVybiBkdDsKICAgIH0KICB9OwoKICB0cmFuc2Zvcm1zWydkYXRlJ10gPSBmdW5jdGlvbihmb3Jt");
    sb.append("YXQsIGQpIHsKICAgIGlmICh0eXBlb2YgKGQpID09ICJzdHJpbmciKSB7CiAgICAgIC8vIGlmIGRhdGUg");
    sb.append("aXMgbm90IHNldCwgcmV0dXJuIGVtcHR5IHN0cmluZwogICAgICBpZiAoZCA9PSAiMS0wMS0wMSIpIHJl");
    sb.append("dHVybiAiIgoKICAgICAgY29uc3QgcCA9IGZvcm1hdC50b0xvd2VyQ2FzZSgpLnNwbGl0KCIvIik7CiAg");
    sb.append("ICAgIGNvbnN0IG9wdHMgPSB7fTsKICAgICAgcC5mb3JFYWNoKGYgPT4gewogICAgICAgIGNvbnN0IHZh");
    sb.append("bCA9IGYubGVuZ3RoID4gMiA/ICJudW1lcmljIiA6ICIyLWRpZ2l0IjsKICAgICAgICBjb25zdCBrZXlz");
    sb.append("ID0geyJ5IjogInllYXIiLCAibSI6ICJtb250aCIsICJkIjogImRheSJ9CiAgICAgICAgb3B0c1trZXlz");
    sb.append("W2YuY2hhckF0KDApXV0gPSB2YWw7CiAgICAgIH0pCgogICAgICAvLyBpZiBub3QgZGF0ZXRpbWUsIGNv");
    sb.append("bnZlcnRpbmcgdG8gb25lIGhlcmUgdG8gcHJldmVudCB0aW1lem9uZSBpc3N1ZXMKICAgICAgY29uc3Qg");
    sb.append("ZGF0ZXRpbWUgPSBkLmluY2x1ZGVzKCJUIikgPyBkIDogZCArICJUMDA6MDA6MDAiOwogICAgICByZXR1");
    sb.append("cm4gbmV3IERhdGUoZGF0ZXRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCBvcHRzKTsKICAg");
    sb.append("IH0gZWxzZSB7CiAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgcmV0dXJuIGQ7CiAgICB9CiAgfQogIAoK");
    sb.append("ICBzZWxmLlJUUiA9IGZ1bmN0aW9uKG5hbWUsIHRyYW5zZm9ybSkgewogICAgdHJhbnNmb3Jtc1tuYW1l");
    sb.append("XSA9IHRyYW5zZm9ybTsKICB9OwogIHNlbGYucmVnaXN0ZXJUcmFuc2Zvcm0gPSBzZWxmLlJUUjsKCiAg");
    sb.append("Ly8ge2JsYWh8bmFtZX0KICBzZWxmLlRSID0gZnVuY3Rpb24obmFtZSkgewogICAgaWYgKG5hbWUgaW4g");
    sb.append("dHJhbnNmb3JtcykgewogICAgICByZXR1cm4gdHJhbnNmb3Jtc1tuYW1lXTsKICAgIH0gCiAgICAvLyBj");
    sb.append("aGVjayBmb3IgZGF0ZSBmb3JtYXQKICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoImRhdGUtZm9ybWF0OiIp");
    sb.append("KXsKICAgICAgY29uc3QgW18sIGZvcm1hdF0gID0gbmFtZS5zcGxpdCgiOiIpOwogICAgICByZXR1cm4g");
    sb.append("eCA9PiB0cmFuc2Zvcm1zWyJkYXRlIl0oZm9ybWF0LCB4KTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlv");
    sb.append("bih4KSB7IHJldHVybiB4OyB9OwogIH07CgogIC8vIFRPRE8KICB2YXIgdmFsaWRhdG9ycyA9IHt9Owog");
    sb.append("IHNlbGYuUlYgPSBmdW5jdGlvbihuYW1lLCB2YWxpZGF0b3IpIHsKICAgIHZhbGlkYXRvcnNbbmFtZV0g");
    sb.append("PSB2YWxpZGF0b3I7CiAgfTsKICBzZWxmLnJlZ2lzdGVyVmFsaWRhdG9yID0gc2VsZi5SVjsKCiAgdmFy");
    sb.append("IGNvbW1vblB1dCA9IGZ1bmN0aW9uIChmb3JtLCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaiwgdXJs");
    sb.append("ZmFjdG9yeSkgewogICAgLy8gV0lQCiAgICByeG9iai5fXyA9IGZ1bmN0aW9uICgpIHsgfTsKICAgIGZv");
    sb.append("cm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJl");
    sb.append("dmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2YXIgcmVxID0gZ2V0");
    sb.append("X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gKCkgewogICAg");
    sb.append("ICAgIHZhciB1cmwgPSB1cmxmYWN0b3J5KHJ4b2JqKTsKICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1M");
    sb.append("SHR0cFJlcXVlc3QoKTsKICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDQpIHsKICAgICAgICAgICAgaWYgKHRo");
    sb.append("aXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy5nZXRSZXNwb25z");
    sb.append("ZUhlYWRlcigiQ29udGVudC1UeXBlIik7CiAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gInRleHQvZXJy");
    sb.append("b3IiKSB7CiAgICAgICAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgdGhpcy5yZXNwb25zZVRleHQp");
    sb.append("OwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAi");
    sb.append("YXBwbGljYXRpb24vanNvbiIpIHsKICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJz");
    sb.append("ZSh0aGlzLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICBpZiAoJ2lkZW50aXR5JyBpbiBwYXls");
    sb.append("b2FkKSB7CiAgICAgICAgICAgICAgICAgIGlkZW50aXRpZXNbaWRlbnRpdHlOYW1lXSA9IHBheWxvYWQu");
    sb.append("aWRlbnRpdHk7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpZGVudGl0eV8i");
    sb.append("ICsgaWRlbnRpdHlOYW1lLCBwYXlsb2FkLmlkZW50aXR5KTsKICAgICAgICAgICAgICAgIH0KICAgICAg");
    sb.append("ICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsK");
    sb.append("ICAgICAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICAgICAgZm9ybS5kaXNwYXRj");
    sb.append("aEV2ZW50KG5ldyBFdmVudCgic3VibWl0dGVkIikpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAg");
    sb.append("ICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiRmFpbGVkIHRvIGNvbW11bmljYXRlIHRvIHNlcnZlciIp");
    sb.append("OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB4aHR0cC5vcGVuKCJQ");
    sb.append("VVQiLCB1cmwsIHRydWUpOwogICAgICAgIHhodHRwLndpdGhDcmVkZW50aWFscyA9IHRydWU7CiAgICAg");
    sb.append("ICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShyZXEpKTsKICAgICAgfTsKCiAgICAgIGlmICgncGFz");
    sb.append("c3dvcmQnIGluIHBhc3N3b3JkcykgewogICAgICAgIGlmICghKCdjb25maXJtLXBhc3N3b3JkJyBpbiBw");
    sb.append("YXNzd29yZHMpIHx8IHBhc3N3b3Jkc1sncGFzc3dvcmQnXSA9PSBwYXNzd29yZHNbJ2NvbmZpcm0tcGFz");
    sb.append("c3dvcmQnXSkgewogICAgICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dv");
    sb.append("cmRzWydwYXNzd29yZCddLCB7CiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRfcHcp");
    sb.append("IHsKICAgICAgICAgICAgICByZXFbJ3Bhc3N3b3JkJ10gPSBoYXNoZWRfcHcucGFzc3dvcmRIYXNoOwog");
    sb.append("ICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbGVkOiBmdW5j");
    sb.append("dGlvbiAoKSB7CiAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgdG8gaGFzaCBw");
    sb.append("YXNzd29yZCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAg");
    sb.append("ICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJQYXNzd29yZHMgZG9uJ3QgbWF0Y2giKTsKICAgICAgICB9");
    sb.append("CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9LCB0cnVlKTsKICB9Cgog");
    sb.append("IC8vIFJVTlRJTUUgfCByeDphY3Rpb249ZG9tYWluOnB1dAogIHNlbGYuYWREUFVUID0gZnVuY3Rpb24g");
    sb.append("KGZvcm0sIHN0YXRlLCBpZGVudGl0eU5hbWUsIHJ4b2JqKSB7CiAgICBjb21tb25QdXQoZm9ybSwgc3Rh");
    sb.append("dGUsIGlkZW50aXR5TmFtZSwgcnhvYmosIGZ1bmN0aW9uIChyeG9iaikgeyByZXR1cm4gc2VsZi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmhvc3QgKyAiLyIgKyByeG9iai5wYXRoOyB9KQogIH07CgogIC8vIFJV");
    sb.append("TlRJTUUgfCByeDphY3Rpb249ZG9jdW1lbnQ6cHV0CiAgc2VsZi5hRFBVVCA9IGZ1bmN0aW9uIChmb3Jt");
    sb.append("LCBzdGF0ZSwgaWRlbnRpdHlOYW1lLCByeG9iaikgewogICAgY29tbW9uUHV0KGZvcm0sIHN0YXRlLCBp");
    sb.append("ZGVudGl0eU5hbWUsIHJ4b2JqLCBmdW5jdGlvbiAocnhvYmopIHsgcmV0dXJuICJodHRwczovLyIgKyBj");
    sb.append("b25uZWN0aW9uLmhvc3QgKyAiLyIgKyByeG9iai5zcGFjZSArICIvIiArIHJ4b2JqLmtleSArICIvIiAr");
    sb.append("IHJ4b2JqLnBhdGg7IH0pCiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFjdGlvbj1hZGFtYTpzaWduLWlu");
    sb.append("CiAgc2VsZi5hU08gPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGlkZW50aXR5TmFtZSwgcnhvYmopIHsK");
    sb.append("ICAgIHJ4b2JqLl9fID0gZnVuY3Rpb24gKCkgeyB9OwogICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rp");
    sb.append("b24gKCkgewogICAgICByZWNhbGxfZW1haWwoZm9ybSk7CiAgICB9LCAxKTsKICAgIC8vIFRPRE86IHB1");
    sb.append("bGwgZW1haWwgb3V0IG9mIHRoaW4gYWlyCiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcs");
    sb.append("IGZ1bmN0aW9uIChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciByZXEg");
    sb.append("PSBnZXRfZm9ybV9hbmRfcHcoZm9ybSk7CiAgICAgIGlmIChyZXEucmVtZW1iZXIpIHsKICAgICAgICBs");
    sb.append("b2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZW1haWxfcmVtZW1iZXIiLCByZXEuZW1haWwpOwogICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJlbWFpbF9yZW1lbWJlciIsICIiKTsKICAg");
    sb.append("ICAgfQogICAgICBjb25uZWN0aW9uLkFjY291bnRMb2dpbihyZXEuZW1haWwsIHJlcS5wYXNzd29yZCwg");
    sb.append("ewogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICBpZGVudGl0aWVz");
    sb.append("W2lkZW50aXR5TmFtZV0gPSBwYXlsb2FkLmlkZW50aXR5OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNl");
    sb.append("dEl0ZW0oImlkZW50aXR5XyIgKyBpZGVudGl0eU5hbWUsIHBheWxvYWQuaWRlbnRpdHkpOwogICAgICAg");
    sb.append("ICAgc2VsZi5nb3RvKHJ4b2JqLnJ4X2ZvcndhcmQsIGZhbHNlKTsKICAgICAgICAgIGZpcmVfc3VjY2Vz");
    sb.append("cyhmb3JtKTsKICAgICAgICB9LAogICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAg");
    sb.append("ICAgICAgIGZpcmVfZmFpbHVyZShmb3JtLCAiQWNjb3VudExvZ2luIEZhaWxlZDoiICsgcmVhc29uKTsK");
    sb.append("ICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFj");
    sb.append("dGlvbj1hZGFtYTpzaWduLXVwCiAgc2VsZi5hU1UgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGZvcndh");
    sb.append("cmRUbykgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7");
    sb.append("CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVxID0gZ2V0X2Zvcm0oZm9ybSwg");
    sb.append("e30pOwogICAgICBjb25uZWN0aW9uLkluaXRTZXR1cEFjY291bnQocmVxLmVtYWlsLCB7CiAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24gKC8qIHBheWxvYWQgKi8pIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5z");
    sb.append("ZXRJdGVtKCJlbWFpbCIsIHJlcS5lbWFpbCk7CiAgICAgICAgICBzZWxmLmdvdG8oZm9yd2FyZFRvLCBm");
    sb.append("YWxzZSk7CiAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBmYWls");
    sb.append("dXJlOiBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBmaXJlX2ZhaWx1cmUoZm9ybSwgIkluaXRT");
    sb.append("ZXR1cEFjY291bnQgRmFpbGVkOiIgKyByZWFzb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCB0");
    sb.append("cnVlKTsKICB9OwoKICAvLyBSVU5USU1FIHwgcng6YWN0aW9uPWFkYW1hOnNldC1wYXNzd29yZAogIHNl");
    sb.append("bGYuYVNQID0gZnVuY3Rpb24gKGZvcm0sIHN0YXRlLCBmb3J3YXJkVG8pIHsKICAgIGZvcm0uYWRkRXZl");
    sb.append("bnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1");
    sb.append("bHQoKTsKICAgICAgdmFyIHJlcSA9IGdldF9mb3JtX2FuZF9wdyhmb3JtKTsKICAgICAgaWYgKCEoImVt");
    sb.append("YWlsIiBpbiByZXEpKSB7CiAgICAgICAgcmVxLmVtYWlsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImVt");
    sb.append("YWlsIik7CiAgICAgIH0KICAgICAgY29ubmVjdGlvbi5Jbml0Q29tcGxldGVBY2NvdW50KHJlcS5lbWFp");
    sb.append("bCwgZmFsc2UsIHJlcS5jb2RlLCB7CiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGluaXQpIHsKICAg");
    sb.append("ICAgICAgIHZhciBpZGVudGl0eSA9IGluaXQuaWRlbnRpdHk7CiAgICAgICAgICBjb25uZWN0aW9uLkFj");
    sb.append("Y291bnRTZXRQYXNzd29yZChpbml0LmlkZW50aXR5LCByZXEucGFzc3dvcmQsIHsKICAgICAgICAgICAg");
    sb.append("c3VjY2VzczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJp");
    sb.append("ZGVudGl0eV9kZWZhdWx0IiwgaWRlbnRpdHkpOwogICAgICAgICAgICAgIHNlbGYuZ290byhmb3J3YXJk");
    sb.append("VG8sIGZhbHNlKTsKICAgICAgICAgICAgICBmaXJlX3N1Y2Nlc3MoZm9ybSk7CiAgICAgICAgICAgIH0s");
    sb.append("CiAgICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICBmaXJl");
    sb.append("X2ZhaWx1cmUoZm9ybSwgIkZhaWxlZCBBY2NvdW50U2V0UGFzc3dvcmQ6IiArIHJlYXNvbik7CiAgICAg");
    sb.append("ICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZmFpbHVyZTogZnVuY3Rpb24g");
    sb.append("KHJlYXNvbikgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQgSW5pdENvbXBsZXRl");
    sb.append("QWNjb3VudDoiICsgcmVhc29uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgdHJ1ZSk7CiAgfTsK");
    sb.append("CgogIHZhciBoeWRyYXRlX2Zvcm0gPSBmdW5jdGlvbihlbCwgaW5wdXQpIHsKICAgIHZhciB0YWcgPSBl");
    sb.append("bC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CiAgICB2YXIgaXNTZXR0YWJsZSA9IHRhZyA9PSAiU0VMRUNU");
    sb.append("IiB8fCB0YWcgPT0gIklOUFVUIiB8fCB0YWcgPT0gIkhJRERFTiI7CiAgICBpZiAoJ25hbWUnIGluIGVs");
    sb.append("ICYmIGlzU2V0dGFibGUpIHsKICAgICAgdmFyIG5hbWUgPSBlbC5uYW1lOwogICAgICB2YXIgcGF5bG9h");
    sb.append("ZCA9IGlucHV0OwogICAgICB2YXIga0RvdE9yU2xhc2ggPSBmaXJzdE9jY3VyKG5hbWUuaW5kZXhPZign");
    sb.append("LicpLCBuYW1lLmluZGV4T2YoJy8nKSk7CiAgICAgIHdoaWxlIChrRG90T3JTbGFzaCA+IDApIHsKICAg");
    sb.append("ICAgICB2YXIgaXRlbSA9IG5hbWUuc3Vic3RyaW5nKDAsIGtEb3RPclNsYXNoKTsKICAgICAgICBuYW1l");
    sb.append("ID0gbmFtZS5zdWJzdHJpbmcoa0RvdE9yU2xhc2ggKyAxKTsKICAgICAgICBpZiAoaXRlbSBpbiBwYXls");
    sb.append("b2FkKSB7CiAgICAgICAgICBwYXlsb2FkID0gcGF5bG9hZFtpdGVtXTsKICAgICAgICB9IGVsc2Ugewog");
    sb.append("ICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBrRG90T3JTbGFzaCA9IGZpcnN0T2NjdXIo");
    sb.append("bmFtZS5pbmRleE9mKCcuJyksIG5hbWUuaW5kZXhPZignLycpKTsKICAgICAgfQogICAgICBpZiAobmFt");
    sb.append("ZSBpbiBwYXlsb2FkKSB7CiAgICAgICAgdmFyIHR5cGUgPSBlbC50eXBlLnRvVXBwZXJDYXNlKCk7CiAg");
    sb.append("ICAgICAgaWYgKHR5cGUgPT0gIkNIRUNLQk9YIikgewogICAgICAgICAgZWwuY2hlY2tlZCA9IHBheWxv");
    sb.append("YWRbbmFtZV0gPT0gInRydWUiIHx8IHBheWxvYWRbbmFtZV0gPT09IHRydWUgPyB0cnVlIDogZmFsc2U7");
    sb.append("CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJSQURJTyIpIHsKICAgICAgICAgIGlmIChwYXlsb2Fk");
    sb.append("W25hbWVdID09IGVsLnZhbHVlKSB7CiAgICAgICAgICAgIGVsLmNoZWNrZWQgPSB0cnVlOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlbC52YWx1ZSA9IHBheWxvYWRbbmFtZV07CiAg");
    sb.append("ICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoImNoaWxkcmVuIiBpbiBlbCkgewogICAgICB2YXIg");
    sb.append("YXJyID0gZWwuY2hpbGRyZW47CiAgICAgIHZhciBuID0gYXJyLmxlbmd0aDsKICAgICAgZm9yICh2YXIg");
    sb.append("ayA9IDA7IGsgPCBuOyBrKyspIHsKICAgICAgICB2YXIgY2ggPSBlbC5jaGlsZHJlbltrXTsKICAgICAg");
    sb.append("ICBoeWRyYXRlX2Zvcm0oY2gsIGlucHV0KTsKICAgICAgfQogICAgfQogIH0KCgogIC8vIFJVTlRJTUUg");
    sb.append("fCByeDphY3Rpb246Y29weS1mb3JtOiR0YXJnZXQtaWQKICBzZWxmLmFDRiA9IGZ1bmN0aW9uKGZvcm0s");
    sb.append("IHRhcmdldEZvcm1JZCkgewogICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlv");
    sb.append("bihldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBpbnB1dCA9IGdldF9m");
    sb.append("b3JtKGZvcm0sIHt9KTsKICAgICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRh");
    sb.append("cmdldEZvcm1JZCk7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICBoeWRyYXRlX2Zvcm0odGFyZ2V0");
    sb.append("LCBpbnB1dCk7CiAgICAgICAgZmlyZV9zdWNjZXNzKGZvcm0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAg");
    sb.append("ZmlyZV9mYWlsdXJlKGZvcm0sICJmYWlsZWQgdG8gZmluZCBmb3JtIGJ5IGlkICciICsgdGFyZ2V0Rm9y");
    sb.append("bUlkICsgIiciKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7CiAgfTsKCiAgLy8gUlVOVElNRSB8IHJ4OmFj");
    sb.append("dGlvbj1zZW5kOiRjaGFubmVsCiAgc2VsZi5hU0QgPSBmdW5jdGlvbiAoZm9ybSwgc3RhdGUsIGNoYW5u");
    sb.append("ZWwpIHsKICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkgewog");
    sb.append("ICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHBhc3N3b3JkcyA9IHt9OwogICAgICB2");
    sb.append("YXIgbXNnID0gZ2V0X2Zvcm0oZm9ybSwgcGFzc3dvcmRzKTsKCiAgICAgIGlmIChldnQuc3VibWl0dGVy");
    sb.append("KSB7CiAgICAgICAgdmFyIHMgPSBldnQuc3VibWl0dGVyOwogICAgICAgIGlmIChzLm5hbWUgJiYgcy52");
    sb.append("YWx1ZSkgewogICAgICAgICAgaWYgKHMudmFsdWUgPT0gInRydWUiKSB7IHMudmFsdWUgPSB0cnVlOyB9");
    sb.append("CiAgICAgICAgICBlbHNlIGlmIChzLnZhbHVlID09ICJmYWxzZSIpIHsgcy52YWx1ZSA9IGZhbHNlOyB9");
    sb.append("CiAgICAgICAgICBtc2dbcy5uYW1lXSA9IHMudmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICB2");
    sb.append("YXIgYWZ0ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBUT0RPOiBwYXNzIHRocm91Z2ggdGhlIGRl");
    sb.append("YnVnZ2VyCiAgICAgICAgc3RhdGUuZGF0YS5jb25uZWN0aW9uLnB0ci5zZW5kKGNoYW5uZWwsIG1zZywg");
    sb.append("ewogICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKC8qIHBheWxvYWQgKi8pIHsKICAgICAgICAgICAg");
    sb.append("ZmlyZV9zdWNjZXNzKGZvcm0pOwogICAgICAgICAgfSwKICAgICAgICAgIGZhaWx1cmU6IGZ1bmN0aW9u");
    sb.append("IChyZWFzb24pIHsKICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJTZW5kIGZhaWxlZDoiICsg");
    sb.append("cmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHZhciBwb3N0UGFz");
    sb.append("c3dvcmQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoJ25ld19wYXNzd29yZCcgaW4gcGFzc3dvcmRz");
    sb.append("KSB7CiAgICAgICAgICBpZiAoISgnY29uZmlybS1uZXdfcGFzc3dvcmQnIGluIHBhc3N3b3JkcykgfHwg");
    sb.append("cGFzc3dvcmRzWyduZXdfcGFzc3dvcmQnXSA9PSBwYXNzd29yZHNbJ2NvbmZpcm0tbmV3X3Bhc3N3b3Jk");
    sb.append("J10pIHsKICAgICAgICAgICAgY29ubmVjdGlvbi5Eb2N1bWVudHNIYXNoUGFzc3dvcmQocGFzc3dvcmRz");
    sb.append("WyduZXdfcGFzc3dvcmQnXSwgewogICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChoYXNoZWRf");
    sb.append("cHcpIHsKICAgICAgICAgICAgICAgIG1zZ1snbmV3X3Bhc3N3b3JkJ10gPSBoYXNoZWRfcHcucGFzc3dv");
    sb.append("cmRIYXNoOwogICAgICAgICAgICAgICAgYWZ0ZXIoKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAg");
    sb.append("ICAgIGZhaWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0s");
    sb.append("ICJGYWlsZWQgdG8gaGFzaCBwYXNzd29yZCIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7");
    sb.append("CgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJQYXNzd29y");
    sb.append("ZHMgbWlzbWF0Y2ggZm9yIG5ldyBwYXNzd29yZC4iKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2Ug");
    sb.append("ewogICAgICAgICAgcG9zdFBhc3N3b3JkKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoJ3Bh");
    sb.append("c3N3b3JkJyBpbiBwYXNzd29yZHMpIHsKICAgICAgICBpZiAoISgnY29uZmlybS1wYXNzd29yZCcgaW4g");
    sb.append("cGFzc3dvcmRzKSB8fCBwYXNzd29yZHNbJ3Bhc3N3b3JkJ10gPT0gcGFzc3dvcmRzWydjb25maXJtLXBh");
    sb.append("c3N3b3JkJ10pIHsKICAgICAgICAgIGNvbm5lY3Rpb24uRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3");
    sb.append("b3Jkc1sncGFzc3dvcmQnXSwgewogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoaGFzaGVkX3B3");
    sb.append("KSB7CiAgICAgICAgICAgICAgbXNnWydwYXNzd29yZCddID0gaGFzaGVkX3B3LnBhc3N3b3JkSGFzaDsK");
    sb.append("ICAgICAgICAgICAgICBwb3N0UGFzc3dvcmQoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFp");
    sb.append("bGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJGYWlsZWQg");
    sb.append("dG8gaGFzaCBwYXNzd29yZCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVs");
    sb.append("c2UgewogICAgICAgICAgZmlyZV9mYWlsdXJlKGZvcm0sICJQYXNzd29yZHMgbWlzbWF0Y2giKTsKICAg");
    sb.append("ICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWZ0ZXIoKTsKICAgICAgfQogICAgfSwgdHJ1ZSk7");
    sb.append("CiAgfTsKICAvLyA8dG9kb3Rhc2s+ZGVzY3JpcHRpb248L3RvZG90YXNrPgogIHNlbGYuVEFTSyA9IGZ1");
    sb.append("bmN0aW9uKHBkb20sIGlkLCBzZWN0aW9uLCBkZXNjcmlwdGlvbikgewogICAgdmFyIGVsZW1lbnQgPSBk");
    sb.append("b2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gIiYjOTc0");
    sb.append("NDsgIiArIGRlc2NyaXB0aW9uICsgIiAoICIgKyBzZWN0aW9uICsgIikgPGJyIC8+IjsKICAgIHBkb20u");
    sb.append("YXBwZW5kQ2hpbGQoZWxlbWVudCk7CiAgfTsKICAvLyBSVU5USU1FOiBwcmUtY29tcHJlc3Npb24gZm9y");
    sb.append("IHNldHRpbmcgYW4gYXR0cmlidXRlCiAgLy8gImQuc2V0QXR0cmlidXRlKGEsdik7IiAtLT4KICAvLyAk");
    sb.append("LlNBKGQsYSx2KTsiCiAgc2VsZi5TQSA9IGZ1bmN0aW9uKGRvbSwgYXR0ciwgdmFsdWUpIHsKICAgIGRv");
    sb.append("bS5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpOwogIH07CiAgLy8gUlVOVElNRTogc2V0IHRoZSBsYWJl");
    sb.append("bCBvZiBhbiBvcHRpb24KICBzZWxmLlNMID0gZnVuY3Rpb24oZG9tLCB2YWx1ZSkgewogICAgZG9tLmxh");
    sb.append("YmVsID0gdmFsdWU7CiAgICBkb20uaW5uZXJUZXh0ID0gdmFsdWU7CiAgfTsKCiAgLy8gZm9yIHNlbGVj");
    sb.append("dHMKICAvLyBkLnZhbHVlPSR2YWx1ZTsKICAvLyAkLlNWKGQsJHZhbHVlKTsKICBzZWxmLlNWID0gZnVu");
    sb.append("Y3Rpb24oZG9tLCB2YWx1ZSkgewogICAgdmFyIHByaW9yID0gZG9tLnZhbHVlOwogICAgZG9tLnZhbHVl");
    sb.append("ID0gdmFsdWU7CiAgICBkb20ucnh2YWx1ZSA9IHZhbHVlOwogICAgaWYgKHByaW9yICE9IHZhbHVlKSB7");
    sb.append("CiAgICAgIGRvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgiZm9yY2VkIikpOwogICAgfQogIH07CiAg");
    sb.append("c2VsZi5GViA9IGZ1bmN0aW9uKGRvbSwgZmllbGQsIHZhbHVlKSB7CiAgICB2YXIgcHJpb3IgPSBkb21b");
    sb.append("ZmllbGRdOwogICAgZG9tW2ZpZWxkXSA9IHZhbHVlOwogICAgaWYgKHByaW9yICE9IHZhbHVlKSB7CiAg");
    sb.append("ICAgIGRvbS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgiZm9yY2VkIikpOwogICAgfQogIH07CiAgc2Vs");
    sb.append("Zi5tZXJnZUdvdG8gPSBmdW5jdGlvbihocmVmLCBzdGF0ZSkgewogICAgdmFyIHBhcnRzID0gKGhyZWYu");
    sb.append("c3RhcnRzV2l0aCgiLyIpID8gaHJlZi5zdWJzdHJpbmcoMSkgOiBocmVmKS5zcGxpdCgiLyIpOwogICAg");
    sb.append("dmFyIG1lcmdlSW5pdCA9IHt9OwogICAgaWYgKHJvdXRlKHBhcnRzLCAwLCByb3V0ZXIsIG1lcmdlSW5p");
    sb.append("dCkpIHsKICAgICAgc3RhdGUudmlldy50cmVlLnVwZGF0ZShtZXJnZUluaXQpOwogICAgfQogIH07CiAg");
    sb.append("Ly8gUlVOVElNRSB8IDwuLi4gaHJlZj0iIiAuLi4+CiAgc2VsZi5IUkVGID0gZnVuY3Rpb24gKGRvbSwg");
    sb.append("c3RhdGUsIGhyZWYsIG1lcmdlKSB7CiAgICBkb20uc2V0QXR0cmlidXRlKCJocmVmIiwgZml4SHJlZiho");
    sb.append("cmVmKSk7CiAgICBkb20ub25jbGljayA9IGZ1bmN0aW9uIChldnQpIHsKICAgICAgdmFyIHRyaW1IcmVm");
    sb.append("ID0gaHJlZjsKICAgICAgaWYgKHRyaW1IcmVmLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICAgIHRyaW1I");
    sb.append("cmVmID0gdHJpbUhyZWYuc3Vic3RyaW5nKDEpOwogICAgICB9CiAgICAgIHZhciBrUSA9IHRyaW1IcmVm");
    sb.append("LmluZGV4T2YoJz8nKTsKICAgICAgaWYgKGtRID4gMCkgewogICAgICAgIHRyaW1IcmVmID0gdHJpbUhy");
    sb.append("ZWYuc3Vic3RyaW5nKDAsIGtRKTsKICAgICAgfQogICAgICB2YXIgcGFydHMgPSB0cmltSHJlZi5zcGxp");
    sb.append("dCgiLyIpOwogICAgICB2YXIgbWVyZ2VJbml0ID0ge307CiAgICAgIGlmIChyb3V0ZShwYXJ0cywgMCwg");
    sb.append("cm91dGVyLCBtZXJnZUluaXQpKSB7CiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAg");
    sb.append("aWYgKG1lcmdlKSB7CiAgICAgICAgICBzdGF0ZS52aWV3LnRyZWUudXBkYXRlKG1lcmdlSW5pdCk7CiAg");
    sb.append("ICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe21lcmdlOnRydWV9LCAiIiwgZml4SHJlZiho");
    sb.append("cmVmKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbGYuZ290byhocmVmLCB0cnVlKTsKICAg");
    sb.append("ICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAg");
    sb.append("fTsKICB9OwogIC8vIFJVTlRJTUUgfCA8Li4uIGNsYXNzPSIiIC4uLj4KICBzZWxmLkFDID0gZnVuY3Rp");
    sb.append("b24gKGRvbSwgdmFsdWUpIHsKICAgIGRvbS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgdmFsdWUpOwogIH07");
    sb.append("CiAgc2VsZi5BQ0xBU1MgPSBmdW5jdGlvbiAoZG9tLCB2YWx1ZSkgeyAvLyB0byBkZXByZWNhdGUgaW4g");
    sb.append("dGhlIGZ1dHVyZQogICAgZG9tLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCB2YWx1ZSk7CiAgfTsKICAvLyBS");
    sb.append("VU5USU1FIHwgPC4uLiBzcmM9IiIgLi4uPgogIHNlbGYuQVNSQyA9IGZ1bmN0aW9uIChkb20sIHZhbHVl");
    sb.append("KSB7CiAgICBkb20uc2V0QXR0cmlidXRlKCJzcmMiLCB2YWx1ZSk7CiAgfTsKICB3aW5kb3cucnhodG1s");
    sb.append("ID0gc2VsZjsKICByZXR1cm4gc2VsZjsKfSkoKTsK");
    return sb.toString();
  }
  public static final String CONNECTION = new String(Base64.getDecoder().decode(make_connection()), StandardCharsets.UTF_8);
  private static String make_connection() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyoKICogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG91dGxp");
    sb.append("bmVkIGluIHRoZQogKiBmaWxlICdMSUNFTlNFJyAoaXQncyBkdWFsIGxpY2Vuc2VkKSBsb2NhdGVkIGlu");
    sb.append("IHRoZSByb290IGRpcmVjdG9yeQogKiBuZWFyIHRoZSBSRUFETUUubWQgd2hpY2ggeW91IHNob3VsZCBh");
    sb.append("bHNvIHJlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uCiAqIGFib3V0IHRoZSBwcm9qZWN0IHdoaWNoIG93");
    sb.append("bnMgdGhpcyBmaWxlLCBzZWUgaHR0cHM6Ly93d3cuYWRhbWEtcGxhdGZvcm0uY29tLyAuCiAqCiAqIChj");
    sb.append("KSAyMDIxIC0gMjAyMyBieSBBZGFtYSBQbGF0Zm9ybSBJbml0aWF0aXZlLCBMTEMKICovCi8qKiBUaGUg");
    sb.append("V2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gQWRhbWEgKi8KY2xhc3MgV2ViU29ja2V0QWRhbWFDb25uZWN0");
    sb.append("aW9uIHsKICBjb25zdHJ1Y3Rvcihob3N0KSB7CiAgICAvLyBvbiBmYWlsdXJlLCB3ZSBiYWNrLW9mZiB3");
    sb.append("aXRoIHRoaXMgbWlsbGlzZWNvbmRzCiAgICB0aGlzLmJhY2tvZmYgPSAxOwogICAgLy8gdGhlIGhvc3Qg");
    sb.append("d2UgYXJlIGNvbm5lY3RpbmcgdG8KICAgIHRoaXMuaG9zdCA9IGhvc3Q7CiAgICAvLyBmb3JtIHRoZSBV");
    sb.append("Ukwgb2YgdGhlIGhvc3QKICAgIHRoaXMudXJsID0gIndzczovLyIgKyBob3N0ICsgIi9+cyI7CiAgICAv");
    sb.append("LyBpcyB0aGUgY29ubmVjdGlvbiBjb25uZWN0ZWQKICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAg");
    sb.append("ICAvLyBUT0RPCiAgICB0aGlzLmFzc2V0cyA9IHRydWU7CiAgICAvLyBpcyB0aGUgY29ubmVjdGlvbiBk");
    sb.append("ZWFkCiAgICB0aGlzLmRlYWQgPSBmYWxzZTsKICAgIC8vIHRoZSBtYXhpbXVtIHBlcmlvZCBvZiB0aW1l");
    sb.append("IGJldHdlZW4gd2FpdGluZyBmb3IgYSByZXRyeQogICAgdGhpcy5tYXhpbXVtX2JhY2tvZmYgPSA1MDAw");
    sb.append("OwogICAgLy8gd2hlbiB0aGUgY29ubmVjdGlvbiB0aW1lcyBvdXQgZnJvbSB0aGUgc2VydmVyLCBob3cg");
    sb.append("bG9uZyB0byB3YWl0IHVudGlsIHdlIHJlY29ubmVjdAogICAgdGhpcy5yZXNldF9iYWNrb2ZmID0gMTAw");
    sb.append("MDsKICAgIC8vIHRoZSBhY3R1YWwgd2Vic29ja2V0CiAgICB0aGlzLnNvY2tldCA9IG51bGw7CiAgICAv");
    sb.append("LyB3aGF0IGhhcHBlbnMgd2hlbiB0aGUgc3RhdHVzIGNoYW5nZXMKICAgIHRoaXMub25zdGF0dXNjaGFu");
    sb.append("Z2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7IH07CiAgICAvLyB3aGF0IGhhcHBlbnMgd2hlbiB3ZSBsZWFy");
    sb.append("biB0aGUgbGF0ZW5jeQogICAgdGhpcy5vbnBpbmcgPSBmdW5jdGlvbiAoc2Vjb25kcywgbGF0ZW5jeSkg");
    sb.append("eyB9OwogICAgLy8gaXMgYSByZXRyeSBzY2hlZHVsZWQKICAgIHRoaXMuc2NoZWR1bGVkID0gZmFsc2U7");
    sb.append("CiAgICAvLyBjYWxsYmFjayBtYXBwaW5nCiAgICB0aGlzLmNhbGxiYWNrcyA9IG5ldyBNYXAoKTsKICAg");
    sb.append("IC8vIGlkIGdlbmVyYXRpb24KICAgIHRoaXMubmV4dElkID0gMDsKICAgIC8vIGV2ZW50cyB0byBleGVj");
    sb.append("dXRlIG9uIHJlY29ubmVjdAogICAgdGhpcy5vbnJlY29ubmVjdCA9IG5ldyBNYXAoKTsKICB9CgogIC8q");
    sb.append("KiBzdG9wIHRoZSBjb25uZWN0aW9uICovCiAgc3RvcCgpIHsKICAgIHRoaXMuZGVhZCA9IHRydWU7CiAg");
    sb.append("ICBpZiAodGhpcy5zb2NrZXQgIT09IG51bGwpIHsKICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsKICAg");
    sb.append("IH0KICB9CgogIGJ1bXAoYm0pIHsKICAgIHRyeSB7CiAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRw");
    sb.append("UmVxdWVzdCgpOwogICAgICB4aHR0cC5vcGVuKCJQVVQiLCBsb2NhdGlvbi5wcm90b2NvbCArICIvLyIg");
    sb.append("KyB0aGlzLmhvc3QgKyAiL35ibS8iICsgYm0sIHRydWUpOwogICAgICB4aHR0cC5zZW5kKCk7CiAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAvLyBkb24ndCBjYXJlCiAgICB9CiAgfQoKICBsb2cobmFtZSwgYm9k");
    sb.append("eSkgewogICAgdHJ5IHsKICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAg");
    sb.append("IHhodHRwLm9wZW4oIlBVVCIsIGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHRoaXMuaG9zdCArICIv");
    sb.append("fmxnLyIgKyBuYW1lLCB0cnVlKTsKICAgICAgeGh0dHAuc2VuZChib2R5KTsKICAgIH0gY2F0Y2ggKGV4");
    sb.append("KSB7CiAgICAgIC8vIGRvbid0IGNhcmUKICAgIH0KICB9CgogIC8qKiBwcml2YXRlOiByZXRyeSB0aGUg");
    sb.append("Y29ubmVjdGlvbiAqLwogIF9yZXRyeSgpIHsKICAgIC8vIG51bGwgb3V0IHRoZSBzb2NrZXQKICAgIHRo");
    sb.append("aXMuc29ja2V0ID0gbnVsbDsKICAgIC8vIGlmIHdlIGFyZSBjb25uZWN0ZWQsIHRyYW5zaXRpb24gdGhl");
    sb.append("IHN0YXR1cwogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFs");
    sb.append("c2U7CiAgICAgIHRoaXMub25zdGF0dXNjaGFuZ2UoZmFsc2UpOwogICAgICB0aGlzLmNhbGxiYWNrcy5m");
    sb.append("b3JFYWNoKGZ1bmN0aW9uIChjYiwgaWQpIHsKICAgICAgICBjYih7ZmFpbHVyZTo5OTl9KTsKICAgICAg");
    sb.append("fSk7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5jbGVhcigpOwogICAgLy8gaWYgd2UgYXJlIGRlYWQs");
    sb.append("IHRoZW4gZG9uJ3QgYWN0dWFsbHkgcmV0cnkKICAgIGlmICh0aGlzLmRlYWQpIHsKICAgICAgcmV0dXJu");
    sb.append("OwogICAgfQogICAgLy8gbWFrZSBzdXJlCiAgICBpZiAoIXRoaXMuc2NoZWR1bGVkKSB7CiAgICAgIC8v");
    sb.append("IHNjaGVkdWxlIGEgcmV0cnk7IGZpcnN0IGNvbXB1dGUgaG93IGxvbmcgdG8gdGFrZQogICAgICAvLyBj");
    sb.append("b21wdXRlIGhvdyBsb25nIHdlIG5lZWQgdG8gd2FpdAogICAgICB2YXIgaGFsdmVBZnRlclNjaGVkdWxl");
    sb.append("ID0gZmFsc2U7CiAgICAgIHRoaXMuYmFja29mZiArPSBNYXRoLnJhbmRvbSgpICogdGhpcy5iYWNrb2Zm");
    sb.append("OwogICAgICBpZiAodGhpcy5iYWNrb2ZmID4gdGhpcy5tYXhpbXVtX2JhY2tvZmYpIHsKICAgICAgICB0");
    sb.append("aGlzLmJhY2tvZmYgPSB0aGlzLm1heGltdW1fYmFja29mZjsKICAgICAgICBoYWx2ZUFmdGVyU2NoZWR1");
    sb.append("bGUgPSB0cnVlOwogICAgICB9CgogICAgICAvLyBzY2hlZHVsZSBpdAogICAgICB0aGlzLnNjaGVkdWxl");
    sb.append("ZCA9IHRydWU7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAo");
    sb.append("KSB7CiAgICAgICAgc2VsZi5zdGFydCgpOwogICAgICB9LCB0aGlzLmJhY2tvZmYpOwoKICAgICAgLy8g");
    sb.append("d2UganVzdCBzY2hlZHVsZWQgaXQgZm9yIHRoZSBtYXhpbXVtIGJhY2tvZmYgdGltZSwgbGV0J3MgcmVk");
    sb.append("dWNlIHRoZSBiYWNrb2ZmIHNvIHRoZSBuZXh0IG9uZSB3aWxsIGhhdmUgc29tZSBqaXR0ZXIKICAgICAg");
    sb.append("aWYgKGhhbHZlQWZ0ZXJTY2hlZHVsZSkgewogICAgICAgIHRoaXMuYmFja29mZiAvPSAyLjA7CiAgICAg");
    sb.append("IH0KICAgIH0KICB9CgogIC8qKiBzdGFydCB0aGUgY29ubmVjdGlvbiAqLwogIHN0YXJ0KCkgewogICAg");
    sb.append("Ly8gcmVzZXQgdGhlIHN0YXRlCiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB0aGlzLnNjaGVkdWxlZCA9");
    sb.append("IGZhbHNlOwogICAgdGhpcy5kZWFkID0gZmFsc2U7CiAgICB0aGlzLmhhc19oYWRfcGluZyA9IGZhbHNl");
    sb.append("OwogICAgdGhpcy5sYXN0X3BpbmcgPSAwOwogICAgdGhpcy5waW5nX2ZhaWx1cmVzID0gMDsKICAgIC8v");
    sb.append("IGNyZWF0ZSB0aGUgc29ja2V0IGFuZCBiaW5kIGV2ZW50IGhhbmRsZXJzCiAgICB0aGlzLnNvY2tldCA9");
    sb.append("IG5ldyBXZWJTb2NrZXQodGhpcy51cmwpOwogICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rp");
    sb.append("b24gKGV2ZW50KSB7CiAgICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOwogICAg");
    sb.append("ICAvLyBhIG1lc3NhZ2UgYXJyaXZlZCwgaXMgaXQgYSBjb25uZWN0aW9uIHNpZ25hbAogICAgICBpZiAo");
    sb.append("InBpbmciIGluIHJlc3VsdCkgewogICAgICAgIHNlbGYub25waW5nKHJlc3VsdC5waW5nLCByZXN1bHQu");
    sb.append("bGF0ZW5jeSk7CiAgICAgICAgcmVzdWx0LnBvbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAu");
    sb.append("MDsKICAgICAgICBzZWxmLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpOwogICAgICAg");
    sb.append("IHNlbGYubGFzdF9waW5nID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgc2VsZi5oYXNfaGFk");
    sb.append("X3BpbmcgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoInN0YXR1cyIgaW4g");
    sb.append("cmVzdWx0KSB7CiAgICAgICAgLy8gaGV5LCBhcmUgd2UgY29ubmVjdGVkPwogICAgICAgIGlmIChyZXN1");
    sb.append("bHQuc3RhdHVzICE9ICJjb25uZWN0ZWQiKSB7CiAgICAgICAgICAvLyBub3BlLCBPSywgbGV0J3MgbWFr");
    sb.append("ZSB0aGlzIGEgZGVhZCBzb2NrZXQKICAgICAgICAgIHNlbGYuc29ja2V0LmNsb3NlKCk7CiAgICAgICAg");
    sb.append("ICBzZWxmLnNvY2tldCA9IG51bGw7CiAgICAgICAgICBzZWxmLmJhY2tvZmYgPSBzZWxmLnJlc2V0X2Jh");
    sb.append("Y2tvZmY7CiAgICAgICAgICBzZWxmLl9yZXRyeSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K");
    sb.append("ICAgICAgICAvLyB0ZWxsIHRoZSBjbGllbnQgdGhhdCB3ZSBhcmUgZ29vZCEKICAgICAgICBzZWxmLmJh");
    sb.append("Y2tvZmYgPSAxOwogICAgICAgIHNlbGYuY29ubmVjdGVkID0gdHJ1ZTsKICAgICAgICBzZWxmLmFzc2V0");
    sb.append("cyA9IHJlc3VsdC5hc3NldHM7CiAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSh0cnVlKTsKICAgICAg");
    sb.append("ICBzZWxmLl9yZWNvbm5lY3QoKTsKICAgICAgICBzZWxmLkNvbmZpZ3VyZU1ha2VPckdldEFzc2V0S2V5");
    sb.append("KHsKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChwYXlsb2FkKSB7CiAgICAgICAgICAgIHRyeSB7");
    sb.append("CiAgICAgICAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAg");
    sb.append("ICAgeGh0dHAub3BlbigiR0VUIiwgbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5ob3N0ICsg");
    sb.append("Ii9+cCIgKyBwYXlsb2FkLmFzc2V0S2V5LCB0cnVlKTsKICAgICAgICAgICAgICB4aHR0cC53aXRoQ3Jl");
    sb.append("ZGVudGlhbHMgPSB0cnVlOwogICAgICAgICAgICAgIHhodHRwLnNlbmQoKTsKICAgICAgICAgICAgfSBj");
    sb.append("YXRjaCAoZXgpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgICAgICAgIH0KICAg");
    sb.append("ICAgICAgIH0sCiAgICAgICAgICBmYWlsdXJlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIHRoZSByZXN1bHQgd2FzIGEgZmFp");
    sb.append("bHVyZS4uLgogICAgICBpZiAoImZhaWx1cmUiIGluIHJlc3VsdCkgewogICAgICAgIC8vIGZpbmQgdGhl");
    sb.append("IGNhbGxiYWNrLCB0aGVuIGludm9rZSBpdCAoYW5kIGNsZWFuIHVwKQogICAgICAgIGlmIChzZWxmLmNh");
    sb.append("bGxiYWNrcy5oYXMocmVzdWx0LmZhaWx1cmUpKSB7CiAgICAgICAgICB2YXIgY2IgPSBzZWxmLmNhbGxi");
    sb.append("YWNrcy5nZXQocmVzdWx0LmZhaWx1cmUpOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHNl");
    sb.append("bGYuY2FsbGJhY2tzLmRlbGV0ZShyZXN1bHQuZmFpbHVyZSk7CiAgICAgICAgICAgIGNiKHJlc3VsdCk7");
    sb.append("CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCJkZWxpdmVyIiBpbiByZXN1bHQp");
    sb.append("IHsKICAgICAgICAvLyBvdGhlcndpc2UsIHdlIGhhdmUgYSBzdWNjZXNzLCBzbyBsZXQncyBmaW5kIHRo");
    sb.append("ZSBjYWxsYmFjaywgYW5kIGlmIG5lZWQgYmUgY2xlYW4gdXAKICAgICAgICBpZiAoc2VsZi5jYWxsYmFj");
    sb.append("a3MuaGFzKHJlc3VsdC5kZWxpdmVyKSkgewogICAgICAgICAgdmFyIGNiID0gc2VsZi5jYWxsYmFja3Mu");
    sb.append("Z2V0KHJlc3VsdC5kZWxpdmVyKTsKICAgICAgICAgIGlmIChjYikgewogICAgICAgICAgICBpZiAocmVz");
    sb.append("dWx0LmRvbmUpIHsKICAgICAgICAgICAgICBzZWxmLmNhbGxiYWNrcy5kZWxldGUocmVzdWx0LmRlbGl2");
    sb.append("ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNiKHJlc3VsdCk7CiAgICAgICAgICB9CiAgICAg");
    sb.append("ICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uIChldmVu");
    sb.append("dCkgewogICAgICBzZWxmLmJ1bXAoInIiKTsKICAgICAgLy8gbGV0J3MgcmV0cnkuLi4gb3Igc2hvdWxk");
    sb.append("IHdlIG5vdAogICAgICBzZWxmLl9yZXRyeSgpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9uZXJyb3Ig");
    sb.append("PSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgc2VsZi5idW1wKCJyIik7CiAgICAgIC8vIHNvbWV0aGlu");
    sb.append("ZyBiYWQgaGFwcGVuZWQsIGxldCdzIHJldHJ5CiAgICAgIHNlbGYuX3JldHJ5KCk7CiAgICB9OwoKICB9");
    sb.append("CgogIGtlZXBhbGl2ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHdpbmRvdy5zZXRJbnRlcnZh");
    sb.append("bChmdW5jdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc2VsZi5oYXNfaGFkX3BpbmcgJiYg");
    sb.append("c2VsZi5zb2NrZXQpIHsKICAgICAgICAgIHZhciB0aW1lU2luY2VMYXN0UGluZyA9IG5ldyBEYXRlKCku");
    sb.append("Z2V0VGltZSgpIC0gc2VsZi5sYXN0X3Bpbmc7CiAgICAgICAgICAvLyBUT0RPOiBicm9hZGNhc3QgYSBs");
    sb.append("YXRlbmN5CiAgICAgICAgICBpZiAodGltZVNpbmNlTGFzdFBpbmcgPiAyNTAwKSB7CiAgICAgICAgICAg");
    sb.append("IHNlbGYucGluZ19mYWlsdXJlcysrOwogICAgICAgICAgICBpZiAoc2VsZi5waW5nX2ZhaWx1cmVzID49");
    sb.append("IDMpIHsKICAgICAgICAgICAgICBzZWxmLmhhc19oYWRfcGluZyA9IGZhbHNlOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHt9OwogICAgICAgICAgICAgIHNlbGYuc29j");
    sb.append("a2V0LmNsb3NlKCk7CiAgICAgICAgICAgICAgc2VsZi5zb2NrZXQgPSBudWxsOwogICAgICAgICAgICAg");
    sb.append("IHNlbGYuX3JldHJ5KCk7CiAgICAgICAgICAgICAgc2VsZi5idW1wKCJkIik7CiAgICAgICAgICAgICAg");
    sb.append("Y29uc29sZS5lcnJvcigiaGFkIHRvIGZvcmNlIGEgZGlzY29ubmVjdCIpOwogICAgICAgICAgICB9CiAg");
    sb.append("ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnBpbmdfZmFpbHVyZXMgPSAwOwogICAgICAg");
    sb.append("ICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7");
    sb.append("CiAgICAgIH0KICAgIH0sIDEyNTApOwogIH0KCiAgLyoqIHByaXZhdGU6IHNlbmQgYSByYXcgbWVzc2Fn");
    sb.append("ZSAqLwogIF93cml0ZShyZXF1ZXN0LCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkg");
    sb.append("ewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLmNhbGxiYWNrcy5zZXQocmVxdWVzdC5p");
    sb.append("ZCwgY2FsbGJhY2spOwogICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7");
    sb.append("CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKiBhcGk6IHdhaXQgZm9yIGEgY29ubmVjdGlvbiAqLwog");
    sb.append("IGFzeW5jIHdhaXRfY29ubmVjdGVkKCkgewogICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7CiAgICAgIHJl");
    sb.append("dHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZ29vZCkgewogICAgICAgIGdvb2QodHJ1ZSk7CiAgICAg");
    sb.append("IH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgcHJpb3IgPSB0");
    sb.append("aGlzLm9uc3RhdHVzY2hhbmdlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGdvb2Qp");
    sb.append("IHsKICAgICAgICBzZWxmLm9uc3RhdHVzY2hhbmdlID0gZnVuY3Rpb24gKHN0YXR1cykgewogICAgICAg");
    sb.append("ICAgcHJpb3Ioc3RhdHVzKTsKICAgICAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICAgICAgZ29vZCh0");
    sb.append("cnVlKTsKICAgICAgICAgICAgc2VsZi5vbnN0YXR1c2NoYW5nZSA9IHByaW9yOwogICAgICAgICAgfQog");
    sb.append("ICAgICAgIH07CiAgICAgIH0pOwogICAgfQogIH0KCiAgX3JlY29ubmVjdCgpIHsKICAgIHRoaXMub25y");
    sb.append("ZWNvbm5lY3QuZm9yRWFjaChmdW5jdGlvbiAoc20sIGlkKSB7CiAgICAgIHNtLl9fcmV0cnkoKTsKICAg");
    sb.append("IH0pOwogIH0KCiAgLyoqIGV4ZWN1dGUgYSByZXF1ZXNlIHJlc3BvbnNlIHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfcnIoc20pIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHNtLmZpcnN0ID0gdHJ1ZTsKICAgIGlmICghc2VsZi5fd3JpdGUoc20ucmVxdWVzdCwgZnVuY3Rpb24g");
    sb.append("KHJlc3BvbnNlKSB7CiAgICAgIGlmIChzbS5maXJzdCkgewogICAgICAgIHNtLmZpcnN0ID0gZmFsc2U7");
    sb.append("CiAgICAgICAgaWYgKCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgICAgaWYgKCdmYWlsdXJl");
    sb.append("JyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLmZhaWx1cmUocmVzcG9u");
    sb.append("c2UucmVhc29uKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCdzdWNj");
    sb.append("ZXNzJyBpbiBzbS5yZXNwb25kZXIpIHsKICAgICAgICAgICAgc20ucmVzcG9uZGVyLnN1Y2Nlc3MocmVz");
    sb.append("cG9uc2UucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBzZWxmLm9u");
    sb.append("cmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICB9KSkgewogICAgICBzZWxmLm9ucmVjb25uZWN0LnNl");
    sb.append("dChzbS5pZCwgc20pOwogICAgICBzbS5fX3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHNtKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHNtOwogICAgfQogICAgcmV0dXJu");
    sb.append("IG51bGw7CiAgfQoKICAvKiogZXhlY3V0ZSBhIHN0cmVhbSByZXF1ZXN0IHdpdGggdGhlIGdpdmVuIHN0");
    sb.append("YXRlIG1hY2hpbmUgKi8KICBfX2V4ZWN1dGVfc3RyZWFtKHNtKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICBzZWxmLl93cml0ZShzbS5yZXF1ZXN0LCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYg");
    sb.append("KCJmYWlsdXJlIiBpbiByZXNwb25zZSkgewogICAgICAgIGlmICgnZmFpbHVyZScgaW4gc20ucmVzcG9u");
    sb.append("ZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuZmFpbHVyZShyZXNwb25zZS5yZWFzb24pOwogICAg");
    sb.append("ICAgIH0KICAgICAgICBzZWxmLm9ucmVjb25uZWN0LmRlbGV0ZShzbS5pZCk7CiAgICAgICAgcmV0dXJu");
    sb.append("OwogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5yZXNwb25zZSkgewogICAgICAgIGlmICgnbmV4dCcg");
    sb.append("aW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIubmV4dChyZXNwb25zZS5yZXNw");
    sb.append("b25zZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChyZXNwb25zZS5kb25lKSB7CiAgICAgICAg");
    sb.append("aWYgKCdjb21wbGV0ZScgaW4gc20ucmVzcG9uZGVyKSB7CiAgICAgICAgICBzbS5yZXNwb25kZXIuY29t");
    sb.append("cGxldGUoKTsKICAgICAgICB9CiAgICAgICAgc2VsZi5vbnJlY29ubmVjdC5kZWxldGUoc20uaWQpOwog");
    sb.append("ICAgICB9CiAgICB9KTsKICAgIHNlbGYub25yZWNvbm5lY3Quc2V0KHNtLmlkLCBzbSk7CiAgICBzbS5f");
    sb.append("X3JldHJ5ID0gZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oc20pOwogICAg");
    sb.append("fTsKICAgIHJldHVybiBzbTsKICB9CgogIF9faWQoKSB7CiAgICB0aGlzLm5leHRJZCsrOwogICAgcmV0");
    sb.append("dXJuIHRoaXMubmV4dElkOwogIH0KCiAgLyoqW0JFR0lOLUlOVk9LRV0qKi8KICBJbml0U2V0dXBBY2Nv");
    sb.append("dW50KGVtYWlsLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9");
    sb.append("IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklk");
    sb.append("LAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpbml0");
    sb.append("L3NldHVwLWFjY291bnQiLCAiaWQiOnBhcklkLCAiZW1haWwiOiBlbWFpbH0KICAgIH0pOwogIH0KICBJ");
    sb.append("bml0Q29udmVydEdvb2dsZVVzZXIoYWNjZXNzVG9rZW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYg");
    sb.append("PSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1");
    sb.append("dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6ImluaXQvY29udmVydC1nb29nbGUtdXNlciIsICJpZCI6cGFySWQsICJh");
    sb.append("Y2Nlc3MtdG9rZW4iOiBhY2Nlc3NUb2tlbn0KICAgIH0pOwogIH0KICBJbml0Q29tcGxldGVBY2NvdW50");
    sb.append("KGVtYWlsLCByZXZva2UsIGNvZGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6ImluaXQvY29tcGxldGUtYWNjb3VudCIsICJpZCI6cGFySWQsICJlbWFpbCI6IGVtYWlsLCAi");
    sb.append("cmV2b2tlIjogcmV2b2tlLCAiY29kZSI6IGNvZGV9CiAgICB9KTsKICB9CiAgRGVpbml0KGlkZW50aXR5");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkZWluaXQiLCAiaWQi");
    sb.append("OnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBBY2NvdW50U2V0UGFzc3dv");
    sb.append("cmQoaWRlbnRpdHksIHBhc3N3b3JkLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAg");
    sb.append("IHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhY2NvdW50L3NldC1wYXNzd29yZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50");
    sb.append("aXR5LCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBBY2NvdW50R2V0UGF5bWVudFBs");
    sb.append("YW4oaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklk");
    sb.append("ID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFy");
    sb.append("SWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFj");
    sb.append("Y291bnQvZ2V0LXBheW1lbnQtcGxhbiIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQog");
    sb.append("ICAgfSk7CiAgfQogIEFjY291bnRMb2dpbihlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVy");
    sb.append("LAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImFjY291bnQvbG9naW4iLCAiaWQiOnBhcklkLCAiZW1h");
    sb.append("aWwiOiBlbWFpbCwgInBhc3N3b3JkIjogcGFzc3dvcmR9CiAgICB9KTsKICB9CiAgUHJvYmUoaWRlbnRp");
    sb.append("dHksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InByb2JlIiwgImlk");
    sb.append("IjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAgICB9KTsKICB9CiAgU3RhdHMocmVzcG9uZGVy");
    sb.append("KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJl");
    sb.append("dHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRl");
    sb.append("cjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InN0YXRzIiwgImlkIjpwYXJJZH0K");
    sb.append("ICAgIH0pOwogIH0KICBJZGVudGl0eUhhc2goaWRlbnRpdHksIHJlc3BvbmRlcikgewogICAgdmFyIHNl");
    sb.append("bGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4");
    sb.append("ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAg");
    sb.append("ICByZXF1ZXN0OiB7Im1ldGhvZCI6ImlkZW50aXR5L2hhc2giLCAiaWQiOnBhcklkLCAiaWRlbnRpdHki");
    sb.append("OiBpZGVudGl0eX0KICAgIH0pOwogIH0KICBJZGVudGl0eVN0YXNoKGlkZW50aXR5LCBuYW1lLCByZXNw");
    sb.append("b25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25k");
    sb.append("ZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJpZGVudGl0eS9zdGFzaCIsICJp");
    sb.append("ZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibmFtZSI6IG5hbWV9CiAgICB9KTsKICB9CiAg");
    sb.append("QXV0aG9yaXR5Q3JlYXRlKGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJhdXRob3JpdHkvY3JlYXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHl9CiAgICB9KTsKICB9CiAgQXV0aG9yaXR5U2V0KGlkZW50aXR5LCBhdXRob3JpdHksIGtleVN0b3Jl");
    sb.append("LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICBy");
    sb.append("ZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvc2V0");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJhdXRob3JpdHkiOiBhdXRob3JpdHks");
    sb.append("ICJrZXktc3RvcmUiOiBrZXlTdG9yZX0KICAgIH0pOwogIH0KICBBdXRob3JpdHlHZXQoaWRlbnRpdHks");
    sb.append("IGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiYXV0");
    sb.append("aG9yaXR5L2dldCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAiYXV0aG9yaXR5Ijog");
    sb.append("YXV0aG9yaXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eUxpc3QoaWRlbnRpdHksIHJlc3BvbmRlcikg");
    sb.append("ewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1");
    sb.append("cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJhdXRob3JpdHkvbGlzdCIsICJpZCI6");
    sb.append("cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5fQogICAgfSk7CiAgfQogIEF1dGhvcml0eURlc3Ryb3ko");
    sb.append("aWRlbnRpdHksIGF1dGhvcml0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("IGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0");
    sb.append("aG9kIjoiYXV0aG9yaXR5L2Rlc3Ryb3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwg");
    sb.append("ImF1dGhvcml0eSI6IGF1dGhvcml0eX0KICAgIH0pOwogIH0KICBTcGFjZUNyZWF0ZShpZGVudGl0eSwg");
    sb.append("c3BhY2UsIHRlbXBsYXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9jcmVhdGUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjog");
    sb.append("c3BhY2UsICJ0ZW1wbGF0ZSI6IHRlbXBsYXRlfQogICAgfSk7CiAgfQogIFNwYWNlR2VuZXJhdGVLZXko");
    sb.append("aWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9nZW5lcmF0ZS1rZXkiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VHZXQoaWRlbnRpdHksIHNwYWNlLCByZXNwb25k");
    sb.append("ZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("cmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6");
    sb.append("IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQiLCAiaWQiOnBhcklk");
    sb.append("LCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VT");
    sb.append("ZXQoaWRlbnRpdHksIHNwYWNlLCBwbGFuLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsK");
    sb.append("ICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJzcGFjZS9zZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJwbGFuIjogcGxhbn0KICAgIH0pOwogIH0KICBTcGFjZVJlZGVwbG95S2ljayhp");
    sb.append("ZGVudGl0eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("InNwYWNlL3JlZGVwbG95LWtpY2siLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2V9CiAgICB9KTsKICB9CiAgU3BhY2VTZXRSeGh0bWwoaWRlbnRpdHksIHNwYWNlLCBy");
    sb.append("eGh0bWwsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2Vs");
    sb.append("Zi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL3Nl");
    sb.append("dC1yeGh0bWwiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2Us");
    sb.append("ICJyeGh0bWwiOiByeGh0bWx9CiAgICB9KTsKICB9CiAgU3BhY2VHZXRSeGh0bWwoaWRlbnRpdHksIHNw");
    sb.append("YWNlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYu");
    sb.append("X19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAg");
    sb.append("ICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9nZXQt");
    sb.append("cnhodG1sIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlfQog");
    sb.append("ICAgfSk7CiAgfQogIFNwYWNlU2V0UG9saWN5KGlkZW50aXR5LCBzcGFjZSwgYWNjZXNzUG9saWN5LCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJzcGFjZS9zZXQtcG9saWN5");
    sb.append("IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAiYWNjZXNz");
    sb.append("LXBvbGljeSI6IGFjY2Vzc1BvbGljeX0KICAgIH0pOwogIH0KICBTcGFjZUdldFBvbGljeShpZGVudGl0");
    sb.append("eSwgc3BhY2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNl");
    sb.append("L2dldC1wb2xpY3kiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3Bh");
    sb.append("Y2V9CiAgICB9KTsKICB9CiAgU3BhY2VNZXRyaWNzKGlkZW50aXR5LCBzcGFjZSwgcHJlZml4LCBtZXRy");
    sb.append("aWNRdWVyeSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBz");
    sb.append("ZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwK");
    sb.append("ICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoic3BhY2Uv");
    sb.append("bWV0cmljcyIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwg");
    sb.append("InByZWZpeCI6IHByZWZpeCwgIm1ldHJpYy1xdWVyeSI6IG1ldHJpY1F1ZXJ5fQogICAgfSk7CiAgfQog");
    sb.append("IFNwYWNlRGVsZXRlKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9y");
    sb.append("cih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVl");
    sb.append("c3Q6IHsibWV0aG9kIjoic3BhY2UvZGVsZXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHksICJzcGFjZSI6IHNwYWNlfQogICAgfSk7CiAgfQogIFNwYWNlU2V0Um9sZShpZGVudGl0eSwgc3Bh");
    sb.append("Y2UsIGVtYWlsLCByb2xlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBw");
    sb.append("YXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6");
    sb.append("IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2Qi");
    sb.append("OiJzcGFjZS9zZXQtcm9sZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2Ui");
    sb.append("OiBzcGFjZSwgImVtYWlsIjogZW1haWwsICJyb2xlIjogcm9sZX0KICAgIH0pOwogIH0KICBTcGFjZUxp");
    sb.append("c3REZXZlbG9wZXJzKGlkZW50aXR5LCBzcGFjZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRo");
    sb.append("aXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9z");
    sb.append("dHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICBy");
    sb.append("ZXF1ZXN0OiB7Im1ldGhvZCI6InNwYWNlL2xpc3QtZGV2ZWxvcGVycyIsICJpZCI6cGFySWQsICJpZGVu");
    sb.append("dGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZX0KICAgIH0pOwogIH0KICBTcGFjZVJlZmxlY3Qo");
    sb.append("aWRlbnRpdHksIHNwYWNlLCBrZXksIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAg");
    sb.append("ICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1l");
    sb.append("dGhvZCI6InNwYWNlL3JlZmxlY3QiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNw");
    sb.append("YWNlIjogc3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgU3BhY2VMaXN0KGlkZW50aXR5LCBt");
    sb.append("YXJrZXIsIGxpbWl0LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJ");
    sb.append("ZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlk");
    sb.append("OiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9k");
    sb.append("Ijoic3BhY2UvbGlzdCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAibWFya2VyIjog");
    sb.append("bWFya2VyLCAibGltaXQiOiBsaW1pdH0KICAgIH0pOwogIH0KICBQdXNoUmVnaXN0ZXIoaWRlbnRpdHks");
    sb.append("IGRvbWFpbiwgc3Vic2NyaXB0aW9uLCBkZXZpY2VJbmZvLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJwdXNoL3JlZ2lzdGVyIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzdWJzY3JpcHRpb24iOiBzdWJzY3JpcHRpb24sICJk");
    sb.append("ZXZpY2UtaW5mbyI6IGRldmljZUluZm99CiAgICB9KTsKICB9CiAgRG9tYWluTWFwKGlkZW50aXR5LCBk");
    sb.append("b21haW4sIHNwYWNlLCBjZXJ0aWZpY2F0ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiZG9tYWluL21hcCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAi");
    sb.append("ZG9tYWluIjogZG9tYWluLCAic3BhY2UiOiBzcGFjZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9");
    sb.append("CiAgICB9KTsKICB9CiAgRG9tYWluQ29uZmlndXJlKGlkZW50aXR5LCBkb21haW4sIHByb2R1Y3RDb25m");
    sb.append("aWcsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5f");
    sb.append("X2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFpbi9jb25m");
    sb.append("aWd1cmUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbiwg");
    sb.append("InByb2R1Y3QtY29uZmlnIjogcHJvZHVjdENvbmZpZ30KICAgIH0pOwogIH0KICBEb21haW5SZWZsZWN0");
    sb.append("KGlkZW50aXR5LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFy");
    sb.append("IHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBp");
    sb.append("ZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhv");
    sb.append("ZCI6ImRvbWFpbi9yZWZsZWN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21h");
    sb.append("aW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluTWFwRG9jdW1lbnQoaWRlbnRpdHksIGRvbWFp");
    sb.append("biwgc3BhY2UsIGtleSwgcm91dGUsIGNlcnRpZmljYXRlLCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxm");
    sb.append("ID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVj");
    sb.append("dXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJkb21haW4vbWFwLWRvY3VtZW50IiwgImlkIjpwYXJJZCwgImlkZW50");
    sb.append("aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW4sICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5");
    sb.append("LCAicm91dGUiOiByb3V0ZSwgImNlcnRpZmljYXRlIjogY2VydGlmaWNhdGV9CiAgICB9KTsKICB9CiAg");
    sb.append("RG9tYWluTGlzdChpZGVudGl0eSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2");
    sb.append("YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6ImRvbWFpbi9saXN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHl9CiAg");
    sb.append("ICB9KTsKICB9CiAgRG9tYWluTGlzdEJ5U3BhY2UoaWRlbnRpdHksIHNwYWNlLCByZXNwb25kZXIpIHsK");
    sb.append("ICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJu");
    sb.append("IHNlbGYuX19leGVjdXRlX3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiBy");
    sb.append("ZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL2xpc3QtYnktc3BhY2UiLCAi");
    sb.append("aWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2V9CiAgICB9KTsKICB9");
    sb.append("CiAgRG9tYWluR2V0VmFwaWRQdWJsaWNLZXkoaWRlbnRpdHksIGRvbWFpbiwgcmVzcG9uZGVyKSB7CiAg");
    sb.append("ICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBz");
    sb.append("ZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25k");
    sb.append("ZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL2dldC12YXBpZC1wdWJsaWMta2V5Iiwg");
    sb.append("ImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsK");
    sb.append("ICB9CiAgRG9tYWluVW5tYXAoaWRlbnRpdHksIGRvbWFpbiwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2Vs");
    sb.append("ZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhl");
    sb.append("Y3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAg");
    sb.append("IHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9tYWluL3VubWFwIiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJkb21haW4iOiBkb21haW59CiAgICB9KTsKICB9CiAgRG9tYWluR2V0KGlkZW50aXR5");
    sb.append("LCBkb21haW4sIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQs");
    sb.append("CiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvbWFp");
    sb.append("bi9nZXQiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRvbWFpbiI6IGRvbWFpbn0K");
    sb.append("ICAgIH0pOwogIH0KICBEb2N1bWVudERvd25sb2FkQXJjaGl2ZShpZGVudGl0eSwgc3BhY2UsIGtleSwg");
    sb.append("cmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQo");
    sb.append("KTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAgICAg");
    sb.append("IHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2Rv");
    sb.append("d25sb2FkLWFyY2hpdmUiLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjog");
    sb.append("c3BhY2UsICJrZXkiOiBrZXl9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRBdXRob3JpemF0aW9uKHNwYWNl");
    sb.append("LCBrZXksIG1lc3NhZ2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBh");
    sb.append("cklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDog");
    sb.append("cGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6");
    sb.append("ImRvY3VtZW50L2F1dGhvcml6YXRpb24iLCAiaWQiOnBhcklkLCAic3BhY2UiOiBzcGFjZSwgImtleSI6");
    sb.append("IGtleSwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXphdGlv");
    sb.append("bkRvbWFpbihkb21haW4sIG1lc3NhZ2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwog");
    sb.append("ICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6YXRpb24tZG9tYWluIiwgImlkIjpwYXJJZCwgImRvbWFp");
    sb.append("biI6IGRvbWFpbiwgIm1lc3NhZ2UiOiBtZXNzYWdlfQogICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9y");
    sb.append("aXplKHNwYWNlLCBrZXksIHVzZXJuYW1lLCBwYXNzd29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2Vs");
    sb.append("ZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhl");
    sb.append("Y3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAg");
    sb.append("IHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQvYXV0aG9yaXplIiwgImlkIjpwYXJJZCwgInNwYWNl");
    sb.append("Ijogc3BhY2UsICJrZXkiOiBrZXksICJ1c2VybmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNz");
    sb.append("d29yZH0KICAgIH0pOwogIH0KICBEb2N1bWVudEF1dGhvcml6ZURvbWFpbihkb21haW4sIHVzZXJuYW1l");
    sb.append("LCBwYXNzd29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9j");
    sb.append("dW1lbnQvYXV0aG9yaXplLWRvbWFpbiIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJ1c2Vy");
    sb.append("bmFtZSI6IHVzZXJuYW1lLCAicGFzc3dvcmQiOiBwYXNzd29yZH0KICAgIH0pOwogIH0KICBEb2N1bWVu");
    sb.append("dEF1dGhvcml6ZVdpdGhSZXNldChzcGFjZSwga2V5LCB1c2VybmFtZSwgcGFzc3dvcmQsIG5ld19wYXNz");
    sb.append("d29yZCwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAg");
    sb.append("ICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoiZG9jdW1lbnQv");
    sb.append("YXV0aG9yaXplLXdpdGgtcmVzZXQiLCAiaWQiOnBhcklkLCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtl");
    sb.append("eSwgInVzZXJuYW1lIjogdXNlcm5hbWUsICJwYXNzd29yZCI6IHBhc3N3b3JkLCAibmV3X3Bhc3N3b3Jk");
    sb.append("IjogbmV3X3Bhc3N3b3JkfQogICAgfSk7CiAgfQogIERvY3VtZW50QXV0aG9yaXplRG9tYWluV2l0aFJl");
    sb.append("c2V0KGRvbWFpbiwgdXNlcm5hbWUsIHBhc3N3b3JkLCBuZXdfcGFzc3dvcmQsIHJlc3BvbmRlcikgewog");
    sb.append("ICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4g");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9u");
    sb.append("ZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImRvY3VtZW50L2F1dGhvcml6ZS1kb21haW4td2l0");
    sb.append("aC1yZXNldCIsICJpZCI6cGFySWQsICJkb21haW4iOiBkb21haW4sICJ1c2VybmFtZSI6IHVzZXJuYW1l");
    sb.append("LCAicGFzc3dvcmQiOiBwYXNzd29yZCwgIm5ld19wYXNzd29yZCI6IG5ld19wYXNzd29yZH0KICAgIH0p");
    sb.append("OwogIH0KICBEb2N1bWVudENyZWF0ZShpZGVudGl0eSwgc3BhY2UsIGtleSwgZW50cm9weSwgYXJnLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9jcmVhdGUi");
    sb.append("LCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgInNwYWNlIjogc3BhY2UsICJrZXkiOiBr");
    sb.append("ZXksICJlbnRyb3B5IjogZW50cm9weSwgImFyZyI6IGFyZ30KICAgIH0pOwogIH0KICBEb2N1bWVudERl");
    sb.append("bGV0ZShpZGVudGl0eSwgc3BhY2UsIGtleSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7");
    sb.append("CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7");
    sb.append("CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6");
    sb.append("IHsibWV0aG9kIjoiZG9jdW1lbnQvZGVsZXRlIiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRp");
    sb.append("dHksICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5fQogICAgfSk7CiAgfQogIERvY3VtZW50TGlzdChp");
    sb.append("ZGVudGl0eSwgc3BhY2UsIG1hcmtlciwgbGltaXQsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0");
    sb.append("aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVf");
    sb.append("c3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAg");
    sb.append("cmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudC9saXN0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5Ijog");
    sb.append("aWRlbnRpdHksICJzcGFjZSI6IHNwYWNlLCAibWFya2VyIjogbWFya2VyLCAibGltaXQiOiBsaW1pdH0K");
    sb.append("ICAgIH0pOwogIH0KICBNZXNzYWdlRGlyZWN0U2VuZChpZGVudGl0eSwgc3BhY2UsIGtleSwgY2hhbm5l");
    sb.append("bCwgbWVzc2FnZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQg");
    sb.append("PSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgIGlkOiBwYXJJ");
    sb.append("ZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJlcXVlc3Q6IHsibWV0aG9kIjoibWVz");
    sb.append("c2FnZS9kaXJlY3Qtc2VuZCIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2Ui");
    sb.append("OiBzcGFjZSwgImtleSI6IGtleSwgImNoYW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9");
    sb.append("CiAgICB9KTsKICB9CiAgTWVzc2FnZURpcmVjdFNlbmRPbmNlKGlkZW50aXR5LCBzcGFjZSwga2V5LCBk");
    sb.append("ZWR1cGUsIGNoYW5uZWwsIG1lc3NhZ2UsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwog");
    sb.append("ICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfcnIoewog");
    sb.append("ICAgICBpZDogcGFySWQsCiAgICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7");
    sb.append("Im1ldGhvZCI6Im1lc3NhZ2UvZGlyZWN0LXNlbmQtb25jZSIsICJpZCI6cGFySWQsICJpZGVudGl0eSI6");
    sb.append("IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgImRlZHVwZSI6IGRlZHVwZSwgImNo");
    sb.append("YW5uZWwiOiBjaGFubmVsLCAibWVzc2FnZSI6IG1lc3NhZ2V9CiAgICB9KTsKICB9CiAgQ29ubmVjdGlv");
    sb.append("bkNyZWF0ZShpZGVudGl0eSwgc3BhY2UsIGtleSwgdmlld2VyU3RhdGUsIHJlc3BvbmRlcikgewogICAg");
    sb.append("dmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2Vs");
    sb.append("Zi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3Bv");
    sb.append("bmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJjb25uZWN0aW9uL2NyZWF0ZSIsICJpZCI6cGFy");
    sb.append("SWQsICJpZGVudGl0eSI6IGlkZW50aXR5LCAic3BhY2UiOiBzcGFjZSwgImtleSI6IGtleSwgInZpZXdl");
    sb.append("ci1zdGF0ZSI6IHZpZXdlclN0YXRlfSwKICAgICAgc2VuZDogZnVuY3Rpb24oY2hhbm5lbCwgbWVzc2Fn");
    sb.append("ZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAg");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVy");
    sb.append("OiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2Vu");
    sb.append("ZCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNz");
    sb.append("YWdlIjogbWVzc2FnZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgcGFzc3dvcmQ6IGZ1bmN0aW9u");
    sb.append("KHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2");
    sb.append("YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAg");
    sb.append("ICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJl");
    sb.append("cXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9wYXNzd29yZCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rp");
    sb.append("b24iOnBhcklkLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJuZXdf");
    sb.append("cGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHNlbmRPbmNl");
    sb.append("OiBmdW5jdGlvbihjaGFubmVsLCBkZWR1cGUsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQtb25jZSIsIGlkOiBzdWJJZCwgImNvbm5l");
    sb.append("Y3Rpb24iOnBhcklkLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJkZWR1cGUiOiBkZWR1cGUsICJtZXNzYWdl");
    sb.append("IjogbWVzc2FnZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgY2FuQXR0YWNoOiBmdW5jdGlvbihz");
    sb.append("dWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxm");
    sb.append("Ll9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1");
    sb.append("YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9jYW4tYXR0");
    sb.append("YWNoIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAg");
    sb.append("ICAgIGF0dGFjaDogZnVuY3Rpb24oYXNzZXRJZCwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCBzaXplLCBk");
    sb.append("aWdlc3RNZDUsIGRpZ2VzdFNoYTM4NCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1Yklk");
    sb.append("LAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1l");
    sb.append("dGhvZDogImNvbm5lY3Rpb24vYXR0YWNoIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJh");
    sb.append("c3NldC1pZCI6IGFzc2V0SWQsICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29u");
    sb.append("dGVudFR5cGUsICJzaXplIjogc2l6ZSwgImRpZ2VzdC1tZDUiOiBkaWdlc3RNZDUsICJkaWdlc3Qtc2hh");
    sb.append("Mzg0IjogZGlnZXN0U2hhMzg0fQogICAgICAgIH0pOwogICAgICB9LAogICAgICB1cGRhdGU6IGZ1bmN0");
    sb.append("aW9uKHZpZXdlclN0YXRlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAg");
    sb.append("ICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAi");
    sb.append("Y29ubmVjdGlvbi91cGRhdGUiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInZpZXdlci1z");
    sb.append("dGF0ZSI6IHZpZXdlclN0YXRlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBlbmQ6IGZ1bmN0aW9u");
    sb.append("KHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2VuZCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsK");
    sb.append("ICB9CiAgQ29ubmVjdGlvbkNyZWF0ZVZpYURvbWFpbihpZGVudGl0eSwgZG9tYWluLCB2aWV3ZXJTdGF0");
    sb.append("ZSwgcmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0ZV9zdHJlYW0oewogICAgICBpZDogcGFySWQsCiAg");
    sb.append("ICAgIHJlc3BvbmRlcjogcmVzcG9uZGVyLAogICAgICByZXF1ZXN0OiB7Im1ldGhvZCI6ImNvbm5lY3Rp");
    sb.append("b24vY3JlYXRlLXZpYS1kb21haW4iLCAiaWQiOnBhcklkLCAiaWRlbnRpdHkiOiBpZGVudGl0eSwgImRv");
    sb.append("bWFpbiI6IGRvbWFpbiwgInZpZXdlci1zdGF0ZSI6IHZpZXdlclN0YXRlfSwKICAgICAgc2VuZDogZnVu");
    sb.append("Y3Rpb24oY2hhbm5lbCwgbWVzc2FnZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1Yklk");
    sb.append("LAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1l");
    sb.append("dGhvZDogImNvbm5lY3Rpb24vc2VuZCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiY2hh");
    sb.append("bm5lbCI6IGNoYW5uZWwsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgICAgICB9KTsKICAgICAgfSwKICAg");
    sb.append("ICAgcGFzc3dvcmQ6IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCBzdWJS");
    sb.append("ZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9f");
    sb.append("ZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJl");
    sb.append("c3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9wYXNzd29yZCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3");
    sb.append("b3JkIjogcGFzc3dvcmQsICJuZXdfcGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICAgICAgfSk7CiAg");
    sb.append("ICAgIH0sCiAgICAgIHNlbmRPbmNlOiBmdW5jdGlvbihjaGFubmVsLCBkZWR1cGUsIG1lc3NhZ2UsIHN1");
    sb.append("YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYu");
    sb.append("X19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3Vi");
    sb.append("UmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQtb25j");
    sb.append("ZSIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJkZWR1");
    sb.append("cGUiOiBkZWR1cGUsICJtZXNzYWdlIjogbWVzc2FnZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAg");
    sb.append("Y2FuQXR0YWNoOiBmdW5jdGlvbihzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxm");
    sb.append("Ll9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAg");
    sb.append("ICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9k");
    sb.append("OiAiY29ubmVjdGlvbi9jYW4tYXR0YWNoIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAg");
    sb.append("ICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGF0dGFjaDogZnVuY3Rpb24oYXNzZXRJZCwgZmlsZW5hbWUs");
    sb.append("IGNvbnRlbnRUeXBlLCBzaXplLCBkaWdlc3RNZDUsIGRpZ2VzdFNoYTM4NCwgc3ViUmVzcG9uZGVyKSB7");
    sb.append("CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIo");
    sb.append("ewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAg");
    sb.append("ICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vYXR0YWNoIiwgaWQ6IHN1YklkLCAi");
    sb.append("Y29ubmVjdGlvbiI6cGFySWQsICJhc3NldC1pZCI6IGFzc2V0SWQsICJmaWxlbmFtZSI6IGZpbGVuYW1l");
    sb.append("LCAiY29udGVudC10eXBlIjogY29udGVudFR5cGUsICJzaXplIjogc2l6ZSwgImRpZ2VzdC1tZDUiOiBk");
    sb.append("aWdlc3RNZDUsICJkaWdlc3Qtc2hhMzg0IjogZGlnZXN0U2hhMzg0fQogICAgICAgIH0pOwogICAgICB9");
    sb.append("LAogICAgICB1cGRhdGU6IGZ1bmN0aW9uKHZpZXdlclN0YXRlLCBzdWJSZXNwb25kZXIpIHsKICAgICAg");
    sb.append("ICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAg");
    sb.append("ICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAg");
    sb.append("IHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi91cGRhdGUiLCBpZDogc3ViSWQsICJjb25uZWN0");
    sb.append("aW9uIjpwYXJJZCwgInZpZXdlci1zdGF0ZSI6IHZpZXdlclN0YXRlfQogICAgICAgIH0pOwogICAgICB9");
    sb.append("LAogICAgICBlbmQ6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNl");
    sb.append("bGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwK");
    sb.append("ICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRo");
    sb.append("b2Q6ICJjb25uZWN0aW9uL2VuZCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAgICAg");
    sb.append("IH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgRG9jdW1lbnRzSGFzaFBhc3N3b3JkKHBhc3N3b3JkLCBy");
    sb.append("ZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgaWQ6IHBhcklkLAogICAgICByZXNw");
    sb.append("b25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJtZXRob2QiOiJkb2N1bWVudHMvaGFzaC1w");
    sb.append("YXNzd29yZCIsICJpZCI6cGFySWQsICJwYXNzd29yZCI6IHBhc3N3b3JkfQogICAgfSk7CiAgfQogIEJp");
    sb.append("bGxpbmdDb25uZWN0aW9uQ3JlYXRlKGlkZW50aXR5LCByZXNwb25kZXIpIHsKICAgIHZhciBzZWxmID0g");
    sb.append("dGhpczsKICAgIHZhciBwYXJJZCA9IHNlbGYuX19pZCgpOwogICAgcmV0dXJuIHNlbGYuX19leGVjdXRl");
    sb.append("X3N0cmVhbSh7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAg");
    sb.append("IHJlcXVlc3Q6IHsibWV0aG9kIjoiYmlsbGluZy1jb25uZWN0aW9uL2NyZWF0ZSIsICJpZCI6cGFySWQs");
    sb.append("ICJpZGVudGl0eSI6IGlkZW50aXR5fSwKICAgICAgc2VuZDogZnVuY3Rpb24oY2hhbm5lbCwgbWVzc2Fn");
    sb.append("ZSwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0gc2VsZi5fX2lkKCk7CiAgICAgICAg");
    sb.append("c2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1YklkLAogICAgICAgICAgcmVzcG9uZGVy");
    sb.append("OiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1ldGhvZDogImNvbm5lY3Rpb24vc2Vu");
    sb.append("ZCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJtZXNz");
    sb.append("YWdlIjogbWVzc2FnZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgcGFzc3dvcmQ6IGZ1bmN0aW9u");
    sb.append("KHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2");
    sb.append("YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAg");
    sb.append("ICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJl");
    sb.append("cXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9wYXNzd29yZCIsIGlkOiBzdWJJZCwgImNvbm5lY3Rp");
    sb.append("b24iOnBhcklkLCAidXNlcm5hbWUiOiB1c2VybmFtZSwgInBhc3N3b3JkIjogcGFzc3dvcmQsICJuZXdf");
    sb.append("cGFzc3dvcmQiOiBuZXdfcGFzc3dvcmR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHNlbmRPbmNl");
    sb.append("OiBmdW5jdGlvbihjaGFubmVsLCBkZWR1cGUsIG1lc3NhZ2UsIHN1YlJlc3BvbmRlcikgewogICAgICAg");
    sb.append("IHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAg");
    sb.append("ICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAg");
    sb.append("cmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL3NlbmQtb25jZSIsIGlkOiBzdWJJZCwgImNvbm5l");
    sb.append("Y3Rpb24iOnBhcklkLCAiY2hhbm5lbCI6IGNoYW5uZWwsICJkZWR1cGUiOiBkZWR1cGUsICJtZXNzYWdl");
    sb.append("IjogbWVzc2FnZX0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgY2FuQXR0YWNoOiBmdW5jdGlvbihz");
    sb.append("dWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9faWQoKTsKICAgICAgICBzZWxm");
    sb.append("Ll9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAgICAgICByZXNwb25kZXI6IHN1");
    sb.append("YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAiY29ubmVjdGlvbi9jYW4tYXR0");
    sb.append("YWNoIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWR9CiAgICAgICAgfSk7CiAgICAgIH0sCiAg");
    sb.append("ICAgIGF0dGFjaDogZnVuY3Rpb24oYXNzZXRJZCwgZmlsZW5hbWUsIGNvbnRlbnRUeXBlLCBzaXplLCBk");
    sb.append("aWdlc3RNZDUsIGRpZ2VzdFNoYTM4NCwgc3ViUmVzcG9uZGVyKSB7CiAgICAgICAgdmFyIHN1YklkID0g");
    sb.append("c2VsZi5fX2lkKCk7CiAgICAgICAgc2VsZi5fX2V4ZWN1dGVfcnIoewogICAgICAgICAgaWQ6IHN1Yklk");
    sb.append("LAogICAgICAgICAgcmVzcG9uZGVyOiBzdWJSZXNwb25kZXIsCiAgICAgICAgICByZXF1ZXN0OiB7IG1l");
    sb.append("dGhvZDogImNvbm5lY3Rpb24vYXR0YWNoIiwgaWQ6IHN1YklkLCAiY29ubmVjdGlvbiI6cGFySWQsICJh");
    sb.append("c3NldC1pZCI6IGFzc2V0SWQsICJmaWxlbmFtZSI6IGZpbGVuYW1lLCAiY29udGVudC10eXBlIjogY29u");
    sb.append("dGVudFR5cGUsICJzaXplIjogc2l6ZSwgImRpZ2VzdC1tZDUiOiBkaWdlc3RNZDUsICJkaWdlc3Qtc2hh");
    sb.append("Mzg0IjogZGlnZXN0U2hhMzg0fQogICAgICAgIH0pOwogICAgICB9LAogICAgICB1cGRhdGU6IGZ1bmN0");
    sb.append("aW9uKHZpZXdlclN0YXRlLCBzdWJSZXNwb25kZXIpIHsKICAgICAgICB2YXIgc3ViSWQgPSBzZWxmLl9f");
    sb.append("aWQoKTsKICAgICAgICBzZWxmLl9fZXhlY3V0ZV9ycih7CiAgICAgICAgICBpZDogc3ViSWQsCiAgICAg");
    sb.append("ICAgICByZXNwb25kZXI6IHN1YlJlc3BvbmRlciwKICAgICAgICAgIHJlcXVlc3Q6IHsgbWV0aG9kOiAi");
    sb.append("Y29ubmVjdGlvbi91cGRhdGUiLCBpZDogc3ViSWQsICJjb25uZWN0aW9uIjpwYXJJZCwgInZpZXdlci1z");
    sb.append("dGF0ZSI6IHZpZXdlclN0YXRlfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBlbmQ6IGZ1bmN0aW9u");
    sb.append("KHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAgICAgIHNl");
    sb.append("bGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3BvbmRlcjog");
    sb.append("c3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJjb25uZWN0aW9uL2VuZCIs");
    sb.append("IGlkOiBzdWJJZCwgImNvbm5lY3Rpb24iOnBhcklkfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsK");
    sb.append("ICB9CiAgQ29uZmlndXJlTWFrZU9yR2V0QXNzZXRLZXkocmVzcG9uZGVyKSB7CiAgICB2YXIgc2VsZiA9");
    sb.append("IHRoaXM7CiAgICB2YXIgcGFySWQgPSBzZWxmLl9faWQoKTsKICAgIHJldHVybiBzZWxmLl9fZXhlY3V0");
    sb.append("ZV9ycih7CiAgICAgIGlkOiBwYXJJZCwKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIHJl");
    sb.append("cXVlc3Q6IHsibWV0aG9kIjoiY29uZmlndXJlL21ha2Utb3ItZ2V0LWFzc2V0LWtleSIsICJpZCI6cGFy");
    sb.append("SWR9CiAgICB9KTsKICB9CiAgQXR0YWNobWVudFN0YXJ0KGlkZW50aXR5LCBzcGFjZSwga2V5LCBmaWxl");
    sb.append("bmFtZSwgY29udGVudFR5cGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFy");
    sb.append("IHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsKICAg");
    sb.append("ICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDogeyJt");
    sb.append("ZXRob2QiOiJhdHRhY2htZW50L3N0YXJ0IiwgImlkIjpwYXJJZCwgImlkZW50aXR5IjogaWRlbnRpdHks");
    sb.append("ICJzcGFjZSI6IHNwYWNlLCAia2V5Ijoga2V5LCAiZmlsZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRlbnQt");
    sb.append("dHlwZSI6IGNvbnRlbnRUeXBlfSwKICAgICAgYXBwZW5kOiBmdW5jdGlvbihjaHVua01kNSwgYmFzZTY0");
    sb.append("Qnl0ZXMsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwogICAg");
    sb.append("ICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJlc3Bv");
    sb.append("bmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJhdHRhY2htZW50");
    sb.append("L2FwcGVuZCIsIGlkOiBzdWJJZCwgInVwbG9hZCI6cGFySWQsICJjaHVuay1tZDUiOiBjaHVua01kNSwg");
    sb.append("ImJhc2U2NC1ieXRlcyI6IGJhc2U2NEJ5dGVzfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBmaW5p");
    sb.append("c2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgp");
    sb.append("OwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAg");
    sb.append("IHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJhdHRh");
    sb.append("Y2htZW50L2ZpbmlzaCIsIGlkOiBzdWJJZCwgInVwbG9hZCI6cGFySWR9CiAgICAgICAgfSk7CiAgICAg");
    sb.append("IH0KICAgIH0pOwogIH0KICBBdHRhY2htZW50U3RhcnRCeURvbWFpbihpZGVudGl0eSwgZG9tYWluLCBm");
    sb.append("aWxlbmFtZSwgY29udGVudFR5cGUsIHJlc3BvbmRlcikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAg");
    sb.append("dmFyIHBhcklkID0gc2VsZi5fX2lkKCk7CiAgICByZXR1cm4gc2VsZi5fX2V4ZWN1dGVfc3RyZWFtKHsK");
    sb.append("ICAgICAgaWQ6IHBhcklkLAogICAgICByZXNwb25kZXI6IHJlc3BvbmRlciwKICAgICAgcmVxdWVzdDog");
    sb.append("eyJtZXRob2QiOiJhdHRhY2htZW50L3N0YXJ0LWJ5LWRvbWFpbiIsICJpZCI6cGFySWQsICJpZGVudGl0");
    sb.append("eSI6IGlkZW50aXR5LCAiZG9tYWluIjogZG9tYWluLCAiZmlsZW5hbWUiOiBmaWxlbmFtZSwgImNvbnRl");
    sb.append("bnQtdHlwZSI6IGNvbnRlbnRUeXBlfSwKICAgICAgYXBwZW5kOiBmdW5jdGlvbihjaHVua01kNSwgYmFz");
    sb.append("ZTY0Qnl0ZXMsIHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19pZCgpOwog");
    sb.append("ICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAgICAgIHJl");
    sb.append("c3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJhdHRhY2ht");
    sb.append("ZW50L2FwcGVuZCIsIGlkOiBzdWJJZCwgInVwbG9hZCI6cGFySWQsICJjaHVuay1tZDUiOiBjaHVua01k");
    sb.append("NSwgImJhc2U2NC1ieXRlcyI6IGJhc2U2NEJ5dGVzfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBm");
    sb.append("aW5pc2g6IGZ1bmN0aW9uKHN1YlJlc3BvbmRlcikgewogICAgICAgIHZhciBzdWJJZCA9IHNlbGYuX19p");
    sb.append("ZCgpOwogICAgICAgIHNlbGYuX19leGVjdXRlX3JyKHsKICAgICAgICAgIGlkOiBzdWJJZCwKICAgICAg");
    sb.append("ICAgIHJlc3BvbmRlcjogc3ViUmVzcG9uZGVyLAogICAgICAgICAgcmVxdWVzdDogeyBtZXRob2Q6ICJh");
    sb.append("dHRhY2htZW50L2ZpbmlzaCIsIGlkOiBzdWJJZCwgInVwbG9hZCI6cGFySWR9CiAgICAgICAgfSk7CiAg");
    sb.append("ICAgIH0KICAgIH0pOwogIH0KCiAgLyoqW0VORC1JTlZPS0VdKiovCn0KCnZhciBBZGFtYSA9IHsKICBQ");
    sb.append("cm9kdWN0aW9uOiAiYXdzLXVzLWVhc3QtMi5hZGFtYS1wbGF0Zm9ybS5jb20iLAogIEJldGE6ICJiZXRh");
    sb.append("LmFkYW1hLXBsYXRmb3JtLmNvbSIsCiAgQ29ubmVjdGlvbjogV2ViU29ja2V0QWRhbWFDb25uZWN0aW9u");
    sb.append("Cn07Cg==");
    return sb.toString();
  }
  public static final String WORKER = new String(Base64.getDecoder().decode(make_worker()), StandardCharsets.UTF_8);
  private static String make_worker() {
    StringBuilder sb = new StringBuilder();
    sb.append("LyogQWRhbWEgd29ya2VyOiBoYW5kbGUgc2ltcGxlIHB1c2ggbm90aWZpY2F0aW9ucyAqLwoKY29uc29s");
    sb.append("ZS5sb2coImFkYW1hIHdvcmtlciBzdGFydGVkIik7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcigncHVzaCcs");
    sb.append("IGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEpIHsKICAgIHZhciBqc29uID0gZXZlbnQu");
    sb.append("ZGF0YS5qc29uKCk7CiAgICBpZiAoanNvbikgewogICAgICBjb25zb2xlLmxvZyhqc29uKTsKICAgICAg");
    sb.append("dmFyIHB1c2hUb2tlbiA9ICJOQSI7CiAgICAgIGlmICgnQHB0JyBpbiBqc29uKSB7CiAgICAgICAgcHVz");
    sb.append("aFRva2VuID0ganNvblsnQHB0J107CiAgICAgIH0KICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAg");
    sb.append("Ym9keToganNvbi5ib2R5ID8ganNvbi5ib2R5IDogIkdlbmVyaWMgUHVzaCBCb2R5IiwKICAgICAgfTsK");
    sb.append("ICAgICAgaWYgKGpzb24uaWNvbikgewogICAgICAgIG9wdGlvbnMuaWNvbiA9IGpzb24uaWNvbjsKICAg");
    sb.append("ICAgfQogICAgICB2YXIgc2hvdyA9IHRydWU7CiAgICAgIGlmIChqc29uLmhpZGUpIHsKICAgICAgICBz");
    sb.append("aG93ID0gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgaWYgKGpzb24udXJs");
    sb.append("KSB7CiAgICAgICAgZGF0YS51cmwgPSBqc29uLnVybDsKICAgICAgfQogICAgICBvcHRpb25zLmRhdGEg");
    sb.append("PSBkYXRhOwogICAgICBpZiAoc2hvdykgewogICAgICAgIGV2ZW50LndhaXRVbnRpbChzZWxmLnJlZ2lz");
    sb.append("dHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKGpzb24udGl0bGUgPyBqc29uLnRpdGxlIDogIkdlbmVyaWMg");
    sb.append("UHVzaCBUaXRsZSIsIG9wdGlvbnMpKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mKGpzb24uYmFkZ2Up");
    sb.append("ID09ICJudW1iZXIiICYmIG5hdmlnYXRvci5zZXRBcHBCYWRnZSkgewogICAgICAgIHRyeSB7CiAgICAg");
    sb.append("ICAgICBldmVudC53YWl0VW50aWwobmF2aWdhdG9yLnNldEFwcEJhZGdlKGpzb24uYmFkZ2UpKTsKICAg");
    sb.append("ICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZXZlbnQud2FpdFVu");
    sb.append("dGlsKGZldGNoKHNlbGYubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgc2VsZi5sb2NhdGlvbi5ob3N0");
    sb.append("ICsgIi9+cHQvIiArIHB1c2hUb2tlbiwgewogICAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICAg");
    sb.append("IGhlYWRlcnM6IHt9LAogICAgICAgICAgYm9keTogcHVzaFRva2VuCiAgICAgICAgfSkpOwogICAgICB9");
    sb.append("IGNhdGNoIChleCkgewogICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAvLyBkb24ndCBjYXJl");
    sb.append("CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25j");
    sb.append("bGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgaWYgKGV2ZW50Lm5vdGlmaWNhdGlvbiAmJiBldmVudC5u");
    sb.append("b3RpZmljYXRpb24uZGF0YSAmJiBldmVudC5ub3RpZmljYXRpb24uZGF0YS51cmwpIHsKICAgIHZhciB1");
    sb.append("cmwgPSBzZWxmLmxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIHNlbGYubG9jYXRpb24uaG9zdCArIGV2");
    sb.append("ZW50Lm5vdGlmaWNhdGlvbi5kYXRhLnVybDsKICAgIHZhciBob21lID0gc2VsZi5sb2NhdGlvbi5wcm90");
    sb.append("b2NvbCArICIvLyIgKyBzZWxmLmxvY2F0aW9uLmhvc3Q7CiAgICBldmVudC5ub3RpZmljYXRpb24uY2xv");
    sb.append("c2UoKTsgLy8gQW5kcm9pZCBuZWVkcyBleHBsaWNpdCBjbG9zZS4KICAgIGV2ZW50LndhaXRVbnRpbCgK");
    sb.append("ICAgICAgY2xpZW50cy5tYXRjaEFsbCh7dHlwZTogJ3dpbmRvdyd9KS50aGVuKCB3YyA9PiB7CiAgICAg");
    sb.append("ICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHdpbmRvdy90YWIgb3BlbiB3aXRoIHRoZSB0");
    sb.append("YXJnZXQgVVJMCiAgICAgICAgdmFyIGNsaWVudFdpdGhQcmVmaXggPSBudWxsOwogICAgICAgIHZhciBj");
    sb.append("bGllbnRXaXRoSG9tZSA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Yy5sZW5ndGg7");
    sb.append("IGkrKykgewogICAgICAgICAgdmFyIGNsaWVudCA9IHdjW2ldOwogICAgICAgICAgY29uc29sZS5sb2co");
    sb.append("ImNsaWVudDoiICsgY2xpZW50LnVybCArICI7IiArIHVybCk7CiAgICAgICAgICBpZiAoY2xpZW50LnVy");
    sb.append("bCA9PT0gdXJsICYmICdmb2N1cycgaW4gY2xpZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjbGllbnQu");
    sb.append("Zm9jdXMoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjbGllbnQudXJsLnN0YXJ0c1dpdGgodXJs");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoUHJlZml4ID0g");
    sb.append("Y2xpZW50OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNsaWVudC51cmwuc3RhcnRzV2l0aChob21l");
    sb.append("KSAmJiAnbmF2aWdhdGUnIGluIGNsaWVudCkgewogICAgICAgICAgICBjbGllbnRXaXRoSG9tZSA9IGNs");
    sb.append("aWVudDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGNsaWVudFdpdGhQcmVmaXggIT0g");
    sb.append("bnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpwcmVmaXg6IiArIHVybCk7CiAgICAgICAg");
    sb.append("ICByZXR1cm4gY2xpZW50V2l0aFByZWZpeC5uYXZpZ2F0ZSh1cmwpOwogICAgICAgIH0KICAgICAgICBp");
    sb.append("ZiAoY2xpZW50V2l0aEhvbWUgIT0gbnVsbCkgewogICAgICAgICAgY29uc29sZS5sb2coIm5hdjpob21l");
    sb.append("OiIgKyB1cmwpOwogICAgICAgICAgcmV0dXJuIGNsaWVudFdpdGhIb21lLm5hdmlnYXRlKHVybCk7CiAg");
    sb.append("ICAgICAgfQogICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgIGNvbnNvbGUu");
    sb.append("bG9nKCJvcGVuOm5ldzoiICsgdXJsKTsKICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3co");
    sb.append("dXJsKTsKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogIH0KfSk7");
    return sb.toString();
  }
}
