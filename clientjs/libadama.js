function AdamaTree(){function a(){var e=[];for(t in l)l[t]()||e.push(t);for(var t=0;t<e.length;t++)delete l[t]}function i(e){if(Array.isArray(e))for(var t=[],n=0;n<e.length;n++)t.push(i(e[n]));else{if("object"!=typeof e)return e;t={};for(key in e)"#"!=key[0]&&"__key"!=key&&"@o"!=key&&"@s"!=key&&(t[key]=i(e[key]))}return t}function N(e,t){if(0==e.length)return e;for(var n=[],i=0;i<e.length;i++)t in e[i]&&n.push(e[i][t]);return n}function L(e,t,n){for(var i=0;i<e.length;i++){var r=e[i];if("@e"in r)for(var o=r["@e"],a=0;a<o.length;a++)n.push(function(){this.f(this.v)}.bind({f:o[a],v:t}))}}function O(e,t,n,i,r){if(!r||0!=n.length){for(var o in t){var a="#"+o,s=e[o],c=t[o];if(null==c)Array.isArray(s)&&(a in e&&R(N(n,a)),delete e[a]),R(N(n,o)),delete e[o];else if("object"!=typeof c||Array.isArray(c))e[o]=c,L(N(n,o),c,i);else if(Array.isArray(s)||"@o"in c||"@s"in c){o in e||(e[o]=[]),a in e||(e[a]={},"@o"in c&&(e[a]["@o"]=!0),e[a].__key=o);var u,d=e[a],l=N(n,o),f=null,h=null,p={};for(u in c){var v=c[u];if("@o"==u)f=v;else if("@s"==u)h=v;else if(null==v)u in d&&(p[u]=function(e){R(N(l,e)),delete d[e],M(l,e);for(var t=l,n=e,i=0;i<t.length;i++){var r=t[i];if("-"in r){r=r["-"];if("@e"in r)for(var o=r["@e"],a=0;a<o.length;a++)o[a](n)}}});else{if(!(u in d)){k=b=y=g=w=void 0;for(var m=l,_=u,w=0;w<m.length;w++){var g=m[w];if("+"in g){var y=g["+"];if("@e"in y)for(var b=y["@e"],k=0;k<b.length;k++)P(g,b[k](_),_)}}}v=c[u];"object"==typeof v?(u in d||(d[u]={},d[u].__key=u),p[u]=function(e){O(d[e],c[e],N(l,e),i,r),L(N(l,e),d[e],i)}):(d[u]=v,p[u]=function(e){L(N(l,e),d[e],i)})}}var S=e[o],x=[];if(null!=f){for(var E=[],D=[],I=0;I<f.length;I++){var A=f[I],C=typeof A;if("string"==C||"number"==C)E.push(d[A]),D.push(""+A);else for(var C=A[0],T=A[1],q=C;q<=T;q++)S[q]&&(E.push(S[q]),D.push(S[q].__key))}x.push(function(){L(N(l,"~"),D,i)}),e[o]=E}else if(null!=h){for(E=[],D=[],I=0;I<h;I++)E[I]=d[""+I],D.push(""+I);x.push(function(){L(N(l,"~"),D,i)}),e[o]=E}for(u in p)p[u](u);for(I=0;I<x.length;I++)x[I]();L(l,e[o],i)}else{o in e&&"object"==typeof e[o]||(e[o]={});s=N(n,o);O(e[o],c,s,i,r),L(s,e[o],i)}}L(n,e,i)}}function s(e){for(var t=0;t<e.length;t++)e[t]()}function r(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)r(e[n],t);else if("object"==typeof e)for(var i in e)"@e"==i?r(e[i],t):(i in t||(t[i]={}),r(e[i],t[i]));else"function"==typeof e&&("@e"in t?t["@e"].push(e):t["@e"]=[e])}function u(e){if("object"!=typeof e)return e;var t,n={};for(t in e)if("#"!=t[0]&&"@o"!=t&&"__key"!=t){var i=e[t];if("#"+t in e){var r=e["#"+t],o={};if("@o"in r){for(var a=[],s=0;s<i.length;s++){var c=i[s];c&&(o[c.__key]=u(c),a.push(i[s].__key))}o["@o"]=a}else{for(s=0;s<i.length;s++)o[""+s]=u(r[s]);o["@s"]=i.length}n[t]=o}else if("object"==typeof i)if(Array.isArray(i)){for(o={},s=0;s<i.length;s++)o[""+s]=u(i[s]);o["@s"]=i.length,n[t]=o}else n[t]=u(i);else n[t]=i}return n}var o=0,c={},d={},n=0,l={},P=(this.nuke=function(){d={}},this.copy=function(){return i(c)},this.str=function(){return JSON.stringify(c)},this.raw=function(){return c},function(e,t,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)P(e,t[i],n);else if("function"==typeof t)n in e||(e[n]={}),"@e"in(o=e[n])?o["@e"].push(t):o["@e"]=[t];else if("object"==typeof t){n in e||(e[n]={});var r,o=e[n];for(r in t)"@e"==r?P(e,t[r],n):P(o,t[r],r)}}),R=function(e){if(Array.isArray(e))for(var t=e.length,n=0;n<t;n++)R(e[n]);else if("object"==typeof e)for(var i in e)if("+"!=i&&"-"!=i){var r=e[i];if("@e"==i)for(var o=0;o<r.length;o++)r[o](null);else R(r)}},M=function(e,t){if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++)M(e[i],t);else"object"==typeof e&&t in e&&delete e[t]},f=(this.update_in_progress=!1,this.updates=0,this.update=function(e){this.update_in_progress=!0,this.updates++;var t=[];for(o in d)t.push(d[o]);var n=[];for(O(c,e,t,n,!1),s(n);0<this.subscribe_delay.length;){for(var i=this.subscribe_delay,r=(this.subscribe_delay=[],[]),o=0;o<i.length;o++)i[o].aborted||r.push(i[o].sub);n=[],O({},f(c,r),r,n,!0),s(n)}this.update_in_progress=!1,a()},this.MakeDelta=u,function(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];if("function"==typeof r)return u(e);if("object"==typeof r)for(var o in r)n[o]=!0}var a={};for(i in e)"#"!=i[0]&&"@o"!=i&&"__key"!=i&&i in n&&(a[i]=e[i],"#"+i in e&&(a["#"+i]=e["#"+i]));return u(a)});this.subscribe_delay=[],this.subscribe=function(e){var t,n={},i=(r(e,n),""+o++);return d[i]=n,this.update_in_progress?((t={}).sub=n,t.aborted=!1,this.subscribe_delay.push(t),function(){t.aborted=!0,delete d[i]}):(e=f(c,[n]),O({},e,[n],e=[],!0),s(e),0<this.updates&&a(),function(){delete d[i]})},this.add_on_settle=function(e){var t=n++;l[t]=e}}class WebSocketAdamaConnection{constructor(e){this.backoff=1,this.host=e,this.url="wss://"+e+"/~s",this.connected=!1,this.dead=!1,this.maximum_backoff=5e3,this.reset_backoff=1e3,this.socket=null,this.onstatuschange=function(e){},this.onping=function(e,t){},this.scheduled=!1,this.callbacks=new Map,this.nextId=0,this.onreconnect=new Map,this.protocol=location.protocol}stop(){this.dead=!0,null!==this.socket&&this.socket.close()}bump(e){try{var t=new XMLHttpRequest;t.open("PUT",this.protocol+"//"+this.host+"/~bm/"+e,!0),t.send()}catch(e){}}log(e,t){try{var n=new XMLHttpRequest;n.open("PUT",this.protocol+"//"+this.host+"/~lg/"+e,!0),n.send(t)}catch(e){}}_retry(){var e,t;this.socket=null,this.connected&&(this.connected=!1,this.onstatuschange(!1),this.callbacks.forEach(function(e,t){e({failure:999})})),this.callbacks.clear(),this.dead||this.scheduled||(e=!1,this.backoff+=Math.random()*this.backoff,this.backoff>this.maximum_backoff&&(this.backoff=this.maximum_backoff,e=!0),this.scheduled=!0,t=this,setTimeout(function(){t.start()},this.backoff),e&&(this.backoff/=2))}start(){var n=this;this.scheduled=!1,this.dead=!1,this.has_had_ping=!1,this.last_ping=0,this.ping_failures=0,this.socket=new WebSocket(this.url),this.socket.onmessage=function(e){var t,e=JSON.parse(e.data);{if(!("ping"in e))return"status"in e?"connected"!=e.status?(n.socket.close(),n.socket=null,n.backoff=n.reset_backoff,void n._retry()):(n.backoff=1,n.connected=!0,n.onstatuschange(!0),void n._reconnect()):void("failure"in e?n.callbacks.has(e.failure)&&(t=n.callbacks.get(e.failure))&&(n.callbacks.delete(e.failure),t(e)):"deliver"in e&&n.callbacks.has(e.deliver)&&(t=n.callbacks.get(e.deliver))&&(e.done&&n.callbacks.delete(e.deliver),t(e)));n.onping(e.ping,e.latency),e.pong=(new Date).getTime()/1e3,n.socket.send(JSON.stringify(e)),n.last_ping=(new Date).getTime(),n.has_had_ping=!0}},this.socket.onclose=function(e){n.bump("r"),n._retry()},this.socket.onerror=function(e){n.bump("r"),n._retry()}}keepalive(){var e=this;window.setInterval(function(){try{e.has_had_ping&&e.socket&&(2500<(new Date).getTime()-e.last_ping?(e.ping_failures++,3<=e.ping_failures&&(e.has_had_ping=!1,e.socket.onclose=function(){},e.socket.close(),e.socket=null,e._retry(),e.bump("d"),console.error("had to force a disconnect"))):this.ping_failures=0)}catch(e){console.error(e)}},1250)}_write(e,t){return!!this.connected&&(this.callbacks.set(e.id,t),this.socket.send(JSON.stringify(e)),!0)}async wait_connected(){var n,i;return this.connected?new Promise(function(e){e(!0)}):(i=(n=this).onstatuschange,new Promise(function(t){n.onstatuschange=function(e){i(e),e&&(t(!0),n.onstatuschange=i)}}))}_reconnect(){this.onreconnect.forEach(function(e,t){e.__retry()})}__execute_rr(t){return t.first=!0,this._write(t.request,function(e){t.first&&(t.first=!1,"failure"in e?"failure"in t.responder&&t.responder.failure(e.reason):"success"in t.responder&&t.responder.success(e.response))})||t.responder.failure("not connected"),null}__execute_stream(t){var n=this;return n._write(t.request,function(e){"failure"in e?("failure"in t.responder&&t.responder.failure(e.reason),n.onreconnect.delete(t.id)):(e.response&&"next"in t.responder&&t.responder.next(e.response),e.done&&("complete"in t.responder&&t.responder.complete(),n.onreconnect.delete(t.id)))}),n.onreconnect.set(t.id,t),t.__retry=function(){n.__execute_stream(t)},t}__id(){return this.nextId++,this.nextId}InitSetupAccount(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"init/setup-account",id:n,email:e}})}InitConvertGoogleUser(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"init/convert-google-user",id:n,"access-token":e}})}InitCompleteAccount(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"init/complete-account",id:r,email:e,revoke:t,code:n}})}Deinit(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"deinit",id:n,identity:e}})}AccountSetPassword(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"account/set-password",id:i,identity:e,password:t}})}AccountGetPaymentPlan(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"account/get-payment-plan",id:n,identity:e}})}AccountLogin(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"account/login",id:i,email:e,password:t}})}AccountSocialLogin(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"account/social-login",id:r,email:e,password:t,scopes:n}})}Probe(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"probe",id:n,identity:e}})}Stats(e){var t=this.__id();return this.__execute_stream({id:t,responder:e,request:{method:"stats",id:t}})}IdentityHash(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"identity/hash",id:n,identity:e}})}IdentityStash(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"identity/stash",id:i,identity:e,name:t}})}SpaceCreate(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"space/create",id:r,identity:e,space:t,template:n}})}SpaceDelete(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"space/delete",id:i,identity:e,space:t}})}SpaceReflect(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"space/reflect",id:r,identity:e,space:t,key:n}})}SpaceList(e,t,n,i){var r=this.__id();return this.__execute_stream({id:r,responder:i,request:{method:"space/list",id:r,identity:e,marker:t,limit:n}})}PushRegister(e,t,n,i,r){var o=this.__id();return this.__execute_rr({id:o,responder:r,request:{method:"push/register",id:o,identity:e,domain:t,subscription:n,"device-info":i}})}DomainReflect(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"domain/reflect",id:i,identity:e,domain:t}})}DomainGetVapidPublicKey(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"domain/get-vapid-public-key",id:i,identity:e,domain:t}})}DocumentAuthorization(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"document/authorization",id:r,space:e,key:t,message:n}})}DocumentAuthorizationDomain(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"document/authorization-domain",id:i,domain:e,message:t}})}DocumentAuthorize(e,t,n,i,r){var o=this.__id();return this.__execute_rr({id:o,responder:r,request:{method:"document/authorize",id:o,space:e,key:t,username:n,password:i}})}DocumentAuthorizeDomain(e,t,n,i){var r=this.__id();return this.__execute_rr({id:r,responder:i,request:{method:"document/authorize-domain",id:r,domain:e,username:t,password:n}})}DocumentAuthorizeWithReset(e,t,n,i,r,o){var a=this.__id();return this.__execute_rr({id:a,responder:o,request:{method:"document/authorize-with-reset",id:a,space:e,key:t,username:n,password:i,new_password:r}})}DocumentAuthorizeDomainWithReset(e,t,n,i,r){var o=this.__id();return this.__execute_rr({id:o,responder:r,request:{method:"document/authorize-domain-with-reset",id:o,domain:e,username:t,password:n,new_password:i}})}DocumentCreate(e,t,n,i,r,o){var a=this.__id();return this.__execute_rr({id:a,responder:o,request:{method:"document/create",id:a,identity:e,space:t,key:n,entropy:i,arg:r}})}DocumentList(e,t,n,i,r){var o=this.__id();return this.__execute_stream({id:o,responder:r,request:{method:"document/list",id:o,identity:e,space:t,marker:n,limit:i}})}MessageDirectSend(e,t,n,i,r,o){var a=this.__id();return this.__execute_rr({id:a,responder:o,request:{method:"message/direct-send",id:a,identity:e,space:t,key:n,channel:i,message:r}})}MessageDirectSendOnce(e,t,n,i,r,o,a){var s=this.__id();return this.__execute_rr({id:s,responder:a,request:{method:"message/direct-send-once",id:s,identity:e,space:t,key:n,dedupe:i,channel:r,message:o}})}ConnectionCreate(e,t,n,i,r){var c=this,u=c.__id();return c.__execute_stream({id:u,responder:r,request:{method:"connection/create",id:u,identity:e,space:t,key:n,"viewer-state":i},send:function(e,t,n){var i=c.__id();c.__execute_rr({id:i,responder:n,request:{method:"connection/send",id:i,connection:u,channel:e,message:t}})},password:function(e,t,n,i){var r=c.__id();c.__execute_rr({id:r,responder:i,request:{method:"connection/password",id:r,connection:u,username:e,password:t,new_password:n}})},sendOnce:function(e,t,n,i){var r=c.__id();c.__execute_rr({id:r,responder:i,request:{method:"connection/send-once",id:r,connection:u,channel:e,dedupe:t,message:n}})},canAttach:function(e){var t=c.__id();c.__execute_rr({id:t,responder:e,request:{method:"connection/can-attach",id:t,connection:u}})},attach:function(e,t,n,i,r,o,a){var s=c.__id();c.__execute_rr({id:s,responder:a,request:{method:"connection/attach",id:s,connection:u,"asset-id":e,filename:t,"content-type":n,size:i,"digest-md5":r,"digest-sha384":o}})},update:function(e,t){var n=c.__id();c.__execute_rr({id:n,responder:t,request:{method:"connection/update",id:n,connection:u,"viewer-state":e}})},end:function(e){var t=c.__id();c.__execute_rr({id:t,responder:e,request:{method:"connection/end",id:t,connection:u}})}})}ConnectionCreateViaDomain(e,t,n,i){var c=this,u=c.__id();return c.__execute_stream({id:u,responder:i,request:{method:"connection/create-via-domain",id:u,identity:e,domain:t,"viewer-state":n},send:function(e,t,n){var i=c.__id();c.__execute_rr({id:i,responder:n,request:{method:"connection/send",id:i,connection:u,channel:e,message:t}})},password:function(e,t,n,i){var r=c.__id();c.__execute_rr({id:r,responder:i,request:{method:"connection/password",id:r,connection:u,username:e,password:t,new_password:n}})},sendOnce:function(e,t,n,i){var r=c.__id();c.__execute_rr({id:r,responder:i,request:{method:"connection/send-once",id:r,connection:u,channel:e,dedupe:t,message:n}})},canAttach:function(e){var t=c.__id();c.__execute_rr({id:t,responder:e,request:{method:"connection/can-attach",id:t,connection:u}})},attach:function(e,t,n,i,r,o,a){var s=c.__id();c.__execute_rr({id:s,responder:a,request:{method:"connection/attach",id:s,connection:u,"asset-id":e,filename:t,"content-type":n,size:i,"digest-md5":r,"digest-sha384":o}})},update:function(e,t){var n=c.__id();c.__execute_rr({id:n,responder:t,request:{method:"connection/update",id:n,connection:u,"viewer-state":e}})},end:function(e){var t=c.__id();c.__execute_rr({id:t,responder:e,request:{method:"connection/end",id:t,connection:u}})}})}DocumentsCreateDedupe(e){var t=this.__id();return this.__execute_rr({id:t,responder:e,request:{method:"documents/create-dedupe",id:t}})}DocumentsHashPassword(e,t){var n=this.__id();return this.__execute_rr({id:n,responder:t,request:{method:"documents/hash-password",id:n,password:e}})}BillingConnectionCreate(e,t){var c=this,u=c.__id();return c.__execute_stream({id:u,responder:t,request:{method:"billing-connection/create",id:u,identity:e},send:function(e,t,n){var i=c.__id();c.__execute_rr({id:i,responder:n,request:{method:"connection/send",id:i,connection:u,channel:e,message:t}})},password:function(e,t,n,i){var r=c.__id();c.__execute_rr({id:r,responder:i,request:{method:"connection/password",id:r,connection:u,username:e,password:t,new_password:n}})},sendOnce:function(e,t,n,i){var r=c.__id();c.__execute_rr({id:r,responder:i,request:{method:"connection/send-once",id:r,connection:u,channel:e,dedupe:t,message:n}})},canAttach:function(e){var t=c.__id();c.__execute_rr({id:t,responder:e,request:{method:"connection/can-attach",id:t,connection:u}})},attach:function(e,t,n,i,r,o,a){var s=c.__id();c.__execute_rr({id:s,responder:a,request:{method:"connection/attach",id:s,connection:u,"asset-id":e,filename:t,"content-type":n,size:i,"digest-md5":r,"digest-sha384":o}})},update:function(e,t){var n=c.__id();c.__execute_rr({id:n,responder:t,request:{method:"connection/update",id:n,connection:u,"viewer-state":e}})},end:function(e){var t=c.__id();c.__execute_rr({id:t,responder:e,request:{method:"connection/end",id:t,connection:u}})}})}FeatureSummarizeUrl(e,t,n){var i=this.__id();return this.__execute_rr({id:i,responder:n,request:{method:"feature/summarize-url",id:i,identity:e,url:t}})}AttachmentStart(e,t,n,i,r,o){var a=this,s=a.__id();return a.__execute_stream({id:s,responder:o,request:{method:"attachment/start",id:s,identity:e,space:t,key:n,filename:i,"content-type":r},append:function(e,t,n){var i=a.__id();a.__execute_rr({id:i,responder:n,request:{method:"attachment/append",id:i,upload:s,"chunk-md5":e,"base64-bytes":t}})},finish:function(e){var t=a.__id();a.__execute_rr({id:t,responder:e,request:{method:"attachment/finish",id:t,upload:s}})}})}AttachmentStartByDomain(e,t,n,i,r){var o=this,a=o.__id();return o.__execute_stream({id:a,responder:r,request:{method:"attachment/start-by-domain",id:a,identity:e,domain:t,filename:n,"content-type":i},append:function(e,t,n){var i=o.__id();o.__execute_rr({id:i,responder:n,request:{method:"attachment/append",id:i,upload:a,"chunk-md5":e,"base64-bytes":t}})},finish:function(e){var t=o.__id();o.__execute_rr({id:t,responder:e,request:{method:"attachment/finish",id:t,upload:a}})}})}}var Adama={Production:"aws-us-east-2.adama-platform.com",Beta:"beta.adama-platform.com",Connection:WebSocketAdamaConnection},RxHTML=function(){function f(e){return e?e.startsWith("/")?ie+e.substring(1):e:"#"}function d(e){var d;return e in T?T[e]:((d={name:e,ptr:null,tree:new AdamaTree,outstanding:{},decisions:{},choice_subs:{},resets:{},connection_events:{},sync_events:{},id:0,connection_state:!1,choices:{},bound:"",viewstate_sent:!0,viewstate_clone:"",has_filter:!1,synced:!1,filter:{},vsseq:0,debugger:function(e){},raw:C}).nuke=function(){this.connection_events={},this.sync_events={},this.choice_subs={}}.bind(d),Adama.Debugger&&(d.debugger=Adama.Debugger.register(d)),d.sync=function(){var e=this.connection_state&&this.viewstate_sent;if(this.synced!=e){this.synced=e;var t,n=[];for(t in d.sync_events)d.sync_events[t](e)||n.push(t);for(var i=0;i<n.length;i++)delete d.sync_events[n[i]]}}.bind(d),d.subscribe_sync=function(e){var t="-|"+this.id++;return(this.sync_events[t]=e)(this.synced),function(){delete this.sync_events[t]}.bind(this)},d.set_connected=function(e){if(this.connection_state!=e){this.connection_state=e;var t,n=[];for(t in d.connection_events)d.connection_events[t](e)||n.push(t);for(var i=0;i<n.length;i++)delete d.connection_events[n[i]];this.sync()}}.bind(d),d.connected=function(e){var t="-|"+this.id++;return(this.connection_events[t]=e)(this.connection_state),function(){delete this.connection_events[t]}.bind(this)}.bind(d),d.subscribe_any=function(e){var t="-|"+this.id++;return this.decisions[t]=e,function(){delete this.decisions[t]}.bind(this)}.bind(d),d.subscribe=function(e,t){var n=e+"|"+this.id++;return this.decisions[n]=t,function(){delete this.decisions[n]}.bind(this)}.bind(d),d.subscribe_reset=function(e){var t="reset|"+this.id++;return this.resets[t]=e,function(){delete this.resets[t]}.bind(this)}.bind(d),d.subscribe_choice=function(e,t){var n=e+"|"+this.id++;return this.choice_subs[n]=t,function(){delete this.choice_subs[n]}.bind(this)}.bind(d),d.onchoices=function(e,t){var n,i=[];for(n in d.choice_subs)!n.startsWith(e+"|")||d.choice_subs[n](t)||i.push(n);for(var r=0;r<i.length;r++)delete d.choice_subs[i[r]]},d.ondecide=function(e){var t,n=[];for(t in d.resets)(0,d.resets[t])()||n.push(t);for(var i=0;i<n.length;i++)delete d.resets[n[i]];for(r in d.outstanding)d.outstanding[r]={options:[]};for(var r,o=e.length,i=0;i<o;i++){var a=e[i];d.outstanding[a.channel]=a}for(r in d.outstanding){var s,c=d.outstanding[r],u=[];for(s in d.decisions)!s.startsWith(r+"|")&&!s.startsWith("-|")||d.decisions[s](c,r)||u.push(s);for(i=0;i<u.length;i++)delete d.decisions[u[i]]}},T[e]=d)}function p(e,t,n){e=I.pI(e,t),null==(t=e[e.current])?console.error(e.current+" is not available; unable to subscribe."):"@e"in t.delta?t.delta["@e"].push(n):t.delta["@e"]=[n]}function M(e){return{tree:new AdamaTree,delta:{},parent:null,path:null,where:e}}function U(e){return"password"in e&&delete e.password,"one_time_password"in e&&delete e.one_time_password,e}function v(e){if(null==e)return null;var t=null,n={},t=(null!=(t=null!=e.parent?v(e.parent):t)&&(t.delta[e.path]=n),{tree:e.tree,parent:t,delta:n,path:e.path});return"connection"in e&&(t.connection=e.connection),t}function m(e,t){var n;return null!=e.parent?((n={})[e.path]=t,m(e.parent,n)):t}function F(e){for(var t=e;null!=t.parent;)t=t.parent;return t}function _(e){for(var t=e.lastChild;t;)e.removeChild(t),t=e.lastChild}function w(e,t){var n={inflight:!1,timeout:null,inflight:!1};return function(){n.inflight||(n.inflight=!0,n.timeout=window.setTimeout(function(){n.inflight=!1,n.timeout=null,t()},e))}}function n(e,t){var n={avail:!0,again:!1,timeout:null,go:function(){n.avail?(n.avail=!1,n.timeout=window.setTimeout(function(){n.avail=!0,n.again&&(n.again=!1,n.go())},e),t()):n.again=!0}};return n.go}function g(){return{__data:function(){},__view:function(){}}}function l(e){e.__data=function(){},e.__view=function(){}}function y(e){e.__data(),e.__view()}function b(e,t){var n;t.__data=function(){},t.__view=function(){},null!=e.data&&(n=F(e.data).delta,re(n)||(t.__data=e.data.tree.subscribe(n))),null!=e.view&&(n=F(e.view).delta,re(n)||(t.__view=e.view.tree.subscribe(n)))}function k(e){var t={service:e.service,data:v(e.data),view:v(e.view),current:e.current};return null!=t.data&&(t.data.connection=e.data.connection),t}function H(e,t,n,i){if(t in e.data.connection.outstanding)for(var r=e.data.connection.outstanding[t].options,o=0;o<r.length;o++){var a=r[o];if(n in a&&a[n]==i)return a}return null}function h(e){e.dispatchEvent(new Event("success")),e.dispatchEvent(new Event("submitted"))}function S(e,t){var n=new Event("failure");n.message=t,console.error(t),e.dispatchEvent(n)}function W(e,t){var n,e=e.data.connection.choices,i=(t in e||(e[t]={}),e[t]),r=[];for(n in i)r.push(i[n]);return r}function o(e){for(var t=e;null!=t;){if("FORM"==t.tagName.toUpperCase())return t;t=t.parentElement}return null}function B(e,t){if("object"!=typeof e||"object"!=typeof t)return e;var n,i={};for(n in e)n in t?i[n]=B(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return i}function z(n,i,r,e,o,a,s){var c=g();return s&&(n.style.display="none"),function(e){var t,e=!!e===r;this.shown!=e&&(this.shown=e,_(n),y(c),t=I.pD(k(i)),e?(s&&(n.style.display=""),o(n,t)):s?n.style.display="none":a(n,t),b(t,c))}.bind({shown:"no"})}function x(e,t){return 0<e&&0<t?Math.min(e,t):0<e?e:t}function E(e,t,n,i){if("FORM"!=e.tagName.toUpperCase()||i){var i=e.tagName.toUpperCase(),r="TEXTAREA"==i||"SELECT"==i,o="INPUT"==i,a="FIELDSET"==i,i="PULLVALUE"==i,s="name"in e,c=t,u=function(e){},d="";if((s=!s||""!=(d=e.name)&&"string"==typeof d?s:!1)&&(r||o||a||i)){for(var l=x(d.indexOf("."),d.indexOf("/"));0<l;){var f=d.substring(0,l);f in c||(c[f]={}),c=c[f],d=d.substring(l+1),l=x(d.indexOf("."),d.indexOf("/"))}u=d.endsWith("+")?(d=d.substring(0,d.length-1),function(e){d in c?c[d].push(e):c[d]=[e]}):function(e){c[d]=e}}if(i)u(e.pull());else if(r)u(e.value);else if(a&&s){var h={};if("children"in e)for(var p=e.children.length,v=0;v<p;v++){var m=e.children[v];E(m,h,n,!1)}u(h)}else if(o){i="type"in e?e.type.toUpperCase():"TEXT";"SUBMIT"!=i&&"RESET"!=i&&("PASSWORD"==i||"password"==d||"confirm-password"==d||"new_password"==d||"confirm-new_password"==d?n[d]=e.value:"CHECKBOX"==i?u(!!e.checked):"RADIO"==i&&!e.checked||u(e.value))}else if("children"in e)for(p=e.children.length,v=0;v<p;v++){m=e.children[v];E(m,t,n,!1)}}}function D(e,t,n,i){if(t<e.length){if("number"in n){var r=n.number,o=parseFloat(e[t]);if(!isNaN(o))for(var a in r){if(i[a]=o,null!==(s=D(e,t+1,r[a],i)))return s;delete i[a]}}if("text"in n){r=n.text,o=e[t];for(a in r){if(i[a]=o,null!==(s=D(e,t+1,r[a],i)))return s;delete i[a]}}if("fixed"in n)for(a in r=n.fixed)if(a==e[t])if(null!==(s=D(e,t+1,r[a],i)))return s;if("suffix"in n){for(var s,r=n.suffix,o=e[t],c=1;c+t<e.length;c++)o+="/"+e[t+c];for(a in r){if(i[a]=o,null!==(s=D(e,e.length,r[a],i)))return s;delete i[a]}}}else if("@"in n)return n["@"];return null}function V(){var e=localStorage.getItem("webpush_status");return e&&"string"==typeof e?e:"unknown"}function j(t,n,i,e,r){C.bump("wps");var o="push_endpoint_"+e;t.pushManager.getSubscription().then(async function(e){if(e)return e;e=ce(n);return t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})}).then(function(n){C.IdentityHash(i,{success:function(e){localStorage.getItem("push_worker_version")==r&&localStorage.getItem("last_identity_used")==e.identityHash||(localStorage.removeItem(o),localStorage.setItem("push_worker_version",r),localStorage.setItem("last_identity_used",e.identityHash));var t=n.toJSON(),e=localStorage.getItem(o);e&&e==t.endpoint?(C.bump("wpa"),O("success")):(t["@method"]="webpush",t["@time"]=(new Date).getTime(),e={mode:"web"},window&&window.navigator&&window.navigator.userAgent&&(e.ua=window.navigator.userAgent),C.PushRegister(i,I.domain,t,e,{success:function(){localStorage.setItem(o,t.endpoint),localStorage.setItem("webpush_status","success"),O("success")},failure:function(){C.bump("wpf")}}))},failure:function(){C.bump("wpf")}})},function(e){O("failed"),localStorage.removeItem(o),localStorage.removeItem("last_identity_used"),localStorage.removeItem("push_worker_version"),C.bump("wpd"),C.log("pushsetup",""+e)})}function G(e){try{if("data"in e&&("object"==typeof e.data&&"channel"in e.data)){var t=e.data.channel,n=P[t];if(null!==n)for(var i=n.length,r=0;r<i;r++)n[r](e.data,e)}}catch(e){}}function s(e,t,n){R[e]=t,localStorage.setItem("identity_"+e,t);var i={},r=(i.name=e,i.identity=t,i["max-age"]=5529600,new XMLHttpRequest);r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(localStorage.setItem("last_stashed_identity_"+e,""+Date.now()),null!=n&&n.IdentityStash(t,e,{success:function(){},failure:function(e){}}))},r.open("PUT",I.protocol+"//"+I.host+"/~stash/"+Date.now(),!0),r.withCredentials=!0,r.send(JSON.stringify(i))}function J(o,i,a){return a.unexpected_errors=0,a.backoff=1,{next:function(e){var t;if(o.debugger(e),o.set_connected(!0),a.unexpected_errors=0,a.backoff=1,"data"in e.delta&&o.tree.update(e.delta.data),"outstanding"in e.delta&&o.ondecide(e.delta.outstanding),"viewstate"in e.delta&&o.viewstatetree.update(e.delta.viewstate),"log"in e.delta&&console.log(e.delta.log),"reload"in e.delta&&(e.delta.reload["preserve-view"]&&localStorage.setItem("rxviewstate",JSON.stringify(o.viewstatetree.raw())),window.location.reload()),"viewport"in e.delta&&"message"in e.delta&&((t=e.delta.viewport)in o.handlers&&o.handlers[t](e.delta.message,o)),"view-state-filter"in e.delta){for(var n={},i=e.delta["view-state-filter"],r=0;r<i.length;r++)n[i[r]]=!0;o.filter=n,o.has_filter=!0}"goto"in e.delta&&I.goto(e.delta.goto,!1)},complete:function(){o.set_connected(!1),o.ptr=null},failure:function(e){var t,n;o.set_connected(!1),o.ptr=null,403403==e||403500==e||184333==e||982253==e?i():(t=999==e,(n=a.unexpected_errors<16)&&a.unexpected_errors++,t||n?(a.backoff=Math.ceil(Math.min(a.backoff+Math.random()*a.backoff+(n?125:1),2500)),t&&(a.backoff=Math.min(1250,a.backoff)+1250*Math.random()),t?console.log("connect-loss|retrying... ("+a.backoff+"); reason="+e+(n?" [blind]":"")):console.log("connect-failure|retrying... ("+a.backoff+"); reason="+e+(n?" [blind]":"")),window.setTimeout(function(){a.go()},a.backoff)):console.log("gave up connection;"+o.label+"; reason="+e))}}}function K(e,t,r,o){function n(){var e,t=U(o.view.tree.copy());if(r.has_filter){var n,i={};for(n in t)r.filter[n]&&(i[n]=t[n]);t=i}JSON.stringify(t)!=r.viewstate_clone&&(r.viewstate_sent=!1,r.vsseq++,r.sync(),e=function(){r.vsseq==this.bound&&(r.viewstate_sent=!0,r.sync())}.bind({bound:r.vsseq}),r.viewstate_clone=JSON.stringify(t),r.ptr.update(t,{success:e,failure:e}))}function i(e){t.view=o.view.tree.subscribe(function(){null!=r.ptr&&n()}),e&&n()}return r.viewstatetree=o.view.tree,null!=r.ptr&&r.bound==e?(i(!0),!1):(null!=r.ptr&&(r.ptr.end({success:function(){},failure:function(){}}),r.ptr=null),i)}function X(){var e=localStorage.getItem("__domain_manifests");return e=null==e?{seq:0,manifests:[]}:JSON.parse(e)}function Y(e){localStorage.setItem("__domain_manifests",JSON.stringify(e))}function $(e){if("INPUT"==e.tagName.toUpperCase())"email"==e.type&&"email"==e.name&&(e.value=localStorage.getItem("email_remember"));else if("children"in e)for(var t=e.children.length,n=0;n<t;n++)$(e.children[n])}function a(e){var t={},e=N(e,t);return"password"in t&&(e.password=t.password),"new_password"in t&&(e.new_password=t.new_password),e}function Z(i,e,r,o,a){o.__=function(){},i.addEventListener("submit",function(e){e.preventDefault();function t(e){var t={attempts:0,responder:{success:function(e){s(r,e.identity,C),I.goto(o.rx_forward,!1),h(i)},failure:function(e){S(i,"Failed signing into document:"+e)}}};a(e,t.responder)}var e={},n=N(i,e);"password"in e&&(n.password=e.password),"new_password"in e?C.DocumentsHashPassword(e.new_password,{success:function(e){n.new_password=e.passwordHash,t(n)},failed:function(){S(i,"Failed to hash password")}}):t(n)},!0)}function Q(i,e,r,o,a){o.__=function(){},i.addEventListener("submit",function(e){e.preventDefault();function t(){var e=a(o),t=new XMLHttpRequest;t.onreadystatechange=function(){var e;4==this.readyState&&(200==this.status?"text/error"==(e=this.getResponseHeader("Content-Type"))?S(i,this.responseText):("application/json"==e&&"identity"in(e=JSON.parse(this.responseText))&&s(r,e.identity,null),I.goto(o.rx_forward,!1),h(i),i.dispatchEvent(new Event("submitted"))):S(i,"Failed to communicate to server"))},t.open("PUT",e,!0),t.withCredentials=!0,t.send(JSON.stringify(n))}var e={},n=N(i,e);"password"in e?"confirm-password"in e&&e.password!=e["confirm-password"]?S(i,"Passwords don't match"):C.DocumentsHashPassword(e.password,{success:function(e){n.password=e.passwordHash,t()},failed:function(){S(i,"Failed to hash password")}}):t()},!0)}function ee(e,t){var n="SELECT"==(n=e.tagName.toUpperCase())||"INPUT"==n||"HIDDEN"==n;if("name"in e&&n){for(var i=e.name,r=t,o=x(i.indexOf("."),i.indexOf("/"));0<o;){var a=i.substring(0,o),i=i.substring(o+1);if(!(a in r))return;r=r[a],o=x(i.indexOf("."),i.indexOf("/"))}i in r&&("CHECKBOX"==(n=e.type.toUpperCase())?e.checked="true"==r[i]||!0===r[i]:"RADIO"==n?r[i]==e.value&&(e.checked=!0):e.value=r[i])}if("children"in e)for(var s=e.children.length,c=0;c<s;c++){var u=e.children[c];ee(u,t)}}var te,I={},ne={},A={},e=(I._inflight=0,Adama.Production),t=localStorage.getItem("mdec"),C=(null!=t&&"beta"==t&&(e=Adama.Beta),new Adama.Connection(e)),T={},q=(I.connection=C,I.bump=function(e){C.bump(e)},document.createElement("div")),ie=(C.onstatuschange=function(e){function n(e){return'<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="'+e+'" style="width:16px; height:16px"><path stroke-linecap="round" stroke-linejoin="round" d="M8.288 15.038a5.25 5.25 0 017.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 011.06 0z" /></svg>\n'}e?C.onping=function(e,t){q.title="connected; latency="+t+"ms",q.innerHTML=n(100<=t?"orange":"green")}:(q.title="disconnected",q.innerHTML=n("red"),C.onping=function(e,t){})},q.style="position:fixed; bottom:0px; right:0px",q.className="adama-debugger",Adama.Debugger&&(q.onclick=Adama.Debugger.toggle),C.start(),C.keepalive(),window.addEventListener("error",function(e){var t={};t.message=e.message,t.filename=e.filename,t.lineno=e.lineno,t.colno=e.colno,t.filename=e.filename,C.log("window.error",JSON.stringify(t)),console.error("[error]"+e.message)}),C.bump("rxhtml"),"/"),r=function(e){return e},re=(window.location.hostname.endsWith(".adama-platform.com")&&!window.location.hostname.endsWith("ide.adama-platform.com")&&(t=window.location.pathname.split("/"),ie=[t[0],t[1],t[2],""].join("/"),te=t[0].length+t[1].length+t[2].length+2,r=function(e){return e.substring(te)}),I.getConnectionByName=d,I.make=function(){return new AdamaTree},I.subscribe=p,I.fresh=M,I.makeDeltaCopy=v,I.pathTo=m,I.rootOf=F,I.nuke=_,I.debounce=w,I.delay=n,function(e){if("function"==typeof e)return!1;if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(!re(e[t]))return!1}else if("object"==typeof e)for(var n in e)if(!re(e[n]))return!1;return!0}),c=(I.pV=function(e){return{service:e.service,data:e.data,view:e.view,current:"view"}},I.newStateViewOf=I.pV,I.pD=function(e){return{service:e.service,data:e.data,view:e.view,current:"data"}},I.newStateDataOf=I.pD,I.pR=function(e){for(var t={service:e.service,data:e.data,view:e.view,current:e.current},n=t[e.current];null!=n;)n=(t[e.current]=n).parent;return t},I.newStateRootOf=I.pR,I.pU=function(e){var t={service:e.service,data:e.data,view:e.view,current:e.current},n=t[e.current];return null!=n.parent&&(t[e.current]=n.parent),t},I.newStateParentOf=I.pU,I.pI=function(e,t){var n=e[e.current];if(null==n)return console.error(e.current+" is not present"),e;t in n.delta||(n.delta[t]={});var i={service:e.service,data:e.data,view:e.view,current:e.current};return i[e.current]={tree:n.tree,delta:n.delta[t],parent:n,path:t},"data"==i.current&&(i.data.connection=n.connection),i},I.newStateDiveInto=I.pI,I.pEV=function(e,t){return t in e.view.delta||(e.view.delta[t]={}),{service:e.service,data:e.data,view:{tree:e.view.tree,delta:e.view.delta[t],parent:e.view,path:t},current:e.current}},I.newStateCreateViewChild=I.pEV,I.pIE=function(e,t,n){e=I.pI(e,t);return n?I.pEV(e,t):e},I.Y=function(e,t,n,i){p(e,n,function(e){t[n]=e,i()})},I.Y2=function(e,n,i,r,o){p(e,r,function(e){var t=n._[i];return t[r]=e,o(t),!0})},I.RX=function(e){for(var t={_:{}},n=0;n<e.length;n++)t._[e[n]]={};return t.__=function(){},t},I.YS=function(e,t,n){p(e,n,function(e){return t[n]=e,!0})},I.T=function(e){return document.createTextNode(e)},I.B=function(e){return!0===e||"true"==e},I.VW=function(n,i,r){r.__=w(50,function(){var e={},t=r.value,t=(e[i]="function"==typeof t?t():t,m(n.view,e));n.view.tree.update(t)})},I.L=function(e,t){var n=document.createTextNode("");return p(e,t,function(e){n.nodeValue=e}),n},I.LT=function(e,t,n){var i=document.createTextNode("");return p(e,t,function(e){null!=e&&(i.nodeValue=n(e))}),i},I.Lh=function(e,t){var n=document.createElement("span");return p(e,t,function(e){null!=e&&(n.innerHTML=e)}),n},I.LTdT=function(e,t,n,i){var r=document.createTextNode(""),o={},a=(o.freq=i,o.value="",o.update=function(){r.nodeValue=n(this.value)}.bind(o),function(e){null!=e&&(this.value=e,this.update())}.bind(o));return o.refresh=function(){this.update(),document.body.contains(r)&&window.setTimeout(this.refresh,this.freq)}.bind(o),window.setTimeout(o.refresh,i),p(e,t,a),r},I.E=function(e,t){var n;return null==t?(n=document.createElement(e),"select"==e&&n.addEventListener("change",function(){n.rxvalue=n.value}),n):((e=document.createElementNS(t,e)).setAttribute("xmlns",t),e)},I.CSt=function(n,i,r,o){var a=g();i.data.connection&&i.data.connection.connected(function(e){var t;if(this.prior!=e)return _(n),y(a),this.prior=e,t=k(i),(e?r:o)(n,t),b(t,a),document.body.contains(n)}.bind({prior:null}))},I.LoStPo=function(i,r,e,o,a){var s=g(),t={key:null,ms:5e3,last:"!"};t.p=function(){var e,t,n;null!=this.key&&(e=localStorage.getItem(this.key))!=this.last&&(this.last=e,y(s),_(i),t=new AdamaTree,n={service:r.service,data:{connection:r.connection,tree:t,delta:{},parent:null,path:null},view:v(r.view),current:"data"},null==e?(a(i,n),b(n,s)):(o(i,n),b(n,s),t.update(t.MakeDelta(JSON.parse(e)))))}.bind(t),e.__=w(50,function(){"key"in e&&(this.key=e.key),"ms"in e&&(this.ms=parseInt(e.ms),isNaN(this.ms)&&(this.ms=5e3)),this.p()}.bind(t)),t.timeout=function(){document.body.contains(i)&&(this.p(),window.setTimeout(this.timeout,this.ms))}.bind(t),window.setTimeout(t.timeout,50)},I.DcG=function(e,t,n,i,r){},I.DG=function(c,u,d,l,f,e){var h=g(),p=I;d.__=w(50,n("number"==typeof e?e:250,function(){if("url"in d){var e,t=[],n=null;for(e in d){var i=d[e];switch(e){case"__":case"_":case"url":case"redirect":break;case"identity":if("string"==typeof i){var r=p.ID(d.identity,function(){return d.redirect});if(r.abort)return;n=r.identity}break;default:t.push(e+"="+encodeURIComponent(i))}}var o=d.url+(0<t.length?"?"+t.join("&"):""),a=(this.gen++,this),s=new XMLHttpRequest;s.onreadystatechange=function(){var e,t,n;4==this.xhttp.readyState&&this.gen==a.gen&&(y(h),_(c),e=new AdamaTree,t={service:u.service,data:{connection:u.connection,tree:e,delta:{},parent:null,path:null},view:v(u.view),current:"data"},200==this.xhttp.status&&"application/json"==this.xhttp.getResponseHeader("Content-Type")?(n=e.MakeDelta(JSON.parse(this.xhttp.responseText)),l(c,t),b(t,h),e.update(n)):(f(c,t),b(t,h)))}.bind({gen:a.gen,xhttp:s}),s.open("GET",a.base+"/~d"+o,!0),null!=n&&s.setRequestHeader("Authorization","Bearer "+n),s.withCredentials=!0,s.send()}}.bind({url:"",gen:0,base:I.protocol+"//"+I.host}))),d.__()},I.P=function(i,r,e,o,a,s){var c=g();e.__=function(){var n;"name"in e&&this.name!=e.name&&(n=d(e.name),this.name=e.name,n.connected(function(e){var t;if(!this.rendered||!s)return _(i),y(c),t={service:r.service,data:{connection:n,tree:n.tree,delta:{},parent:null,path:null},view:v(r.view),current:"data"},e?(this.rendered=!0,o(i,t)):a(i,t),b(t,c),!0}.bind(this)))}.bind({name:"",rendered:!1})},I.TP=function(e,t){ne[e]=t},I.CFGt=function(e,t,n){return t in e&&e[t]==n},I.CFGb=function(e,t){return console.log(e),t in e&&!0===e[t]},I.UT=function(e,t,n,i,r){var o=ne[n];"function"==typeof o?o(e,t,i,r):console.error("failed to find template: "+n)},I.SW=function(n,i,e,r){var t={prior:null},t=(l(t),function(e){var t;e!=this.prior&&(this.prior=e,y(this),_(n),t=k(i),r(n,I.pD(t),""+e),b(t,this))}.bind(t));p(i,e,t)},I.IT=function(r,o,e,a,s,i){var c=I.pIE(o,e,a),u={},d={},l=(i&&(r.style.display="none"),{isNew:!1});p(o,e,{"+":function(e){var t=k(I.pIE(c,e,a)),n=g(),i=s(t),i=(l.isNew=!0,u[e]=i,d[e]=n,r.append(i),t.data.delta);return t.data.delta={},t.data.parent&&t.data.path&&t.data.parent.delta&&(t.data.parent.delta[t.data.path]=t.data.delta),b(t,n),a&&o.view.tree.update(m(t.view,{$key:e})),i},"-":function(e){if(e in u){try{r.removeChild(u[e])}catch(e){}delete u[e]}e in d&&(y(d[e]),delete d[e])},"~":function(e){if(i&&(0==e.length?r.style.display="none":r.style.display=""),_(r),null==e){for(var t in d)y(d[t]),delete d[t];for(var t in u)delete u[t]}else{for(var n=0;n<e.length;n++)r.append(u[e[n]]);"rxvalue"in r&&(r.value=r.rxvalue),r.dispatchEvent(new Event("ordered")),l.isNew&&(r.dispatchEvent(new Event("new")),l.isNew=!1)}}})},I.IIT=function(o,a,s,e,c,u){var d=I.pIE(s,e,c),l={},f={},h={isNew:!1};p(s,e,{"+":function(e){var t=k(I.pIE(d,e,c)),n=g(),i=u(t),r=(h.isNew=!0,l[e]=i,f[e]=n,null==a?o.firstChild:a.nextSibling),i=(o.insertBefore(i,r),t.data.delta);return t.data.delta={},t.data.parent&&t.data.path&&t.data.parent.delta&&(t.data.parent.delta[t.data.path]=t.data.delta),b(t,n),c&&s.view.tree.update(m(t.view,{$key:e})),i},"-":function(e){if(e in l){try{o.removeChild(l[e])}catch(e){}delete l[e]}e in f&&(y(f[e]),delete f[e])},"~":function(e){if(null==e){for(var t in f)y(f[t]),delete f[t];for(var t in l)delete l[t]}else{for(var n=e.length-1;0<=n;n--){var i=null==a?o.firstChild:a.nextSibling;o.insertBefore(l[e[n]],i)}o.dispatchEvent(new Event("ordered")),h.isNew&&(o.dispatchEvent(new Event("new")),h.isNew=!1)}}})},I.fidbasis=0,I.FA=function(e,o,a,s,t){function c(e){console.log("failed:"+e)}var n="_auto_fid_"+I.fidbasis,i=(I.fidbasis++,document.createElement("input")),u=(i.id=n,i.type="file",i.style.display="none",i.ignore_build_object=!0,e.appendChild(i),document.createElement("div")),r=(e.appendChild(u),document.createElement("label"));r.htmlFor=n,t(o,r),e.appendChild(r);r.addEventListener("click",function(){console.log("picking a file")}),i.addEventListener("change",function(){console.log("upload started");var t,n,e=i.files;1==e.length&&(t=e[0],(n=I.ID(a.identity,function(){return a.redirect})).abort?console.log("abort"):((e=new FileReader).onload=e=>{var i=new Uint8Array(e.target.result),r={ptr:null,at:0,next:function(e){var e=e.chunk_request_size,t=r.at,n=Math.min(t+e,i.length);t==n?r.ptr.finish({success:function(e){var t;e=e.assetId,(t=document.createElement("input")).type="hidden",t.name=a.name,t.value=e,t.name.endsWith("+")||_(u),u.appendChild(t)},failure:c}):(e=i.slice(t,n),r.at=t=n,e=btoa(String.fromCharCode(...e)),r.ptr.append("n/a",e,{success:function(e){console.log("upload status:"+t+"/"+n)},failure:c}))},failure:c,complete:function(){}};r.ptr=s?o.service.AttachmentStartByDomain(n.identity,I.domain,t.name,t.type,r):o.service.AttachmentStart(n.identity,a.space,a.key,t.name,t.type,r)},e.readAsArrayBuffer(t)))})},I.MN=function(i,e,t,n,r){n=function(n){window.setTimeout(function(){var e,t=0;try{t="number"==typeof n?n:parseInt(n)}catch(e){!0===n||"true"==n?t=1:!1!==n&&"false"!=n||(t=0)}this.first?(this.at=t,this.first=!1):(this.at<t?(e=new Event("rise"),i.dispatchEvent(e)):this.at>t&&(e=new Event("fall"),i.dispatchEvent(e)),this.at=t)}.bind(this),this.delay)}.bind({at:-1,first:n,delay:r||10});p(e,t,n)},I.RP=function(a,s,e,c,u,d){var l=I.pIE(s,"$"+e,c),t=(d&&(a.style.display="none"),function(e){var t=0;try{t="number"==typeof e?e:parseInt(e)}catch(e){}d&&(a.style.display=t<=0?"none":"");for(var n=!1;this.at<t-1;){this.at++,this.track++;var i=k(I.pIE(l,this.track+"",c)),r=g(),o=u(I.pD(i));this.items[this.at]={unsub:r,dom:o},a.append(o),c&&s.view.tree.update(m(i.view,{$index:this.track})),b(i,r),n=!0}for(;this.at>=t&&0<=this.at;)y(this.items[this.at].unsub),a.removeChild(this.items[this.at].dom),this.items[this.at]=null,delete this.items[this.at],this.at--;n&&a.dispatchEvent(new Event("new"))}.bind({items:[],at:-1,track:0}));p(s,e,t)},{}),u=(I.PRCUAC=function(e,t){c[e]=t},I.exCC=function(e,t,n,i){u(n,e,t,function(){i in c&&c[i](n,e)})},I.fire_success=h,I.fire_failure=S,I.aCC=function(t,n,i){function r(e){null==r?h(t):S(t,e)}t.addEventListener("submit",function(e){i in c?(e.preventDefault(),e=N(t,{}),c[i](e,n,r,I),h(t)):S(t,"Failed to find '"+i+"'")},!0)},I.exFIN=function(e,t,n,i){u(n,e,t,function(){function t(){delete n.data.connection.choices[i],n.data.connection.onchoices(i,{})}var e=W(n,i);n.data.connection.ptr.send(i,e,{failure:function(e){t(),console.log("failed:"+e)},success:function(e){t(),console.log("Success|"+e.seq)}})})},I.FIN=function(n,i,r,o,e,a,s){var c={owner:n,shown:!1};l(c);c.update=function(){var e,t=i.data.connection.outstanding[r];t&&(e=W(i,r),e=!("min"in t&&"max"in t)||t.min<=e.length&&e.length<=t.max,c.eval!=e&&(c.eval=e,t=c.eval,y(c),_(n),e=k(i),(t===o?a:s)(n,e),b(e,c)))},i.data.connection.subscribe_choice(r,function(){return c.update(),!0})},function(e,t,n,i){var r;"check"==n||"uncheck"==n?t.addEventListener("change",function(){("check"!=this.type||!t.checked)&&("uncheck"!=this.type||t.checked)||i()}.bind({type:n})):"load"==n?window.setTimeout(i,1):"submit"==n||"submitted"==n?window.setTimeout(function(){var e=o(t);e&&e.addEventListener(n,function(){document.body.contains(t)&&i()})},1):n.startsWith("delay:")?(r=parseInt(n.substring(6)),window.setTimeout(function(){document.body.contains(t)&&i()},r)):"settle"==n?e.data.tree.add_on_settle(function(){return!!document.body.contains(t)&&(i(),!0)}):"settle-once"==n?e.data.tree.add_on_settle(function(){return document.body.contains(t)&&i(),!1}):"click"==n?t.addEventListener(n,function(e){var t=!0;try{for(var n=e.target;n&&t;)n.hasAttribute("prevent:click")&&(t=!1),n=n.parentElement}catch(e){}t&&i()}):t.addEventListener(n,i)}),N=(I.bSO=function(){return{run:function(){I.SIGNOUT()},merge:function(){return{}}}},I.bS=function(e,t,n,i){var r,o;return"function"==typeof i?{run:function(){},merge:function(){var e={};return e[n]=i(),m(t.view,e)}}:((r={})[n]=i,o=m(t.view,r),{run:function(){},merge:function(){return o}})},I.MD=B,I.onB=function(e,t,i,r){u(i,e,t,function(){for(var e={},t=0;t<r.length;t++)var n=r[t],n=(n.run(),n.merge()),e=B(e,n);i.view.tree.update(e)})},I.exCH=function(e,t,i,n,r,o){var a={value:null};u(i,e,t,function(){var e,t,n=H(i,r,o,a.value);null!=n&&(e=i.data.connection.choices,r in e||(e[r]={}),e=e[r],(t=n[o])in e?delete e[t]:e[t]=n,i.data.connection.onchoices(r,e))}),p(i,n,function(e){a.value=e})},I.exD=function(e,t,n,i,r,o){var a={value:null};u(n,e,t,function(){var e=H(n,r,o,a.value);if(null!=e){let t=performance.now();n.data.connection.ptr.send(r,e,{failure:function(e){},success:function(e){console.log("Success|"+e.seq+";latency="+(performance.now()-t))}})}}),p(n,i,function(e){a.value=e})},I.onFR=function(e,t,n,i){u(e,t,n,function(){e.data.connection.ptr.send(i,{},{success:function(){console.log("SENT '"+i+"'")},failure:function(e){console.log("FAILED TO FIRE '"+i+"' DUE:"+e)}})})},I.onFORCE_AUTH=function(e,t,n,i){u(null,e,t,function(){R[n]=i,localStorage.setItem("identity_"+n,i)})},I.onTM=function(e,t,n,i,r,o){u(n,e,t,function(e){var t={},e=(t[i]={x:e.clientX+window.scrollX+r,y:e.clientY+window.scrollY+o},m(n.view,t));n[n.current].tree.update(e)})},I.onTE=function(e,t,n,i){u(n,e,t,function(e){var t={};t[i]=e.message,e.message&&(e=m(n.view,t),n[n.current].tree.update(e))})},I.oRST=function(n,e,t){u(t,n,e,function(e){var t=o(n);null!=t&&t.reset()})},I.oRLD=function(e,t,n){u(n,e,t,function(e){location.reload()})},I.bSB=function(n){return{run:function(){var e,t=o(n);null!=t&&(e=new SubmitEvent("submit",{bubbles:!0,cancelable:!0}),t.dispatchEvent(e))},merge:function(){return{}}}},I.oSBMT=function(i,e,t){u(t,i,e,function(e){var t,n=o(i);null!=n&&(t=new SubmitEvent("submit",{bubbles:!0,cancelable:!0}),n.dispatchEvent(t))})},I.oSFI=function(e,t,n,i){u(n,e,t,function(e){var t,n=document.getElementById(i);null!=n&&(t=new SubmitEvent("submit",{bubbles:!0,cancelable:!0}),n.dispatchEvent(t))})},I.bNK=function(t){return{run:function(){for(var e=t;"NUCLEAR"!=e.tagName.toUpperCase();)e=e.parentElement;null!=e&&_(e)},merge:function(){}}},I.oNK=function(n,e,t){u(t,n,e,function(e){for(var t=n;"NUCLEAR"!=t.tagName.toUpperCase();)t=t.parentElement;null!=t&&_(t)})},I.pUs=function(t,n){t.addEventListener("scroll",function(e){t.isProtected,t.ignoreEvent||t.isProtected||(t.isProtected=!0,window.setTimeout(function(){t.isProtected=!1},n))})},I.oSCR=function(i,e,t,r){u(t,i,e,function(e){for(var t=i,n=r;n.startsWith("parent-");)t.parentElement&&(t=t.parentElement),n=n.substring(7);if(!t.isProtected)switch(t.ignoreEvent=!0,window.setTimeout(function(){t.ignoreEvent=!1},100),n){case"min":return t.last_scroll_command="min",void t.scrollTo(0,0);case"max":return t.last_scroll_command="max",void t.scrollTo(0,t.scrollHeight)}})},I.oUCK=function(t,e,n){u(n,t,e,function(e){t.checked=!1})},I.onGO=function(e,t,n,i){u(n,e,t,function(){var e="function"==typeof i?i():i;I.goto(e,!1)})},I.onT=function(e,t,n,i){var r={value:!1};u(n,e,t,function(){var e={},e=(e[i]=!r.value,m(n.view,e));n.view.tree.update(e)}),p(n,i,function(e){r.value=1==e})},I.onOT=function(e,t,n,i,r){var o={value:""};u(n,e,t,function(){var e={},e=(e[i]=function(e,t){for(var n=e.split(","),i="",r=[""],o=0;o<n.length;o++)""!=n[o]&&(t==n[o]?i="-":"-"+t==n[o]?i="":r.push(n[o]));return r[0]=i+t,r.join(",")}(o.value,r),m(n.view,e));n[n.current].tree.update(e)}),p(n,i,function(e){o.value=e})},I.onD=function(e,t,n,i,r){var o={value:0};u(n,e,t,function(){var e={},e=(e[i]=o.value+r,m(n.view,e));n[n.current].tree.update(e)}),p(n,i,function(e){"number"==typeof e?o.value=e:(e=parseFloat(e),isNaN(e)||(o.value=e))})},I.CSEN=function(n,i,e,r,t,o,a,s,c,u){var d={value:"",owner:n,shown:!1,eval:null};l(d);d.update=function(){var e,t;i.data.connection.outstanding[r]&&(e=i.data.connection.choices,r in e||(e[r]={}),e=e[r],e=d.value in e,d.eval!=e&&(d.eval=e,e=d.eval,y(d),_(n),t=k(i),(e===a?c:u)(n,t),b(t,d)))},i.data.connection.subscribe_choice(r,function(){return d.update(),!0}),p(e,o,function(e){d.value=e,d.update()})},I.DE=function(n,i,e,r,o,t,a,s,c,u){var d={value:"",owner:n,shown:!1,eval:null};l(d);d.update=function(){var e,t=null!=H(i,r,o,d.value);d.eval!=t&&(d.eval=t,t=d.eval,y(d),_(n),e=k(i),(t===a?c:u)(n,e),b(e,d))},i.data.connection.subscribe(r,function(){return d.update(),!0}),p(e,t,function(e){d.value=e,d.update()})},I.IFeq=function(e,t,n,i,r,o,a,s,c,u,d){var l={left:!1,right:!0};l.s=z(e,t,a,0,c,u,d),l.k=w(5,function(){this.s(this.left==this.right)}.bind(l)),p(n,i,function(e){this.left=e,this.k()}.bind(l)),p(r,o,function(e){this.right=e,this.k()}.bind(l))},I.IF=function(e,t,n,i,r,o,a,s,c){p(n,i,z(e,t,r,0,a,s,c))},I.aCP=function(n,i,r){n.addEventListener("submit",function(e){e.preventDefault();var e=N(n,{}),t=("."!=r&&""!=r&&((t={})[r]=e,e=t),m(i.view,e));i.view.tree.update(t),h(n)},!0)},I.VSP=function(o,a,e){var t={};t.vars=e,t.last={},t.params="",t.mode="replace",t.ping=w(500,function(){if(document.body.contains(o)){for(var e=[],t=0;t<this.vars.length;t++){var n=this.vars[t];n in this.last&&e.push(n+"="+this.last[n])}var i="?"+e.join("&");if("?"!=i&&window.location.search!==i){var r={},r=(r.viewer_search_query=i,m(a.view,r));a.view.tree.update(r);try{window.history.replaceState({},"",f(window.location.pathname+i))}catch(e){}}}}.bind(t)),a.view.tree.subscribe(function(e){this.last=e,this.ping()}.bind(t))},I.F=function(e,t){return t in e?e[t]:""},I.SY=function(n,i,r,e){var t="type"in n?n.type.toUpperCase():"text",o=function(e){var t={},t=(t[r]=e,m(i.view,t));i.view.tree.update(t),this.dedupe!=e&&(this.dedupe=e,n.dispatchEvent(new Event("aftersync")))}.bind({dedupe:""});"CHECKBOX"==t?(n.addEventListener("change",w(e,function(){o(!!n.checked)})),window.setTimeout(function(){o(!!n.checked)},1)):"RADIO"==t?n.addEventListener("change",w(e,function(){n.checked&&o(n.value)})):(t=w(e,function(){o(n.value)}),n.addEventListener("change",t),n.addEventListener("keyup",t),n.onkeyup=n.onchange,window.setTimeout(function(){o(n.value)},5))},I.BuildFormObject=function(e){var t={};return E(e,t,!1,!0),t},function(e,t){var n={};return E(e,n,t,!0),n}),oe={},ae=(I.provideCustomComponent=function(e,t){oe[e]=t},I.WX=function(e){for(var t={},n=0;n+2<e.length;n++){var i={};t[e[n]]=function(e){this.w[this.k]=e,this.t.update(this.d)}.bind({d:m(e[1].view,i),w:i,k:e[2],t:e[1].view.tree})}return t},I.C=function(e,t,n,i,r,o,a){e={dom:e,state:t,inputs:i,outputs:r,maker:o,config:a,framework:I};n in oe?oe[n](e):console.error("failed to find custom component: '"+n+"'")},{}),L={},se=(I.PRWP=function(e,t){if(ae[e]=t,e in L)for(var n=L[e],i=0;i<n.length;i++)n[i]()},I.WP=function(e,t,n,i,r){var o;n in ae?ae[n](e,t,i,r,I):(o=function(){ae[n](e,t,i,r,I)},n in L?L[n].push(o):L[n]=[o])},{}),ce=(I.defineBehavior=function(e,t){if("function"!=typeof t)throw new Error("defining behavior '"+e+"' failed due to not a function");se[e]=t},I.BHV=function(e,t,n,i){if(n in se){var r=null;try{r=t.data.connection.ptr}catch(e){}se[n](e,r,i,I)}else console.log("couldn't find behavior:"+n)},I.PG=function(e,t){for(var n=A,i=0;i<e.length;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}n["@"]=t},I.resume_uri="/",I.gates=[],I.IG=function(e,t,n,i){var r={value:!1,run:function(){var e;return!!this.value&&((e={})[i]=!0,e=m(n.view,e),n.view.tree.update(e),!0)}};p(e,t,function(e){r.value=e}),I.gates.push(r)},I.goto=function(e,t){I.resume_uri=e;for(var n=!1,i=0;i<I.gates.length;i++)I.gates[i].run()&&(n=!0);n||(t?I.goto_now(e):window.setTimeout(function(){I.goto_now(e)},1))},I.bR=function(){return{run:function(){I.gates=[],I.goto(I.resume_uri,!1)},merge:function(){}}},I.goto_now=function(e){e.startsWith("/")?I.run(document.body,e,!0):window.location.href=f(e)},function(e){for(var t=window.atob(e),n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}),O=(I.currentPushEvent=function(){},function(e){localStorage.setItem("webpush_status",e),I.currentPushEvent()}),P=(I.setPushStatus=O,I.worker=function(n,c,u){try{de(n,function(t){C.DomainGetVapidPublicKey(t,I.domain,{success:function(e){var i=c,r=e.publicKey,o=t,a=n,s=u;if(navigator.serviceWorker)try{navigator.serviceWorker.getRegistrations().then(function(e){var t,n=!1;for(t of e)t.active&&(t.active.scriptURL.endsWith(i)?(n=!0,j(t,r,o,a,s)):t.unregister());n||(navigator.serviceWorker.register(i),navigator.serviceWorker.ready.then(function(e){j(e,r,o,a,s)}))},function(e){C.bump("wpi3"),C.log("worker-find",""+e)})}catch(e){console.error("failed to register service worker",e),O("impossible"),C.bump("wpi2"),C.log("worker-install",""+e)}else console.log("no service worker available"),O("impossible"),C.bump("wpi1")},failure:function(e){console.error("failed to get public-key:"+e)}})})}catch(e){console.error("failed to initialize worker",e)}},I.init=function(){I.run(document.body,r(window.location.pathname+window.location.search+window.location.hash),!1),window.onpopstate=function(e){I.run(document.body,r(window.location.pathname+window.location.search+window.location.hash),!1)}},{}),R=(I.registerMessageHandler=function(e,t){e in P?P[e].push(t):P[e]=[t]},window.addEventListener?window.addEventListener("message",G,!1):window.attachEvent&&window.attachEvent("onmessage",G,!1),I.currentViewerId=0,I.run=function(e,t,n){for(var i in P)delete P[i];for(var r=t;r.endsWith("/")&&"/"!=r;)r=r.substring(0,r.length-1);for(conKey in T)T[conKey].tree.nuke(),T[conKey].nuke();var t="",o=r.indexOf("?"),o=(0<o&&(t=r.substring(o),r=r.substring(0,o)),(r.startsWith("/")?r.substring(1):r).split("/")),a={};I.currentViewerId++,a.viewer_current_page_id=I.currentViewerId,a.viewer_domain=I.domain,a.viewer_url_prefix=I.url_prefix;try{a.viewer_timezone=Intl.DateTimeFormat().resolvedOptions().timeZone,a.viewer_language=navigator.language}catch(e){}if(a.viewer_search_query="",a.viewer_web_push_status=V(),"?"!=t){a.viewer_search_query=t;const l=new URLSearchParams(t.substring(1));for(var s=l.keys(),c=s.next();!c.done;)a[c.value]=l.get(c.value),c=s.next()}var u,d,o=D(o,0,A,a);_(e),null!=o?(window.scrollTo(0,0),u={service:C,data:null,view:M(e),current:"view"},I.__current=u,null!==(d=localStorage.getItem("rxviewstate"))&&(localStorage.removeItem("rxviewstate"),a=Object.assign({},a,JSON.parse(d))),u.view.init=a,I.gates=[],I.resume_uri=r,I._inflight++,o(e,u),u.view.tree.subscribe(u.view.delta),u.view.tree.update(a),I._inflight--,n&&window.history.pushState({merge:!1},"",f(r)+t),I.currentPushEvent=function(){u.view.tree.update({viewer_web_push_status:V()})}):"/404"!=r&&I.run(e,"/404"),e.appendChild(q)},{}),ue=(I.SIGNOUT=function(){for(var e in R={})localStorage.removeItem("identity_"+e);localStorage.removeItem("identity_default");var t,n=[];for(t in T){var i=T[t];null!=i.ptr&&i.ptr.end({success:function(){},failure:function(){}}),n.push(t)}for(var r=0;r<n.length;r++)delete T[n[r]]},I.GOOGLE_SIGN_ON=function(e){C.InitConvertGoogleUser(e,{success:function(e){s("default",e.identity,C),I.goto("/",!1)},failure:function(e){console.log("Google failure: "+e)}})},I.aRDp=function(e,t){return function(){return t(e.view.init)}},I.aRDz=function(e){return function(){return e}},{}),de=function(e,t){ue[e]=t},le=(I.afterHaveIdentity=de,I.ID=function(e,t){!0===e&&(e="default");var n=null,i=function(){},r=localStorage.getItem("identity_"+e);if(r&&(R[e]=r,function(e){e=localStorage.getItem("last_stashed_identity_"+e);try{var t=parseFloat(e);return isNaN(t)?!0:144e5<=Date.now()-new Date(t).getTime()}catch(e){return!0}}(e)&&s(e,r,null)),e.startsWith("direct:"))n=e.substring(7);else{if(!(e in R))return window.setTimeout(function(){I.goto(t(),!1)},10),{abort:!0};n=R[e],i=function(){delete R[e],localStorage.removeItem("identity_"+e),I.goto(t(),!1)}}return e in ue&&(ue[e](n),delete ue[e]),{abort:!1,cleanup:i,identity:n}},I.FIDCL=function(t,n){return{success:function(e){t.success(e)},next:function(e){t.next(e)},complete:function(){t.complete()},failure:function(e){t.failure(e),403403!=e&&403500!=e&&184333!=e&&982253!=e||n.cleanup()}}},{}),e=(I.PRCUDA=function(e,t){le[e]=t},I.CUDA=function(n,i,r,o,a,s){var c=g();o.__=w(10,function(){y(c),_(n);var e=!1,t=(r in le&&("function"==typeof(t=le[r])&&(e=t(o,i,a,I))),e=e||new AdamaTree,{service:i.service,data:{connection:i.connection,tree:e,delta:{},parent:null,path:null},view:v(i.view),current:"data"});s(t),b(t,c)})},I.ST=function(e){e.value&&(document.title=e.value),e.__=w(5,function(){e.value&&(document.title=e.value)})},I.VSy=function(n,i,r,o){var a=g();i.data.connection.subscribe_sync(function(e){_(n),y(a);var t=k(i);return(e?r:o)(n,t),b(t,a),!0})},I.BCONNECT=function(a,s){var c={view:function(){}};s.__=w(5,function(){var e,t,n,i,r,o;"name"in s&&((e=I.ID(s.identity,function(){return s.redirect})).abort||(t=d(s.name),r=":billing:"+e.identity,!1!==(n=K(r,c,t,a))&&(t.bound=r,i=e.identity,r=e.cleanup,c.view(),t.identity=i,t.handlers={},t.viewstate_sent=!0,t.label="Billing [ "+s.name+"]",t.via_billing=!0,t.via_domain=!1,(o={}).responder=J(t,r,o),o.go=function(){t.viewstate_clone="{}",t.ptr=C.BillingConnectionCreate(i,o.responder)},o.go(),t.tree.update({}),n(!1))))})},I.domain=location.hostname,I.host=location.host,I.protocol=location.protocol,I.is_mobile=!1,localStorage.getItem("mdo_host")),i=(null!=e&&(I.host=e,I.domain=e.split(":")[0]),I.url_prefix=I.protocol+"//"+I.host,I.mobileInit=function(e){I.domain=e,I.host=e,I.protocol="https:",C.protocol="https:",I.is_mobile=!0},I.mobileInitMultiDomain=function(e,t,n){I.md_betaPrefix=t,I.md_prodPrefix=n,I.protocol="https:",C.protocol="https:",I.is_mobile=!0;var i=e;"ready"==localStorage.getItem("mdl")&&(i=window.location.pathname+window.location.search+window.location.hash),I.run(document.body,r(i),!1),window.onpopstate=function(e){I.run(document.body,r(i),!1)}},I.registerManifest=function(n,t=!1){var i=X(),e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status&&(function(e){e.source=n,e.id=i.seq,i.seq++;for(var t=0;t<i.manifests.length;t++)if(i.manifests[t].source==n)return i.manifests[t]=e,Y(i);i.manifests.push(e),Y(i)}(JSON.parse(this.responseText)),t&&0<i.manifests.length))for(var e=0;e<i.manifests.length;e++)if(i.manifests[e].source==n)return void I.useManifest(i.manifests[e].id)},e.open("GET",n,!0),e.send()},I.MD_a=function(e,t,n){u(null,e,t,function(){I.registerManifest("function"==typeof n?n():n)})},I.useManifest=function(e){for(var t=X(),n=0;n<t.manifests.length;n++){var i=t.manifests[n];i.id==e&&(localStorage.setItem("mdo_host",new URL(t.manifests[n].source).host),i.beta?localStorage.setItem("mdec","beta"):localStorage.setItem("mdec","prod"),localStorage.setItem("mdl","ready"),window.location.href="/")}},I.MD_u=function(e,t,n){u(null,e,t,function(){I.useManifest("function"==typeof n?n():n)})},I.mobileLoad=function(e){e=new URL(e);localStorage.setItem("mdo_host",e.host),e.host.endsWith(I.md_betaPrefix)?localStorage.setItem("mdec","beta"):localStorage.setItem("mdec","prod"),window.location.href=e.path},I.MD_d=function(e,t,r){u(null,e,t,function(){for(var e=parseInt("function"==typeof r?r():r),t=X(),n=[],i=0;i<t.manifests.length;i++)t.manifests[i].id!=e&&n.push(t.manifests[i]);t.manifests=n,Y(t)})},I.DCONNECT=function(s,c){var u={view:function(){}};c.__=w(5,function(){var e,t,n,i,r,o,a;"name"in c&&((e=I.ID(c.identity,function(){return c.redirect})).abort||(t=d(c.name),o=(n=I.domain)+e.identity,!1!==(i=K(o,u,t,s))&&(t.bound=o,r=e.identity,o=e.cleanup,u.view(),t.identity=r,t.handlers={},t.viewstate_sent=!0,t.label="Domain:"+n+" [ "+c.name+"]",t.via_domain=!0,t.via_billing=!1,t.domain=n,(a={}).responder=J(t,o,a),a.go=function(){t.viewstate_clone="{}",t.ptr=C.ConnectionCreateViaDomain(r,n,U(s.view.tree.copy()),a.responder)},a.go(),t.tree.update({}),i(!1))))})},I.CONNECT=function(a,s){var c={view:function(){}};s.__=w(5,function(){var e,t,n,i,r,o;"key"in s&&"space"in s&&"name"in s&&((e=I.ID(s.identity,function(){return s.redirect})).abort||(t=d(s.name),r=s.space+"/"+s.key+"/"+e.identity,!1!==(n=K(r,c,t,a))&&(t.bound=r,i=e.identity,r=e.cleanup,c.view(),t.space=s.space,t.key=s.key,t.identity=i,t.handlers={},t.viewstate_sent=!0,t.label=t.space+"/"+t.key+" [ "+s.name+"]",t.via_domain=!1,t.via_billing=!1,(o={}).responder=J(t,r,o),o.go=function(){t.viewstate_clone="{}",t.ptr=C.ConnectionCreate(i,s.space,s.key,U(a.view.tree.copy()),o.responder)},o.go(),t.tree.update({}),n(!1))))})},I.INTERNAL=function(e){return{service:e.service,data:{connection:null,tree:new AdamaTree,delta:{},parent:null,path:null},view:v(e.view),current:"data"}},I.aUP=function(e,t,n,i){var r,n=I.ID(n,function(){return i.rx_forward});n.abort||(e.action="https://"+Adama.Production+"/~upload",e.method="post",e.enctype="multipart/form-data",(r=document.createElement("input")).type="hidden",r.name="identity",r.value=n.identity,e.appendChild(r),(n=document.createElement("iframe")).name="UPLOAD_"+Math.random(),n.width="1",n.height="1",e.appendChild(n),e.target=n.name)},I.aDUP=function(e,t,n,i){var r,n=I.ID(n,function(){return i.rx_forward});n.abort||(e.action=I.protocol+"//"+I.host+"/~upload",e.method="post",e.enctype="multipart/form-data",(r=document.createElement("input")).type="hidden",r.name="identity",r.value=n.identity,e.appendChild(r),(n=document.createElement("input")).type="hidden",n.name="domain",n.value=I.domain,e.appendChild(n),(r=document.createElement("iframe")).name="UPLOAD_"+Math.random(),r.width="1",r.height="1",e.appendChild(r),e.target=r.name)},I.aDOC=function(e,t,n,i){Z(e,0,n,i,function(e,t){C.DocumentAuthorization(e.space,e.key,e,t)})},I.aDOM=function(e,t,n,i){Z(e,0,n,i,function(e,t){C.DocumentAuthorizationDomain(I.domain,e,t)})},I.onPWT=function(n,e,t){u(e,n,t,function(e){for(var t=n;"PASSWORD-HOLDER"!=t.tagName.toUpperCase();)t=t.parentElement;function r(e){if("INPUT"!=e.tagName.toUpperCase()||"password"!=e.name&&"confirm-password"!=e.name&&"new_password"!=name&&"confirm-new_password"!=name||("password"==e.type?e.type="text":e.type="password"),"children"in e)for(var t=e.children,n=t.length,i=0;i<n;i++)r(t[i])}null!=t&&r(t)})},I.adDSO=function(n,e,i,r){r.__=function(){},n.addEventListener("submit",function(e){e.preventDefault();var e=a(n),t={attempts:0,responder:{success:function(e){s(i,e.identity,C),I.goto(r.rx_forward,!1),h(n)},failure:function(e){S(n,"Failed signing into document:"+e)}}};C.DocumentAuthorizeDomain(I.domain,e.username,e.password,t.responder)},!0)},I.aDSO=function(t,e,n,i){i.__=function(){},t.addEventListener("submit",function(e){e.preventDefault();e=a(t);C.DocumentAuthorize(e.space,e.key,e.username,e.password,{success:function(e){s(n,e.identity,C),I.goto(i.rx_forward,!1),h(t)},failure:function(e){S(t,"Failed signing into document:"+e)}})},!0)},I.adDSOr=function(t,e,n,i){i.__=function(){},t.addEventListener("submit",function(e){e.preventDefault();e=a(t);C.DocumentAuthorizeDomainWithReset(I.domain,e.username,e.password,e.new_password,{success:function(e){s(n,e.identity,C),I.goto(i.rx_forward,!1),h(t)},failure:function(e){S(t,"Failed signing into document:"+e)}})},!0)},I.aDSOr=function(t,e,n,i){i.__=function(){},t.addEventListener("submit",function(e){e.preventDefault();e=a(t);C.DocumentAuthorizeWithReset(e.space,e.key,e.username,e.password,e.new_password,{success:function(e){s(n,e.identity,C),I.goto(i.rx_forward,!1),h(t)},failure:function(e){S(t,"Failed signing into document:"+e)}},!0)})},I.autogenid=1,I.X=function(){return I.autogenid++,"x"+I.autogenid},{}),fe=(i["principal.agent"]=function(e){return e.agent},i["principal.authority"]=function(e){return e.authority},i.trim=function(e){return(""+e).trim()},i.upper=function(e){return(""+e).toUpperCase()},i.lower=function(e){return(""+e).toLowerCase()},i.is_empty_str=function(e){return""==e},i.is_not_empty_str=function(e){return""!=e},i.jsonify=function(e){return JSON.stringify(e)},i.time_now=function(e){return Date.now()+""},i.size_bytes=function(e){var t=0;if("number"==typeof e)t=e;else try{t=parseFloat(e)}catch(e){}e=Math.floor(t);return e<1024?e+" B":(e/=1024)<1024?Math.round(10*e)/10+" KB":(e/=1024)<1024?Math.round(10*e)/10+" MB":(e/=1024)<1024?Math.round(10*e)/10+" GB":void 0},i.ordinalize=function(t){var e=parseInt(t);if(isNaN(e))return t;{let e="th";return t%10==1&&t%100!=11?e="st":t%10==2&&t%100!=12?e="nd":t%10==3&&t%100!=13&&(e="rd"),t+e}},i.vulgar_fraction=function(e){var t=0;if("number"==typeof e)t=e;else try{t=parseFloat(e)}catch(e){}var e=Math.floor(t),t=t-e,n="";return t<=.0625||(t<=.1875?n="⅛":t<=.3125?n="¼":t<=.4375?n="⅜":t<=.5625?n="½":t<=.6875?n="⅝":t<=.8125?n="¾":t<=.9375&&(n="⅞")),e+n},i.time_ago=function(e,t){if("string"!=typeof e)return e;var n=e,i=n.indexOf("["),i=(0<=i&&(n=n.substring(0,i)),Date.parse(n));if(Number.isNaN(i))return e;n=(Date.now()-i)/1e3;if(n<60)return"Less than a minute ago";if((n/=60)<60)return(e=Math.floor(n))+` minute${1<e?"s":""} ago`;if(2628e4<n)return"Never";var e=new Date(i),n=new Date,r={};return t&&t.trim().split("").forEach(e=>{var t={h:"hour",m:"minute",s:"second"};e in t&&(r[t[e]]="numeric")}),e.toLocaleDateString()!=n.toLocaleDateString()?e.toLocaleDateString()+" "+e.toLocaleTimeString([],r):e.toLocaleTimeString([],r)},i.time=function(e){if("string"!=typeof e)return e;var t=e,n=t.indexOf("[");if(0<=n&&(t=t.substring(0,n)),e.indexOf(":")<0)return e;var n=e.split(":")[0],t=n,n=12<=(t=2<n.length?n.substring(n.length-2,n.length):t)?"pm":"am",t=t%12||12,e=e.split(":")[1],i=e;return t+":"+(i=2<e.length?e.substring(0,2):i)+" "+n},i["date-format"]=function(e,t){if("string"!=typeof e)return e;{if("1-01-01"==e)return"";var n=e.indexOf("[");0<=n&&(e=e.substring(0,n));const i=t.toLowerCase().split("/"),r={};i.forEach(e=>{var t=2<e.length?"numeric":"2-digit";r[{y:"year",m:"month",d:"day"}[e.charAt(0)]]=t});n=e.includes("T")?e:e+"T00:00:00";return new Date(n).toLocaleDateString("en-US",r)}},i.currency=function(t,e){var n=parseFloat(t);if(isNaN(n))return t;try{return new Intl.NumberFormat([],{style:"currency",currency:e,useGrouping:!0}).format(n)}catch(e){return console.error("'currency' transform error: ",e),t}},I.RTR=function(e,t){i[e]=t},I.registerTransform=I.RTR,I.TR=function(e){if(e in i)return i[e];if(e.includes(":")){const[t,n]=e.split(":");if(t in i)return e=>i[t](e,n)}return function(e){return e}},{}),he=(I.RV=function(e,t){fe[e]=t},I.registerValidator=I.RV,I.adDPUT=function(e,t,n,i){Q(e,0,n,i,function(e){return I.protocol+"//"+I.host+"/"+e.path})},I.aDPUT=function(e,t,n,i){Q(e,0,n,i,function(e){return I.protocol+"//"+C.host+"/"+e.space+"/"+e.key+"/"+e.path})},I.aSO=function(t,e,n,i){i.__=function(){},window.setTimeout(function(){$(t)},1),t.addEventListener("submit",function(e){e.preventDefault();e=a(t);e.remember?localStorage.setItem("email_remember",e.email):localStorage.setItem("email_remember",""),C.AccountLogin(e.email,e.password,{success:function(e){s(n,e.identity,C),I.goto(i.rx_forward,!1),h(t)},failure:function(e){S(t,"AccountLogin Failed:"+e)}})},!0)},I.aSU=function(n,e,i){n.addEventListener("submit",function(e){e.preventDefault();var t=N(n,{});C.InitSetupAccount(t.email,{success:function(){localStorage.setItem("email",t.email),I.goto(i,!1),h(n)},failure:function(e){S(n,"InitSetupAccount Failed:"+e)}})},!0)},I.aSP=function(i,e,r){i.addEventListener("submit",function(e){e.preventDefault();var n=a(i);"email"in n||(n.email=localStorage.getItem("email")),C.InitCompleteAccount(n.email,!1,n.code,{success:function(e){var t=e.identity;C.AccountSetPassword(e.identity,n.password,{success:function(){s("default",t,C),I.goto(r,!1),h(i)},failure:function(e){S(i,"Failed AccountSetPassword:"+e)}})},failure:function(e){S(i,"Failed InitCompleteAccount:"+e)}})},!0)},I.aCF=function(n,i){n.addEventListener("submit",function(e){e.preventDefault();var e=N(n,{}),t=document.getElementById(i);t?(ee(t,e),h(n)):S(n,"failed to find form by id '"+i+"'")},!0)},I.aSD1=function(e,t,n){I.aSDc(e,t,n,0,!0)},I.aSD=function(e,t,n,i){I.aSDc(e,t,n,i,!1)},I.aSDc=function(o,a,s,c,u){o.lastFired=0,o.firedAtAll=!1,o.addEventListener("submit",function(e){if(e.preventDefault(),e.target==o)if(Date.now()-o.lastFired<c)S(o,"Send failed due to too many clicks too quickly");else{if(u){if(o.firedAtAll)return S(o,"Send failed due to duplicate"),!1;o.firedAtAll=!0}o.lastFired=Date.now();function t(){var t=s;"__ds"==s&&(t=r.__channel,delete r.__channel),Adama.Debugger&&Adama.Debugger.send(a.data.connection.name,t,r),u?C.DocumentsCreateDedupe({success:function(e){a.data.connection.ptr.sendOnce(t,e.dedupe,r,{success:function(){h(o)},failure:function(e){S(o,"Send failed:"+e)}})},failure:function(e){S(o,"Send failed to get dedupe token:"+e)}}):a.data.connection.ptr.send(t,r,{success:function(){h(o)},failure:function(e){S(o,"Send failed:"+e)}})}function n(){"new_password"in i?"confirm-new_password"in i&&i.new_password!=i["confirm-new_password"]?S(o,"Passwords mismatch for new password."):C.DocumentsHashPassword(i.new_password,{success:function(e){r.new_password=e.passwordHash,t()},failed:function(){S(o,"Failed to hash password")}}):t()}var i={},r=N(o,i);!e.submitter||(e=e.submitter).name&&e.value&&("true"==e.value?e.value=!0:"false"==e.value&&(e.value=!1),r[e.name]=e.value);"password"in i?"confirm-password"in i&&i.password!=i["confirm-password"]?S(o,"Passwords mismatch"):C.DocumentsHashPassword(i.password,{success:function(e){r.password=e.passwordHash,n()},failed:function(){S(o,"Failed to hash password")}}):n()}},!0)},I.TASK=function(e,t,n,i){var r=document.createElement("div");r.innerHTML="&#9744; "+i+" ( "+n+") <br />",e.appendChild(r)},I.SA=function(e,t,n){e.setAttribute(t,n)},I.SIH=function(e,t){e.innerHTML=t},I.SL=function(e,t){e.label=t,e.innerText=t},I.SV=function(e,t){var n=e.value;e.value=t,n!=(e.rxvalue=t)&&e.dispatchEvent(new Event("forced"))},I.FV=function(e,t,n){e[t]!=(e[t]=n)&&e.dispatchEvent(new Event("forced"))},I.mergeGoto=function(e,t){var e=(e.startsWith("/")?e.substring(1):e).split("/"),n={};D(e,0,A,n)&&t.view.tree.update(n)},I.HREF=function(e,i,r,o){e.setAttribute("href",f(r)),e.onclick=function(e){if(e.ctrlKey)return!0;var t=r,n=(t=t.startsWith("/")?t.substring(1):t).indexOf("?"),n=(t=0<n?t.substring(0,n):t).split("/"),t={};return!D(n,0,A,t)||(e.preventDefault(),o?(i.view.tree.update(t),window.history.pushState({merge:!0},"",f(r))):I.goto(r,!0),!1)}},I.AC=function(e,t){e.setAttribute("class",t)},I.ACLASS=function(e,t){e.setAttribute("class",t)},I.AS=function(e,t){e.setAttribute("src",t)},I.ASRC=function(e,t){e.setAttribute("src",t)},I.findElementByIdInUnboundDom=function(e,t){function a(e,t){if("id"in e&&e.id==t)return e;if("children"in e)for(var n=e.children,i=n.length,r=0;r<i;r++){var o=a(n[r],t);if(null!==o)return o}return null}return a(e,t)},I.pollElement=function(e,t,n,i){function r(e,t){t<0?i():document.body.contains(e)?n():window.setTimeout(function(){r(e,t-25)},25)}r(e,t)},{});return I.loadLibrary=function(e,t){var n;e in he?t(he[e]):(he[e]=!1,(n=document.createElement("script")).setAttribute("src",e),n.onload=function(){he[e]=!0,t(!0)},n.onerror=function(){t(!1)},document.head.appendChild(n))},window.rxhtml=I}();
